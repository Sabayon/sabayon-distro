--- interfaces/kscript/scriptinterface.desktop
+++ interfaces/kscript/scriptinterface.desktop
@@ -30,6 +30,7 @@
 Comment[hr]=Ovo je generička ispitna skripta programa za ispitivanje sučelja skripte.
 Comment[hsb]=To je program za testowanje skript-interfejsa.
 Comment[hu]=Ez egy tesztszkript a szkript-felület kipróbálásához.
+Comment[id]=Mesin skrip tes generik untuk menguji antarmuka skrip
 Comment[is]=Þetta er almennur þýðandi til að prófa skriftuviðmótið.
 Comment[it]=Questo è un motore di script generico per provare l'interfaccia di script.
 Comment[ja]=これはスクリプトインターフェイスをテストする一般的なテストスクリプトです。
--- interfaces/kimproxy/interface/dcopinstantmessenger.desktop
+++ interfaces/kimproxy/interface/dcopinstantmessenger.desktop
@@ -28,6 +28,7 @@
 Comment[hr]=Trenutne poruke s DCOP sučeljem
 Comment[hsb]=Instant Messenger z DCOP-interfejsom
 Comment[hu]=Azonnali üzenetküldő DCOP-felülettel
+Comment[id]=Instant Messenger dengan antarmuka DCOP
 Comment[is]=Spjallforrit með DCOP viðmóti
 Comment[it]=Messaggistica istantanea con un'interfaccia DCOP
 Comment[ja]=DCOP インターフェースをもつインスタントメッセンジャー
--- interfaces/kimproxy/interface/kcm_instantmessenger.desktop
+++ interfaces/kimproxy/interface/kcm_instantmessenger.desktop
@@ -66,7 +66,7 @@
 Comment[es]=El Instant Messenger permite conversación en dos sentidos entre indivíduos y grupos.
 Comment[et]=Kiirsuhtlus võimaldab üksikisikute ja gruppide kahepoolset vestlust.
 Comment[eu]=Berehalako mezularitzak banan-banako edo taldeen arteko berriketan aritzeko.
-Comment[fa]=پیام‌رسان فوری امکان گپ دو طرفه بین افراد و گروهها را می‌دهد
+Comment[fa]=پیام‌رسان فوری امکان گپ دو طرفه بین افراد و گروهها را می‌دهد.
 Comment[fi]=Pikaviestiohjelman avulla voidaan keskustella kahden kesken tai ryhmässä.
 Comment[fr]=La messagerie instantanée permet un dialogue bidirectionnel entre individus et groupes.
 Comment[fy]=Mei de instant messenger kinne jo twaspraak hâlde mei in yndividu en groepen.
@@ -76,6 +76,7 @@
 Comment[hr]=Trenutne poruke omogućuju dvosmjerno brbljanje između pojedinaca i grupa.
 Comment[hsb]=Instant messenger zmóžni jednotliwcam a skupinam spěšnu wuměnu zdźělenkow.
 Comment[hu]=Interaktív társalgást tesz lehetővé az interneten keresztül két személy vagy csoport között.
+Comment[id]=Instant messenger memungkinan chat dua-arah antara individu dan grup
 Comment[is]=Spjallforritið gerir einstaklingum og hópum kleyft að spjalla saman á einfaldan máta.
 Comment[it]=La messaggistica istantanea permette di chiacchierare tra due persone o in gruppo.
 Comment[ja]=インスタントメッセンジャーは個人とグループとの双方向チャットを可能にします。
--- interfaces/kspeech/kspeech.h
+++ interfaces/kspeech/kspeech.h
@@ -371,10 +371,11 @@
  *
  * A Talker Code consists of a series of XML tags and attributes.
  * An example of a full Talker Code with all attributes specified is
- *
+ * \code
  *   <voice lang="en" name="kal" gender="male"/>
  *   <prosody volume="soft" rate="fast"/>
  *   <kttsd synthesizer="Festival" />
+ * \endcode
  *
  * (The @e voice and @e prosody tags are adapted from the W3C Speech Synthesis
  * Markup Language (SSML) and Java Speech Markup Language (JSML).
--- interfaces/kspeech/dcoptexttospeech.desktop
+++ interfaces/kspeech/dcoptexttospeech.desktop
@@ -26,6 +26,7 @@
 Comment[hr]=Usluga tekst-u-govor s DCOP sučeljem.
 Comment[hsb]=konwertowanje teksta na rěč z DCOP-interfejsom
 Comment[hu]=Szövegfelolvasó szolgáltatás DCOP-felülettel
+Comment[id]=Layanan Text-to-Speech Service dengan antarmuka DCOP 
 Comment[is]=Texti-í-tal þjónusta með DCOP viðmóti
 Comment[it]=Servizio di pronuncia con un'interfaccia DCOP
 Comment[ja]=DCOP インターフェースで動作するテキスト読み上げサービス
--- interfaces/ktexteditor/ktexteditoreditor.desktop
+++ interfaces/ktexteditor/ktexteditoreditor.desktop
@@ -31,6 +31,7 @@
 Comment[hr]=Ugradiva komponenta obrade teksta (bez Doc/View razdvajanja)
 Comment[hsb]=Integrujomna komponenta za wobdźěłanje tekstow (bjez doc/view-separacije)
 Comment[hu]=Beágyazható szövegszerkesztő (dokumentum/nézet modell nélkül)
+Comment[id]=Komponen Penyuntingan Teks Tersisipkan (tanpa Pemisahan Doc/View)
 Comment[is]=Ívafinn textaritill (án skjal/sýn aðskilnaðar)
 Comment[it]=Componente integrabile per l'elaborazione di testi (senza separazione documento/vista)
 Comment[ja]=埋め込み可能なテキストエディタコンポーネント (Doc/View 分離なし)
--- interfaces/ktexteditor/kcm_ktexteditor.desktop
+++ interfaces/ktexteditor/kcm_ktexteditor.desktop
@@ -102,6 +102,7 @@
 Comment[hr]=Usluga tekstualnog uređivača aplikacijama omugućuje pregledavanje i uređivanje teksta. KDE aplikacije koje omogućuju uređivanje teksta trebale bi upotrebljavati ovo sučelje.
 Comment[hsb]=Wobdźěłanje teksta staji programam wobdźěłarja a wobhladowarja teksta k dispoziciji. KDE-aplikacije, kiž tajke něšto trjebaja, měli tutón serwis wužiwać.
 Comment[hu]=A szövegszerkesztő szolgáltatáson keresztül az alkalmazások szövegek megtekintését és szerkesztését végezhetik el. A KDE szövegszerkesztő programjai használhatják.
+Comment[id]=Layanan penyuntingan teks memberikan penampil dan penyunting teks untuk aplikasi. Aplikasi KDE yang menyediakan fasilitas penyuntingan teks seharusnya menggunakan layanan ini.
 Comment[is]=Ívafni ritillinn færir forritum texta-skoðara og ritil.  KDE forrit sem birta ritil til textavinnslu ættu að nota þessa þjónustu.
 Comment[it]=Il servizio di editor di testi fornisce alle applicazioni un visualizzatore ed un editor di testi. Le applicazioni KDE che permettono l'elaborazione di testi dovrebbero usare questo servizio.
 Comment[ja]=テキストエディタサービスはアプリケーションにテキストビューアとテキストエディタを提供します。テキスト編集の機能を持つ KDEアプリケーションはこれを使用します。
--- interfaces/ktexteditor/ktexteditor.desktop
+++ interfaces/ktexteditor/ktexteditor.desktop
@@ -31,6 +31,7 @@
 Comment[hr]=Ugradiva komponenta obrade teksta (s Doc/View razdvajanjem)
 Comment[hsb]=Komponenta za integrowane wobdźěłanje teksta
 Comment[hu]=Beágyazható szövegszerkesztő (dokumentum/nézet modellel)
+Comment[id]=Komponen Penyuntingan Teks Tersisipkan (dengan Pemisahan Doc/View)
 Comment[is]=Ívafinn textaritill (með skjal/sýn aðskilnaði)
 Comment[it]=Componente integrabile per l'elaborazione di testi (con separazione documento/vista)
 Comment[ja]=埋め込み可能なテキストエディタコンポーネント (Doc/View 分離)
--- interfaces/kmediaplayer/kfileaudiopreview/kfileaudiopreview.cpp
+++ interfaces/kmediaplayer/kfileaudiopreview/kfileaudiopreview.cpp
@@ -21,8 +21,10 @@
 {
 protected:
     virtual QObject *createObject( QObject *parent, const char *name,
-                           const char *, const QStringList & )
+                           const char *className, const QStringList & args)
     {
+        Q_UNUSED(className);
+        Q_UNUSED(args);
         return new KFileAudioPreview( dynamic_cast<QWidget*>( parent ), name );
     }
 };
--- kmdi/kmdi/mainwindow.h
+++ kmdi/kmdi/mainwindow.h
@@ -107,6 +107,10 @@
      * as toplevel and stay-on-top on the application's main widget.
      * @param pWnd widget for the toolview
      * @param pos docking position
+     * @param pTargetWnd
+     * @param percent
+     * @param tabToolTip
+     * @param tabCaption
      * @return created toolview
      */
     KMDI::ToolViewAccessor *addToolWindow( QWidget* pWnd, KDockWidget::DockPosition pos = KDockWidget::DockNone, QWidget* pTargetWnd = 0L, int percent = 50, const QString& tabToolTip = 0, const QString& tabCaption = 0);
--- kmdi/kmdi/dockcontainer.h
+++ kmdi/kmdi/dockcontainer.h
@@ -50,7 +50,7 @@
     /**
      * Add a widget to this container.
      * \param w the KDockWidget object to add
-     * \TODO Remove the extra parameters that we don't use?
+     * \todo Remove the extra parameters that we don't use?
      */
     virtual void insertWidget (KDockWidget *w, QPixmap, const QString &, int &);
 
@@ -63,7 +63,7 @@
     /**
      * Set a tooltip for a widget
      *
-     * \TODO Actually implement it? Right now, it looks just it
+     * \todo Actually implement it? Right now, it looks just it
      * does exactly nothing
      */
     virtual void setToolTip (KDockWidget *, QString &);
--- kate/plugins/kdatatool/ktexteditor_kdatatool.desktop
+++ kate/plugins/kdatatool/ktexteditor_kdatatool.desktop
@@ -27,6 +27,7 @@
 Name[hi]=के-टेक्स्ट-एडिटर के-डाटा-टूल प्लगइन
 Name[hr]=KTextEditor dodatak za KDataTool
 Name[hu]=KTextEditor KDataTool bővítőmodul
+Name[id]=Plugin KDataTool untuk KTextEditor
 Name[is]=KTextEditor KDataTool íforrit
 Name[it]=Plugin KDataTool di KTextEditor
 Name[ja]=KTextEditor KDataTool プラグイン
@@ -100,6 +101,7 @@
 Comment[hr]=Omogućavanje alata poput tezaurusa i provjere pravopisa (ako su instalirani)
 Comment[hsb]=Staja graty kaž tezawrus abo prawopisnu kontrolu k dispoziciji (jeli instalowane)
 Comment[hu]=Adatkezelési eszközök (pl. szinonimaszótár, helyesírás-ellenőrző) támogatása
+Comment[id]=Aktifkan perangkat bantu data seperi thesaurus dan pemeriksa ejaan (bila terpasang)
 Comment[is]=Virkir gagnatól eins og stafsetningaforrit og leiðréttingar (ef uppsett)
 Comment[it]=Abilita gli strumenti per i dati come il dizionario dei sinonimi e il controllo ortografico (se installati)
 Comment[ja]=同義語ツールやスペルチェックなどのデータツールを有効にします (インストールされている場合)
--- kate/plugins/insertfile/ktexteditor_insertfile.desktop
+++ kate/plugins/insertfile/ktexteditor_insertfile.desktop
@@ -96,6 +96,7 @@
 Comment[hr]=Na položaju pokazivača umetnite bilo koju čitljivu datoteku
 Comment[hsb]=Zasunje lubowólnu čitajomnu dataju na poziciji cursora
 Comment[hu]=Tetszőleges olvasható fájl beszúrása a kurzorpozíciónál
+Comment[id]=Sisipkan berkas apa saja yang bisa dibaca ke posisi kursor
 Comment[is]=Setur inn hvaða lesanlegu skrá sem er í stöðu bendilsins
 Comment[it]=Inserisce un qualsiasi file leggibile alla posizione del cursore
 Comment[ja]=カーソル位置に読み込み可能なファイルを挿入します
--- kate/plugins/autobookmarker/ktexteditor_autobookmarker.desktop
+++ kate/plugins/autobookmarker/ktexteditor_autobookmarker.desktop
@@ -23,6 +23,7 @@
 Name[hi]=के-टेक्स्ट-एडिटर ऑटोबुकमार्कर
 Name[hr]=KTextEditor automatske oznake
 Name[hu]=KTextEditor automatikus könyvjelzők
+Name[id]=Penandabuku Otomatis KTextEditor
 Name[is]=KTextEditor sjálfvirkur bókamerkjari
 Name[it]=Segnalibri automatici di KTextEditor
 Name[ja]=KTextEditor 自動ブックマーク
@@ -80,8 +81,9 @@
 Comment[hr]=Pri učitavanju dokumenta postavlja oznake na redovima koji odgovaraju određenom uzorku.
 Comment[hsb]=Staja při začitanju dokumenta znamjenja na linki, kiž wěstemu mustrej wotpowěduja,
 Comment[hu]=Fájl betöltésekor könyvjelzők automatikus létrehozása minta alapján
+Comment[id]=Set bookmark in baris yang cocok dengan sebuah pola jika dokumen dimuatkan
 Comment[is]=Setur bókamerki á línur sem passa ákveðnu mynstri, þegar skjöl eru lesin
-Comment[it]=Imposta dei segnalibri sulle righe corrispondendi a uno schema quando si caricano dei documenti
+Comment[it]=Imposta dei segnalibri sulle righe corrispondenti a uno schema quando si caricano dei documenti
 Comment[ja]=文書が読み込まれた時、パターンにマッチした行にブックマークを設定します
 Comment[km]=កំណត់​ការចំណាំ​ត្រង់​បន្ទាត់​ដែល​ដូច​នឹង​ឃ្លា ពេល​ឯកសារ​ត្រូវ​បាន​ផ្ទុក
 Comment[lb]=Setzt Lieszeechen op d'Zeilen, déi ee bestëmmtent Muster enthalen, wann d'Dokument geluede gëtt
--- kate/plugins/autobookmarker/autobookmarker.cpp
+++ kate/plugins/autobookmarker/autobookmarker.cpp
@@ -364,12 +364,12 @@
 {
   QString text = i18n("Select the MimeTypes for this pattern.\nPlease note that this will automatically edit the associated file extensions as well.");
   QStringList list = QStringList::split( QRegExp("\\s*;\\s*"), leMimeTypes->text() );
-  KMimeTypeChooserDialog *d = new KMimeTypeChooserDialog( i18n("Select Mime Types"), text, list, "text", this );
-  if ( d->exec() == KDialogBase::Accepted ) {
+  KMimeTypeChooserDialog d( i18n("Select Mime Types"), text, list, "text", this );
+  if ( d.exec() == KDialogBase::Accepted ) {
     // do some checking, warn user if mime types or patterns are removed.
     // if the lists are empty, and the fields not, warn.
-    leFileMask->setText(d->chooser()->patterns().join("; "));
-    leMimeTypes->setText(d->chooser()->mimeTypes().join("; "));
+    leFileMask->setText(d.chooser()->patterns().join("; "));
+    leMimeTypes->setText(d.chooser()->mimeTypes().join("; "));
   }
 }
 //END
--- kate/plugins/wordcompletion/ktexteditor_docwordcompletion.desktop
+++ kate/plugins/wordcompletion/ktexteditor_docwordcompletion.desktop
@@ -23,6 +23,7 @@
 Name[hr]=KTextEditor dodatak za dopunjavanje riječi
 Name[hsb]=KTextEditor Plugin za wudospołnjenje słowow
 Name[hu]=KTextEditor szókiegészítő bővítőmodul
+Name[id]=Plugin Pelengkapan Kata KTextEditor
 Name[is]=KTextEditor íforrit til að klára orð
 Name[it]=Plugin completamento parole di KTextEditor
 Name[ja]=KTextEditor 単語補完プラグイン
@@ -73,7 +74,7 @@
 Comment[es]=Completado de palabras direccional o de menú emergente en el documento.
 Comment[et]=Lõpetamine vastavalt suunale või hüpikvariantide alusel dokumendi sõnade põhjal
 Comment[eu]=Dokumentuko hitzen osaketarako plugin-a
-Comment[fa]=تکمیل جهت داریا مبنی بربالاپراز کلمات موجوددرسند
+Comment[fa]=تکمیل جهت‌دار یا مبنی بر بالاپر از کلمات موجود در سند
 Comment[fi]=Asiakirjasta löytyvillä sanoilla täydentäminen
 Comment[fr]=Complètement basé sur la direction ou un menu à partir des mots du document
 Comment[fy]=kompleet meitsje fan wurden yn it dokumint op Direktsjeneel of popup-basearje 
@@ -82,6 +83,7 @@
 Comment[hr]=Usmjereno ili pop-up zasnovano dovršavanje iz riječi u dokumentu
 Comment[hsb]=Direktionalne abo na pop-up bazowace wudospołnjowanje za słowa w dokumenće
 Comment[hu]=Irány szerinti vagy felbukkanó kiegészítés dokumentum szavai alapján
+Comment[id]=Pelengkapan arahan atau popup dari kata di dalam dokumen
 Comment[is]=Áttvíst forrit sem getur líka opnað glugga með orðatillögum
 Comment[it]=Completamento direzionale o con finestre a comparsa di parole nel documento
 Comment[ja]=ポップアップまたはユーザの指示によってドキュメントの単語から補完します
--- kate/plugins/isearch/ktexteditor_isearch.desktop
+++ kate/plugins/isearch/ktexteditor_isearch.desktop
@@ -27,6 +27,7 @@
 Name[hr]=KTextEditor dodatak za traženje u koracima
 Name[hsb]=KTextEditor Plugin za inkrementelne pytanje
 Name[hu]=KTextEditor inkrementális keresési bővítőmodul
+Name[id]=Plugin Pencarian Bertahap KTextEditor
 Name[is]=KTextEditor þrepaleitar-íforrit
 Name[it]=Plugin ricerca incrementale di KTextEditor
 Name[ja]=KTextEditor インクリメンタル検索プラグイン
@@ -96,6 +97,7 @@
 Comment[hr]=Poznat i kao "As you type search"
 Comment[hsb]=Tež znate jako "pytanje při zapodawanju"
 Comment[hu]=Más néven "Beírásos keresés"
+Comment[id]=Dikenal juga sebagai "Cari sembari mengetik"
 Comment[is]=Einnig þekkt sem "Leita meðan þú pikkar"
 Comment[it]=Noto anche come "Ricerca mentre scrivi"
 Comment[ja]="打ったものそのまま検索"としても知られています
--- kate/part/katecodecompletion.cpp
+++ kate/part/katecodecompletion.cpp
@@ -56,7 +56,6 @@
   public:
     /**
       @short Create a new CCListBox
-      @param view The KateView, CCListBox is displayed in
     */
     KateCCListBox (QWidget* parent = 0, const char* name = 0, WFlags f = 0):QListBox(parent, name, f)
     {
--- kate/part/katefactory.h
+++ kate/part/katefactory.h
@@ -75,6 +75,7 @@
      * @param widgetName widget name
      * @param parent QObject parent
      * @param name object name
+     * @param classname class parent
      * @param args additional arguments
      * @return constructed part object
      */
--- kate/part/katefiletype.cpp
+++ kate/part/katefiletype.cpp
@@ -503,12 +503,12 @@
 
   QString text = i18n("Select the MimeTypes you want for this file type.\nPlease note that this will automatically edit the associated file extensions as well.");
   QStringList list = QStringList::split( QRegExp("\\s*;\\s*"), mimetypes->text() );
-  KMimeTypeChooserDialog *d = new KMimeTypeChooserDialog( i18n("Select Mime Types"), text, list, "text", this );
-  if ( d->exec() == KDialogBase::Accepted ) {
+  KMimeTypeChooserDialog d( i18n("Select Mime Types"), text, list, "text", this );
+  if ( d.exec() == KDialogBase::Accepted ) {
     // do some checking, warn user if mime types or patterns are removed.
     // if the lists are empty, and the fields not, warn.
-    wildcards->setText( d->chooser()->patterns().join(";") );
-    mimetypes->setText( d->chooser()->mimeTypes().join(";") );
+    wildcards->setText( d.chooser()->patterns().join(";") );
+    mimetypes->setText( d.chooser()->mimeTypes().join(";") );
   }
 }
 //END KateFileTypeConfigTab
--- kate/part/katejscript.cpp
+++ kate/part/katejscript.cpp
@@ -360,7 +360,7 @@
 
 const KJS::ClassInfo KateJSDocument::info = { "KateJSDocument", 0, 0, 0 };
 
-Value KateJSDocumentProtoFunc::call(KJS::ExecState *exec, KJS::Object &thisObj, const KJS::List &args)
+KJS::Value KJS::KateJSDocumentProtoFunc::call(KJS::ExecState *exec, KJS::Object &thisObj, const KJS::List &args)
 {
   KJS_CHECK_THIS( KateJSDocument, thisObj );
 
@@ -523,7 +523,7 @@
 
 const KJS::ClassInfo KateJSView::info = { "KateJSView", 0, &KateJSViewTable, 0 };
 
-Value KateJSViewProtoFunc::call(KJS::ExecState *exec, KJS::Object &thisObj, const KJS::List &args)
+KJS::Value KJS::KateJSViewProtoFunc::call(KJS::ExecState *exec, KJS::Object &thisObj, const KJS::List &args)
 {
   KJS_CHECK_THIS( KateJSView, thisObj );
 
@@ -834,7 +834,7 @@
 
 const KJS::ClassInfo KateJSIndenter::info = { "KateJSIndenter", 0, &KateJSIndenterTable, 0 };
 
-Value KateJSIndenterProtoFunc::call(KJS::ExecState *exec, KJS::Object &thisObj, const KJS::List &args)
+KJS::Value KJS::KateJSIndenterProtoFunc::call(KJS::ExecState *exec, KJS::Object &thisObj, const KJS::List &args)
 {
   KJS_CHECK_THIS( KateJSIndenter, thisObj );
 
--- kate/part/kateview.h
+++ kate/part/kateview.h
@@ -286,8 +286,8 @@
         { return getDoc()->textLine( cursorLine() ); }
     QString currentWord()
         { return m_doc->getWord( m_viewInternal->getCursor() ); }
-    void insertText( const QString& text )
-        { getDoc()->insertText( cursorLine(), cursorColumnReal(), text ); }
+    void insertText( const QString& mark )
+        { getDoc()->insertText( cursorLine(), cursorColumnReal(), mark ); }
     bool canDiscard();
     int tabWidth()                { return m_doc->config()->tabWidth(); }
     void setTabWidth( int w )     { m_doc->config()->setTabWidth(w);  }
@@ -380,6 +380,7 @@
     void find( const QString&, long, bool add=true ); ///< proxy for KateSearch
     void replace();
     void replace( const QString&, const QString &, long ); ///< proxy for KateSearch
+    /** Highly confusing but KateSearch::findAgain() is backwards too. */
     void findAgain( bool back );
     void findAgain()              { findAgain( false );          }
     void findPrev()               { findAgain( true );           }
--- kate/part/katedocument.h
+++ kate/part/katedocument.h
@@ -264,6 +264,7 @@
      * @p removeLine is true, @p length is ignored (eg not needed).
      * @param line line number
      * @param removeLine if true, force to remove the next line
+     * @param length length of the line
      * @return true on success
      */
     bool editUnWrapLine ( uint line, bool removeLine = true, uint length = 0 );
@@ -557,7 +558,7 @@
 
     bool saveFile ();
 
-    void setReadWrite ( bool rw = true );
+    void setReadWrite ( bool readwrite = true );
 
     void setModified( bool m );
 
--- kate/part/katedocument.cpp
+++ kate/part/katedocument.cpp
@@ -4688,9 +4688,9 @@
         else
           m_config->setIndentationMode( KateAutoIndent::modeNumber( val) );
       }
-      else if ( var == "word-wrap-column" && n > 0  && checkIntValue( val, &n ) ) // uint, but hard word wrap at 0 will be no fun ;)
+      else if ( var == "word-wrap-column" && checkIntValue( val, &n ) && n > 0 ) // uint, but hard word wrap at 0 will be no fun ;)
         m_config->setWordWrapAt( n );
-      else if ( var == "undo-steps"  && n >= 0  && checkIntValue( val, &n ) )
+      else if ( var == "undo-steps" && checkIntValue( val, &n ) && n >= 0 )
         setUndoSteps( n );
 
       // STRING SETTINGS
--- kate/part/kateautoindent.h
+++ kate/part/kateautoindent.h
@@ -349,7 +349,7 @@
     KateCSmartIndent (KateDocument *doc);
     ~KateCSmartIndent ();
 
-    virtual void processNewline (KateDocCursor &begin, bool needContinue);
+    virtual void processNewline (KateDocCursor &cur, bool needContinue);
     virtual void processChar (QChar c);
 
     virtual void processLine (KateDocCursor &line);
@@ -380,7 +380,7 @@
     KatePythonIndent (KateDocument *doc);
     ~KatePythonIndent ();
 
-    virtual void processNewline (KateDocCursor &begin, bool needContinue);
+    virtual void processNewline (KateDocCursor &cur, bool needContinue);
 
     virtual uint modeNumber () const { return KateDocumentConfig::imPythonStyle; };
 
@@ -402,7 +402,7 @@
     ~KateXmlIndent ();
 
     virtual uint modeNumber () const { return KateDocumentConfig::imXmlStyle; }
-    virtual void processNewline (KateDocCursor &begin, bool needContinue);
+    virtual void processNewline (KateDocCursor &cur, bool needContinue);
     virtual void processChar (QChar c);
     virtual void processLine (KateDocCursor &line);
     virtual bool canProcessLine() const { return true; }
@@ -544,7 +544,7 @@
     KateScriptIndent( KateDocument *doc );
     ~KateScriptIndent();
 
-    virtual void processNewline( KateDocCursor &begin, bool needContinue );
+    virtual void processNewline( KateDocCursor &cur, bool needContinue );
     virtual void processChar( QChar c );
 
     virtual void processLine (KateDocCursor &line);
--- kate/part/kateviewhelpers.cpp
+++ kate/part/kateviewhelpers.cpp
@@ -277,7 +277,7 @@
   public:
     KateCmdLineFlagCompletion() {;}
 
-    QString makeCompletion( const QString & s )
+    QString makeCompletion( const QString & string )
     {
       return QString::null;
     }
--- kate/part/katefactory.cpp
+++ kate/part/katefactory.cpp
@@ -52,6 +52,7 @@
      * @param widgetName widget name
      * @param parent QObject parent
      * @param name object name
+     * @param classname class name
      * @param args additional arguments
      * @return constructed part object
      */
--- kate/part/katesearch.h
+++ kate/part/katesearch.h
@@ -223,7 +223,7 @@
     bool help(class Kate::View *, const QString &, QString &);
     QStringList cmds();
     bool wantsToProcessText( const QString &/*cmdname*/ );
-    void processText( Kate::View *, const QString& );
+    void processText( Kate::View *view, const QString& text );
 
   private:
     /**
--- kate/part/kateautoindent.cpp
+++ kate/part/kateautoindent.cpp
@@ -714,6 +714,7 @@
   int parenCount = 0;  // Possibly in a multiline for stmt.  Used to skip ';' ...
   bool found = false;
   bool isSpecial = false;
+  bool potentialAnchorSeen = false;
 
   //kdDebug(13030) << "calcIndent begin line:" << begin.line() << " col:" << begin.col() << endl;
 
@@ -733,7 +734,7 @@
       {
         QChar tc = textLine->getChar (pos);
         if ((tc == ';' || tc == ':' || tc == ',') && otherAnchor == -1 && parenCount <= 0)
-          otherAnchor = pos;
+          otherAnchor = pos, potentialAnchorSeen = true;
         else if (tc == ')')
           parenCount++;
         else if (tc == '(')
@@ -742,7 +743,7 @@
           openCount--;
         else if (tc == '{')
         {
-          openCount++;
+          openCount++, potentialAnchorSeen = true;
           if (openCount == 1)
             break;
         }
@@ -826,7 +827,7 @@
   }
 
   // treat beginning of document as anchor position
-  if (cur.line() == 0 && cur.col() == 0)
+  if (cur.line() == 0 && cur.col() == 0 && potentialAnchorSeen)
     found = true;
 
   if (!found)
--- kate/part/katedialogs.cpp
+++ kate/part/katedialogs.cpp
@@ -1423,13 +1423,13 @@
 {
   QString text = i18n("Select the MimeTypes you want highlighted using the '%1' syntax highlight rules.\nPlease note that this will automatically edit the associated file extensions as well.").arg( hlCombo->currentText() );
   QStringList list = QStringList::split( QRegExp("\\s*;\\s*"), mimetypes->text() );
-  KMimeTypeChooserDialog *d = new KMimeTypeChooserDialog( i18n("Select Mime Types"), text, list, "text", this );
+  KMimeTypeChooserDialog d( i18n("Select Mime Types"), text, list, "text", this );
 
-  if ( d->exec() == KDialogBase::Accepted ) {
+  if ( d.exec() == KDialogBase::Accepted ) {
     // do some checking, warn user if mime types or patterns are removed.
     // if the lists are empty, and the fields not, warn.
-    wildcards->setText(d->chooser()->patterns().join(";"));
-    mimetypes->setText(d->chooser()->mimeTypes().join(";"));
+    wildcards->setText(d.chooser()->patterns().join(";"));
+    mimetypes->setText(d.chooser()->mimeTypes().join(";"));
   }
 }
 //END KateHlConfigPage
--- kate/scripts/jstest.desktop
+++ kate/scripts/jstest.desktop
@@ -9,7 +9,7 @@
 Name[es]=Prueba JavaScript de Kate Part
 Name[et]=Kate komponendi JavaScripti test
 Name[eu]=Kate zatiaren JavaScript proba
-Name[fa]=آزمون دست‌نوشته جاوا  Kate Part
+Name[fa]=آزمون دست‌نوشتۀ جاوا  Kate Part
 Name[fi]=Kate Part JavaScript -testi
 Name[fr]=Test du module JavaScript pour Kate
 Name[fy]=Kate-part JavaSkript-test
@@ -17,6 +17,7 @@
 Name[he]=בדיקת JavaScript של רכיב Kate
 Name[hr]=Kate Part JavaScript test
 Name[hu]=Kate objektum, Javascript-teszt
+Name[id]=Tes JavaScript untuk Part Kate
 Name[is]=Kate hluti JavaScript prófun
 Name[it]=Prova componente JavaScript per Kate
 Name[ja]=Kate Part JavaScript テスト
@@ -66,6 +67,7 @@
 Comment[he]=תסריט לבדיקה של יכולות התסריט של Kate
 Comment[hr]=Skripta za ispitivanje izvršavanje skripti pri 'kate part'
 Comment[hu]=Szkript a Kate objektum szkriptkezelőjének ellenőrzéséhez
+Comment[id]=Skrip untuk menguji skripting part kate
 Comment[is]=Skrifta til að prófa skriftueiginleika Kate hluta
 Comment[it]=Script per provare il componente di scripting di kate
 Comment[ja]=kate part のスクリプトをテストするためのスクリプト
--- kate/data/Makefile.am
+++ kate/data/Makefile.am
@@ -19,7 +19,7 @@
                 cg.xml html-php.xml css-php.xml javascript-php.xml ahdl.xml ansic89.xml tibasic.xml \
                 purebasic.xml mips.xml logtalk.xml txt2tags.xml xslt.xml stata.xml glsl.xml \
                 lilypond.xml abc.xml asp.xml asm-avr.xml rib.xml cmake.xml octave.xml javadoc.xml cgis.xml \
-                spice.xml nasm.xml mediawiki.xml apache.xml m3u.xml ini.xml fstab.xml 
+                spice.xml nasm.xml mediawiki.xml apache.xml m3u.xml ini.xml fstab.xml actionscript.xml
 
 partrcdir   = $(kde_confdir)
 partrc_DATA = katesyntaxhighlightingrc katefiletyperc
--- kate/data/actionscript.xml
+++ kate/data/actionscript.xml
@@ -0,0 +1,334 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<!DOCTYPE language SYSTEM "language.dtd">
+<language name="ActionScript 2.0" version="1.00" kateversion="2.4" section="Sources" extensions="*.as" mimetype="text/x-actionscript" license="LGPL" author="Aaron Miller (armantic101@gmail.com)"> 
+  <highlighting>
+    
+    <list name="properties">
+      <item> _accProps </item>
+      <item> _focusrect </item>
+      <item> _global </item>
+      <item> _highquality </item>
+      <item> _level </item>
+      <item> _parent </item>
+      <item> _quality </item>
+      <item> _root </item>
+      <item> _soundbuftime </item>
+      <item> maxscroll </item>
+      <item> scroll </item>
+      <item> this </item>
+    </list>
+    
+    <list name="global_functions">
+      <item> asfunction </item>
+      <item> call </item>
+      <item> chr </item>
+      <item> clearInterval </item>
+      <item> duplicateMovieClip </item>
+      <item> escape </item>
+      <item> eval </item>
+      <item> fscommand </item>
+      <item> getProperty </item>
+      <item> getTimer </item>
+      <item> getURL </item>
+      <item> getVersion </item>
+      <item> gotoAndPlay </item>
+      <item> gotoAndStop </item>
+      <item> ifFrameLoaded </item>
+      <item> int </item>
+      <item> isFinite </item>
+      <item> isNaN </item>
+      <item> length </item>
+      <item> loadMovie </item>
+      <item> loadMovieNum </item>
+      <item> loadVariables </item>
+      <item> loadVariablesNum </item>
+      <item> mbchr </item>
+      <item> mblength </item>
+      <item> mbord </item>
+      <item> mbsubstring </item>
+      <item> nextFrame </item>
+      <item> nextScene </item>
+      <item> on </item>
+      <item> onClipEvent </item>
+      <item> ord </item>
+      <item> parseFloat </item>
+      <item> parseInt </item>
+      <item> play </item>
+      <item> prevFrame </item>
+      <item> prevScene </item>
+      <item> print </item>
+      <item> printAsBitmap </item>
+      <item> printAsBitmapNum </item>
+      <item> printNum </item>
+      <item> random </item>
+      <item> removeMovieClip </item>
+      <item> setInterval </item>
+      <item> setProperty </item>
+      <item> showRedrawRegions </item>
+      <item> startDrag </item>
+      <item> stop </item>
+      <item> stopAllSounds </item>
+      <item> stopDrag </item>
+      <item> substring </item>
+      <item> targetPath </item>
+      <item> tellTarget </item>
+      <item> toggleHighQuality </item>
+      <item> trace </item>
+      <item> typeof </item>
+      <item> unescape </item>
+      <item> unloadMovie </item>
+      <item> unloadMovieNum </item>
+    <item> updateAfterEvent </item>
+    </list>
+      
+    <list name="classes">
+      <item> Accessibility </item>
+      <item> Accordion </item>
+      <item> Alert </item>
+      <item> Binding </item>
+      <item> Button </item>
+      <item> Camera </item>
+      <item> CellRenderer </item>
+      <item> CheckBox </item>
+      <item> Collection </item>
+      <item> Color </item>
+      <item> ComboBox </item>
+      <item> ComponentMixins </item>
+      <item> ContextMenu </item>
+      <item> ContextMenuItem </item>
+      <item> CustomActions </item>
+      <item> CustomFormatter </item>
+      <item> CustomValidator </item>
+      <item> DataGrid </item>
+      <item> DataHolder </item>
+      <item> DataProvider </item>
+      <item> DataSet </item>
+      <item> DataType </item>
+      <item> Date </item>
+      <item> DateChooser </item>
+      <item> DateField </item>
+      <item> Delta </item>
+      <item> DeltaItem </item>
+      <item> DeltaPacket </item>
+      <item> DepthManager </item>
+      <item> EndPoint </item>
+      <item> Error </item>
+      <item> FaultEvent </item>
+      <item> FocusManager </item>
+      <item> Form </item>
+      <item> Function </item>
+      <item> Iterator </item>
+      <item> Key </item>
+      <item> Label </item>
+      <item> List </item>
+      <item> LoadVars </item>
+      <item> Loader </item>
+      <item> LocalConnection </item>
+      <item> Log </item>
+      <item> Math </item>
+      <item> Media </item>
+      <item> Menu </item>
+      <item> MenuBar </item>
+      <item> Microphone </item>
+      <item> Mouse </item>
+      <item> MovieClip </item>
+      <item> MovieClipLoader </item>
+      <item> NetConnection </item>
+      <item> NetStream </item>
+      <item> Number </item>
+      <item> NumericStepper </item>
+      <item> PendingCall </item>
+      <item> PopUpManager </item>
+      <item> PrintJob </item>
+      <item> ProgressBar </item>
+      <item> RDBMSResolver </item>
+      <item> RadioButton </item>
+      <item> RelayResponder </item>
+      <item> SOAPCall </item>
+      <item> Screen </item>
+      <item> ScrollPane </item>
+      <item> Selection </item>
+      <item> SharedObject </item>
+      <item> Slide </item>
+      <item> Sound </item>
+      <item> Stage </item>
+      <item> StyleManager </item>
+      <item> System </item>
+      <item> TextArea </item>
+      <item> TextField </item>
+      <item> TextFormat </item>
+      <item> TextInput </item>
+      <item> TextSnapshot </item>
+      <item> TransferObject </item>
+      <item> Tree </item>
+      <item> TreeDataProvider </item>
+      <item> TypedValue </item>
+      <item> UIComponent </item>
+      <item> UIEventDispatcher </item>
+      <item> UIObject </item>
+      <item> Video </item>
+      <item> WebService </item>
+      <item> WebServiceConnector </item>
+      <item> Window </item>
+      <item> XML </item>
+      <item> XMLConnector </item>
+      <item> XUpdateResolver </item>
+    </list>
+    
+    <list name="keywords">
+      <item> add </item>
+      <item> and </item>
+      <item> break </item>
+      <item> case </item>
+      <item> catch </item>
+      <item> class </item>
+      <item> continue </item>
+      <item> default </item>
+      <item> delete </item>
+      <item> do </item>
+      <item> dynamic </item>
+      <item> else </item>
+      <item> eq </item>
+      <item> extends </item>
+      <item> finally </item>
+      <item> for </item>
+      <item> function </item>
+      <item> ge </item>
+      <item> get </item>
+      <item> gt </item>
+      <item> if </item>
+      <item> implements </item>
+      <item> import </item>
+      <item> in </item>
+      <item> instanceof </item>
+      <item> interface </item>
+      <item> intrinsic </item>
+      <item> le </item>
+      <item> lt </item>
+      <item> ne </item>
+      <item> new </item>
+      <item> not </item>
+      <item> or </item>
+      <item> private </item>
+      <item> public </item>
+      <item> return </item>
+      <item> set </item>
+      <item> static </item>
+      <item> switch </item>
+      <item> throw </item>
+      <item> try </item>
+      <item> var </item>
+      <item> void </item>
+      <item> while </item>
+      <item> with </item>
+    </list>
+    
+    <list name="const">
+      <item> false </item>
+      <item> Infinity </item>
+      <item> -Infinity </item>
+      <item> NaN </item>
+      <item> newline </item>
+      <item> null </item>
+      <item> true </item>
+      <item> undefined </item>
+    </list>
+    
+    <list name="types">
+      <item> Array </item>
+      <item> Boolean </item>
+      <item> Number </item>
+      <item> Object </item>
+      <item> String </item>
+      <item> Void </item>
+    </list>
+    
+    <contexts>
+      <context attribute="Normal Text" lineEndContext="#stay" name="Normal">
+        <!-- Comment next line if you don't use Javadoc tool -->
+        <IncludeRules context="##Javadoc"/>
+        <keyword attribute="Properties" context="#stay" String="properties"/>
+        <keyword attribute="Global Functions" context="#stay" String="global_functions"/>
+        <keyword attribute="Classes" context="#stay" String="classes"/>
+        <keyword attribute="Keyword" context="#stay" String="keywords"/>
+        <keyword attribute="Constants" context="#stay" String="const"/>
+        <keyword attribute="Data Type" context="#stay" String="types"/>
+        <Float attribute="Float" context="#stay">
+          <AnyChar String="fF" attribute="Float" context="#stay"/>
+        </Float>
+        <HlCOct attribute="Octal" context="#stay"/>
+        <HlCHex attribute="Hex" context="#stay"/>
+        <Int attribute="Decimal" context="#stay">
+          <StringDetect attribute="Decimal" context="#stay" String="ULL" insensitive="TRUE"/>
+          <StringDetect attribute="Decimal" context="#stay" String="LUL" insensitive="TRUE"/>
+          <StringDetect attribute="Decimal" context="#stay" String="LLU" insensitive="TRUE"/>
+          <StringDetect attribute="Decimal" context="#stay" String="UL" insensitive="TRUE"/>
+          <StringDetect attribute="Decimal" context="#stay" String="LU" insensitive="TRUE"/>
+          <StringDetect attribute="Decimal" context="#stay" String="LL" insensitive="TRUE"/>
+          <StringDetect attribute="Decimal" context="#stay" String="U" insensitive="TRUE"/>
+          <StringDetect attribute="Decimal" context="#stay" String="L" insensitive="TRUE"/>
+        </Int>
+        <HlCChar attribute="Char" context="#stay"/>
+        <RegExpr attribute="Decimal" context="#stay" String="//\s*BEGIN.*$" beginRegion="Region1"/>
+        <RegExpr attribute="Decimal" context="#stay" String="//\s*END.*$" endRegion="Region1"/>
+        <DetectChar attribute="String" context="String" char="&quot;"/> 
+        <Detect2Chars attribute="Comment" context="Commentar 1" char="/" char1="/"/> 
+        <Detect2Chars attribute="Comment" context="Commentar 2" char="/" char1="*" beginRegion="Comment"/>  
+        <DetectChar attribute="Symbol" context="#stay" char="{" beginRegion="Brace1"/>
+        <DetectChar attribute="Symbol" context="#stay" char="}" endRegion="Brace1"/>
+        <RegExpr attribute="Keyword" context="#stay" String="\.{3,3}\s+" />  
+        <RegExpr attribute="Keyword" context="StaticImports" String="\b(import\s+static)\b" />
+        <RegExpr attribute="Keyword" context="Imports" String="\b(package|import)\b" /> 
+        <RegExpr attribute="Function" context="#stay" String="\b[_\w][_\w\d]*(?=[\s]*(/\*\s*\d+\s*\*/\s*)?[(])" />
+        <RegExpr attribute="Symbol" context="Member" String="[.]{1,1}" /> 
+        <AnyChar attribute="Symbol" context="#stay" String=":!%&amp;()+,-/.*&lt;=&gt;?[]|~^&#59;"/>
+      </context>
+      <context attribute="String" lineEndContext="#pop" name="String">
+        <LineContinue attribute="String" context="#stay"/>
+        <HlCStringChar attribute="String Char" context="#stay"/>
+        <DetectChar attribute="String" context="#pop" char="&quot;"/>
+      </context>
+      <context attribute="Normal Text" lineEndContext="#pop" name="Member" fallthrough="true" fallthroughContext="#pop">  
+        <RegExpr attribute="Function" context="#pop" String="\b[_a-zA-Z]\w*(?=[\s]*)" />
+      </context>
+      <context attribute="Normal Text" lineEndContext="#pop" name="StaticImports">
+        <RegExpr attribute="StaticImports" context="#pop" String="\s*.*$" />
+      </context>
+      <context attribute="Normal Text" lineEndContext="#pop" name="Imports">
+        <RegExpr attribute="Imports" context="#pop" String="\s*.*$" />
+      </context>
+      <context attribute="Comment" lineEndContext="#pop" name="Commentar 1"/>
+      <context attribute="Comment" lineEndContext="#stay" name="Commentar 2">
+        <Detect2Chars attribute="Comment" context="#pop" char="*" char1="/" endRegion="Comment"/>
+      </context>
+    </contexts>
+    <itemDatas>
+      <itemData name="Normal Text"  defStyleNum="dsNormal"/>
+      <itemData name="Keyword"      defStyleNum="dsKeyword"/>
+      <itemData name="Function"     defStyleNum="dsFunction"/>
+      <itemData name="StaticImports"      defStyleNum="dsKeyword" color="#800080" selColor="#FFFFFF" bold="0" italic="0"/>
+      <itemData name="Imports" defStyleNum="dsKeyword" color="#808000" selColor="#FFFFFF" bold="0" italic="0"/>
+      <itemData name="Data Type"    defStyleNum="dsDataType"/>
+      <itemData name="Decimal" defStyleNum="dsDecVal"/>
+      <itemData name="Octal"        defStyleNum="dsBaseN"/>
+      <itemData name="Hex"          defStyleNum="dsBaseN"/>
+      <itemData name="Float"        defStyleNum="dsFloat"/>
+      <itemData name="Char"         defStyleNum="dsChar"/>
+      <itemData name="String"       defStyleNum="dsString"/>
+      <itemData name="String Char"  defStyleNum="dsChar"/>
+      <itemData name="Comment"      defStyleNum="dsComment"/>
+      <itemData name="Symbol"       defStyleNum="dsNormal"/>
+      <itemData name="Properties"   defStyleNum="dsNormal" color="#000033" selColor="#CCCCCC" bold="1" italic="0"/> 
+      <itemData name="Global Functions"   defStyleNum="dsNormal" color="#006666" selColor="#CCCCCC" bold="1" italic="0"/>
+      <itemData name="Classes"   defStyleNum="dsNormal" color="#660066" selColor="#CCCCCC" bold="1" italic="0"/>
+      <itemData name="Constants" defStyleNum="dsNormal" color="#003300" selColor="#CCCCCC" bold="1" italic="0"/>
+    </itemDatas>
+  </highlighting>
+  <general>
+    <comments>
+      <comment name="singleLine" start="//"/>
+      <comment name="multiLine" start="/*" end="*/"/>
+    </comments>
+    <keywords casesensitive="1"/>
+  </general>
+</language>
--- kab/qconfigDB.h
+++ kab/qconfigDB.h
@@ -199,7 +199,7 @@
   bool save(QTextStream& file, int count); 
   /**
    * Get the value for the key as a string. 
-   * \a key is the key to search for, \value is a reference to the object
+   * \a key is the key to search for, \a value is a reference to the object
    * the value for the key is assigned to.
    */
   bool get(const QCString& key, QCString& value) const;
@@ -226,7 +226,7 @@
   // ---------------
   /**
    * Get the value for the key as a long integer. 
-   * \a key is the key to search for, \value is a reference to the object
+   * \a key is the key to search for, \a value is a reference to the object
    * the value for the key is assigned to.
    */
   bool get(const QCString&, long&) const;
@@ -243,7 +243,7 @@
    * This will probably be not fast, but this methods are not suited to save 
    * large amounts of data. For saving anything else than UNICODE strings,
    * no such conversion is needed.
-   * \a key is the key to search for, \value is a reference to the object
+   * \a key is the key to search for, \a value is a reference to the object
    * the value for the key is assigned to.
    */
   bool get(const QCString&, QString&) const;
@@ -256,7 +256,7 @@
   // ---------------
   /**
    * Get the value for the key as a double. 
-   * \a key is the key to search for, \value is a reference to the object
+   * \a key is the key to search for, \a value is a reference to the object
    * the value for the key is assigned to.
    */
   bool get(const QCString&, double&) const;
@@ -269,7 +269,7 @@
   // ---------------
   /**
    * Get the value for the key as a boolean value. 
-   * \a key is the key to search for, \value is a reference to the object
+   * \a key is the key to search for, \a value is a reference to the object
    * the value for the key is assigned to.
    */
   bool get(const QCString&, bool&) const;
@@ -282,7 +282,7 @@
   // ---------------
   /**
    * Get the value for the key as a list of strings. 
-   * \a key is the key to search for, \value is a reference to the object
+   * \a key is the key to search for, \a value is a reference to the object
    * the value for the key is assigned to.
    */
   bool get(const QCString&, list<QCString>&) const;
@@ -295,7 +295,7 @@
   // --------------
   /**
    * Get the value for the key as a QStrList. 
-   * \a key is the key to search for, \value is a reference to the object
+   * \a key is the key to search for, \a value is a reference to the object
    * the value for the key is assigned to.
    */
   bool get(const QCString&, QStrList&) const;
@@ -310,7 +310,7 @@
    * Get the value for the key as a QStringList. Beware of the difference -
    * a QStringList is a list of QString objects, while QStrList handles
    * char* like objects.
-   * \a key is the key to search for, \value is a reference to the object
+   * \a key is the key to search for, \a value is a reference to the object
    * the value for the key is assigned to.
    */
   bool get(const QCString&, QStringList&) const;
@@ -323,7 +323,7 @@
   // --------------
   /**
    * Get the value for the key as a list of long integers. 
-   * \a key is the key to search for, \value is a reference to the object
+   * \a key is the key to search for, \a value is a reference to the object
    * the value for the key is assigned to.
    */
   bool get(const QCString&, list<long>&) const;
@@ -336,7 +336,7 @@
   // --------------
   /**
    * Get the value for the key as a list of integers. 
-   * \a key is the key to search for, \value is a reference to the object
+   * \a key is the key to search for, \a value is a reference to the object
    * the value for the key is assigned to.
    */
   bool get(const QCString&, list<int>&) const;
@@ -370,7 +370,7 @@
   // --------------
   /**
    * Get the value for the key as a list of doubles. 
-   * \a key is the key to search for, \value is a reference to the object
+   * \a key is the key to search for, \a value is a reference to the object
    * the value for the key is assigned to.
    */
   bool get(const QCString&, list<double>&) const;
@@ -612,7 +612,7 @@
   /**
    * Save the file. 
    * \a header will be the comment in the first line of the file.
-   * If \a force is \tt true, a file opened read-only will be switched
+   * If \a force is \c true, a file opened read-only will be switched
    * to read and write mode and back after saving. 
    * @see ::setFileName
    */
@@ -688,7 +688,7 @@
   static void CleanLockFiles(int);
   /**
    * Lock the current file.
-   * Locking is done by creating a file <filename>.lock. 
+   * Locking is done by creating a file \<filename\> lock. 
    * QConfigDB-objects will reject opening a file for reading and 
    * writing if a lockfile for the  filename exists.
    */
--- kab/addressbook.h
+++ kab/addressbook.h
@@ -178,7 +178,7 @@
  *  your mainwindow (or whereever). (The toolbar is not implemented by now). <BR>
  *  Some parts of the AddressBook widget are \e interactive, that means they are
  *  displayed as transparent KURLLabels that react when the user clicks on it.
- *  These interactive parts have to be enabled by calling #setInteractiveMode.
+ *  These interactive parts have to be enabled by calling setInteractiveMode().
  */
 class AddressBook : public QFrame
 {
@@ -266,26 +266,26 @@
    *  specific address of this person is part of an object of the member list
    *  \c addresses referenced in the next paragraph. <BR>
    *  The keys defined directly in the entry sections are: <DL>
-   *  <DD> "title" The title of that person. </DD>
-   *  <DD> "rank" A possible military rank of that person. </DD>
-   *  <DD> "fn" The formatted name. If it is not empty, it replaces the
+   *  <DT>title<DT><DD> The title of that person. </DD>
+   *  <DT>rank<DT><DD>A possible military rank of that person. </DD>
+   *  <DT>fn<DT><DD>The formatted name. If it is not empty, it replaces the
    *       standard combination of the other name fields in the address
    *       display. </DD>
-   *  <DD> "nameprefix" A possible name prefix. </DD>
-   *  <DD> "firstname" The first name. </DD>
-   *  <DD> "middlename" The middle name. </DD>
-   *  <DD> "lastname" The last name. </DD>
-   *  <DD> "birthday" The birthday (a QDate). </DD>
-   *  <DD> "comment" A free form comment. </DD>
-   *  <DD> "talk" The talk addresses (a string list). </DD>
-   *  <DD> "emails" The email addresses (a string list). </DD>
-   *  <DD> "keywords" A list of free-form keywords. </DD>
-   *  <DD> "telephone" A list of telephone numbers in a special format. </DD>
-   *  <DD> "URLs" A list of internet addresses. </DD>
-   *  <DD> "user_1" The first user-declared data field. </DD>
-   *  <DD> "user_2" The second user-declared data field. </DD>
-   *  <DD> "user_3" The third user-declared data field. </DD>
-   *  <DD> "user_4" The fourth user-declared data field. </DD>
+   *  <DT>nameprefix<DT><DD>A possible name prefix. </DD>
+   *  <DT>firstname<DT><DD>The first name. </DD>
+   *  <DT>middlename<DT><DD>The middle name. </DD>
+   *  <DT>lastname<DT><DD>The last name. </DD>
+   *  <DT>birthday<DT><DD>The birthday (a QDate). </DD>
+   *  <DT>comment<DT><DD>A free form comment. </DD>
+   *  <DT>talk<DT><DD>The talk addresses (a string list). </DD>
+   *  <DT>emails<DT><DD>The email addresses (a string list). </DD>
+   *  <DT>keywords<DT><DD>A list of free-form keywords. </DD>
+   *  <DT>telephone<DT><DD>A list of telephone numbers in a special format. </DD>
+   *  <DT>URLs<DT><DD>A list of internet addresses. </DD>
+   *  <DT>user_1<DT><DD>The first user-declared data field. </DD>
+   *  <DT>user_2<DT><DD>The second user-declared data field. </DD>
+   *  <DT>user_3<DT><DD>The third user-declared data field. </DD>
+   *  <DT>user_4<DT><DD>The fourth user-declared data field. </DD>
    *  </DL>
    *  See the next section for a description of the addresses subsections.
    * 
@@ -295,18 +295,18 @@
    *  in the order they are inserted, their keys are the numbers of
    *  inserting converted to a string. <BR>
    *  The keys defined in an address subsection are: <DL>
-   *  <DD> "headline" A headline shown for the address. </DD>
-   *  <DD> "position" The position of the person. </DD>
-   *  <DD> "org" The organization. </DD>
-   *  <DD> "orgunit" The organizational unit. </DD>
-   *  <DD> "orgsubunit" The organizational subunit. </DD>
-   *  <DD> "role" The role of the person. </DD>
-   *  <DD> "deliverylabel" A label for delivering to this address. </DD>
-   *  <DD> "address" The street, house no., flat etc line. </DD>
-   *  <DD> "zip" A zip or postal code. </DD>
-   *  <DD> "town" The town the person lives in in this address. </DD>
-   *  <DD> "country" The country for federal states. </DD>
-   *  <DD> "state" The state for federal states. </DD>
+   *  <DT>headline</DT><DD> A headline shown for the address. </DD>
+   *  <DT>position</DT><DD> The position of the person. </DD>
+   *  <DT>org</DT><DD> The organization. </DD>
+   *  <DT>orgunit</DT><DD> The organizational unit. </DD>
+   *  <DT>orgsubunit</DT><DD> The organizational subunit. </DD>
+   *  <DT>role</DT><DD> The role of the person. </DD>
+   *  <DT>deliverylabel</DT><DD> A label for delivering to this address. </DD>
+   *  <DT>address</DT><DD> The street, house no., flat etc line. </DD>
+   *  <DT>zip</DT><DD> A zip or postal code. </DD>
+   *  <DT>town</DT><DD> The town the person lives in in this address. </DD>
+   *  <DT>country</DT><DD> The country for federal states. </DD>
+   *  <DT>state</DT><DD> The state for federal states. </DD>
    *  </DL>
    *
    *  \par The local configuration section
@@ -315,10 +315,10 @@
    *  with. These settings are called the local configuration. The settings
    *  are stored in the \c config section of the local file. The following
    *  keys are declared in this section: <DL>
-   *  <DD> "user_1" The \e name of the first user-declared field. </DD>
-   *  <DD> "user_2" The \e name of the second user-declared field. </DD>
-   *  <DD> "user_3" The \e name of the third user-declared field. </DD>
-   *  <DD> "user_4" The \e name of the fourth user-declared field. </DD>
+   *  <DT>user_1</DT><DD>The \e name of the first user-declared field. </DD>
+   *  <DT>user_2</DT><DD>The \e name of the second user-declared field. </DD>
+   *  <DT>user_3</DT><DD>The \e name of the third user-declared field. </DD>
+   *  <DT>user_4</DT><DD>The \e name of the fourth user-declared field. </DD>
    *  </DL>
    *  More fields will surely follow.
    **/
--- kab/kabapi.h
+++ kab/kabapi.h
@@ -77,6 +77,7 @@
    * without failures. Thus you have to call init before you can
    * use the database.
    * @param parent The QWidget pointer to the parent widget.
+   * @param name The widgets name (used for debugging)
    */
   KabAPI(QWidget* parent=0, const char* name=0);
   /**
@@ -166,7 +167,7 @@
    * for example, nearly similar email addresses. Empty parts of the
    * entry are not considered as criteria.
    * @short This method delivers the closest matches to the given entry.
-   * @param name The name, containing "." for abbreviations.
+   * @param pattern The pattern, containing "." for abbreviations.
    * @param entries Reference to a list of entries where matches are stored.
    * @param max Maximum number of returned entries.
    * @return NoError if an entry is found or NoEntry.
--- arts/kde/kplayobject.h
+++ arts/kde/kplayobject.h
@@ -37,7 +37,7 @@
 
 	/**
 	  * Sets the internal Arts::PlayObject
-	  * to @playObject
+	  * to @a playObject
 	  */
 	void setObject(Arts::PlayObject playObject);
 	
--- arts/knotify/knotify.cpp
+++ arts/knotify/knotify.cpp
@@ -26,24 +26,29 @@
 #include <sys/types.h>
 #include <sys/stat.h>
 
+#include <config.h>
+#ifndef WITHOUT_ARTS
 // aRts headers
 #include <connect.h>
 #include <dispatcher.h>
 #include <flowsystem.h>
+#include <qiomanager.h>
 #include <soundserver.h>
+#endif
 
 // QT headers
 #include <qfile.h>
 #include <qfileinfo.h>
-#include <qiomanager.h>
 #include <qstringlist.h>
 #include <qtextstream.h>
 
 // KDE headers
 #include <dcopclient.h>
 #include <kaboutdata.h>
+#ifndef WITHOUT_ARTS
 #include <kartsdispatcher.h>
 #include <kartsserver.h>
+#endif
 #include <kcmdlineargs.h>
 #include <kconfig.h>
 #include <kdebug.h>
@@ -53,8 +58,10 @@
 #include <kpassivepopup.h>
 #include <kiconloader.h>
 #include <kmacroexpander.h>
+#ifndef WITHOUT_ARTS
 #include <kplayobjectfactory.h>
 #include <kaudiomanagerplay.h>
+#endif
 #include <kprocess.h>
 #include <kstandarddirs.h>
 #include <kuniqueapplication.h>
@@ -73,22 +80,26 @@
     QString externalPlayer;
     KProcess *externalPlayerProc;
 
+#ifndef WITHOUT_ARTS
     QPtrList<KDE::PlayObject> playObjects;
     QMap<KDE::PlayObject*,int> playObjectEventMap;
+    KAudioManagerPlay *audioManager;
+#endif
     int externalPlayerEventId;
 
     bool useExternal;
     bool useArts;
     int volume;
     QTimer *playTimer;
-    KAudioManagerPlay *audioManager;
     bool inStartup;
     QString startupEvents;
 };
 
 // Yes, it's ugly to put this here, but this facilitates the cautious startup
 // procedure.
+#ifndef WITHOUT_ARTS
 KArtsServer *soundServer = 0;
+#endif
 
 extern "C"{
 
@@ -124,6 +135,7 @@
     // We try to prevent this by tracking our startup and offer options to
     // abort this.
 
+#ifndef WITHOUT_ARTS
     KConfigGroup config( KGlobal::config(), "StartProgress" );
     KConfig artsKCMConfig( "kcmartsrc" );
     artsKCMConfig.setGroup( "Arts" );
@@ -208,14 +220,23 @@
     config.writeEntry( "KNotify Init", true );
     config.sync();
 
+#else
+
+    // start notify service, without aRts
+    KNotify *notify = new KNotify( false );
+
+#endif
+
     app.dcopClient()->setDefaultObject( "Notify" );
     app.dcopClient()->setDaemonMode( true );
     // kdDebug() << "knotify starting" << endl;
 
     int ret = app.exec();
     delete notify;
+#ifndef WITHOUT_ARTS
     delete soundServer;
     delete dispatcher;
+#endif
     return ret;
 }
 }// end extern "C"
@@ -228,14 +249,16 @@
     d->globalConfig = new KConfig("knotify.eventsrc", true, false);
     d->externalPlayerProc = 0;
     d->useArts = useArts;
+    d->inStartup = true;
+#ifndef WITHOUT_ARTS
     d->playObjects.setAutoDelete(true);
     d->audioManager = 0;
-    d->inStartup = true;
     if( useArts )
     {
         connect( soundServer, SIGNAL( restartedServer() ), this, SLOT( restartedArtsd() ) );
         restartedArtsd(); //started allready need to initialize d->audioManager
     }
+#endif
 
     d->volume = 100;
 
@@ -248,12 +271,14 @@
 {
     reconfigure();
 
+#ifndef WITHOUT_ARTS
     d->playObjects.clear();
 
     delete d->globalEvents;
     delete d->globalConfig;
     delete d->externalPlayerProc;
     delete d->audioManager;
+#endif
     delete d;
 }
 
@@ -449,6 +474,7 @@
             return false;
         }
 
+#ifndef WITHOUT_ARTS
         // play sound finally
         while( d->playObjects.count()>5 )
             abortFirstPlayObject();
@@ -506,7 +532,7 @@
         }
         if ( !d->playTimer->isActive() )
             d->playTimer->start( 1000 );
-
+#endif
         return true;
 
     } else if(!d->externalPlayer.isEmpty()) {
@@ -661,6 +687,7 @@
 
 void KNotify::playTimeout()
 {
+#ifndef WITHOUT_ARTS
     for ( QPtrListIterator< KDE::PlayObject > it(d->playObjects); *it;)
     {
         QPtrListIterator< KDE::PlayObject > current = it;
@@ -678,16 +705,18 @@
     }
     if ( !d->playObjects.count() )
         d->playTimer->stop();
+#endif
 }
 
 bool KNotify::isPlaying( const QString& soundFile ) const
 {
+#ifndef WITHOUT_ARTS
     for ( QPtrListIterator< KDE::PlayObject > it(d->playObjects); *it; ++it)
     {
         if ( (*it)->mediaName() == soundFile )
             return true;
     }
-
+#endif
     return false;
 }
 
@@ -699,6 +728,7 @@
 
 void KNotify::abortFirstPlayObject()
 {
+#ifndef WITHOUT_ARTS
     QMap<KDE::PlayObject*,int>::Iterator it = d->playObjectEventMap.find( d->playObjects.getFirst() );
     if ( it != d->playObjectEventMap.end() )
     {
@@ -706,6 +736,7 @@
         d->playObjectEventMap.remove( it );
     }
     d->playObjects.removeFirst();
+#endif
 }
 
 void KNotify::soundFinished( int eventId, PlayingFinishedStatus reason )
@@ -750,10 +781,12 @@
 
 void KNotify::restartedArtsd()
 {
+#ifndef WITHOUT_ARTS
     delete d->audioManager;
     d->audioManager = new KAudioManagerPlay( soundServer );
     d->audioManager->setTitle( i18n( "KDE System Notifications" ) );
     d->audioManager->setAutoRestoreID( "KNotify Aman Play" );
+#endif
 }
 
 void KNotify::sessionReady()
--- arts/knotify/Makefile.am
+++ arts/knotify/Makefile.am
@@ -6,7 +6,9 @@
 kde_module_LTLIBRARIES = knotify.la
 
 knotify_la_SOURCES	= knotify.cpp knotify.skel
+if include_ARTS
 knotify_la_LIBADD	= -lsoundserver_idl -lqtmcop $(LIB_KDEUI) $(top_builddir)/arts/kde/libartskde.la
+endif
 knotify_la_LDFLAGS = $(all_libraries) -module -avoid-version
 knotify_la_METASOURCES = AUTO
 
--- arts/knotify/knotify.h
+++ arts/knotify/knotify.h
@@ -23,7 +23,6 @@
 #include <qobject.h>
 #include <knotifyclient.h>
 #include <dcopobject.h>
-#include <soundserver.h>
 
 class KNotifyPrivate;
 class KProcess;
--- arts/knotify/knotify.desktop
+++ arts/knotify/knotify.desktop
@@ -68,7 +68,7 @@
 Comment[ms]=Daemon Pemberitahuan KDE
 Comment[mt]=Daemon tan-notifika KDE
 Comment[nb]=KDE Varslings-nisse
-Comment[nds]=KDE-Dämoon för't Bescheed geven
+Comment[nds]=KDE-Dämoon för Bescheden
 Comment[nl]=KDE's systeemnotificatieprogramma
 Comment[nn]=KDE-varselnisse
 Comment[nso]=Daemon ya Tsebiso ya KDE
--- arts/Makefile.am
+++ arts/Makefile.am
@@ -1,4 +1,8 @@
+if include_ARTS
 SUBDIRS = kde knotify message
+else
+SUBDIRS = knotify
+endif
 
 DOXYGEN_REFERENCES = kio kdecore kdeui
 include ../admin/Doxyfile.am
--- arts/configure.in.in
+++ arts/configure.in.in
@@ -22,7 +22,6 @@
 ARTS_OK=no
 
 if test "$build_arts" != "yes"; then
-  DO_NOT_COMPILE="$DO_NOT_COMPILE arts"
   AC_MSG_RESULT(disabled)
 else
 
--- mimetypes/all.desktop
+++ mimetypes/all.desktop
@@ -31,6 +31,7 @@
 Comment[hi]=सभी फ़ाइलें और फ़ोल्डर
 Comment[hr]=Sve datoteke i mape
 Comment[hu]=Minden fájl és könyvtár
+Comment[id]=Semua Berkas dan Folder
 Comment[is]=Allar skrár og möppur
 Comment[it]=Tutti i file e le cartelle
 Comment[ja]=すべてのファイルとディレクトリ
--- mimetypes/model/vrml.desktop
+++ mimetypes/model/vrml.desktop
@@ -30,6 +30,7 @@
 Comment[hi]=VRML मॉडल
 Comment[hr]=VRML model
 Comment[hu]=VRML-modell
+Comment[id]=Model VRML
 Comment[is]=VRML eining
 Comment[it]=Modello VRML
 Comment[ja]=VRML モジュール
--- mimetypes/audio/x-oggflac.desktop
+++ mimetypes/audio/x-oggflac.desktop
@@ -31,6 +31,7 @@
 Comment[hi]=ऑग FLAC ऑडियो
 Comment[hr]=Ogg FLAC zvuk
 Comment[hu]=Ogg FLAC-hangfájl
+Comment[id]=Audio Ogg FLAC
 Comment[is]=Ogg FLAC hljóðskrá
 Comment[it]=Audio Ogg FLAC
 Comment[ja]=Ogg FLAC オーディオ
--- mimetypes/audio/vnd.rn-realaudio.desktop
+++ mimetypes/audio/vnd.rn-realaudio.desktop
@@ -34,6 +34,7 @@
 Comment[hi]=रीयलऑडियो फ़ाइल
 Comment[hr]=RealAudio datoteka
 Comment[hu]=RealAudio-fájl
+Comment[id]=Berkas RealAudio
 Comment[is]=RealAudio skrá
 Comment[it]=File RealAudio
 Comment[ja]=RealAudio ファイル
--- mimetypes/audio/x-vorbis.desktop
+++ mimetypes/audio/x-vorbis.desktop
@@ -31,6 +31,7 @@
 Comment[hi]=ऑग वॉर्बिस ऑडियो
 Comment[hr]=Ogg Vorbis zvuk
 Comment[hu]=Ogg Vorbis-hangfájl
+Comment[id]=Audio Ogg Vorbis
 Comment[is]=Ogg Vorbis hljóðskrá
 Comment[it]=Audio Ogg Vorbis
 Comment[ja]=Ogg Vorbis オーディオ
--- mimetypes/audio/x-flac.desktop
+++ mimetypes/audio/x-flac.desktop
@@ -28,6 +28,7 @@
 Comment[hi]=FLAC आडियो
 Comment[hr]=FLAC zvuk
 Comment[hu]=FLAC-hangfájl
+Comment[id]=Audio FLAC
 Comment[is]=FLAC hljóðskrá
 Comment[it]=Audio FLAC
 Comment[ja]=FLAC オーディオ
--- mimetypes/audio/x-aiff.desktop
+++ mimetypes/audio/x-aiff.desktop
@@ -29,6 +29,7 @@
 Comment[hi]=AIFF/अमिगा ऑडियो
 Comment[hr]=AIFF/Amiga zvuk
 Comment[hu]=AIFF/Amiga-hangfájl
+Comment[id]=Audio AIFF/Amiga
 Comment[is]=AIFF/Amiga hljóðskrá
 Comment[it]=Audio AIFF/Amiga
 Comment[ja]=AIFF/Amiga オーディオ
--- mimetypes/audio/mpegurl.desktop
+++ mimetypes/audio/mpegurl.desktop
@@ -23,7 +23,7 @@
 Comment[es]=Sonido MPEG esquema 3 por transmisión
 Comment[et]=MPEG layer 3 audiovoog
 Comment[eu]=MPEG Layer 3 audio jarioa
-Comment[fa]=صوت جریانی لایه ۳ MPEG
+Comment[fa]=صوت جریانی لایۀ ۳MPEG
 Comment[fi]=Streamattu MPEG 3-tason musiikki
 Comment[fr]=Flux MPEG niveau 3 audio
 Comment[fy]=Streaming MPEG Layer3-audio
@@ -32,6 +32,7 @@
 Comment[hi]=स्ट्रीमिंग MPEG लेयर 3 ऑडियो
 Comment[hr]=Prenosivi MPEG 3 zvuk
 Comment[hu]=MP3 (MPEG Layer 3) sugárzási hangfájl
+Comment[id]=Audio Streaming MPEG Layer 3
 Comment[is]=Mp3 hljóðstraumur
 Comment[it]=Audio MPEG layer 3 in streaming
 Comment[ja]=ストリーミング MPEG Layer 3 オーディオ
@@ -39,6 +40,7 @@
 Comment[ko]=스트리밍 MPEG 레이어 3 오디오
 Comment[lb]=Streaming-MPEG-Layer 3-Audio
 Comment[lt]=MPEG layer 3 audio srautas
+Comment[lv]=Straumējams MPEG 3 slāņa audio
 Comment[mk]=Поточно MPEG Layer 3 аудио
 Comment[mn]=MPEG-Үе-3-Аудио
 Comment[ms]=Audio Aliran MPEG Peringkat 3
--- mimetypes/audio/x-musepack.desktop
+++ mimetypes/audio/x-musepack.desktop
@@ -27,6 +27,7 @@
 Comment[he]=MusePack שמע
 Comment[hi]=म्यूज़पैक ऑडियो
 Comment[hu]=Musepack-hangfájl
+Comment[id]=Audio Musepack
 Comment[is]=Musepack hljóðskrá
 Comment[it]=Audio Musepack
 Comment[ja]=Musepack オーディオ
--- mimetypes/audio/x-mpegurl.desktop
+++ mimetypes/audio/x-mpegurl.desktop
@@ -21,7 +21,7 @@
 Comment[es]=Sonido MPEG esquema 3 por transmisión
 Comment[et]=MPEG layer 3 audiovoog
 Comment[eu]=MPEG Layer 3 audio jarioa
-Comment[fa]=صوت جریانی لایه ۳ MPEG
+Comment[fa]=صوت جریانی لایۀ ۳MPEG
 Comment[fi]=Streamattu MPEG 3-tason musiikki
 Comment[fr]=Flux MPEG niveau 3 audio
 Comment[fy]=Streaming MPEG Layer3-audio
@@ -30,6 +30,7 @@
 Comment[hi]=स्ट्रीमिंग MPEG लेयर 3 ऑडियो
 Comment[hr]=Prenosivi MPEG 3 zvuk
 Comment[hu]=MP3 (MPEG Layer 3) sugárzási hangfájl
+Comment[id]=Audio Streaming MPEG Layer 3
 Comment[is]=Mp3 hljóðstraumur
 Comment[it]=Audio MPEG layer 3 in streaming
 Comment[ja]=ストリーミング MPEG Layer 3 オーディオ
@@ -37,6 +38,7 @@
 Comment[ko]=스트리밍 MPEG 레이어 3 오디오
 Comment[lb]=Streaming-MPEG-Layer 3-Audio
 Comment[lt]=MPEG layer 3 audio srautas
+Comment[lv]=Straumējams MPEG 3 slāņa audio
 Comment[mk]=Поточно MPEG Layer 3 аудио
 Comment[mn]=MPEG-Үе-3-Аудио
 Comment[ms]=Audio Aliran MPEG Peringkat 3
--- mimetypes/audio/basic.desktop
+++ mimetypes/audio/basic.desktop
@@ -29,6 +29,7 @@
 Comment[hi]=ULAW (Sun) ऑडियो
 Comment[hr]=ULAW (Sun) zvučna datoteka
 Comment[hu]=ULAW (Sun)-hangfájl
+Comment[id]=Audio ULAW (Sun)
 Comment[is]=ULAW hljóðskrá (Sun)
 Comment[it]=Audio ULAW (Sun)
 Comment[ja]=ULAW (Sun) オーディオ
--- mimetypes/audio/prs.sid.desktop
+++ mimetypes/audio/prs.sid.desktop
@@ -29,6 +29,7 @@
 Comment[hi]=सी64 एसआईडी संगीत
 Comment[hr]=C64 SID glazba
 Comment[hu]=C64 SID-zenefájl
+Comment[id]=Audio C64 SID
 Comment[is]=C64 SID hljóðskrá
 Comment[it]=Musica SID C64
 Comment[ja]=C64 SIDミュージック
--- mimetypes/audio/x-mod.desktop
+++ mimetypes/audio/x-mod.desktop
@@ -31,6 +31,7 @@
 Comment[hi]=अमिगा साउन्डट्रेकर ऑडियो
 Comment[hr]=Amiga Soundtracker zvuk
 Comment[hu]=Amiga Soundtracker-hangfájl
+Comment[id]=Audio Amiga Soundtracker
 Comment[is]=Amiga soundtracker hljóðskrá
 Comment[it]=Audio Amiga Soundtracker
 Comment[ja]=Amiga Soundtracker オーディオ
--- mimetypes/audio/aac.desktop
+++ mimetypes/audio/aac.desktop
@@ -33,6 +33,7 @@
 Comment[hi]=AAC ध्वनि
 Comment[hr]=AAC zvuk
 Comment[hu]=AAC-hangfájl
+Comment[id]=Suara AAC
 Comment[is]=AAC hljóðskrá
 Comment[it]=Suono AAC
 Comment[ja]=ACC サウンド
--- mimetypes/audio/x-pn-realaudio.desktop
+++ mimetypes/audio/x-pn-realaudio.desktop
@@ -32,6 +32,7 @@
 Comment[hi]=रीयलऑडियो फ़ाइल
 Comment[hr]=RealAudio datoteka
 Comment[hu]=RealAudio-fájl
+Comment[id]=Berkas RealAudio
 Comment[is]=RealAudio skrá
 Comment[it]=File RealAudio
 Comment[ja]=RealAudio ファイル
--- mimetypes/audio/x-matroska.desktop
+++ mimetypes/audio/x-matroska.desktop
@@ -31,6 +31,7 @@
 Comment[hi]=मात्रोस्का ऑडियो
 Comment[hr]=Matroska zvuk
 Comment[hu]=Matroska-hangfájl
+Comment[id]=Audio Matroska
 Comment[is]=Matroska hljóðskrá
 Comment[it]=Audio Matroska
 Comment[ja]=Matroska オーディオ
--- mimetypes/audio/x-midi.desktop
+++ mimetypes/audio/x-midi.desktop
@@ -32,6 +32,7 @@
 Comment[hi]=MIDI ऑडियो
 Comment[hr]=MIDI zvuk
 Comment[hu]=MIDI-hangfájl
+Comment[id]=Audio MIDI
 Comment[is]=MIDI hljóðskrá
 Comment[it]=Audio MIDI
 Comment[ja]=MIDI オーディオ
--- mimetypes/audio/mpeg.desktop
+++ mimetypes/audio/mpeg.desktop
@@ -31,6 +31,7 @@
 Comment[hi]=एमपीईजी ऑडियो
 Comment[hr]=MPEG zvuk
 Comment[hu]=MPEG-hangfájl
+Comment[id]=Audio MPEG
 Comment[is]=MPEG hljóðskrá
 Comment[it]=Audio MPEG
 Comment[ja]=MPEG オーディオ
--- mimetypes/audio/x-adpcm.desktop
+++ mimetypes/audio/x-adpcm.desktop
@@ -29,6 +29,7 @@
 Comment[hi]=PCM ऑडियो
 Comment[hr]=PCM zvuk
 Comment[hu]=PCM-hangfájl
+Comment[id]=Audio PCM
 Comment[is]=PCM hljóðskrá
 Comment[it]=Audio PCM
 Comment[ja]=PCM オーディオ
--- mimetypes/audio/x-speex.desktop
+++ mimetypes/audio/x-speex.desktop
@@ -31,6 +31,7 @@
 Comment[hi]=स्पीक्स ऑडियो
 Comment[hr]=Speex zvuk
 Comment[hu]=Speex-hangfájl
+Comment[id]=Audio Speex
 Comment[is]=Speex hljóðskrá
 Comment[it]=Audio Speex
 Comment[ja]=Speex オーディオ
--- mimetypes/audio/mp4.desktop
+++ mimetypes/audio/mp4.desktop
@@ -31,6 +31,7 @@
 Comment[hi]=MPEG-4 ऑडियो
 Comment[hr]=MPEG-4 zvuk
 Comment[hu]=MPEG-4-hangfájl
+Comment[id]=Audio MPEG-4 
 Comment[is]=MPEG-4 hljóðskrá
 Comment[it]=Audio MPEG-4
 Comment[ja]=MPEG-4 オーディオ
--- mimetypes/audio/x-wav.desktop
+++ mimetypes/audio/x-wav.desktop
@@ -32,6 +32,7 @@
 Comment[hi]=WAV ऑडियो
 Comment[hr]=WAV zvuk
 Comment[hu]=WAV-hangfájl
+Comment[id]=Audio WAV
 Comment[is]=WAV hljóðskrá
 Comment[it]=Audio WAV
 Comment[ja]=WAV オーディオ
--- mimetypes/audio/x-mp2.desktop
+++ mimetypes/audio/x-mp2.desktop
@@ -29,6 +29,7 @@
 Comment[hi]=एमपीईजी लेयर 2 ऑडियो
 Comment[hr]=MPEG 2 zvuk
 Comment[hu]=MPEG Layer 2-hangfájl
+Comment[id]=Audio MPEG Layer 2
 Comment[is]=MPEG teg. 2 hljóðskrá
 Comment[it]=Audio MPEG layer 2
 Comment[ja]=MPEG Layer 2 オーディオ
--- mimetypes/audio/vorbis.desktop
+++ mimetypes/audio/vorbis.desktop
@@ -31,6 +31,7 @@
 Comment[hi]=ऑग वॉर्बिस ऑडियो
 Comment[hr]=Ogg Vorbis zvuk
 Comment[hu]=Ogg Vorbis-hangfájl
+Comment[id]=Audio Ogg Vorbis
 Comment[is]=Ogg Vorbis hljóðskrá
 Comment[it]=Audio Ogg Vorbis
 Comment[ja]=Ogg Vorbis オーディオ
--- mimetypes/audio/x-mp3.desktop
+++ mimetypes/audio/x-mp3.desktop
@@ -33,6 +33,7 @@
 Comment[hi]=MPEG लेयर 3 ऑडियो
 Comment[hr]=MPEG 3 zvuk
 Comment[hu]=MP3-hangfájl
+Comment[id]=Audio MPEG Layer 3
 Comment[is]=Mp3 hljóðskrá
 Comment[it]=Audio MPEG layer 3
 Comment[ja]=MPEG Layer 3 オーディオ
--- mimetypes/audio/ac3.desktop
+++ mimetypes/audio/ac3.desktop
@@ -33,6 +33,7 @@
 Comment[hi]=डॉल्बी AC3 ध्वनि
 Comment[hr]=Dolby AC3 zvuk
 Comment[hu]=Dolby AC3-hangfájl
+Comment[id]=Audio Dolby AC3
 Comment[is]=Dolby AC3 hljóðskrá
 Comment[it]=Suono Dolby AC3
 Comment[ja]=ドルビー AC3 サウンド
--- mimetypes/multipart/x-mixed-replace.desktop
+++ mimetypes/multipart/x-mixed-replace.desktop
@@ -28,6 +28,7 @@
 Comment[hi]=स्ट्रीम ऑफ डाटा (सर्वर पुश)
 Comment[hr]=Protok podataka (guran od poslužitelja)
 Comment[hu]=Sugárzott adatfolyam (kiszolgálóról)
+Comment[id]=Data Stream (Server Push)
 Comment[is]=Gagnastraumur
 Comment[it]=Flusso di dati (Server Push)
 Comment[ja]=データストリーム (サーバプッシュ)
--- mimetypes/multipart/mixed.desktop
+++ mimetypes/multipart/mixed.desktop
@@ -30,6 +30,7 @@
 Comment[hi]=कम्पाउंड दस्तावेज़
 Comment[hr]=Složeni dokument
 Comment[hu]=Összetett dokumentumok
+Comment[id]=Dokumen Gabungan
 Comment[is]=Samsett skjal
 Comment[it]=Documento composto
 Comment[ja]=合成ドキュメント
--- mimetypes/image/x-portable-pixmap.desktop
+++ mimetypes/image/x-portable-pixmap.desktop
@@ -22,7 +22,7 @@
 Comment[es]=Imagen portable Pixmap
 Comment[et]=Portable pikselraster-pildifail
 Comment[eu]=Pixmap irudi eramangarria
-Comment[fa]=تصویر نگاشت تصویر دانه‌ای حمل پذیر
+Comment[fa]=تصویر نگاشت تصویر دانه‌ای حمل‌پذیر
 Comment[fi]=Portable Pixmap -kuva
 Comment[fr]=Image Pixmap portable
 Comment[fy]=Portable Pixmap-ôfbylding
@@ -32,6 +32,7 @@
 Comment[hi]=पोर्टेबल पिक्समेप छवि
 Comment[hr]=Portabilna PixMap slika
 Comment[hu]=PPM-kép
+Comment[id]=Gambar Pixmap Portabel
 Comment[is]=Skráarsnið GIMP forritsins (PPI)
 Comment[it]=Immagine Portable Pixmap
 Comment[ja]=ポータブルピックスマップ画像
--- mimetypes/image/x-xcf-gimp.desktop
+++ mimetypes/image/x-xcf-gimp.desktop
@@ -27,6 +27,7 @@
 Comment[hi]=गिम्प नेटिव छवि फॉर्मेट
 Comment[hr]=GIMP prirodni oblik slike
 Comment[hu]=GIMP-kép
+Comment[id]=Format Gambar Native GIMP
 Comment[is]=Skráarsnið GIMP forritsins
 Comment[it]=Immagine in formato nativo GIMP
 Comment[ja]=GIMP ネイティブ画像フォーマット
--- mimetypes/image/x-jng.desktop
+++ mimetypes/image/x-jng.desktop
@@ -33,6 +33,7 @@
 Comment[hi]=JNG छवि
 Comment[hr]=JNG slika
 Comment[hu]=JNG-kép
+Comment[id]=Gambar JNG
 Comment[is]=JNG mynd
 Comment[it]=Immagine JNG
 Comment[ja]=JNG イメージ
--- mimetypes/image/png.desktop
+++ mimetypes/image/png.desktop
@@ -33,6 +33,7 @@
 Comment[hi]=PNG छवि
 Comment[hr]=PNG slika
 Comment[hu]=PNG-kép
+Comment[id]=Gambar PNG
 Comment[is]=PNG mynd
 Comment[it]=Immagine PNG
 Comment[ja]=PNG 画像
--- mimetypes/image/jpeg.desktop
+++ mimetypes/image/jpeg.desktop
@@ -33,6 +33,7 @@
 Comment[hi]=JPEG छवि
 Comment[hr]=JPEG slika
 Comment[hu]=JPEG-kép
+Comment[id]=Gambar JPEG
 Comment[is]=JPEG mynd
 Comment[it]=Immagine JPEG
 Comment[ja]=JPEG 画像
--- mimetypes/image/x-vnd.trolltech.qpicture.desktop
+++ mimetypes/image/x-vnd.trolltech.qpicture.desktop
@@ -32,6 +32,7 @@
 Comment[hi]=क्यूपिक्चर मेटाफ़ाइल
 Comment[hr]=QPicture metadatoteka
 Comment[hu]=QPicture-metafájl
+Comment[id]=Metafile QPicture
 Comment[is]=QPicture lýsiskrá
 Comment[it]=Metafile QPicture
 Comment[ja]=QPicture メタファイル
--- mimetypes/image/x-vnd.adobe.photoshop.desktop
+++ mimetypes/image/x-vnd.adobe.photoshop.desktop
@@ -33,6 +33,7 @@
 Comment[hi]=एडोब फोटोशॉप छवि 
 Comment[hr]=Adobe Photoshop slika
 Comment[hu]=Adobe Photoshop-kép
+Comment[id]=Gambar Adobe Photoshop
 Comment[is]=Adobe Photoshop mynd
 Comment[it]=Immagine Adobe Photoshop
 Comment[ja]=Adobe Photoshop 画像
--- mimetypes/image/jp2.desktop
+++ mimetypes/image/jp2.desktop
@@ -33,6 +33,7 @@
 Comment[hi]=JPEG 2000 छवि
 Comment[hr]=JPEG 2000 slika
 Comment[hu]=JPEG 2000-kép
+Comment[id]=Gambar JPEG 2000
 Comment[is]=JPEG 2000 mynd
 Comment[it]=Immagine JPEG 2000
 Comment[ja]=JPEG 2000 画像
--- mimetypes/image/x-xbm.desktop
+++ mimetypes/image/x-xbm.desktop
@@ -33,6 +33,7 @@
 Comment[hi]=X बिटमेप छवि
 Comment[hr]=X BitMap slika
 Comment[hu]=XBM-kép
+Comment[id]=Gambar X BitMap
 Comment[is]=X BitMap mynd
 Comment[it]=Immagine X BitMap
 Comment[ja]=X ビットマップ画像
--- mimetypes/image/x-eps.desktop
+++ mimetypes/image/x-eps.desktop
@@ -33,6 +33,7 @@
 Comment[hi]=एनकेप्सुलेटेड पोस्टस्क्रिप्ट छवि
 Comment[hr]=PostScript enkapsulirana slika
 Comment[hu]=Encapsulated PostScript-kép
+Comment[id]=Gambar Encapsulated PostScript
 Comment[is]=Postscript skjal (encapsulated)
 Comment[it]=Immagine Encapsulated PostScript
 Comment[ja]=Encapsulated PostScript イメージ
--- mimetypes/image/x-targa.desktop
+++ mimetypes/image/x-targa.desktop
@@ -33,6 +33,7 @@
 Comment[hi]=ट्रूविज़न टार्गा छवि
 Comment[hr]=Truevision Targa slika
 Comment[hu]=Truevision Targa-kép
+Comment[id]=Gambar Truevision Targa
 Comment[is]=Truevision Targa mynd
 Comment[it]=Immagine Truevision Targa
 Comment[ja]=トゥルービジョン Targa 画像
--- mimetypes/image/x-exr.desktop
+++ mimetypes/image/x-exr.desktop
@@ -30,6 +30,7 @@
 Comment[hi]=आईएलएम ईएक्सआर छवि
 Comment[hr]=ILM EXR slika
 Comment[hu]=ILM EXR-kép
+Comment[id]=Gambar ILM EXR
 Comment[is]=ILM EXR mynd
 Comment[it]=Immagine EXR ILM
 Comment[ja]=ILM EXR イメージ
--- mimetypes/image/gif.desktop
+++ mimetypes/image/gif.desktop
@@ -33,6 +33,7 @@
 Comment[hi]=GIF छवि
 Comment[hr]=GIF slika
 Comment[hu]=GIF-kép
+Comment[id]=Gambar GIF
 Comment[is]=GIF mynd
 Comment[it]=Immagine GIF
 Comment[ja]=GIF 画像
--- mimetypes/image/x-msod.desktop
+++ mimetypes/image/x-msod.desktop
@@ -32,6 +32,7 @@
 Comment[hi]=माइक्रोसॉफ्ट ऑफिस छवि
 Comment[hr]=Microsoft Office crtež
 Comment[hu]=Microsoft Office-ábra
+Comment[id]=Gambar Microsoft Office
 Comment[is]=Microsoft Office teikning
 Comment[it]=Disegno Microsoft Office
 Comment[km]=គំនូរ Microsoft Office
--- mimetypes/image/x-xpm.desktop
+++ mimetypes/image/x-xpm.desktop
@@ -33,6 +33,7 @@
 Comment[hi]=X पिक्समेप छवि
 Comment[hr]=X PixMap slika
 Comment[hu]=XPM-kép
+Comment[id]=Gambar X PixMap
 Comment[is]=X PixMap mynd
 Comment[it]=Immagine X PixMap
 Comment[ja]=X ピックスマップ画像
--- mimetypes/image/x-djvu-2.desktop
+++ mimetypes/image/x-djvu-2.desktop
@@ -26,6 +26,7 @@
 Comment[he]=מסמך DjVu
 Comment[hr]=DjVu dokument
 Comment[hu]=DjVu-dokumentum
+Comment[id]=Dokumen DjVu
 Comment[is]=DjVu skjal
 Comment[it]=Documento DjVu
 Comment[ja]=DjVu ドキュメント
@@ -33,6 +34,7 @@
 Comment[ko]=DjVu 문서
 Comment[lb]=DjVu-Dokument
 Comment[lt]=DjVu dokumentas
+Comment[lv]=DjVu dokuments
 Comment[mk]=DjVu-документ
 Comment[ms]=Dokumen DjVu
 Comment[nb]=DjVu-dokument
--- mimetypes/image/x-djvu.desktop
+++ mimetypes/image/x-djvu.desktop
@@ -26,6 +26,7 @@
 Comment[he]=מסמך DjVu
 Comment[hr]=DjVu dokument
 Comment[hu]=DjVu-dokumentum
+Comment[id]=Dokumen DjVu
 Comment[is]=DjVu skjal
 Comment[it]=Documento DjVu
 Comment[ja]=DjVu ドキュメント
@@ -33,6 +34,7 @@
 Comment[ko]=DjVu 문서
 Comment[lb]=DjVu-Dokument
 Comment[lt]=DjVu dokumentas
+Comment[lv]=DjVu dokuments
 Comment[mk]=DjVu-документ
 Comment[ms]=Dokumen DjVu
 Comment[nb]=DjVu-dokument
--- mimetypes/image/x-rgb.desktop
+++ mimetypes/image/x-rgb.desktop
@@ -31,6 +31,7 @@
 Comment[hi]=एसजीआई छवि (आरजीबी)
 Comment[hr]=SGI slika (RGB)
 Comment[hu]=SGI-kép (RGB)
+Comment[id]=Gambar SGI (RGB)
 Comment[is]=SGI mynd (RGB)
 Comment[it]=Immagine SGI (RGB)
 Comment[ja]=SGI 画像 (RGB)
--- mimetypes/image/x-portable-greymap.desktop
+++ mimetypes/image/x-portable-greymap.desktop
@@ -22,7 +22,7 @@
 Comment[es]=Imagen portable Graymap
 Comment[et]=Portable Graymap pildifail
 Comment[eu]=Graymap irudi eramangarria
-Comment[fa]=تصویر نگاشت خاکستری حمل پذیر
+Comment[fa]=تصویر نگاشت خاکستری حمل‌پذیر
 Comment[fi]=Portable Graymap -kuva
 Comment[fr]=Image Graymap portable
 Comment[fy]=Portable Graymap-ôfbylding
@@ -32,6 +32,7 @@
 Comment[hi]=पोर्टेबल ग्रेमेप छवि
 Comment[hr]=Portabilna slika u sivim tonovima
 Comment[hu]=PGM-kép
+Comment[id]=Gambar Graymap Portabel
 Comment[is]=Skráarsnið GIMP forritsins (PGI)
 Comment[it]=Immagine Portable Graymap
 Comment[ja]=ポータブルグレイマップ画像
--- mimetypes/image/x-ico.desktop
+++ mimetypes/image/x-ico.desktop
@@ -33,6 +33,7 @@
 Comment[hi]=विंडोज़ आईकन
 Comment[hr]=Windows ikona
 Comment[hu]=Windows-ikon
+Comment[id]=icon Windows
 Comment[is]=Windows táknmynd
 Comment[it]=Icona Windows
 Comment[ja]=Windows アイコン
--- mimetypes/image/x-photo-cd.desktop
+++ mimetypes/image/x-photo-cd.desktop
@@ -33,6 +33,7 @@
 Comment[hi]=फोटोसीडी छवि
 Comment[hr]=PhotoCD slika
 Comment[hu]=PhotoCD-kép
+Comment[id]=Gambar PhotoCD
 Comment[is]=PhotoCD mynd
 Comment[it]=Immagine PhotoCD
 Comment[ja]=PhotoCD 画像
--- mimetypes/image/x-bmp.desktop
+++ mimetypes/image/x-bmp.desktop
@@ -33,6 +33,7 @@
 Comment[hi]=BMP छवि 
 Comment[hr]=BMP slika
 Comment[hu]=BMP-kép
+Comment[id]=Gambar BMP
 Comment[is]=BMP mynd
 Comment[it]=Immagine BMP
 Comment[ja]=BMP 画像
--- mimetypes/image/fax-g3.desktop
+++ mimetypes/image/fax-g3.desktop
@@ -33,6 +33,7 @@
 Comment[hi]=CCITT G3 फ़ैक्स
 Comment[hr]=CCITT G3 faks
 Comment[hu]=CCITT G3-faxfájl
+Comment[id]=Faks CCITT g3
 Comment[is]=CCITT G3 fax
 Comment[it]=Fax CCITT G3
 Comment[ja]=CCITT G3 fax
--- mimetypes/image/x-portable-bitmap.desktop
+++ mimetypes/image/x-portable-bitmap.desktop
@@ -22,7 +22,7 @@
 Comment[es]=Imagen Bitmap portable
 Comment[et]=Portable bittraster-pildifail
 Comment[eu]=Bitmap irudi eramangarria
-Comment[fa]=تصویر نگاشت بیت حمل پذیر
+Comment[fa]=تصویر نگاشت بیت حمل‌پذیر
 Comment[fi]=Portable Bitmap -kuva
 Comment[fr]=Image Bitmap portable
 Comment[fy]=Portable Bitmap-ôfbylding
@@ -32,6 +32,7 @@
 Comment[hi]=पोर्टेबल बिटमेप छवि
 Comment[hr]=Portabilna bitmap slika
 Comment[hu]=PBM-kép
+Comment[id]=Gambar Bitmap Portabel
 Comment[is]=Skráarsnið GIMP forritsins (PBI)
 Comment[it]=Immagine Portable Bitmap
 Comment[ja]=ポータブルビットマップ画像
--- mimetypes/image/x-raw.desktop
+++ mimetypes/image/x-raw.desktop
@@ -20,12 +20,14 @@
 Comment[fy]=RAW-fototastelôfbylding
 Comment[hr]=RAW slika kamere
 Comment[hu]=RAW-képfájl
+Comment[id]=Gambar Kamera RAW
 Comment[is]=RAW ljósmynd
 Comment[it]=Immagine fotocamera grezza
 Comment[ja]=RAW カメラ画像
 Comment[km]=រូបភាព​កាមេរា RAW
 Comment[lb]=Onbehandelt Kamerabild (RAW)
 Comment[lt]=RAW foto atvaizdas
+Comment[lv]=RAW kameras attēls
 Comment[mk]=RAW-слика од камера
 Comment[ms]=Imej Kamera RAW
 Comment[nb]=RAW-kamerabilde
--- mimetypes/image/x-pcx.desktop
+++ mimetypes/image/x-pcx.desktop
@@ -33,6 +33,7 @@
 Comment[hi]=PCX छवि
 Comment[hr]=PCX slika
 Comment[hu]=PCX-kép
+Comment[id]=Gambar PCX
 Comment[is]=PCX mynd
 Comment[it]=Immagine PCX
 Comment[ja]=PCX 画像
--- mimetypes/image/x-xfig.desktop
+++ mimetypes/image/x-xfig.desktop
@@ -33,6 +33,7 @@
 Comment[hi]=XFig फ़ाइल
 Comment[hr]=Xfig datoteka
 Comment[hu]=XFig-fájl
+Comment[id]=Berkas XFig
 Comment[is]=XFig skrá
 Comment[it]=File XFig
 Comment[ja]=XFig ファイル
--- mimetypes/image/fits.desktop
+++ mimetypes/image/fits.desktop
@@ -25,12 +25,14 @@
 Comment[he]=תמונת FITS
 Comment[hr]=FITS slika
 Comment[hu]=FITS-kép
+Comment[id]=Gambar FITS
 Comment[is]=FITS mynd
 Comment[it]=Immagine FITS
 Comment[ja]=FITS 画像
 Comment[km]=រូបភាព FITS
 Comment[lb]=FITS-Bild
 Comment[lt]=FITS paveiksliukas
+Comment[lv]=FITS attēls
 Comment[mk]=FITS-слика
 Comment[ms]=Imej FITS
 Comment[nb]=FITS-bildeg
--- mimetypes/image/pjpeg.desktop
+++ mimetypes/image/pjpeg.desktop
@@ -34,6 +34,7 @@
 Comment[hi]=JPEG छवि
 Comment[hr]=JPEG slika
 Comment[hu]=JPEG-kép
+Comment[id]=Gambar JPEG
 Comment[is]=JPEG mynd
 Comment[it]=Immagine JPEG
 Comment[ja]=JPEG 画像
--- mimetypes/allfiles.desktop
+++ mimetypes/allfiles.desktop
@@ -31,6 +31,7 @@
 Comment[hi]=सभी फ़ाइलें
 Comment[hr]=Sve datoteke
 Comment[hu]=Minden fájl
+Comment[id]=Semua Berkas
 Comment[is]=Allar skrár
 Comment[it]=Tutti i file
 Comment[ja]=すべてのファイル
--- mimetypes/application/chm.desktop
+++ mimetypes/application/chm.desktop
@@ -20,12 +20,14 @@
 Comment[he]=מסמך עזרת HTML
 Comment[hr]=HTML dokument pomoći
 Comment[hu]=HTML formátumú dokumentáció
+Comment[id]=Dokumen Bantuan HTML
 Comment[is]=HTML hjálparskrá
 Comment[it]=Documento HTML della guida
 Comment[ja]=HTML ヘルプドキュメント
 Comment[km]=ឯកសារ​ជំនួយ HTML
 Comment[lb]=HTML-Hëllefsdokument
 Comment[lt]=HTML pagalbos dokumentas
+Comment[lv]=HTML palīdzības dokuments
 Comment[mk]=HTML-документ за помош
 Comment[ms]=Dokumen Bantuan HTML
 Comment[nb]=HTML hjelp-dokument
--- mimetypes/application/x-graphite.desktop
+++ mimetypes/application/x-graphite.desktop
@@ -31,6 +31,7 @@
 Comment[hi]=ग्रेफाइट साइंटिफिक ग्राफ
 Comment[hr]=Graphite znanstveni grafikoni
 Comment[hu]=Graphite grafikon
+Comment[id]=Grafik Graphite Scientific
 Comment[is]=Graphite gröf - myndræn framsetning gagna
 Comment[it]=Grafico scientifico Graphite
 Comment[ja]=Graphite 科学技術用グラフ
--- mimetypes/application/x-pkcs12.desktop
+++ mimetypes/application/x-pkcs12.desktop
@@ -20,7 +20,7 @@
 Comment[es]=Paquete de certificado PKCS#12
 Comment[et]=PKCS#12 sertifikaatide kogum
 Comment[eu]=PKCS#12 ziurtagiri multzoa
-Comment[fa]=بستۀ گواهینامه PKCS#12
+Comment[fa]=بستۀ گواهینامۀ PKCS#12
 Comment[fi]=PKCS#12-sertifikaattikokoelma
 Comment[fr]=Ensemble de certificats PKCS#12
 Comment[fy]=PKCS#12 sertifikaatbondel
@@ -30,6 +30,7 @@
 Comment[hi]=PKCS#12 प्रमाणीकरण बंडल
 Comment[hr]=PKCS#12 komplet potvrdi
 Comment[hu]=PKCS#12 tanúsítványcsomag
+Comment[id]=Bundel Sertifikat PKCS#12
 Comment[it]=Insieme di certificati PKCS#12
 Comment[ja]=PKCS#12 証明書バンドル
 Comment[km]=បាច់​វិញ្ញាបនបត្រ PKCS#12
--- mimetypes/application/sieve.desktop
+++ mimetypes/application/sieve.desktop
@@ -20,7 +20,7 @@
 Comment[es]=Script de filtro de correo SIEVE
 Comment[et]=SIEVE e-kirjade filtri skript
 Comment[eu]=Posta iragazteko SIEVE script-a
-Comment[fa]=دست‌نوشته پالایۀ نامۀ SIEVE
+Comment[fa]=دست‌نوشتۀ پالایۀ نامۀ SIEVE
 Comment[fi]=SIEVE-sähköpostisuodin
 Comment[fr]=Script de filtre de courrier SIEVE
 Comment[fy]=Filterskript foar SIEVE Mail
@@ -29,6 +29,7 @@
 Comment[hi]=SIEVE मेल फ़िल्टर स्क्रिप्ट
 Comment[hr]=SIEVE skripta filtra pošte
 Comment[hu]=SIEVE e-mail-szűrő szkript
+Comment[id]=Skrip Filter Mail SIEVE
 Comment[is]=SIEVE Póstsíu skrifta
 Comment[it]=Script filtro di posta SIEVE
 Comment[ja]=SIEVE メールフィルタスクリプト
--- mimetypes/application/x-tex-pk.desktop
+++ mimetypes/application/x-tex-pk.desktop
@@ -28,6 +28,7 @@
 Comment[hi]=पैक्ड फ़ॉन्ट
 Comment[hr]=Zapakirani font
 Comment[hu]=Csomagolt betűtípusfájl
+Comment[id]=Font Terpaket
 Comment[is]=Þjöppuð leturskrá
 Comment[it]=Tipo di carattere compresso
 Comment[ja]=パックされたフォント
--- mimetypes/application/mathml+xml.desktop
+++ mimetypes/application/mathml+xml.desktop
@@ -34,6 +34,7 @@
 Comment[hi]=मैथएमएल (MathML) दस्तावेज़
 Comment[hr]=MathML dokument
 Comment[hu]=MathML dokumentum
+Comment[id]=Dokumen MathML
 Comment[is]=MathML skjal
 Comment[it]=Documento MathML
 Comment[ja]=MathML ドキュメント
--- mimetypes/application/x-zerosize.desktop
+++ mimetypes/application/x-zerosize.desktop
@@ -29,6 +29,7 @@
 Comment[hi]=रिक्त दस्तावेज़
 Comment[hr]=Prazan dokument
 Comment[hu]=Üres dokumentum
+Comment[id]=Dokumen Kosong
 Comment[is]=Tómt skjal
 Comment[it]=Documento vuoto
 Comment[ja]=空のドキュメント
--- mimetypes/application/x-lyx.desktop
+++ mimetypes/application/x-lyx.desktop
@@ -29,6 +29,7 @@
 Comment[hi]=LyX दस्तावेज़
 Comment[hr]=LyX dokument
 Comment[hu]=LyX-dokumentum
+Comment[id]=Dokumen LyX
 Comment[is]=LyX skjal
 Comment[it]=Documento LyX
 Comment[ja]=Lyx ドキュメント
--- mimetypes/application/x-font-speedo.desktop
+++ mimetypes/application/x-font-speedo.desktop
@@ -33,6 +33,7 @@
 Comment[hi]=स्पीडो फ़ॉन्ट
 Comment[hr]=Speedo font
 Comment[hu]=Speedo-betűtípus
+Comment[id]=Font Speedo
 Comment[is]=Speedo letur
 Comment[it]=Tipo di carattere Speedo
 Comment[ja]=Speedo フォント
--- mimetypes/application/x-kword.desktop
+++ mimetypes/application/x-kword.desktop
@@ -34,6 +34,7 @@
 Comment[hi]=केवर्ड दस्तावेज़
 Comment[hr]=KWord dokument
 Comment[hu]=KWord-dokumentum
+Comment[id]=Dokumen KWord
 Comment[is]=KWord skjal
 Comment[it]=Documento KWord
 Comment[ja]=KWord ドキュメント
--- mimetypes/application/x-vnd.kde.kexi.desktop
+++ mimetypes/application/x-vnd.kde.kexi.desktop
@@ -34,6 +34,7 @@
 Comment[hi]=केक्साई प्रोजेक्ट फ़ाइल
 Comment[hr]=Kexi Project datoteka
 Comment[hu]=Kexi-projektfájl
+Comment[id]=Berkas Proyek Kexi
 Comment[is]=Kexi Verkefnaskjal
 Comment[it]=File di progetto Kexi
 Comment[ja]=Kexi プロジェクト ファイル
--- mimetypes/application/x-cpio.desktop
+++ mimetypes/application/x-cpio.desktop
@@ -33,6 +33,7 @@
 Comment[hi]=CPIO आर्काइव
 Comment[hr]=CPIO arhiva
 Comment[hu]=CPIO-archívum
+Comment[id]=Arsip CPIO
 Comment[is]=CPIO safnskrá
 Comment[it]=Archivio CPIO
 Comment[ja]=CPIO アーカイブ
--- mimetypes/application/x-magicpoint.desktop
+++ mimetypes/application/x-magicpoint.desktop
@@ -23,7 +23,7 @@
 Comment[es]=Presentación de MagicPoint
 Comment[et]=MagicPointi esitlus
 Comment[eu]=MagicPoint aurkezpena
-Comment[fa]=ارائه نقطه جادویی
+Comment[fa]=ارائۀ نقطۀ جادویی
 Comment[fi]=MagicPoint-esitys
 Comment[fr]=Présentation Magicpoint
 Comment[fy]=MagicPoint Presentaasje
@@ -33,6 +33,7 @@
 Comment[hi]=मेजिकपाइंट प्रेजेन्टेशन
 Comment[hr]=MagicPoint prezentacija
 Comment[hu]=MagicPoint-bemutató
+Comment[id]=Presentasi MagicPoint
 Comment[is]=Magicpoint kynning
 Comment[it]=Presentazione MagicPoint
 Comment[ja]=MagicPoint プレゼンテーション
--- mimetypes/application/vnd.mozilla.xul+xml.desktop
+++ mimetypes/application/vnd.mozilla.xul+xml.desktop
@@ -30,6 +30,7 @@
 Comment[hi]=मोज़िला एक्सयूएल फ़ाइल
 Comment[hr]=Mozilla XUL datoteka
 Comment[hu]=Mozilla XUL-fájl
+Comment[id]=Berkas XUL Mozilla
 Comment[is]=Mozilla XUL skrá
 Comment[it]=File XUL Mozilla
 Comment[ja]=Mozilla XUL ファイル
--- mimetypes/application/x-mplayer2.desktop
+++ mimetypes/application/x-mplayer2.desktop
@@ -14,7 +14,8 @@
 Comment[el]=Τύπος Microsoft Media
 Comment[es]=Formator de medios de Microsoft
 Comment[et]=Microsoft Media
-Comment[fa]=قالب میکروسافت ورد
+Comment[fa]=قالب میکروسافت Media
+Comment[fi]=Microsoft Media
 Comment[fr]=Format Microsoft Media
 Comment[hr]=Microsoft Media oblik
 Comment[hu]=Microsoft Media-fájl
@@ -22,6 +23,7 @@
 Comment[it]=Formato Microsoft Media
 Comment[ja]=Microsoft メディアフォーマット
 Comment[km]=ទ្រង់ទ្រាយ Microsoft មេឌៀ
+Comment[lv]=Microsoft Media formāts
 Comment[mk]=Microsoft Media-формат
 Comment[nb]=Microsoft Media-format
 Comment[nds]=Microsoft-Medienformaat
--- mimetypes/application/x-bittorrent.desktop
+++ mimetypes/application/x-bittorrent.desktop
@@ -10,7 +10,7 @@
 Comment[ca]=Descàrrega BitTorrent
 Comment[cs]=Stáhnutí BitTorrent
 Comment[cy]=Lawrlwythiad BitTorrent
-Comment[da]=BitTorrent nedtagning
+Comment[da]=BitTorrent download
 Comment[de]=BitTorrent-Download
 Comment[el]=Λήψη BitTorrent
 Comment[eo]=BitTorrent-ŝarĝo
@@ -27,6 +27,7 @@
 Comment[hi]=बिट टोरेन्ट डाउनलोड
 Comment[hr]=BitTorrent preuzimanje
 Comment[hu]=BitTorrent letöltés
+Comment[id]=Download BitTorrent
 Comment[is]=BitTorrent niðurhal
 Comment[it]=Scaricamento BitTorrent
 Comment[ja]=BitTorrent ダウンロード
--- mimetypes/application/x-sharedlib.desktop
+++ mimetypes/application/x-sharedlib.desktop
@@ -28,6 +28,7 @@
 Comment[hi]=शेयर्ड लाइब्रेरी
 Comment[hr]=Dijeljena biblioteka
 Comment[hu]=Megosztott programkönyvtár
+Comment[id]=Pustaka Berbagi
 Comment[is]=Samnýtt stefjusafn
 Comment[it]=Libreria condivisa
 Comment[ja]=共有ライブラリ
--- mimetypes/application/vnd.sun.xml.base.desktop
+++ mimetypes/application/vnd.sun.xml.base.desktop
@@ -22,12 +22,14 @@
 Comment[he]=בסיס נתונים של OpenOffice.org
 Comment[hr]=OpenOffice.org baza podataka
 Comment[hu]=OpenOffice.org-adatbázis
+Comment[id]=Basis Data OpenOffice.org
 Comment[is]=OpenOffice.org gagnagrunnur
 Comment[it]=Banca dati OpenOffice.org
 Comment[ja]=OpenOffice.org データベース
 Comment[km]=មូលដ្ឋាន​ទិន្នន័យ OpenOffice.org
 Comment[lb]=OpenOffice.org-Datebank
 Comment[lt]=OpenOffice.org duomenų bazė
+Comment[lv]=OpenOffice.org datu bāze
 Comment[mk]=OpenOffice.org-база на податоци
 Comment[ms]=Pangkalan Data OpenOffice.org
 Comment[nb]=OpenOffice.org database
--- mimetypes/application/x-linguist.desktop
+++ mimetypes/application/x-linguist.desktop
@@ -21,7 +21,7 @@
 Comment[es]=Archivo fuente de traducción de Qt
 Comment[et]=Qt Translationi lähtetekst
 Comment[eu]=Qt itzulpenerako iturburuko fitxategia
-Comment[fa]=پروندۀ منیع ترجمهQt
+Comment[fa]=پروندۀ منیع ترجمۀQt
 Comment[fi]=Qr-käännöstiedosto
 Comment[fr]=Fichier source de traduction QT
 Comment[fy]=Qt Fertaal Boarnetriem
@@ -31,6 +31,7 @@
 Comment[hi]=क्यूटी अनुवाद स्रोत फ़ाइल
 Comment[hr]=Qt datoteka prijevoda izvornog koda
 Comment[hu]=Qt fordítási forrásfájl
+Comment[id]=Berkas Sumber Terjemahan Qt
 Comment[is]=Qt Translation frumforrit
 Comment[it]=File sorgente traduzioni Qt
 Comment[ja]=Qt 翻訳 ソースファイル
--- mimetypes/application/x-tbz.desktop
+++ mimetypes/application/x-tbz.desktop
@@ -21,12 +21,14 @@
 Comment[he]=ארכיון Tar דחוס ע"י Bzip
 Comment[hr]=BZip TAR arhiva
 Comment[hu]=Bzip2.tar-archívum
+Comment[id]=Arsip Tar Bzip2
 Comment[is]=Bzip2 þjappað tar-safn
 Comment[it]=Archivio Tar compresso con Bzip2
 Comment[ja]=Bzip2 圧縮された Tar アーカイブ
 Comment[km]=ប័ណ្ណសារ Bzip2-ed Tar
 Comment[lb]=Mat Bzip2 kompriméierten Tar-Archiv
 Comment[lt]=Tar archyvas, suglaudintas su bzip2
+Comment[lv]=Ar Bzip2 saspiests TAR arhīvs
 Comment[mk]=Bzip-увана Tar-архива
 Comment[ms]=Arkib Tar diBzip2kan
 Comment[nb]=Bzip2-et tar-arkiv
--- mimetypes/application/x-hancomword.desktop
+++ mimetypes/application/x-hancomword.desktop
@@ -33,6 +33,7 @@
 Comment[hi]=हैनकॉम वर्ड दस्तावेज़
 Comment[hr]=HancomWord dokument
 Comment[hu]=HancomWord-dokumentum
+Comment[id]=Dokumen HancomWord
 Comment[is]=HancomWord skjal
 Comment[it]=Documento HancomWord
 Comment[ja]=HancomWord ドキュメント
--- mimetypes/application/x-zip-compressed.desktop
+++ mimetypes/application/x-zip-compressed.desktop
@@ -32,6 +32,7 @@
 Comment[hi]=ज़िप आर्काइव
 Comment[hr]=ZIP arhiva
 Comment[hu]=Zip-archívum
+Comment[id]=Arsip Zip
 Comment[is]=Zip safnskrá
 Comment[it]=Archivio Zip
 Comment[ja]=Zip アーカイブ
--- mimetypes/application/x-kugar.desktop
+++ mimetypes/application/x-kugar.desktop
@@ -23,7 +23,7 @@
 Comment[es]=Archivo de datos de Kugar
 Comment[et]=Kugari andmefail
 Comment[eu]=Kugar datu-fitxategia
-Comment[fa]=پروندۀ داده Kugar
+Comment[fa]=پروندۀ دادۀ Kugar
 Comment[fi]=Kugar-datatiedosto
 Comment[fr]=Fichier de données Kugar
 Comment[fy]=Kugar Datatriem
@@ -33,6 +33,7 @@
 Comment[hi]=कुगर डाटा फ़ाइल
 Comment[hr]=Kugar datoteka s podacima
 Comment[hu]=Kugar-adatfájl
+Comment[id]=Berkas Data Kugar
 Comment[is]=Kugar gagnaskrá
 Comment[it]=File di dati Kugar
 Comment[ja]=Kugar データファイル
--- mimetypes/application/x-gzip.desktop
+++ mimetypes/application/x-gzip.desktop
@@ -30,6 +30,7 @@
 Comment[hi]=Gzip फ़ाइल
 Comment[hr]=Gzip datoteka
 Comment[hu]=Gzip-fájl
+Comment[id]=Berkas Gzip
 Comment[is]=Þjöppuð skrá (gzip)
 Comment[it]=File Gzip
 Comment[ja]=Gzip ファイル
--- mimetypes/application/vnd.palm.desktop
+++ mimetypes/application/vnd.palm.desktop
@@ -32,6 +32,7 @@
 Comment[hi]=पाम दस्तावेज़
 Comment[hr]=Palm dokument
 Comment[hu]=Palm-dokumentum
+Comment[id]=Dokumen Palm
 Comment[is]=Palm skjal
 Comment[it]=Documento Palm
 Comment[ja]=Palm ドキュメント
@@ -39,7 +40,7 @@
 Comment[ko]=팜 문서
 Comment[lb]=Palm-Dokument
 Comment[lt]=Palm dokumentas
-Comment[lv]=Palm Dokuments
+Comment[lv]=Palm dokuments
 Comment[mk]=Palm-документ
 Comment[mn]=Palm Баримт
 Comment[ms]=Dokumen Palm
--- mimetypes/application/x-cue.desktop
+++ mimetypes/application/x-cue.desktop
@@ -21,6 +21,7 @@
 Comment[gl]=Folla Cue de CDRWIN 
 Comment[hi]=सीडीआरविन क्यू-शीट
 Comment[hu]=CDRWIN-es Cue-fájl
+Comment[id]=Cue-Sheet CDRWIN
 Comment[is]=CDRWIN cue-skjal
 Comment[it]=Cuesheet di CDRWin
 Comment[lb]=CDRWIN-Cue-Datei
--- mimetypes/application/x-tzo.desktop
+++ mimetypes/application/x-tzo.desktop
@@ -29,7 +29,7 @@
 Comment[hi]=लज़ाप्ड टार आर्काइव
 Comment[hr]=Lzopped tar arhiva
 Comment[hu]=Lzop tar-archívum
-Comment[id]=Archive Lzopped Tar
+Comment[id]=Arsip Lzopped Tar
 Comment[is]=Lzop-þjappað tar-safn
 Comment[it]=Archivio Tar compresso con Lz
 Comment[ja]=Lzop された Tar アーカイブ
--- mimetypes/application/x-font-ghostscript.desktop
+++ mimetypes/application/x-font-ghostscript.desktop
@@ -33,6 +33,7 @@
 Comment[hi]=घोस्टस्क्रिप्ट फ़ॉन्ट
 Comment[hr]=Ghostscript font
 Comment[hu]=Ghostscript betűtípus
+Comment[id]=Font Ghostscript
 Comment[is]=Gostscript letur
 Comment[it]=Tipo di carattere Ghostscript
 Comment[ja]=GhostScript フォント
--- mimetypes/application/vnd.oasis.opendocument.spreadsheet-template.desktop
+++ mimetypes/application/vnd.oasis.opendocument.spreadsheet-template.desktop
@@ -19,7 +19,7 @@
 Comment[es]=Plantilla de hoja de cálculo de OpenDocument OASIS
 Comment[et]=OASIS-e OpenDocument arvutustabeli mall
 Comment[eu]=OASIS OpenDocument kalkulu-orriaren txantiloia
-Comment[fa]=قالب صفحه گسترده سندباز OASIS
+Comment[fa]=قالب صفحه گستردۀ سندباز OASIS
 Comment[fi]=OASIS OpenDocument -taulukkopohja
 Comment[fr]=Modèle de feuille de calcul OASIS OpenDocument
 Comment[fy]=OASIS OpenDocument rekkenboerdsjabloan
@@ -27,12 +27,14 @@
 Comment[hi]=ओएसिस ओपनडाकुमेंट स्प्रेडशीट टैम्प्लेट
 Comment[hr]=OASIS OpenDocument predložak proračunske tablice
 Comment[hu]=OASIS-munkafüzet-sablon
+Comment[id]=Template Lembar Kerja OASIS OpenDocument
 Comment[is]=OASIS OpenDocument töflureikningsnið
 Comment[it]=Modello di foglio di calcolo OASIS OpenDocument
 Comment[ja]=OASIS OpenDocument 表計算 テンプレート
 Comment[km]=ពុម្ព​សៀវភៅបញ្ជី OASIS OpenDocument
 Comment[lb]=OASIS-OpenDocument-Tabellëkalkulatiounsvirlag
 Comment[lt]=OASIS OpenDocument elektroninės lentelės šablonas
+Comment[lv]=OASIS OpenDocument tabullapas šablons
 Comment[mk]=OASIS OpenDocument-образец за табеларна пресметка
 Comment[ms]=Templat Lembaran Hamparan OpenDocument OASIS
 Comment[nb]=OASIS Åpent dokument regnearkmal
--- mimetypes/application/x-python-bytecode.desktop
+++ mimetypes/application/x-python-bytecode.desktop
@@ -32,6 +32,7 @@
 Comment[hi]=पायथन बाइटकोड
 Comment[hr]=Python bajt kod
 Comment[hu]=Python-bájtkód
+Comment[id]=Bytecode Python
 Comment[is]=Python bætakóði
 Comment[it]=Bytecode Python
 Comment[ja]=Python バイトコード
--- mimetypes/application/x-dbase.desktop
+++ mimetypes/application/x-dbase.desktop
@@ -33,6 +33,7 @@
 Comment[hi]=डीबेस दस्तावेज़
 Comment[hr]=dBASE dokument
 Comment[hu]=dBASE-dokumentum
+Comment[id]=Dokumen dBASE
 Comment[is]=dBASE skjal
 Comment[it]=Documento dBASE
 Comment[ja]=dBASE ドキュメント
--- mimetypes/application/x-webarchive.desktop
+++ mimetypes/application/x-webarchive.desktop
@@ -25,6 +25,7 @@
 Comment[hi]=वेब अभिलेख
 Comment[hr]=Web arhiva
 Comment[hu]=Webarchívum
+Comment[id]=Arsip Web
 Comment[is]=Vef safnskrá
 Comment[it]=Archivio Web
 Comment[ja]=Web アーカイブ
--- mimetypes/application/x-kformula.desktop
+++ mimetypes/application/x-kformula.desktop
@@ -33,6 +33,7 @@
 Comment[hi]=केफॉर्मूला दस्तावेज़
 Comment[hr]=KFormula dokument
 Comment[hu]=KFormula-dokumentum
+Comment[id]=Dokumen KFormula
 Comment[is]=KFormula skjal
 Comment[it]=Documento KFormula
 Comment[ja]=KFormula ドキュメント
--- mimetypes/application/x-troff.desktop
+++ mimetypes/application/x-troff.desktop
@@ -29,6 +29,7 @@
 Comment[hi]=ट्राफ दस्तावेज़ 
 Comment[hr]=Troff dokument
 Comment[hu]=Troff-dokumentum
+Comment[id]=Dokumen Troff
 Comment[is]=Troff skjal
 Comment[it]=Documento Troff
 Comment[ja]=Troff ドキュメント
--- mimetypes/application/pgp.desktop
+++ mimetypes/application/pgp.desktop
@@ -30,6 +30,7 @@
 Comment[hi]=पीजीपी एनक्रिप्टेड या हस्ताक्षरित संदेश
 Comment[hr]=PGP šifrirana ili potpisana poruka
 Comment[hu]=PGP-vel titkosított vagy aláírt üzenet
+Comment[id]=Pesan Terenkripsi atau Tertanda PGP
 Comment[is]=PGP dulritað eða undirritað skeyti
 Comment[it]=Messaggio cifrato o firmato PGP
 Comment[ja]=PGP で暗号化または署名されたメッセージ
--- mimetypes/application/vnd.oasis.opendocument.text.desktop
+++ mimetypes/application/vnd.oasis.opendocument.text.desktop
@@ -27,12 +27,14 @@
 Comment[hi]=ओएसिस ओपनडाकुमेंट पाठ
 Comment[hr]=OASIS OpenDocument tekst
 Comment[hu]=OASIS-dokumentum
+Comment[id]=Teks OASIS OpenDocument
 Comment[is]=OASIS OpenDocument texti
 Comment[it]=Documento OASIS OpenDocument
 Comment[ja]=OASIS OpenDocument テキスト
 Comment[km]=អត្ថបទ OASIS OpenDocument
 Comment[lb]=OASIS-OpenDocument-Text
 Comment[lt]=OASIS OpenDocument tekstas
+Comment[lv]=OASIS OpenDocument teksts
 Comment[mk]=OASIS OpenDocument-текст
 Comment[ms]=Teks OpenDocument OASIS
 Comment[nb]=OASIS Åpent dokument tekst
--- mimetypes/application/x-ruby.desktop
+++ mimetypes/application/x-ruby.desktop
@@ -27,6 +27,7 @@
 Comment[hi]=रूबी प्रोग्राम
 Comment[hr]=Ruby program
 Comment[hu]=Ruby-program
+Comment[id]=Program Ruby
 Comment[is]=Ruby forrit
 Comment[it]=Programma Ruby
 Comment[ja]=Ruby プログラム
--- mimetypes/application/x-gettext.desktop
+++ mimetypes/application/x-gettext.desktop
@@ -29,6 +29,7 @@
 Comment[hi]=जीएनयू गेटेक्सट सूचना सारिणी
 Comment[hr]=GNU Gettext katalog poruka
 Comment[hu]=GNU Gettext üzenetfájl
+Comment[id]=Katalog Pesan GNU Gettext
 Comment[is]=GNU þýðingarskrá
 Comment[it]=Catalogo messaggi GNU Gettext
 Comment[ja]=GNU Gettext メッセージ カタログ
--- mimetypes/application/x-kspread.desktop
+++ mimetypes/application/x-kspread.desktop
@@ -34,6 +34,7 @@
 Comment[hi]=केस्प्रेड दस्तावेज़
 Comment[hr]=KSpread dokument
 Comment[hu]=KSpread-dokumentum
+Comment[id]=Dokumen KSpread
 Comment[is]=KSpread skjal
 Comment[it]=Documento KSpread
 Comment[ja]=KSpread ドキュメント
--- mimetypes/application/x-tgif.desktop
+++ mimetypes/application/x-tgif.desktop
@@ -29,6 +29,7 @@
 Comment[hi]=TGIF दस्तावेज़
 Comment[hr]=TGIF dokument
 Comment[hu]=TGIF-dokumentum
+Comment[id]=Dokumen TGIF
 Comment[is]=TIGF skjal
 Comment[it]=Documento TGIF
 Comment[ja]=TGIF ドキュメント
--- mimetypes/application/vnd.oasis.opendocument.text-template.desktop
+++ mimetypes/application/vnd.oasis.opendocument.text-template.desktop
@@ -27,12 +27,14 @@
 Comment[hi]=ओएसिस ओपनडाकुमेंट पाठ टैम्प्लेट
 Comment[hr]=OASIS OpenDocument predložak teksta
 Comment[hu]=OASIS-dokumentumsablon
+Comment[id]=Template Teks OASIS OpenDocument
 Comment[is]=OASIS OpenDocument textasnið
 Comment[it]=Modello di documento di testo OASIS OpenDocument
 Comment[ja]=OASIS OpenDocument テキスト テンプレート
 Comment[km]=ពុម្ព​អត្ថបទ OASIS OpenDocument
 Comment[lb]=OASIS-OpenDocument-Textvirlag
 Comment[lt]=OASIS OpenDocument teksto dokumento šablonas
+Comment[lv]=OASIS OpenDocument teksta šablons
 Comment[mk]=OASIS OpenDocument-образец за текст
 Comment[ms]=Templat Teks OpenDocument OASIS
 Comment[nb]=OASIS Åpent dokument tekstmal
--- mimetypes/application/vnd.sun.xml.writer.master.desktop
+++ mimetypes/application/vnd.sun.xml.writer.master.desktop
@@ -25,6 +25,7 @@
 Comment[hi]=ओपनआफिस.ऑर्ग मुख्य पाठ दस्तावेज़
 Comment[hr]=OpenOffice.org glavni tekstualni dokument
 Comment[hu]=OpenOffice.org szöveges fődokumentum
+Comment[id]=Dokumen Master Teks OpenOffice.org
 Comment[is]=OpenOffice.org yfirtextaskjal
 Comment[it]=Documento di testo master OpenOffice.org
 Comment[ja]=OpenOffice.org マスターテキストドキュメント
--- mimetypes/application/x-font-otf.desktop
+++ mimetypes/application/x-font-otf.desktop
@@ -29,6 +29,7 @@
 Comment[hi]=ओपन टाइप फ़ॉन्ट
 Comment[hr]=OpenType font
 Comment[hu]=OpenType-betűtípus
+Comment[id]=Font OpenType
 Comment[is]=OpenType letur
 Comment[it]=Tipo di carattere OpenType
 Comment[ja]=OpenType フォント
--- mimetypes/application/vnd.sun.xml.calc.template.desktop
+++ mimetypes/application/vnd.sun.xml.calc.template.desktop
@@ -17,7 +17,7 @@
 Comment[es]=Plantilla de hoja de cálculo de OpenOffice.org
 Comment[et]=OpenOffice.org-i arvutustabeli mall
 Comment[eu]=OpenOffice.org kalkulu-orrien txantiloia
-Comment[fa]=قالب صفحه گسترده OpenOffice.org
+Comment[fa]=قالب صفحه گستردۀ OpenOffice.org
 Comment[fi]=OpenOffice.org-taulukkopohja
 Comment[fr]=Modèle de feuille de calcul OpenOffice.org
 Comment[fy]=OpenOffice.org Rekkenboerd Sjabloan
@@ -26,6 +26,7 @@
 Comment[hi]=ओपनआफिस.ऑर्ग स्प्रेडशीट टैम्प्लेट
 Comment[hr]=OpenOffice.org predložak proračunske tablice
 Comment[hu]=OpenOffice.org-munkafüzetsablon
+Comment[id]=Template Lembar Kerja OpenOffice.org
 Comment[is]=OpenOffice.org töflusniðmát
 Comment[it]=Modello di foglio di calcolo OpenOffice.org
 Comment[ja]=OpenOffice.org 表計算テンプレート
@@ -33,6 +34,7 @@
 Comment[ko]=Openoffice.org 스프레드시트 본
 Comment[lb]=OpenOffice.org-Tabellëblatvirlag
 Comment[lt]=OpenOffice.org elektroninė lentelė
+Comment[lv]=OpenOffice.org tabullapas šablons
 Comment[mk]=OpenOffice.org-образец за табеларна пресметка
 Comment[ms]=OpenOffice.org Templat Lembaran Kerja
 Comment[nb]=OpenOffice.org-regnearkmal
--- mimetypes/application/x-bzip.desktop
+++ mimetypes/application/x-bzip.desktop
@@ -30,6 +30,7 @@
 Comment[hi]=Bzip फ़ाइल
 Comment[hr]=Bzip datoteka
 Comment[hu]=Bzip-fájl
+Comment[id]=Berkas Bzip
 Comment[is]=Þjöppuð skrá (bzip)
 Comment[it]=File Bzip
 Comment[ja]=Bzip ファイル
--- mimetypes/application/xml-dtd.desktop
+++ mimetypes/application/xml-dtd.desktop
@@ -21,12 +21,14 @@
 Comment[he]=מסמך XML DTD
 Comment[hr]=XML DTD dokument
 Comment[hu]=XML DTD-dokumentum
+Comment[id]=Dokumen XML DTD
 Comment[is]=XML DTD skjal
 Comment[it]=Documento XML DTD
 Comment[ja]=XML DTD ドキュメント
 Comment[km]=ឯកសារ XML DTD
 Comment[lb]=XML-DTD-Dokument
 Comment[lt]=XML DTD dokumentas
+Comment[lv]=XML DTD dokuments
 Comment[mk]=XML DTD-документ
 Comment[ms]=Dokumen XML DTD
 Comment[nb]=XML DTD-dokument
--- mimetypes/application/x-arc.desktop
+++ mimetypes/application/x-arc.desktop
@@ -33,6 +33,7 @@
 Comment[hi]=ARC आर्काइव
 Comment[hr]=ARC arhiva
 Comment[hu]=ARC-archívum
+Comment[id]=Arsip ARC
 Comment[is]=ARC safnskrá
 Comment[it]=Archivio ARC
 Comment[ja]=ARC アーカイブ
--- mimetypes/application/pkcs7-mime.desktop
+++ mimetypes/application/pkcs7-mime.desktop
@@ -21,7 +21,7 @@
 Comment[es]=Datos formateados PKCS#7 (S/MIME)
 Comment[et]=PKCS#7 (S/MIME) vormindatud andmed
 Comment[eu]=PKCS#7 (S/MIME) datu formateatuak
-Comment[fa]=دادۀ قالب‌بندی شدۀ)PKCS#7 (S/MIME
+Comment[fa]=دادۀ قالب‌بندی ‌شدۀ)PKCS#7 (S/MIME
 Comment[fi]=PKCS#7 (S/MIME) -muotoinen tieto
 Comment[fr]=Données formatées PKCS#7 (S/MIME)
 Comment[fy]=PKCS#7-opmakke data (S/MIME)
@@ -31,6 +31,7 @@
 Comment[hi]=PKCS#7 (S/MIME) फार्मेटेड डाटा
 Comment[hr]=PKCS#7 (S/MIME) oblikovani podaci
 Comment[hu]=PKCS#7 (S/MIME) formázott adatok
+Comment[id]=Data Terformat PKCS#7 (S/MIME)
 Comment[is]=PKCS#7 (S/MIME) formuð gögn
 Comment[it]=Dati formattati PKCS#7 (S/MIME)
 Comment[ja]=PKCS#7 (S/MIME) フォーマットデータ
--- mimetypes/application/x-zoo.desktop
+++ mimetypes/application/x-zoo.desktop
@@ -33,6 +33,7 @@
 Comment[hi]=ज़ू आर्काइव
 Comment[hr]=ZOO arhiva
 Comment[hu]=Zoo-archívum
+Comment[id]=Arsip Zoo
 Comment[is]=Zoo safnskrá
 Comment[it]=Archivio Zoo
 Comment[ja]=Zoo アーカイブ
--- mimetypes/application/vnd.sun.xml.writer.template.desktop
+++ mimetypes/application/vnd.sun.xml.writer.template.desktop
@@ -26,6 +26,7 @@
 Comment[hi]=ओपनआफिस.ऑर्ग पाठ दस्तावेज़ टैम्प्लेट
 Comment[hr]=OpenOffice.org predložak tekstualnog dokumenta
 Comment[hu]=OpenOffice.org szöveges dokumentumsablon
+Comment[id]=Template Dokumen Teks OpenOffice.org
 Comment[is]=OpenOffice.org textaskjalssniðmát
 Comment[it]=Modello di documento di testo OpenOffice.org
 Comment[ja]=OpenOffice.org テキストドキュメント テンプレート
--- mimetypes/application/x-font-pcf.desktop
+++ mimetypes/application/x-font-pcf.desktop
@@ -32,6 +32,7 @@
 Comment[hi]=PCF बिटमेप फ़ॉन्ट
 Comment[hr]=PCF bitmap font
 Comment[hu]=PCF bittérképes betűtípus
+Comment[id]=Font Bitmap PCF
 Comment[is]=PCF bitamynda letur
 Comment[it]=Tipo di carattere bitmap PCF
 Comment[ja]=PCF ビットマップフォント
--- mimetypes/application/x-arj.desktop
+++ mimetypes/application/x-arj.desktop
@@ -33,6 +33,7 @@
 Comment[hi]=ARJ आर्काइव
 Comment[hr]=ARJ arhiva
 Comment[hu]=ARJ-archívum
+Comment[id]=Arsip ARJ
 Comment[is]=ARJ safnskrá
 Comment[it]=Archivio ARJ
 Comment[ja]=ARJ アーカイブ
--- mimetypes/application/vnd.oasis.opendocument.presentation-template.desktop
+++ mimetypes/application/vnd.oasis.opendocument.presentation-template.desktop
@@ -27,12 +27,14 @@
 Comment[hi]=ओएसिस ओपनडाकुमेंट प्रेजेंटेशन टैम्प्लेट
 Comment[hr]=OASIS OpenDocument predložak prezentacije
 Comment[hu]=OASIS-bemutatósablon
+Comment[id]=Template Presentasi OASIS OpenDocument
 Comment[is]=OASIS OpenDocument kynningarsnið
 Comment[it]=Modello di presentazione OASIS OpenDocument
 Comment[ja]=OASIS OpenDocument プレゼンテーション テンプレート
 Comment[km]=ពុម្ព​ការបង្ហាញ OASIS OpenDocument
 Comment[lb]=OASIS-OpenDocument-Präsentatiounsvirlag
 Comment[lt]=OASIS OpenDocument pateikčių šablonas
+Comment[lv]=OASIS OpenDocument prezentācijas šablons
 Comment[mk]=OASIS OpenDocument-образец за презентација
 Comment[ms]=Templat Persembahan OpenDocument OASIS
 Comment[nb]=OASIS Åpent dokument presentasjonsmal
--- mimetypes/application/x-trash.desktop
+++ mimetypes/application/x-trash.desktop
@@ -32,6 +32,7 @@
 Comment[hi]=बैकअप फ़ाइल
 Comment[hr]=Sigurnosna kopija
 Comment[hu]=Biztonsági másolat
+Comment[id]=Berkas Backup
 Comment[is]=Öryggisafrit
 Comment[it]=File di backup
 Comment[ja]=バックアップファイル
--- mimetypes/application/x-kpresenter.desktop
+++ mimetypes/application/x-kpresenter.desktop
@@ -34,6 +34,7 @@
 Comment[hi]=केप्रेजेंटर दस्तावेज़
 Comment[hr]=KPresenter dokument
 Comment[hu]=KPresenter-dokumentum
+Comment[id]=Dokumen KPresenter
 Comment[is]=KPresenter kynningarskjal
 Comment[it]=Documento KPresenter
 Comment[ja]=KPresenter ファイル
--- mimetypes/application/x-siag.desktop
+++ mimetypes/application/x-siag.desktop
@@ -19,7 +19,7 @@
 Comment[es]=Hoja de cálculo de Siag
 Comment[et]=Siagi tabel
 Comment[eu]=Siag kalkulu-orria
-Comment[fa]=صفحه گسترده Siag
+Comment[fa]=صفحه گستردۀ Siag
 Comment[fi]=Siag-taulukko
 Comment[fr]=Feuille de calcul Siag
 Comment[fy]=Siag Rekkenboerd
--- mimetypes/application/x-ace.desktop
+++ mimetypes/application/x-ace.desktop
@@ -33,6 +33,7 @@
 Comment[hi]=ACE आर्काइव
 Comment[hr]=ACE arhiva
 Comment[hu]=ACE-archívum
+Comment[id]=Arsip ACE
 Comment[is]=ACE safnskrá
 Comment[it]=Archivio ACE
 Comment[ja]=ACE アーカイブ
--- mimetypes/application/x-kde-wallet.desktop
+++ mimetypes/application/x-kde-wallet.desktop
@@ -29,6 +29,7 @@
 Comment[hi]=केडीई बटुआ फ़ाइल
 Comment[hr]=KDE Wallet datoteka
 Comment[hu]=KDE digitális noteszfájl
+Comment[id]=Berkas Dompet KDE
 Comment[is]=KDE veski
 Comment[it]=File portafogli di KDE
 Comment[ja]=KDE ウォレット ファイル
--- mimetypes/application/x-mimearchive.desktop
+++ mimetypes/application/x-mimearchive.desktop
@@ -24,6 +24,7 @@
 Comment[hi]=माइम एनकेप्सुलेटेड वेब अभिलेख
 Comment[hr]=Mime enkapsulirana web arhiva
 Comment[hu]=MIME-webarchívum
+Comment[id]=Arsip Web Mime Encapsulated
 Comment[is]=Mime innifalinn vef safnskrá
 Comment[it]=Archivio Web incapsulato MIME
 Comment[km]=ប័ណ្ណសារ Mime Encapsulated Web
--- mimetypes/application/x-deb.desktop
+++ mimetypes/application/x-deb.desktop
@@ -32,6 +32,7 @@
 Comment[hi]=डेबिएन पैकेज
 Comment[hr]=Debian paket
 Comment[hu]=Debian-csomag
+Comment[id]=Paket Debian
 Comment[is]=Debian pakki
 Comment[it]=Pacchetto Debian
 Comment[ja]=Debian パッケージ
--- mimetypes/application/x-ica.desktop
+++ mimetypes/application/x-ica.desktop
@@ -24,6 +24,7 @@
 Comment[hi]=सिट्रिक्स आईसीए क्लाएंट कॉन्फ़िगरेशन
 Comment[hr]=Citrix ICA konfiguracija klijenta
 Comment[hu]=Citrix ICA-kliensbeállítás
+Comment[id]=Konfigurasi Klien Citrix ICA
 Comment[is]=Stillingar Citrix ICA biðlarans
 Comment[it]=Configurazione client Citrix ICA
 Comment[ja]=Citrix ICA クライアント設定
--- mimetypes/application/x-rpm.desktop
+++ mimetypes/application/x-rpm.desktop
@@ -32,6 +32,7 @@
 Comment[hi]=आरपीएम पैकेज फ़ाइल
 Comment[hr]=RPM paket
 Comment[hu]=RPM-csomag
+Comment[id]=Berkas Paket RPM
 Comment[is]=RPM pakki
 Comment[it]=File pacchetto RPM
 Comment[ja]=RPM パッケージファイル
--- mimetypes/application/x-java-jnlp-file.desktop
+++ mimetypes/application/x-java-jnlp-file.desktop
@@ -20,12 +20,14 @@
 Comment[he]=יישומון WebStart של Java
 Comment[hr]=Java Web Start aplikacija
 Comment[hu]=Java Web Start-alkalmazás
+Comment[id]=Aplikasi Java Web Start
 Comment[is]=Java Web Start forrit
 Comment[it]=Applicazione Java Web Start
 Comment[ja]=Java Web Start アプリケーション
 Comment[km]=កម្មវិធី​ចាប់ផ្ដើម​បណ្ដាញ Java
 Comment[lb]=Java-Web-Start Programm
 Comment[lt]=Java Web Start programa
+Comment[lv]=Java Web Start aplikācija
 Comment[mk]=Java Web Start-апликација
 Comment[ms]=Aplikasi Mula Web Java
 Comment[nb]=Java Webstart-program
--- mimetypes/application/x-designer.desktop
+++ mimetypes/application/x-designer.desktop
@@ -29,6 +29,7 @@
 Comment[hi]=क्यूटी डीजाइनर फ़ाइल
 Comment[hr]=Qt Designer datoteka
 Comment[hu]=Qt Designer-fájl
+Comment[id]=Berkas Qt Designer
 Comment[is]=Qt Designer skrá
 Comment[it]=File Qt Designer
 Comment[ja]=Qt Designer ファイル
@@ -36,7 +37,7 @@
 Comment[ko]=Qt 디자이너 파일
 Comment[lb]=Qt-Designer-Datei
 Comment[lt]=Qt Designer byla
-Comment[lv]=Qt Dizainera Fails
+Comment[lv]=Qt dizainera fails
 Comment[mk]=Qt Designer-датотека
 Comment[mn]=Qt-Designer-Файл
 Comment[ms]=Fail Qt Designer
--- mimetypes/application/vnd.sun.xml.writer.desktop
+++ mimetypes/application/vnd.sun.xml.writer.desktop
@@ -29,6 +29,7 @@
 Comment[hi]=स्टारआफिस.ऑर्ग पाठ दस्तावेज़
 Comment[hr]=OpenOffice.org tekstualni dokument
 Comment[hu]=OpenOffice.org szöveges dokumentum
+Comment[id]=Dokumen Teks OpenOffice.org
 Comment[is]=OpenOffice.org textaskjal
 Comment[it]=Documento di testo OpenOffice.org
 Comment[ja]=OpenOffice.org テキストドキュメント
--- mimetypes/application/x-perl.desktop
+++ mimetypes/application/x-perl.desktop
@@ -24,6 +24,7 @@
 Comment[hi]=पर्ल प्रोग्राम
 Comment[hr]=Perl program
 Comment[hu]=Perl-program
+Comment[id]=Program Perl
 Comment[is]=Perl forrit
 Comment[it]=Programma Perl
 Comment[ja]=Perl プログラム
--- mimetypes/application/x-java-applet.desktop
+++ mimetypes/application/x-java-applet.desktop
@@ -28,6 +28,7 @@
 Comment[hi]=जावा ऐपलेट
 Comment[hr]=Java aplet
 Comment[hu]=Java-kisalkalmazás
+Comment[id]=Applet Java
 Comment[it]=Applet Java
 Comment[ja]=Java アプレット
 Comment[km]=Java អាប់ភ្លេត
--- mimetypes/application/vnd.oasis.opendocument.graphics-template.desktop
+++ mimetypes/application/vnd.oasis.opendocument.graphics-template.desktop
@@ -27,12 +27,14 @@
 Comment[hi]=ओएसिस ओपनडाकुमेंट ग्राफ़िक्स टैम्प्लेट
 Comment[hr]=OASIS OpenDocument predložak grafika
 Comment[hu]=OASIS-ábrasablon
+Comment[id]=Template Grafik OASIS OpenDocument
 Comment[is]=OASIS OpenDocument grafísksnið
 Comment[it]=Modello di disegno OASIS OpenDocument
 Comment[ja]=OASIS OpenDocument 図形描画 テンプレート
 Comment[km]=ពុម្ព​ក្រាហ្វិក OASIS OpenDocument
 Comment[lb]=OASIS-OpenDocument-Grafikvirlag
 Comment[lt]=OASIS OpenDocument grafikos šablonas
+Comment[lv]=OASIS OpenDocument grafikas šablons
 Comment[mk]=OASIS OpenDocument-образец за графика
 Comment[ms]=Templat Grafik OpenDocukment OASIS
 Comment[nb]=OASIS Åpent dokument grafikkmal
--- mimetypes/application/vnd.oasis.opendocument.presentation.desktop
+++ mimetypes/application/vnd.oasis.opendocument.presentation.desktop
@@ -27,12 +27,14 @@
 Comment[hi]=ओएसिस ओपनडाकुमेंट प्रेजेंटेशन
 Comment[hr]=OASIS OpenDocument prezentacija
 Comment[hu]=OASIS-bemutató
+Comment[id]=Presentasi OASIS OpenDocument
 Comment[is]=OASIS OpenDocument kynning
 Comment[it]=Presentazione OASIS OpenDocument
 Comment[ja]=OASIS OpenDocument プレゼンテーション
 Comment[km]=ការ​បង្ហាញ OASIS OpenDocument
 Comment[lb]=OASIS-OpenDocument-Präsentatioun
 Comment[lt]=OASIS OpenDocument pateiktis
+Comment[lv]=OASIS OpenDocument prezentācija
 Comment[mk]=OASIS OpenDocument-презентација
 Comment[ms]=Persembahan OpenDocument OASIS
 Comment[nb]=OASIS Åpent dokumentpresentasjon
--- mimetypes/application/x-xliff.desktop
+++ mimetypes/application/x-xliff.desktop
@@ -26,6 +26,7 @@
 Comment[hi]=एक्सएलआईएफ़एफ़ अनुवाद फ़ाइल
 Comment[hr]=XLIFF prevoditeljska datoteka
 Comment[hu]=XLIFF fordítási fájl
+Comment[id]=Berkas Terjemahan XLIFF
 Comment[is]=XLIFF þýðingarskrá
 Comment[it]=File di traduzione XLIFF
 Comment[ja]=XLIFF 翻訳ファイル
--- mimetypes/application/x-karbon.desktop
+++ mimetypes/application/x-karbon.desktop
@@ -33,6 +33,7 @@
 Comment[hi]=कारबन14 दस्तावेज़
 Comment[hr]=Karbon14 dokument
 Comment[hu]=Karbon14-dokumentum
+Comment[id]=Dokumen Karbon14
 Comment[is]=Karbon14 skjal
 Comment[it]=Documento Karbon14
 Comment[ja]=Karbon14 ドキュメント
--- mimetypes/application/x-jar.desktop
+++ mimetypes/application/x-jar.desktop
@@ -33,7 +33,7 @@
 Comment[hi]=जावा आर्काइव
 Comment[hr]=Java arhiva
 Comment[hu]=Java-archívum
-Comment[id]=Archive Java
+Comment[id]=Arsip Java
 Comment[is]=Java safnskrá
 Comment[it]=Archivio Java
 Comment[ja]=Java アーカイブ
--- mimetypes/application/java.desktop
+++ mimetypes/application/java.desktop
@@ -31,7 +31,7 @@
 Comment[he]=מחלקת Java
 Comment[hi]=जावा क्लास
 Comment[hu]=Java osztály
-Comment[id]=Class Java
+Comment[id]=Kelas Java
 Comment[is]=Java klasi
 Comment[it]=Classe Java
 Comment[ja]=Java クラス
--- mimetypes/application/pgp-encrypted.desktop
+++ mimetypes/application/pgp-encrypted.desktop
@@ -31,6 +31,7 @@
 Comment[hi]=पीजीपी/माइम एनक्रिप्टेड मैसेज हेडर
 Comment[hr]=PGP/MIME šifrirano zaglavlje poruke
 Comment[hu]=PGP/MIME titkosított üzenetfejléc
+Comment[id]=Header Pesan Terenkripsi PGP/MIME
 Comment[is]=PGP/MIME dulritaður skeytahaus
 Comment[it]=Intestazione messaggio cifrato PGP/MIME
 Comment[ja]=PGP/MIME 符号化されたメッセージヘッダー
--- mimetypes/application/x-ogg.desktop
+++ mimetypes/application/x-ogg.desktop
@@ -32,6 +32,7 @@
 Comment[hi]=ऑग मल्टीमीडिया
 Comment[hr]=Ogg multimedija
 Comment[hu]=Ogg hangfájl
+Comment[id]=Multimedia Ogg
 Comment[is]=Ogg hljóðskrá
 Comment[it]=File multimediale Ogg
 Comment[ja]=Ogg マルチメディア
--- mimetypes/application/vnd.oasis.opendocument.image.desktop
+++ mimetypes/application/vnd.oasis.opendocument.image.desktop
@@ -27,12 +27,14 @@
 Comment[hi]=ओएसिस ओपनडाकुमेंट छवि
 Comment[hr]=OASIS OpenDocument slika
 Comment[hu]=OASIS-kép
+Comment[id]=Gambar OASIS OpenDocument
 Comment[is]=OASIS OpenDocument mynd
 Comment[it]=Immagine OASIS OpenDocument
 Comment[ja]=OASIS OpenDocument 画像
 Comment[km]=រូបភាព OASIS OpenDocument
 Comment[lb]=OASIS-OpenDocument-Bild
 Comment[lt]=OASIS OpenDocument paveikslėlis
+Comment[lv]=OASIS OpenDocument attēls
 Comment[mk]=OASIS OpenDocument-слика
 Comment[ms]=Imej OpenDocument OASIS
 Comment[nb]=OASIS Åpent dokumentbilde
--- mimetypes/application/vnd.sun.xml.impress.template.desktop
+++ mimetypes/application/vnd.sun.xml.impress.template.desktop
@@ -26,6 +26,7 @@
 Comment[hi]=ओपनआफिस.ऑर्ग प्रेजेंटेशन टैम्प्लेट
 Comment[hr]=OpenOffice.org predložak prezentacije
 Comment[hu]=OpenOffice.org-bemutatósablon
+Comment[id]=Template Presentasi OpenOffice.org
 Comment[is]=OpenOffice.org kynningarsniðmát
 Comment[it]=Modello di presentazione OpenOffice.org
 Comment[ja]=OpenOffice.org プレゼンテーション テンプレート
--- mimetypes/application/x-kivio.desktop
+++ mimetypes/application/x-kivio.desktop
@@ -34,6 +34,7 @@
 Comment[hi]=किवियो दस्तावेज़
 Comment[hr]=Kivio dokument
 Comment[hu]=Kivio-dokumentum
+Comment[id]=Dokumen Kivio
 Comment[is]=Kivio skjal
 Comment[it]=Documento Kivio
 Comment[ja]=Kivio ドキュメント
--- mimetypes/application/x-archive.desktop
+++ mimetypes/application/x-archive.desktop
@@ -30,6 +30,7 @@
 Comment[hi]=Ar आर्काइव
 Comment[hr]=Ar arhiva
 Comment[hu]=Ar-archívum
+Comment[id]=Arsip Ar
 Comment[is]=Ar safnskrá
 Comment[it]=Archivio Ar
 Comment[ja]=Ar アーカイブ
--- mimetypes/application/vnd.rn-realmedia.desktop
+++ mimetypes/application/vnd.rn-realmedia.desktop
@@ -33,6 +33,7 @@
 Comment[hi]=रीयलमीडिया फ़ाइल
 Comment[hr]=RealMedia datoteka
 Comment[hu]=RealMedia-fájl
+Comment[id]=Berkas RealMedia
 Comment[is]=RealMedia skrá
 Comment[it]=File RealMedia
 Comment[ja]=リアルメディア ファイル
--- mimetypes/application/x-rar.desktop
+++ mimetypes/application/x-rar.desktop
@@ -33,6 +33,7 @@
 Comment[hi]=Rar आर्काइव
 Comment[hr]=RAR arhiva
 Comment[hu]=RAR-archívum
+Comment[id]=Arsip Rar
 Comment[is]=Rar safnskrá
 Comment[it]=Archivio Rar
 Comment[ja]=Rar アーカイブ
--- mimetypes/application/vnd.stardivision.math.desktop
+++ mimetypes/application/vnd.stardivision.math.desktop
@@ -30,6 +30,7 @@
 Comment[hi]=ओपनआफिस मैथ दस्तावेज़
 Comment[hr]=StarOffice Math dokument
 Comment[hu]=StarOffice Math-dokumentum
+Comment[id]=Dokumen Math StarOffice
 Comment[is]=StarOffice Math skjal
 Comment[it]=Documento matematico StarOffice
 Comment[ja]=StarOffice Math ドキュメント
--- mimetypes/application/x-iso.desktop
+++ mimetypes/application/x-iso.desktop
@@ -27,6 +27,7 @@
 Comment[hi]=आईएसओ9660 इमेज़ फ़ाइल
 Comment[hr]=ISO9660 slika
 Comment[hu]=ISO9660-képmásfájl
+Comment[id]=Berkas ISO9660 Image
 Comment[is]=ISO9660 diskmynd
 Comment[it]=File immagine ISO9660
 Comment[ja]=ISO9660 イメージ ファイル
--- mimetypes/application/x-font-snf.desktop
+++ mimetypes/application/x-font-snf.desktop
@@ -32,6 +32,7 @@
 Comment[hi]=SNF बिटमेप फ़ॉन्ट
 Comment[hr]=SNF bitmap font
 Comment[hu]=SNF bittérképes betűtípus
+Comment[id]=Font Bitmap SNF
 Comment[is]=SNF Bitamynda letur
 Comment[it]=Tipo di carattere bitmap SNF
 Comment[ja]=SNF ビットマップフォント
--- mimetypes/application/pgp-keys.desktop
+++ mimetypes/application/pgp-keys.desktop
@@ -29,6 +29,7 @@
 Comment[hi]=ओपनपीजीपी की बंडल
 Comment[hr]=OpenPGP komplet ključeva
 Comment[hu]=OpenPGP kulcscsomag
+Comment[id]=Bundel Kunci OpenPGP
 Comment[is]=OpenPGP lyklakyppa
 Comment[it]=Mazzo di chiavi OpenPGP
 Comment[ja]=OpenPGP キーバンドル
--- mimetypes/application/x-compress.desktop
+++ mimetypes/application/x-compress.desktop
@@ -32,6 +32,7 @@
 Comment[hi]=यूनिक्स कंप्रेस्ड फ़ाइल
 Comment[hr]=Komprimirana UNIX datoteka
 Comment[hu]=UNIX tömörített fájl
+Comment[id]=Berkas Terkompresi UNIX
 Comment[is]=Þjöppuð skrá (compress)
 Comment[it]=File compresso UNIX
 Comment[ja]=UNIX 圧縮ファイル
--- mimetypes/application/msexcel.desktop
+++ mimetypes/application/msexcel.desktop
@@ -24,7 +24,7 @@
 Comment[es]=Hoja de cálculo de Microsoft Excel
 Comment[et]=Microsoft Exceli tabel
 Comment[eu]=Microsoft Excel kalkulu-orria
-Comment[fa]=صفحه گسترده میکروسافت اکسل
+Comment[fa]=صفحۀ گستردۀ میکروسافت اکسل
 Comment[fi]=Microsoft Excel -taulukko
 Comment[fr]=Feuille de calcul Microsoft Excel
 Comment[fy]=Microsoft Excel-Rekkenboerd
@@ -34,6 +34,7 @@
 Comment[hi]=माइक्रोसॉफ्ट एक्सेल स्प्रेडशीट
 Comment[hr]=Microsoft Excel proračunska tablica
 Comment[hu]=Microsoft Excel dokumentum
+Comment[id]=Lembar Kerja Microsoft Excel
 Comment[is]=Microsoft Excel tafla
 Comment[it]=Foglio di calcolo Microsoft Excel
 Comment[ja]=Microsoft Excel スプレッドシート
--- mimetypes/application/x-applixspread.desktop
+++ mimetypes/application/x-applixspread.desktop
@@ -23,7 +23,7 @@
 Comment[es]=Documento hoja de cálculo de Applix
 Comment[et]=Applixi arvutustabel
 Comment[eu]=Applix kalkulu-orria
-Comment[fa]=سند صفحه گسترده  Applix
+Comment[fa]=سند صفحات گستردۀ  Applix
 Comment[fi]=Applix taulukkolaskenta-asiakirja
 Comment[fr]=Document Applix Spreadsheets
 Comment[fy]=Applix Rekkenboerd dokumint
@@ -33,6 +33,7 @@
 Comment[hi]=एप्लिक्स स्प्रेडशीट्स दस्तावेज़
 Comment[hr]=Applix Spreadsheets dokument
 Comment[hu]=Applix Spreadsheets-dokumentum
+Comment[id]=Dokumen Applix Spreadsheets
 Comment[is]=Applix töflureiknisskjal
 Comment[it]=Documento Applix Spreadsheets
 Comment[ja]=Applix スプレッドシートドキュメント
@@ -40,7 +41,7 @@
 Comment[ko]=애플릭스 스프레드시트 문서
 Comment[lb]=Applix-Spreadsheets-Dokument
 Comment[lt]=Applix elektroninės lentelės dokumentas
-Comment[lv]=Applix izklājlapas dokuments
+Comment[lv]=Applix tabullapas dokuments
 Comment[mk]=Applix Spreadsheets-документ
 Comment[mn]=Applix-Tabellenkalkulations-Баримт
 Comment[ms]=Dokumen Hamparan Helaian Applix
--- mimetypes/application/x-font-ttc.desktop
+++ mimetypes/application/x-font-ttc.desktop
@@ -19,7 +19,7 @@
 Comment[es]=Colección de fuentes TrueType
 Comment[et]=TrueType fondikogu
 Comment[eu]=TrueType letra-tipoen bilduma
-Comment[fa]=مجموعه قلم حقیقی
+Comment[fa]=مجموعۀ قلم حقیقی
 Comment[fi]=TrueType-kirjasinkokoelma
 Comment[fr]=Jeu de polices de caractères Truetype
 Comment[fy]=TrueType lettertype Samling
@@ -28,6 +28,7 @@
 Comment[hi]=ट्रू टाइप फ़ॉन्ट संग्रह
 Comment[hr]=Zbirka TrueType font
 Comment[hu]=TrueType-betűtípuscsomag
+Comment[id]=Koleksi Font TrueType
 Comment[is]=TrueType letursafn
 Comment[it]=Raccolta tipi di carattere TrueType
 Comment[ja]=Truetype フォント コレクション
--- mimetypes/application/vnd.ms-excel.desktop
+++ mimetypes/application/vnd.ms-excel.desktop
@@ -22,7 +22,7 @@
 Comment[es]=Hoja de cálculo de Microsoft Excel
 Comment[et]=Microsoft Exceli tabel
 Comment[eu]=Microsoft Excel kalkulu-orria
-Comment[fa]=صفحه گسترده میکروسافت اکسل
+Comment[fa]=صفحۀ گستردۀ میکروسافت اکسل
 Comment[fi]=Microsoft Excel -taulukko
 Comment[fr]=Feuille de calcul Microsoft Excel
 Comment[fy]=Microsoft Excel-Rekkenboerd
@@ -32,6 +32,7 @@
 Comment[hi]=माइक्रोसॉफ्ट एक्सेल स्प्रेडशीट
 Comment[hr]=Microsoft Excel proračunska tablica
 Comment[hu]=Microsoft Excel dokumentum
+Comment[id]=Lembar Kerja Microsoft Excel
 Comment[is]=Microsoft Excel tafla
 Comment[it]=Foglio di calcolo Microsoft Excel
 Comment[ja]=Microsoft Excel スプレッドシート
--- mimetypes/application/x-bz2dvi.desktop
+++ mimetypes/application/x-bz2dvi.desktop
@@ -24,6 +24,7 @@
 Comment[hi]=बीजिप2 संपीडित डीवीआई फ़ाइल
 Comment[hr]=Bzip2 komprimirana DVI datoteka
 Comment[hu]=Bzip2-vel tömörített DVI-fájl
+Comment[id]=Berkas Bzip2 Compressed DVI
 Comment[is]=Bzip2 þjöppuð DVI skrá
 Comment[it]=File DVI compresso con Bzip2
 Comment[ja]=Bzip2 圧縮 DVI ファイル
--- mimetypes/application/x-7z.desktop
+++ mimetypes/application/x-7z.desktop
@@ -27,6 +27,7 @@
 Comment[hi]=7ज़िप अभिलेख
 Comment[hr]=7-ZIP arhiva
 Comment[hu]=7-Zip-archívum
+Comment[id]=Arsip 7-zip
 Comment[is]=7-Zip safnskrá
 Comment[it]=Archivio 7-Zip
 Comment[ja]=7-Zip アーカイブ
@@ -63,8 +64,3 @@
 Comment[zh_CN]=7-Zip 归档
 Comment[zh_HK]=7-Zip 壓縮檔
 Comment[zh_TW]=7-Zip 壓縮文件
-
-[Property::X-KDE-LocalProtocol]
-Type=QString
-Value=p7zip
-
--- mimetypes/application/x-font-ttf.desktop
+++ mimetypes/application/x-font-ttf.desktop
@@ -29,6 +29,7 @@
 Comment[hi]=ट्रू टाइप फ़ॉन्ट
 Comment[hr]=TrueType font
 Comment[hu]=TrueType-betűtípus
+Comment[id]=Font TrueType
 Comment[is]=TrueType letur
 Comment[it]=Tipo di carattere TrueType
 Comment[ja]=TrueType フォント
--- mimetypes/application/x-msaccess.desktop
+++ mimetypes/application/x-msaccess.desktop
@@ -32,6 +32,7 @@
 Comment[hi]=माइक्रोसॉफ्ट एक्सेस डाटाबेस
 Comment[hr]=Microsoft Accessa baza podataka
 Comment[hu]=Microsoft Access-adatbázis
+Comment[id]=Basis Data Microsoft Access
 Comment[is]=Microsoft Access gagnagrunnur
 Comment[it]=Banca dati Microsoft Access
 Comment[ja]=Microsoft Access データベース
--- mimetypes/application/x-zip.desktop
+++ mimetypes/application/x-zip.desktop
@@ -33,6 +33,7 @@
 Comment[hi]=ज़िप आर्काइव
 Comment[hr]=ZIP arhiva
 Comment[hu]=Zip-archívum
+Comment[id]=Arsip Zip
 Comment[is]=Zip safnskrá
 Comment[it]=Archivio Zip
 Comment[ja]=Zip アーカイブ
--- mimetypes/application/vnd.ms-powerpoint.desktop
+++ mimetypes/application/vnd.ms-powerpoint.desktop
@@ -32,6 +32,7 @@
 Comment[hi]=माइक्रोसाफ्ट पावरपाइंट प्रेजेंटेशन
 Comment[hr]=Microsoft PowerPointa prezentacija
 Comment[hu]=Microsoft PowerPoint dokumentum
+Comment[id]=Presentasi Microsoft PowerPoint
 Comment[is]=Microsoft PowerPoint kynning
 Comment[it]=Presentazione Microsoft PowerPoint
 Comment[ja]=Microsoft PowerPoint プレゼンテーション
--- mimetypes/application/x-kcsrc.desktop
+++ mimetypes/application/x-kcsrc.desktop
@@ -34,6 +34,7 @@
 Comment[hi]=केडीई रंग थीम
 Comment[hr]=KDE tema boja
 Comment[hu]=KDE színtéma
+Comment[id]=Tema Warna KDE
 Comment[is]=KDE litaþema
 Comment[it]=Tema di colori KDE
 Comment[ja]=KDE カラー テーマ
--- mimetypes/application/vnd.ms-word.desktop
+++ mimetypes/application/vnd.ms-word.desktop
@@ -32,6 +32,7 @@
 Comment[hi]=माइक्रोसॉफ्ट वर्ड दस्तावेज़
 Comment[hr]=Microsoft Word dokument
 Comment[hu]=Microsoft Word dokumentum
+Comment[id]=Dokumen Microsoft Word
 Comment[is]=Microsoft Word skjal
 Comment[it]=Documento Microsoft Word
 Comment[ja]=Microsoft Word ドキュメント
--- mimetypes/application/x-gzpostscript.desktop
+++ mimetypes/application/x-gzpostscript.desktop
@@ -28,6 +28,7 @@
 Comment[hi]=गजिप्ड पोस्टस्क्रिप्ट फ़ाइल
 Comment[hr]=Gzip-ana PostScript datoteka
 Comment[hu]=Gzip PostScript-fájl
+Comment[id]=Berkas Gzipped Postscript
 Comment[is]=gzip-þjappað Postscript skjal
 Comment[it]=File PostScript compresso con Gzip
 Comment[ja]=Gzip された Postscript ファイル
--- mimetypes/application/vnd.stardivision.impress.desktop
+++ mimetypes/application/vnd.stardivision.impress.desktop
@@ -23,7 +23,7 @@
 Comment[es]=Presentación Impress de StarOffice
 Comment[et]=StarOffice Impress'i esitlus
 Comment[eu]=StarOffice aurkezpena
-Comment[fa]=ارائه StarOffice Impress
+Comment[fa]=ارائۀ StarOffice Impress
 Comment[fi]=StarOffice Impress -esitys
 Comment[fr]=Présentation StarOffice Impress
 Comment[fy]=StarOffice Impress Presintaasje
@@ -33,6 +33,7 @@
 Comment[hi]=स्टारआफिस इम्प्रेस प्रेजेंटेशन
 Comment[hr]=StarOffice Impress prezentacija
 Comment[hu]=StarOffice Impress bemutató
+Comment[id]=Dokumen Presentasi StarOffice Impress
 Comment[is]=StarOffice Impress kynning
 Comment[it]=Presentazione StarOffice Impress
 Comment[ja]=StarOffice Impress プレゼンテーション
--- mimetypes/application/x-java.desktop
+++ mimetypes/application/x-java.desktop
@@ -32,7 +32,7 @@
 Comment[he]=מחלקת Java
 Comment[hi]=जावा क्लास
 Comment[hu]=Java osztály
-Comment[id]=Class Java
+Comment[id]=Kelas Java
 Comment[is]=Java klasi
 Comment[it]=Classe Java
 Comment[ja]=Java クラス
--- mimetypes/application/x-dvi.desktop
+++ mimetypes/application/x-dvi.desktop
@@ -18,7 +18,7 @@
 Comment[es]=Archivo TeX independiente del dispositivo
 Comment[et]=TeX seadmest sõltumatu fail
 Comment[eu]=Gailuengandik independientea den TeX fitxategia
-Comment[fa]=پروندۀ نابستگی دستگاه TeX
+Comment[fa]=پروندۀ مستقل دستگاه TeX
 Comment[fi]=TeX DVI -tiedosto
 Comment[fr]=Document DVI de TeX
 Comment[fy]=TeX Device Independent-triem
@@ -28,6 +28,7 @@
 Comment[hi]=TeX उपकरण इंडिपेंडेंट फ़ाइल
 Comment[hr]=TeX datoteka nezavisna od uređaja
 Comment[hu]=TeX eszközfüggetlen fájl
+Comment[id]=Berkas Device Independent TeX
 Comment[is]=TeX DVI skjal
 Comment[it]=File TeX DVI
 Comment[ja]=TeX Device Independen ファイル
@@ -35,7 +36,7 @@
 Comment[ko]=텍 장치에서 독립된 파일
 Comment[lb]=Gerät-onofhängeg Datei vum TeX (DVI)
 Comment[lt]=TeX nepriklausoma nuo įrengimų byla
-Comment[lv]=TeX Iekārtu Neatkarīgs fails
+Comment[lv]=TeX iekārtu neatkarīgs fails
 Comment[mk]=TeX-датотека независна од уред
 Comment[mn]=TeX-DVI-Файл
 Comment[ms]=Fail Peranti TeX Tanpa Kebergantungan
--- mimetypes/application/xhtml+xml.desktop
+++ mimetypes/application/xhtml+xml.desktop
@@ -29,6 +29,7 @@
 Comment[hi]=XHTML फेमिली दस्तावेज़
 Comment[hr]=Dokument iz XHTML porodice
 Comment[hu]=XHTML-dokumentum
+Comment[id]=Dokumen Keluarga XHTML
 Comment[is]=XHTML skjal
 Comment[it]=Documento famiglia XHTML
 Comment[ja]=XHTML ファミリドキュメント
--- mimetypes/application/vnd.sun.xml.calc.desktop
+++ mimetypes/application/vnd.sun.xml.calc.desktop
@@ -19,7 +19,7 @@
 Comment[es]=Hoja de cálculo de OpenOffice.org
 Comment[et]=OpenOffice.org-i arvutustabel
 Comment[eu]=OpenOffice.org kalkulu-orria
-Comment[fa]=صفحه گسترده OpenOffice.org
+Comment[fa]=صفحه گستردۀ OpenOffice.org
 Comment[fi]=OpenOffice.org-taulukko
 Comment[fr]=Feuille de calcul OpenOffice.org
 Comment[fy]=OpenOffice.org Rekkenboerd
@@ -29,6 +29,7 @@
 Comment[hi]=स्टारआफिस.ऑर्ग स्प्रेडशीट
 Comment[hr]=OpenOffice.org proračunska tablica
 Comment[hu]=OpenOffice.org-munkafüzet
+Comment[id]=Lembar Kerja OpenOffice.org
 Comment[is]=OpenOffice.org tafla
 Comment[it]=Foglio di calcolo OpenOffice.org
 Comment[ja]=OpenOffice.org 表計算
@@ -36,6 +37,7 @@
 Comment[ko]=Openoffice.org 스프레드시트
 Comment[lb]=OpenOffice.org-Tabellëblat
 Comment[lt]=OpenOffice.org elektroninė lentelė
+Comment[lv]=OpenOffice.org tabullapa
 Comment[mk]=OpenOffice.org-табеларна пресметка
 Comment[mn]=OpenOffice.org Хүснэгтэн боловсруулагч
 Comment[ms]=Hamparan helaian OpenOffice.org 
--- mimetypes/application/x-applixword.desktop
+++ mimetypes/application/x-applixword.desktop
@@ -33,6 +33,7 @@
 Comment[hi]=एप्लिक्स वर्ड्स दस्तावेज़
 Comment[hr]=Applix Words dokument
 Comment[hu]=Applix Words-dokumentum
+Comment[id]=Dokumen Applix  Words
 Comment[is]=Applix Words skjal
 Comment[it]=Documento Applix Words
 Comment[ja]=Applix ワードドキュメント
--- mimetypes/application/pkcs10.desktop
+++ mimetypes/application/pkcs10.desktop
@@ -31,6 +31,7 @@
 Comment[hi]=S/MIME प्रमाणीकरण निवेदन
 Comment[hr]=S/MIME zahtjev za potvrdu
 Comment[hu]=S/MIME tanúsítványkérés
+Comment[id]=Permintaan Sertifikat S/MIME
 Comment[is]=S/MIME skírteinisbeiðni
 Comment[it]=Richiesta di certificazione S/MIME
 Comment[ja]=S/MIME 証明書要求
--- mimetypes/application/vnd.stardivision.chart.desktop
+++ mimetypes/application/vnd.stardivision.chart.desktop
@@ -28,6 +28,7 @@
 Comment[hi]=स्टारआफिस चार्ट
 Comment[hr]=StarOffice grafikon
 Comment[hu]=StarOfice-diagram
+Comment[id]=Bagan StarOffice
 Comment[is]=StarOffice tafla
 Comment[it]=Diagramma StarOffice
 Comment[ja]=StarOffice チャート
--- mimetypes/application/vnd.stardivision.calc.desktop
+++ mimetypes/application/vnd.stardivision.calc.desktop
@@ -23,7 +23,7 @@
 Comment[es]=Hoja de cálculo de StarOffice
 Comment[et]=StarOffice Calc'i arvutustabel
 Comment[eu]=StarOffice kalkulu-orria
-Comment[fa]=صفحه گسترده StarOffice Calc
+Comment[fa]=صفحه گستردۀ StarOffice Calc
 Comment[fi]=StarOffice Calc -taulukko
 Comment[fr]=Feuille de calcul StarOffice Calc
 Comment[fy]=StarOffice Calc Rekkenboerd
@@ -33,6 +33,7 @@
 Comment[hi]=स्टारआफिस केल्क स्प्रेडशीट
 Comment[hr]=StarOffice Calc proračunska tablica
 Comment[hu]=StarOffice Calc-munkafüzet
+Comment[id]=Lembar Kerja StarOffice Calc
 Comment[is]=StarOffice Calc tafla
 Comment[it]=Foglio di calcolo StarOffice Calc
 Comment[ja]=StarOffice Calc 表計算
@@ -40,6 +41,7 @@
 Comment[ko]=스타오피스 계산기 스프레드시트
 Comment[lb]=StarOffice-Calc-Tabellëblat
 Comment[lt]=StarOffice Calc elektroninė lentelė
+Comment[lv]=StarOffice Calc tabullapa
 Comment[mk]=StarOffice Calc-табеларна пресметка
 Comment[mn]=StarOffice-Хүснэгтэн Боловсруулагч
 Comment[ms]=Hamparan helaian StarOffice Calc
--- mimetypes/application/x-kontour.desktop
+++ mimetypes/application/x-kontour.desktop
@@ -31,6 +31,7 @@
 Comment[hi]=कॉन्टूर दस्तावेज़
 Comment[hr]=Kontour dokument
 Comment[hu]=Kontour-dokumentum
+Comment[id]=Dokumen Kontour
 Comment[is]=Kontour skjal
 Comment[it]=Documento Kontour
 Comment[ja]=Kontour ドキュメント
--- mimetypes/application/mspowerpoint.desktop
+++ mimetypes/application/mspowerpoint.desktop
@@ -34,6 +34,7 @@
 Comment[hi]=माइक्रोसाफ्ट पावरपाइंट प्रेजेंटेशन
 Comment[hr]=Microsoft PowerPointa prezentacija
 Comment[hu]=Microsoft PowerPoint dokumentum
+Comment[id]=Presentasi Microsoft PowerPoint
 Comment[is]=Microsoft PowerPoint kynning
 Comment[it]=Presentazione Microsoft PowerPoint
 Comment[ja]=Microsoft PowerPoint プレゼンテーション
--- mimetypes/application/vnd.ms-asf.desktop
+++ mimetypes/application/vnd.ms-asf.desktop
@@ -28,6 +28,7 @@
 Comment[he]=מדיית ASF
 Comment[hi]=ASF मीडिया
 Comment[hu]=ASF fájl
+Comment[id]=Media ASF
 Comment[is]=ASF miðill
 Comment[it]=File multimediale ASF
 Comment[ja]=ASF メディア
--- mimetypes/application/x-desktop.desktop
+++ mimetypes/application/x-desktop.desktop
@@ -28,6 +28,7 @@
 Comment[hi]=डेस्कटॉप कान्फिग फ़ाइल
 Comment[hr]=Datoteka konfiguracije radne površine
 Comment[hu]=Munkaasztalbejegyzés-fájl
+Comment[id]=Berkas Konfigurasi Desktop
 Comment[is]=Stillingar skjáborðsins
 Comment[it]=File di configurazione del desktop
 Comment[ja]=デスクトップ設定ファイル
--- mimetypes/application/x-debian-package.desktop
+++ mimetypes/application/x-debian-package.desktop
@@ -33,6 +33,7 @@
 Comment[hi]=डेबिएन पैकेज
 Comment[hr]=Debian paket
 Comment[hu]=Debian-csomag
+Comment[id]=Paket Debian
 Comment[is]=Debian pakki
 Comment[it]=Pacchetto Debian
 Comment[ja]=Debian パッケージ
--- mimetypes/application/x-quattropro.desktop
+++ mimetypes/application/x-quattropro.desktop
@@ -33,6 +33,7 @@
 Comment[hi]=क्वात्रो प्रो दस्तावेज़
 Comment[hr]=Quattro Pro dokument
 Comment[hu]=Quattro Pro-dokumentum
+Comment[id]=Berkas Quattro Pro
 Comment[is]=Quattro Pro skjal
 Comment[it]=Documento Quattro Pro
 Comment[ja]=Quattro Pro ドキュメント
--- mimetypes/application/x-x509-ca-cert.desktop
+++ mimetypes/application/x-x509-ca-cert.desktop
@@ -10,6 +10,7 @@
 Comment[az]=DER, PEM, ya da Netscape Kodlanmış X.509 Vəsiqəsi
 Comment[bg]=Кодирано удостоверение на Netscape X.509, DER, PEM
 Comment[bn]=DER, PEM, অথবা নেটস্কেপ দ্বারা এনকোড করা  X.509 সার্টিফিকেট
+Comment[br]=Testeni DER, PEM, pe Netscape Encoded X.509
 Comment[bs]=DER, PEM, ili Netscape kodirani X.509 certifikat
 Comment[ca]=Certificat DER, PEM o Netscape codificat segons X.509
 Comment[cs]=Certifikát X.509 kódovaný DER, PEM, nebo aplikací Netscape
@@ -31,6 +32,7 @@
 Comment[hi]=DER, PEM, या नेटस्केप एनकोडेड X.509 सर्टिफिकेट
 Comment[hr]=DER, PEM ili Netscape kodirana X.509 potvrda
 Comment[hu]=DER, PEM vagy Netscape-formátumú X.509 tanúsítvány
+Comment[id]=Sertifikat DER, PEM, atau Netscape Encoded X.509
 Comment[is]=DER, PEM eða Netscape kóðað X.509 skírteini
 Comment[it]=Certificato X.509 codificato DER, PEM o Netscape
 Comment[ja]=DER, PEM, Netscape エンコードされた X.509 証明書
--- mimetypes/application/x-sqlite2.desktop
+++ mimetypes/application/x-sqlite2.desktop
@@ -26,12 +26,14 @@
 Comment[he]=קובץ בסיס נתונים של SQLite2
 Comment[hr]=SQLite2 datoteka baze podataka
 Comment[hu]=SQLite2-adatbázisfájl
+Comment[id]=Berkas Database SQLite2
 Comment[is]=SQLite2 gagnagrunns skrá
 Comment[it]=File banca dati SQLite2
 Comment[ja]=SQLite2 データベースファイル
 Comment[km]=ឯកសារ​មូលដ្ឋាន​ទិន្នន័យ SQLite2
 Comment[lb]=SQLite2-Datebankdatei
 Comment[lt]=SQLite2 duomenų bazės byla
+Comment[lv]=SQLite2 datu bāzes fails
 Comment[mk]=SQLite2-база на податоци
 Comment[ms]=Fail PengkalanDataSQLite2
 Comment[nb]=SQLite2 databasefil
--- mimetypes/application/x-sqlite3.desktop
+++ mimetypes/application/x-sqlite3.desktop
@@ -26,12 +26,14 @@
 Comment[he]=קובץ בסיס נתונים של SQLite3
 Comment[hr]=SQLite3 datoteka baze podataka
 Comment[hu]=SQLite3-adatbázisfájl
+Comment[id]=Berkas Database SQLite3
 Comment[is]=SQLite3 gagnagrunns skrá
 Comment[it]=File banca dati SQLite3
 Comment[ja]=SQLite3 データベースファイル
 Comment[km]=ឯកសារ​មូលដ្ឋាន​ទិន្នន័យ SQLite3
 Comment[lb]=SQLite3-Datebankdatei
 Comment[lt]=SQLite3 duomenų bazės byla
+Comment[lv]=SQLite3 datu bāzes fails
 Comment[mk]=SQLite3-база на податоци
 Comment[ms]=Fail Pengkalan Data SQLite3
 Comment[nb]=SQLite3 databasefil
--- mimetypes/application/x-perl-module.desktop
+++ mimetypes/application/x-perl-module.desktop
@@ -23,6 +23,7 @@
 Comment[he]=מודול של Perl
 Comment[hi]=पर्ल मॉड्यूल
 Comment[hu]=Perl-modul
+Comment[id]=Modul Perl
 Comment[is]=Perl eining
 Comment[it]=Modulo Perl
 Comment[ja]=Perl モジュール
--- mimetypes/application/x-bzip2.desktop
+++ mimetypes/application/x-bzip2.desktop
@@ -30,6 +30,7 @@
 Comment[hi]=Bzip2 फ़ाइल
 Comment[hr]=Bzip2 datoteka
 Comment[hu]=Bzip2-fájl
+Comment[id]=Berkas Bzip2
 Comment[is]=Þjöppuð skrá (bzip2)
 Comment[it]=File Bzip2
 Comment[ja]=Bzip2 ファイル
--- mimetypes/application/x-amipro.desktop
+++ mimetypes/application/x-amipro.desktop
@@ -33,6 +33,7 @@
 Comment[hi]=लोटस एमीप्रो दस्तावेज़
 Comment[hr]=Lotus AmiPro dokument
 Comment[hu]=Lotus AmiPro-dokumentum
+Comment[id]=Dokumen Lotus AmiPro
 Comment[is]=Lotus AmiPro skjal
 Comment[it]=Documento Lotus AmiPro
 Comment[ja]=Lotus AmiPro ドキュメント
--- mimetypes/application/xsd.desktop
+++ mimetypes/application/xsd.desktop
@@ -12,7 +12,7 @@
 Comment[el]=Σχήμα W3C XML
 Comment[es]=Schema XML de W3C
 Comment[eu]=W3C XML eskema
-Comment[fa]=طرح‌واره W3C XML
+Comment[fa]=طرحوارۀ W3C XML
 Comment[fi]=W3C XML skema
 Comment[fr]=Schéma XML du W3C
 Comment[fy]=W3C XML-skema
@@ -22,6 +22,7 @@
 Comment[hi]=डबल्यू3सी एक्सएमएल स्कीमा
 Comment[hr]=W3C XML shema
 Comment[hu]=W3C XML-séma
+Comment[id]=Skema W3C XML
 Comment[is]=W3C XML skema
 Comment[it]=Schema XML W3C
 Comment[ja]=W3C XML スキーマ
--- mimetypes/application/x-mswrite.desktop
+++ mimetypes/application/x-mswrite.desktop
@@ -33,6 +33,7 @@
 Comment[hi]=माइक्रोसॉफ्ट राइट दस्तावेज़
 Comment[hr]=Microsoft Write dokument
 Comment[hu]=Microsoft Write-dokumentum
+Comment[id]=Dokumen Microsoft Write
 Comment[is]=Microsoft Write skjal
 Comment[it]=Documento Microsoft Write
 Comment[ja]=Microsoft Write ドキュメント
--- mimetypes/application/fits.desktop
+++ mimetypes/application/fits.desktop
@@ -20,11 +20,13 @@
 Comment[he]=נתונים של FITS
 Comment[hr]=FITS podaci
 Comment[hu]=FITS-adatok
+Comment[id]=Data FITS
 Comment[is]=FITS gögn
 Comment[it]=Dati FITS
 Comment[ja]=FITS データ
 Comment[km]=ទិន្នន័យ FITS
 Comment[lb]=FITS-Donnéeën
+Comment[lv]=FITS dati
 Comment[mk]=FITS-податоци
 Comment[ms]=Data FITS
 Comment[nds]=FITS-Daten
--- mimetypes/application/x-afm.desktop
+++ mimetypes/application/x-afm.desktop
@@ -27,6 +27,7 @@
 Comment[hi]=पोस्टस्क्रिप्ट फ़ॉन्ट मेट्राइसेस
 Comment[hr]=PostScript mjere fontova
 Comment[hu]=PostScript betűtípus-metrika
+Comment[id]=Metrik Font PostScript
 Comment[is]=Postscript leturupplýsingar
 Comment[it]=Metriche tipi di carattere PostScript
 Comment[ja]=PostScript フォント メトリクス
--- mimetypes/application/pdf.desktop
+++ mimetypes/application/pdf.desktop
@@ -34,6 +34,7 @@
 Comment[hi]=पीडीएफ दस्तावेज़
 Comment[hr]=PDF dokument
 Comment[hu]=PDF-dokumentum
+Comment[id]=Dokumen PDF
 Comment[is]=PDF skjal
 Comment[it]=Documento PDF
 Comment[ja]=PDF ドキュメント
--- mimetypes/application/vnd.oasis.opendocument.spreadsheet.desktop
+++ mimetypes/application/vnd.oasis.opendocument.spreadsheet.desktop
@@ -19,7 +19,7 @@
 Comment[es]=Hoja de cálculo de OpenDocument OASIS
 Comment[et]=OASIS-e OpenDocument arvutustabel
 Comment[eu]=OASIS OpenDocument kalkulu-orria
-Comment[fa]=صفحه گسترده سندباز OASIS
+Comment[fa]=صفحه گستردۀ سندباز OASIS
 Comment[fi]=OASIS OpenDocument -taulukko
 Comment[fr]=Feuille de calcul OASIS OpenDocument
 Comment[fy]=OASIS OpenDocument rekkenboerd
@@ -27,12 +27,14 @@
 Comment[hi]=ओएसिस ओपनडाकुमेंट स्प्रेडशीट
 Comment[hr]=OASIS OpenDocument proračunske tablice
 Comment[hu]=OASIS-munkafüzet
+Comment[id]=Lembar Kerja OASIS OpenDocument
 Comment[is]=OASIS OpenDocument töflureiknir
 Comment[it]=Foglio di calcolo OASIS OpenDocument
 Comment[ja]=OASIS OpenDocument 表計算
 Comment[km]=សៀវភៅបញ្ជី OASIS OpenDocument
 Comment[lb]=OASIS-OpenDocument-Tabellëblat
 Comment[lt]=OASIS OpenDocument elektroninė lentelė
+Comment[lv]=OASIS OpenDocument tabullapa
 Comment[mk]=OASIS OpenDocument-табеларна пресметка
 Comment[ms]=Lembaran Hamparan OpenDocument OASIS
 Comment[nb]=OASIS Åpent dokument regneark
--- mimetypes/application/x-lha.desktop
+++ mimetypes/application/x-lha.desktop
@@ -30,6 +30,7 @@
 Comment[hi]=Lha आर्काइव
 Comment[hr]=LHA arhiva
 Comment[hu]=LHA-archívum
+Comment[id]=Arsip Lha
 Comment[is]=Lha safnskrá
 Comment[it]=Archivio Lha
 Comment[ja]=Lha アーカイブ
--- mimetypes/application/x-tgz.desktop
+++ mimetypes/application/x-tgz.desktop
@@ -32,7 +32,7 @@
 Comment[hi]=गजिप्ड Tar आर्काइव
 Comment[hr]=Gzip-ana tar arhiva
 Comment[hu]=Gzip tar-archívum
-Comment[id]=Archive Gzipped Tar
+Comment[id]=Arsip Gzipped Tar
 Comment[is]=Gzip þjappað tar-safn
 Comment[it]=Archivio Tar compresso con Gzip
 Comment[ja]=Gzip 圧縮された Tar アーカイブ
--- mimetypes/application/x-javascript.desktop
+++ mimetypes/application/x-javascript.desktop
@@ -29,6 +29,7 @@
 Comment[hi]=जावास्क्रिप्ट फ़ाइल
 Comment[hr]=JavaScript datoteka
 Comment[hu]=JavaScript-fájl
+Comment[id]=Berkas JavaScript
 Comment[is]=JavaScript-skrá
 Comment[it]=File JavaScript
 Comment[ja]=JavaScript ファイル
--- mimetypes/application/vnd.sun.xml.impress.desktop
+++ mimetypes/application/vnd.sun.xml.impress.desktop
@@ -29,6 +29,7 @@
 Comment[hi]=स्टारआफिस.ऑर्ग प्रेजेंटेशन
 Comment[hr]=OpenOffice.org prezentacija
 Comment[hu]=OpenOffice.org-bemutató
+Comment[id]=Presentasi OpenOffice.org
 Comment[is]=OpenOffice.org kynning
 Comment[it]=Presentazione OpenOffice.org
 Comment[ja]=OpenOffice.org プレゼンテーション
--- mimetypes/application/x-vnd.kde.kugar.mixed.desktop
+++ mimetypes/application/x-vnd.kde.kugar.mixed.desktop
@@ -33,6 +33,7 @@
 Comment[hi]=कूगर आर्काइव फ़ाइल
 Comment[hr]=Kugar arhiva
 Comment[hu]=Kugar-archívum
+Comment[id]=Berkas Arsip Kugar
 Comment[is]=Kugar safnskrá
 Comment[it]=File di archivio Kugar
 Comment[ja]=Kugar アーカイブ ファイル
--- mimetypes/application/x-gnumeric.desktop
+++ mimetypes/application/x-gnumeric.desktop
@@ -23,7 +23,7 @@
 Comment[es]=Hoja de cálculo de GNUmeric
 Comment[et]=GNUmerici arvutustabel
 Comment[eu]=Gnumeric kalkulu-orria
-Comment[fa]=صفحه گسترده GNUmeric
+Comment[fa]=صفحه گستردۀ GNUmeric
 Comment[fi]=GNUmeric-taulukko
 Comment[fr]=Feuille de calcul GNUmeric
 Comment[fy]=GNUmeric Rekkenboerd
@@ -33,6 +33,7 @@
 Comment[hi]=जीन्यूमेरिक स्प्रेडशीट
 Comment[hr]=GNUmericova proračunska tablica
 Comment[hu]=GNUmeric munkafüzet
+Comment[id]=Kertas Kerja GNUmeric
 Comment[is]=GNUmeric töflureikniskjal
 Comment[it]=Foglio di calcolo GNUmeric
 Comment[ja]=GNUmeric スプレッドシート
@@ -40,7 +41,7 @@
 Comment[ko]=그누메릭(GNUmeric) 스프레드시트
 Comment[lb]=GNUmeric-Tabellëblat
 Comment[lt]=GNUmeric elektroninė lentelė
-Comment[lv]=GNUmeric izklājlapa
+Comment[lv]=GNUmeric tabullapa
 Comment[mk]=GNUmeric-табеларна пресметка
 Comment[mn]=GNUmeric-Өгөгдлийн хуудас
 Comment[ms]=Halaman Helaian GNUmeric
--- mimetypes/application/x-kchart.desktop
+++ mimetypes/application/x-kchart.desktop
@@ -33,6 +33,7 @@
 Comment[hi]=के-चार्ट दस्तावेज़
 Comment[hr]=KChart dokument
 Comment[hu]=KChart-dokumentum
+Comment[id]=Dokumen KChart
 Comment[is]=KChart skjal
 Comment[it]=Documento KChart
 Comment[ja]=KChart ドキュメント
--- mimetypes/application/wordperfect.desktop
+++ mimetypes/application/wordperfect.desktop
@@ -33,6 +33,7 @@
 Comment[hi]=वर्डपरफेक्ट दस्तावेज़
 Comment[hr]=WordPerfect dokument
 Comment[hu]=WordPerfect-dokumentum
+Comment[id]=Dokumen WordPerfect
 Comment[is]=WordPerfect skjal
 Comment[it]=Documento WordPerfect
 Comment[ja]=WordPerfect ドキュメント
--- mimetypes/application/x-executable.desktop
+++ mimetypes/application/x-executable.desktop
@@ -18,7 +18,7 @@
 Comment[es]=Archivo ejecutable
 Comment[et]=Käivitatav fail
 Comment[eu]=Fitxategi exekutagarria
-Comment[fa]=پروندۀ جرایی
+Comment[fa]=پروندۀ اجرایی
 Comment[fi]=Ohjelma
 Comment[fr]=Fichier exécutable
 Comment[fy]=Utfierber triem
@@ -28,6 +28,7 @@
 Comment[hi]=निष्पादक फ़ाइल
 Comment[hr]=Izvršna datoteka
 Comment[hu]=Programfájl
+Comment[id]=File Dapat Dieksekusi
 Comment[is]=Keyrsluforrit
 Comment[it]=File eseguibile
 Comment[ja]=実行可能ファイル
--- mimetypes/application/x-executable-script.desktop
+++ mimetypes/application/x-executable-script.desktop
@@ -14,7 +14,7 @@
 Comment[es]=Procedimiento (probablemente ejecutable)
 Comment[et]=Käivitatav skript
 Comment[eu]=Script (exekutagarria litekeena)
-Comment[fa]=دست‌نوشته (احتمالا قابل اجرا)
+Comment[fa]=دست‌نوشته (احتمالًا قابل اجرا)
 Comment[fi]=Skripti (mahdollisesti suoritettava)
 Comment[fr]=Script (peut-être exécutable)
 Comment[fy]=Skript (Wierskynlik útfierber)
@@ -24,6 +24,7 @@
 Comment[hi]=स्क्रिप्ट (संभवतया चलाने योग्य)
 Comment[hr]=Skripta (vjerojatno izvršna datoteka)
 Comment[hu]=Szkript (általában futtatható)
+Comment[id]=Skrip (mungkin dapat dieksekusi)
 Comment[is]=Skeljaforrit (sem er ef til vill keyranlegt)
 Comment[it]=Script (eventualmente eseguibile)
 Comment[ja]=スクリプト (おそらく実行可能)
--- mimetypes/application/x-lzop.desktop
+++ mimetypes/application/x-lzop.desktop
@@ -32,7 +32,7 @@
 Comment[hi]=ल-जॉप्ड फ़ाइल
 Comment[hr]=Lzoped datoteka
 Comment[hu]=Lzop-fájl
-Comment[id]=File Lzopped
+Comment[id]=Berkas Lzopped
 Comment[is]=Þjöppuð skrá (lzop)
 Comment[it]=File compresso con Lz
 Comment[ja]=Lzop されたファイル
--- mimetypes/application/x-pw.desktop
+++ mimetypes/application/x-pw.desktop
@@ -30,6 +30,7 @@
 Comment[hi]=पैथेटिक राइटर दस्तावेज़
 Comment[hr]=Pathetic Writer dokument
 Comment[hu]=Pathetic Writer dokumentum
+Comment[id]=Dokumen Pathetic Writer
 Comment[is]=Pathetic Writer skjal
 Comment[it]=Documento Pathetic Writer
 Comment[ja]=Pathetic Writer ドキュメント
--- mimetypes/application/x-rar-compressed.desktop
+++ mimetypes/application/x-rar-compressed.desktop
@@ -33,6 +33,7 @@
 Comment[hi]=Rar आर्काइव
 Comment[hr]=RAR arhiva
 Comment[hu]=RAR-archívum
+Comment[id]=Arsip Rar
 Comment[is]=Rar safnskrá
 Comment[it]=Archivio Rar
 Comment[ja]=Rar アーカイブ
--- mimetypes/application/x-kpovmodeler.desktop
+++ mimetypes/application/x-kpovmodeler.desktop
@@ -28,6 +28,7 @@
 Comment[hi]=के-पोव-माडलर फ़ाइल
 Comment[hr]=KPovModeler datoteka
 Comment[hu]=KPovModeler-fájl
+Comment[id]=Berkas KPovModeler
 Comment[is]=KPovModeler skrá
 Comment[it]=File KPovModeler
 Comment[ja]=KPovModeler ファイル
--- mimetypes/application/x-php.desktop
+++ mimetypes/application/x-php.desktop
@@ -19,7 +19,7 @@
 Comment[es]=Script de PHP
 Comment[et]=PHP skript
 Comment[eu]=PHP script-a
-Comment[fa]=دست‌نوشته PHP
+Comment[fa]=دست‌نوشتۀ PHP
 Comment[fi]=PHP-skripti
 Comment[fr]=Script PHP
 Comment[fy]=PHP Skript
@@ -29,6 +29,7 @@
 Comment[hi]=PHP स्क्रिप्ट
 Comment[hr]=PHP skripta
 Comment[hu]=PHP-szkript
+Comment[id]=Skrip PHP
 Comment[is]=PHP forrit
 Comment[it]=Script PHP
 Comment[ja]=PHP スクリプト
--- mimetypes/application/x-troff-man.desktop
+++ mimetypes/application/x-troff-man.desktop
@@ -27,6 +27,7 @@
 Comment[hi]=मेनपेज मेक्रो युक्त ट्राफ दस्तावेज़ 
 Comment[hr]=Troff dokument s makroima stranica priručnika
 Comment[hu]=Troff-dokumentum (man makrókkal)
+Comment[id]=Dokumen Troff dengan Makro Manpage
 Comment[is]=Troff skjal með mansíðufjölvum
 Comment[it]=Documento Troff con macro per pagine di manuale
 Comment[ja]=Manpage マクロの Troff ドキュメント
--- mimetypes/application/x-tex-gf.desktop
+++ mimetypes/application/x-tex-gf.desktop
@@ -28,6 +28,7 @@
 Comment[hi]=जेनरिक फ़ॉन्ट
 Comment[hr]=Generički font
 Comment[hu]=Általános betűtípusfájl
+Comment[id]=Font Umum
 Comment[is]=Almennar leturskrár
 Comment[it]=Tipo di carattere generico
 Comment[ja]=一般フォント
--- mimetypes/application/x-shellscript.desktop
+++ mimetypes/application/x-shellscript.desktop
@@ -19,7 +19,7 @@
 Comment[es]=Script para intérprete de comandos
 Comment[et]=Shelli skript
 Comment[eu]=Shell script-a
-Comment[fa]=دست‌نوشتۀ پوسته
+Comment[fa]=دست‌نوشتۀ پوستۀ
 Comment[fi]=Komentotulkkiskripti
 Comment[fr]=Script shell
 Comment[fy]=Shell-skript
@@ -29,6 +29,7 @@
 Comment[hi]=शेल स्क्रिप्ट
 Comment[hr]=Shell skripta
 Comment[hu]=Parancsfájl
+Comment[id]=Skrip Shell
 Comment[is]=Skeljaforrit
 Comment[it]=Script per la shell
 Comment[ja]=シェルスクリプト
--- mimetypes/application/vnd.oasis.opendocument.graphics.desktop
+++ mimetypes/application/vnd.oasis.opendocument.graphics.desktop
@@ -27,12 +27,14 @@
 Comment[hi]=ओएसिस ओपनडाकुमेंट ग्राफ़िक्स
 Comment[hr]=OASIS OpenDocument grafike
 Comment[hu]=OASIS-ábra
+Comment[id]=Grafik OASIS OpenDocument
 Comment[is]=OASIS OpenDocument grafík
 Comment[it]=Disegno OASIS OpenDocument
 Comment[ja]=OASIS OpenDocument 図形描画
 Comment[km]=ក្រាហ្វិក OASIS OpenDocument
 Comment[lb]=OASIS-OpenDocument-Grafik
 Comment[lt]=OASIS OpenDocument grafika
+Comment[lv]=OASIS OpenDocument grafika
 Comment[mk]=OASIS OpenDocument-графика
 Comment[ms]=Grafik OpenDocument OASIS
 Comment[nb]=OASIS Åpen dokument grafikk
--- mimetypes/application/x-font-bdf.desktop
+++ mimetypes/application/x-font-bdf.desktop
@@ -32,6 +32,7 @@
 Comment[hi]=BDF बिटमेप फ़ॉन्ट
 Comment[hr]=BDF bitmap font
 Comment[hu]=BDF bittérképes betűtípus
+Comment[id]=Font BDF Bitmap
 Comment[is]=BDF bitamyndaletur
 Comment[it]=Tipo di carattere bitmap BDF
 Comment[ja]=BDF ビットマップフォント
--- mimetypes/application/x-kudesigner.desktop
+++ mimetypes/application/x-kudesigner.desktop
@@ -30,6 +30,7 @@
 Comment[hi]=कुगर रिपोर्ट टैम्प्लेट
 Comment[hr]=Kugar predložak izvještaja
 Comment[hu]=Kugar-jelentéssablon
+Comment[id]=Template Laporan Kugar
 Comment[is]=Kugar skýrslusnið
 Comment[it]=Modello di rapporti Kugar
 Comment[ja]=Kugar リポート テンプレート
--- mimetypes/application/vnd.oasis.opendocument.formula.desktop
+++ mimetypes/application/vnd.oasis.opendocument.formula.desktop
@@ -27,12 +27,14 @@
 Comment[hi]=ओएसिस ओपनडाकुमेंट फ़ॉर्मूला
 Comment[hr]=OASIS OpenDocument formula
 Comment[hu]=OASIS-képlet
+Comment[id]=Formula OASIS OpenDocument
 Comment[is]=OASIS OpenDocument formúla
 Comment[it]=Formula OASIS OpenDocument
 Comment[ja]=OASIS OpenDocument 数式
 Comment[km]=រូបមន្ត OASIS OpenDocument
 Comment[lb]=OASIS-OpenDocument-Formel
 Comment[lt]=OASIS OpenDocument rormulė
+Comment[lv]=OASIS OpenDocument formula
 Comment[mk]=OASIS OpenDocument-формула
 Comment[ms]=Formula OpenDocument OASIS
 Comment[nb]=OASIS Åpent dokumentformel
--- mimetypes/application/x-font-type1.desktop
+++ mimetypes/application/x-font-type1.desktop
@@ -33,6 +33,7 @@
 Comment[hi]=पोस्टस्क्रिप्ट टाइप1 फ़ॉन्ट
 Comment[hr]=PostScript Type1 font
 Comment[hu]=PostScript Type1-betűtípus
+Comment[id]=Font PostScript Type1
 Comment[is]=Postscript Type1 letur
 Comment[it]=Tipo di carattere PostScript Type1
 Comment[ja]=PostScript Type1 フォント
--- mimetypes/application/msword.desktop
+++ mimetypes/application/msword.desktop
@@ -35,6 +35,7 @@
 Comment[hi]=माइक्रोसॉफ्ट वर्ड दस्तावेज़
 Comment[hr]=Microsoft Word dokument
 Comment[hu]=Microsoft Word dokumentum
+Comment[id]=Dokumen Microsoft Word
 Comment[is]=Microsoft Word skjal
 Comment[it]=Documento Microsoft Word
 Comment[ja]=Microsoft Word ドキュメント
--- mimetypes/application/ogg.desktop
+++ mimetypes/application/ogg.desktop
@@ -33,6 +33,7 @@
 Comment[hi]=ऑग मल्टीमीडिया
 Comment[hr]=Ogg multimedija
 Comment[hu]=Ogg hangfájl
+Comment[id]=Multimedia Ogg
 Comment[is]=Ogg hljóðskrá
 Comment[it]=File multimediale Ogg
 Comment[ja]=Ogg マルチメディア
--- mimetypes/application/vnd.stardivision.writer-global.desktop
+++ mimetypes/application/vnd.stardivision.writer-global.desktop
@@ -29,6 +29,7 @@
 Comment[hi]=ओपनआफिस राइटर मुख्य दस्तावेज़
 Comment[hr]=StarOffice Writer glavni predložak
 Comment[hu]=StarOffice Writer-fődokumentum
+Comment[id]=Dokumen Master StarOffice Writer
 Comment[is]=StarOffice Writer yfirskjal
 Comment[it]=Documento master StarOffice Writer
 Comment[ja]=StarOffice Writer マスタードキュメント
--- mimetypes/application/x-krita.desktop
+++ mimetypes/application/x-krita.desktop
@@ -34,6 +34,7 @@
 Comment[hi]=क्रिता दस्तावेज़
 Comment[hr]=Krita dokument
 Comment[hu]=Krita-dokumentum
+Comment[id]=Dokumen Krita
 Comment[is]=Krita skjal
 Comment[it]=Documento Krita
 Comment[ja]=Krita ドキュメント
--- mimetypes/application/vnd.stardivision.writer.desktop
+++ mimetypes/application/vnd.stardivision.writer.desktop
@@ -33,6 +33,7 @@
 Comment[hi]=स्टारआफिस राइटर दस्तावेज़
 Comment[hr]=StarOffice Writer dokument
 Comment[hu]=StarOffice Writer-dokumentum
+Comment[id]=Dokumen StarOffice Writer
 Comment[is]=StarOffice Writer skjal
 Comment[it]=Documento StarOffice Writer
 Comment[ja]=StarOffice Writer ドキュメント
--- mimetypes/application/x-pak.desktop
+++ mimetypes/application/x-pak.desktop
@@ -28,6 +28,7 @@
 Comment[hi]=पीएके फ़ाइल अभिलेख
 Comment[hr]=PAK arhiva
 Comment[hu]=PAK-archívum
+Comment[id]=Arsip Berkas PAK
 Comment[is]=PAK safnskrá
 Comment[it]=Archivio file PAK
 Comment[ja]=PAK ファイルアーカイブ
--- mimetypes/application/x-applixgraphics.desktop
+++ mimetypes/application/x-applixgraphics.desktop
@@ -33,6 +33,7 @@
 Comment[hi]=एप्लिक्स ग्राफिक्स दस्तावेज़
 Comment[hr]=Applix Graphics dokument
 Comment[hu]=Applix Graphics-dokumentum
+Comment[id]=Dokumen Applix Graphics
 Comment[is]=Applix mynd
 Comment[it]=Documento Applix Graphics
 Comment[ja]=Applix グラフィックスドキュメント
@@ -40,7 +41,7 @@
 Comment[ko]=애플릭스 그림
 Comment[lb]=Applix-Graphics-Dokument
 Comment[lt]=Applix grafinis dokumentas
-Comment[lv]=Applix Grafikas dokuments
+Comment[lv]=Applix grafikas dokuments
 Comment[mk]=Applix Graphics-документ
 Comment[mn]=Applix-Graphik-Баримт
 Comment[ms]=Dokumen Grafik Applix
--- mimetypes/application/illustrator.desktop
+++ mimetypes/application/illustrator.desktop
@@ -33,6 +33,7 @@
 Comment[hi]=एडोब इलस्ट्रेटर दस्तावेज़
 Comment[hr]=Adobe Illustrator dokument
 Comment[hu]=Adobe Illustrator dokumentum
+Comment[id]=Dokumen Adobe Illustrator
 Comment[is]=Adobe Illustrator skjal
 Comment[it]=Documento Adobe Illustrator
 Comment[ja]=Adobe Illustrator ドキュメント
--- mimetypes/application/x-tarz.desktop
+++ mimetypes/application/x-tarz.desktop
@@ -29,7 +29,7 @@
 Comment[hi]=काम्प्रेस्ड Tar आर्काइव
 Comment[hr]=Komprimirana tar arhiva
 Comment[hu]=Tömörített tar-archívum
-Comment[id]=Archive Tar terkompresi
+Comment[id]=Arsip Tar terkompresi
 Comment[is]=Þjappað tar-safn
 Comment[it]=Archivio Tar compresso
 Comment[ja]=圧縮された Tar アーカイブ
--- mimetypes/application/vnd.sun.xml.draw.desktop
+++ mimetypes/application/vnd.sun.xml.draw.desktop
@@ -28,6 +28,7 @@
 Comment[hi]=ओपनआफिस.ऑर्ग ड्राइंग
 Comment[hr]=OpenOffice.org crtež
 Comment[hu]=OpenOffice.org-rajz
+Comment[id]=Gambar OpenOffice.org
 Comment[is]=OpenOffice.org teikning
 Comment[it]=Disegno OpenOffice.org
 Comment[ja]=OpenOffice.org 図形描画
--- mimetypes/application/x-python.desktop
+++ mimetypes/application/x-python.desktop
@@ -28,6 +28,7 @@
 Comment[hi]=पायथन प्रोग्राम
 Comment[hr]=Python program
 Comment[hu]=Python-program
+Comment[id]=Program Python
 Comment[is]=Python forrit
 Comment[it]=Programma Python
 Comment[ja]=Python プログラム
--- mimetypes/application/x-awk.desktop
+++ mimetypes/application/x-awk.desktop
@@ -19,7 +19,7 @@
 Comment[es]=Script de AWK
 Comment[et]=AWK skript
 Comment[eu]=AWK script-a
-Comment[fa]=دست‌نوشته AWK
+Comment[fa]=دست‌نوشتۀ AWK
 Comment[fi]=AWK-skripti
 Comment[fr]=Script AWK
 Comment[fy]=AWK-Skript
@@ -29,6 +29,7 @@
 Comment[hi]=AWK स्क्रिप्ट
 Comment[hr]=AWK skripta
 Comment[hu]=AWK-szkript
+Comment[id]=Skrip AWK
 Comment[is]=AWK forrit
 Comment[it]=Script AWK
 Comment[ja]=AWK スクリプト
--- mimetypes/application/x-vnd.kde.kplato.desktop
+++ mimetypes/application/x-vnd.kde.kplato.desktop
@@ -25,6 +25,7 @@
 Comment[hi]=के-प्लेटो परियोजना प्रबंधन दस्तावेज़
 Comment[hr]=KPlato dokument upravljanje projektom
 Comment[hu]=KPlato-projektdokumentum
+Comment[id]=Dokumen Manajemen Proyek KPlato
 Comment[is]=KPlato verkefnisskjal
 Comment[it]=Documento di gestione progetti KPlato
 Comment[ja]=KPlato プロジェクトマネージメントドキュメント
--- mimetypes/application/x-gzdvi.desktop
+++ mimetypes/application/x-gzdvi.desktop
@@ -24,6 +24,7 @@
 Comment[hi]=गजिप संपीडित डीवीआई फ़ाइल
 Comment[hr]=Gzip komprimirana DVI datoteka
 Comment[hu]=Gzippel tömörített DVI-fájl
+Comment[id]=Berkas Gzip Compressed DVI
 Comment[is]=Gzip þjöppuð DVI skrá
 Comment[it]=File DVI compresso con Gzip
 Comment[ja]=Gzip 圧縮 DVI ファイル
--- mimetypes/application/x-tar.desktop
+++ mimetypes/application/x-tar.desktop
@@ -33,6 +33,7 @@
 Comment[hi]=Tar आर्काइव
 Comment[hr]=TAR arhiva
 Comment[hu]=Tar-archívum
+Comment[id]=Arsip Tar
 Comment[is]=Tar safnskrá
 Comment[it]=Archivio Tar
 Comment[ja]=Tar アーカイブ
--- mimetypes/application/x-cda.desktop
+++ mimetypes/application/x-cda.desktop
@@ -29,6 +29,7 @@
 Comment[hi]=सीडी ऑडियो
 Comment[hr]=CD audio
 Comment[hu]=CD-audió
+Comment[id]=Audio CD
 Comment[is]=CD hljóðskrá
 Comment[it]=Audio CD
 Comment[ja]=CD オーディオ
--- mimetypes/application/x-core.desktop
+++ mimetypes/application/x-core.desktop
@@ -31,6 +31,7 @@
 Comment[hi]=प्रोग्राम क्रैश डाटा
 Comment[hr]=Podaci o padu programa
 Comment[hu]=Lefagyott program adatai
+Comment[id]=Data Program Crash
 Comment[is]=Vísbendingar um orsök hruns
 Comment[it]=Dati del crash di un programma
 Comment[ja]=プログラムクラッシュデータ
--- mimetypes/application/x-msdos-program.desktop
+++ mimetypes/application/x-msdos-program.desktop
@@ -27,6 +27,7 @@
 Comment[hi]=विंडोज़ निष्पादक 
 Comment[hr]=Windows izvršna datoteka
 Comment[hu]=Windows-programfájl
+Comment[id]=Program Windows
 Comment[is]=Windows keyrsluforrit
 Comment[it]=Eseguibile Windows
 Comment[ja]=Windows 実行ファイル
--- mimetypes/application/vnd.stardivision.draw.desktop
+++ mimetypes/application/vnd.stardivision.draw.desktop
@@ -30,6 +30,7 @@
 Comment[hi]=स्टारऑफिस ड्राइंग
 Comment[hr]=StarOffice crtež
 Comment[hu]=StarOffice-rajz
+Comment[id]=Gambar StarOffice
 Comment[is]=StarOffice teikning
 Comment[it]=Disegno StarOffice
 Comment[ja]=StarOffice 図形描画
--- mimetypes/application/vnd.sun.xml.draw.template.desktop
+++ mimetypes/application/vnd.sun.xml.draw.template.desktop
@@ -26,6 +26,7 @@
 Comment[hi]=ओपनआफिस.ऑर्ग ड्राइंग टैम्प्लेट
 Comment[hr]=OpenOffice.org predložak crteža
 Comment[hu]=OpenOffice.org-rajzsablon
+Comment[id]=Template Gambar OpenOffice.org
 Comment[is]=OpenOffice.org teikningarsniðmát
 Comment[it]=Modello di disegno OpenOffice.org
 Comment[ja]=OpenOffice.org 図形描画 テンプレート
--- mimetypes/application/xml.desktop
+++ mimetypes/application/xml.desktop
@@ -29,6 +29,7 @@
 Comment[hi]=एक्सएमएल दस्तावेज़ 
 Comment[hr]=XML dokument
 Comment[hu]=XML-dokumentum
+Comment[id]=Dokumen XML
 Comment[is]=XML skjal
 Comment[it]=Documento XML
 Comment[ja]=XML ドキュメント
--- mimetypes/application/vnd.oasis.opendocument.chart.desktop
+++ mimetypes/application/vnd.oasis.opendocument.chart.desktop
@@ -27,12 +27,14 @@
 Comment[hi]=ओएसिस ओपनडाकुमेंट चार्ट
 Comment[hr]=OASIS OpenDocument grafikon
 Comment[hu]=OASIS-grafikon
+Comment[id]=Bagan OASIS OpenDocument
 Comment[is]=OASIS OpenDocument graf
 Comment[it]=Diagramma OASIS OpenDocument
 Comment[ja]=OASIS OpenDocument チャート
 Comment[km]=គំនូសតាង OASIS OpenDocument
 Comment[lb]=OASIS-OpenDocument-Diagramm
 Comment[lt]=OASIS OpenDocument grafikas
+Comment[lv]=OASIS OpenDocument diagramma
 Comment[mk]=OASIS OpenDocument-графикон
 Comment[ms]=Carta OpenDocument OASIS
 Comment[nb]=OASIS Åpent dokumentdiagram
--- mimetypes/application/mbox.desktop
+++ mimetypes/application/mbox.desktop
@@ -21,12 +21,14 @@
 Comment[ga]=Comhadlann Ríomhphoist MBOX
 Comment[hr]=MBOX mapa pošte
 Comment[hu]=MBOX levélmappa
+Comment[id]=Folder Mail MBOX
 Comment[is]=MBOX póstmappa
 Comment[it]=Cartella di posta MBOX
 Comment[ja]=MBOX メール フォルダ
 Comment[km]=ថត​សំបុត្រ MBOX
 Comment[lb]=MBOX Mail-Dossier
 Comment[lt]=MBOX pašto aplankas
+Comment[lv]=MBOX pasta mape
 Comment[mk]=MBOX-папка со пошта
 Comment[ms]=Folder Mel MBOX
 Comment[nb]=Mbox e-postmappe
--- mimetypes/message/news.desktop
+++ mimetypes/message/news.desktop
@@ -32,6 +32,7 @@
 Comment[hi]=यूज़नेट समाचार संदेश
 Comment[hr]=Usenet poruka novosti
 Comment[hu]=Usenet üzenet
+Comment[id]=Pesan Berita Usenet
 Comment[is]=Bréf af Usenet ráðstefnum
 Comment[it]=Messaggio di news Usenet
 Comment[ja]=Usenet ニュースメッセージ
--- mimetypes/message/rfc822.desktop
+++ mimetypes/message/rfc822.desktop
@@ -33,6 +33,7 @@
 Comment[hi]=ईमेल संदेश
 Comment[hr]=Poruka e-pošte
 Comment[hu]=E-mail üzenet
+Comment[id]=Pesan E-Mail
 Comment[is]=Tölvupóstskeyti
 Comment[it]=Messaggio di posta elettronica
 Comment[ja]=Eメールメッセージ
--- mimetypes/text/rss.desktop
+++ mimetypes/text/rss.desktop
@@ -16,7 +16,7 @@
 Comment[es]=Resumen RDF del sitio
 Comment[et]=RDF-saidi kokkuvõte
 Comment[eu]=Lekuaren RDF laburpena
-Comment[fa]=خلاصه پایگاه RDF
+Comment[fa]=خلاصۀ پایگاه RDF
 Comment[fi]=RDF-yhteenveto
 Comment[fr]=Résumé de site RDF
 Comment[fy]=Gearfetting fan de RDF-side
--- mimetypes/text/calendar.desktop
+++ mimetypes/text/calendar.desktop
@@ -29,6 +29,7 @@
 Comment[hi]=आई-कैलेन्डर फ़ाइल
 Comment[hr]=iCalendar datoteka
 Comment[hu]=iCalendar-fájl
+Comment[id]=Berkas iCalendar
 Comment[is]=iCalendar skrá
 Comment[it]=File iCalendar
 Comment[ja]=iCalendar ファイル
--- mimetypes/text/rdf.desktop
+++ mimetypes/text/rdf.desktop
@@ -28,6 +28,7 @@
 Comment[hi]=रिसोर्स डिस्क्रिप्शन फ्रेमवर्क फ़ाइल
 Comment[hr]=Datoteka s opisom resursa okvira rada
 Comment[hu]=RDF erőforrás-leíró fájl
+Comment[id]=Berkas Resource Description Framework
 Comment[is]=Skilgreiningaskrá auðlinda (RDF skrá)
 Comment[it]=File RDF
 Comment[ja]=Resource Description Framework ファイル
--- mimetypes/text/vnd.wap.wml.desktop
+++ mimetypes/text/vnd.wap.wml.desktop
@@ -33,6 +33,7 @@
 Comment[hi]=WML दस्तावेज़
 Comment[hr]=WML dokument
 Comment[hu]=WML-dokumentum
+Comment[id]=Dokumen WML
 Comment[is]=WML skjal
 Comment[it]=Documento WML
 Comment[ja]=WML ドキュメント
--- mimetypes/text/x-diff.desktop
+++ mimetypes/text/x-diff.desktop
@@ -29,6 +29,7 @@
 Comment[hi]=फ़ाइलों के बीच में अंतर
 Comment[hr]=Razlike između datoteka
 Comment[hu]=Diff-különbségfájl
+Comment[id]=Berkas Perbedaan
 Comment[is]=Skjal sem lýsir mun tveggja annarra skráa
 Comment[it]=Differenze tra file
 Comment[ja]=2つのファイルの差分
--- mimetypes/text/x-objchdr.desktop
+++ mimetypes/text/x-objchdr.desktop
@@ -15,7 +15,7 @@
 Comment[es]=Archivo de cabecera de Objective-C
 Comment[et]=Objective-C päisefail
 Comment[eu]=Objective-C goiburuko fitxategia
-Comment[fa]=پروندۀ سرآیند C شئ گرا
+Comment[fa]=پروندۀ سرآیند C شیءگرا
 Comment[fi]=Objective-C -otsikko
 Comment[fr]=Fichier en-tête Objective-C
 Comment[fy]=Objektive-C koptekst-bestand
@@ -24,6 +24,7 @@
 Comment[hi]=ऑब्जेक्टिव-सी हेडर फ़ाइल
 Comment[hr]=Objective-C datoteka zaglavlja
 Comment[hu]=Objective-C header fájl
+Comment[id]=Berkas Header ObjectiveC
 Comment[is]=Objective-C header skrá
 Comment[it]=File header Objective-C
 Comment[ja]=Objective-C ヘッダファイル
--- mimetypes/text/x-bibtex.desktop
+++ mimetypes/text/x-bibtex.desktop
@@ -29,6 +29,7 @@
 Comment[hi]=बिबिलोग्राफिक डाटा (Bibtex)
 Comment[hr]=Bibliografski podaci (bibtex)
 Comment[hu]=Bibtex-adatfájl
+Comment[id]=Data Bibliografi (bibtex)
 Comment[is]=Heimildir (bibtex)
 Comment[it]=Dati bibliografici (bibtex)
 Comment[ja]=Bibliographic データ (Bibtex)
--- mimetypes/text/x-java.desktop
+++ mimetypes/text/x-java.desktop
@@ -28,6 +28,7 @@
 Comment[hi]=जावा स्रोत फ़ाइल
 Comment[hr]=Java izvorni kod
 Comment[hu]=Java-forrásfájl
+Comment[id]=Berkas Sumber Java
 Comment[is]=Java-frumforrit
 Comment[it]=File sorgente Java
 Comment[ja]=Java ソースファイル
--- mimetypes/text/x-objcsrc.desktop
+++ mimetypes/text/x-objcsrc.desktop
@@ -19,7 +19,7 @@
 Comment[es]=Archivo con código Objective-C
 Comment[et]=Objective-C lähtetekst
 Comment[eu]=Objective-C iturburu fitxategia
-Comment[fa]=پروندۀ منبع C شئ گرا
+Comment[fa]=پروندۀ منبع C شیء گرا
 Comment[fi]=Objective-C -lähdekoodi
 Comment[fr]=Fichier source Objective-C
 Comment[fy]=Objektive-C-boarnetriem
@@ -29,6 +29,7 @@
 Comment[hi]=ऑब्जेक्टिव-सी स्रोत फ़ाइल
 Comment[hr]=Objective-C izvorni kod
 Comment[hu]=Objective-C forrásfájl
+Comment[id]=Berkas Sumber Objective-C
 Comment[is]=Objective-C frumforrit
 Comment[it]=File sorgente Objective-C
 Comment[ja]=Objective-C ソースファイル
--- mimetypes/text/rtf.desktop
+++ mimetypes/text/rtf.desktop
@@ -30,6 +30,7 @@
 Comment[hi]=RTF दस्तावेज़ 
 Comment[hr]=RTF dokument
 Comment[hu]=RTF-dokumentum
+Comment[id]=Dokumen RTF
 Comment[is]=RTF skjal
 Comment[it]=Documento RTF
 Comment[ja]=RTF ドキュメント
--- mimetypes/text/x-xslfo.desktop
+++ mimetypes/text/x-xslfo.desktop
@@ -16,7 +16,7 @@
 Comment[es]=Archivo de objeto de formato XSL
 Comment[et]=XSL vormindamise objektfail
 Comment[eu]=XSL formatuko objektu-fitxategia
-Comment[fa]=پروندۀ شئ قالب‌دار XSL
+Comment[fa]=پروندۀ شیء قالب‌دار XSL
 Comment[fi]=XSL-muotoinen objektitiedosto
 Comment[fr]=Fichier de formatage d'objet XSL
 Comment[fy]=XSL-yndielingsobjekt
@@ -25,6 +25,7 @@
 Comment[hi]=XSL फॉर्मेटिंग ऑब्जेक्ट फ़ाइल
 Comment[hr]=XSL oblikujuća objektna datoteka
 Comment[hu]=XSL-formázási objektumfájl
+Comment[id]=Berkas Obyek Format XSL
 Comment[is]=XSL Sniðskrá
 Comment[it]=File XSL Formatting Object
 Comment[ja]=XSL フォーマットオブジェクトファイル
--- mimetypes/text/x-adasrc.desktop
+++ mimetypes/text/x-adasrc.desktop
@@ -28,6 +28,7 @@
 Comment[hi]=Ada स्रोत फ़ाइल
 Comment[hr]=Ada izvorni kod
 Comment[hu]=Ada-forrásfájl
+Comment[id]=Berkas Sumber Ada
 Comment[is]=Ada frumforrit
 Comment[it]=File sorgente Ada
 Comment[ja]=Ada ソースソース
--- mimetypes/text/html.desktop
+++ mimetypes/text/html.desktop
@@ -29,6 +29,7 @@
 Comment[hi]=HTML दस्तावेज़ 
 Comment[hr]=HTML dokument
 Comment[hu]=HTML-dokumentum
+Comment[id]=Dokumen HTML
 Comment[is]=HTML skjal
 Comment[it]=Documento HTML
 Comment[ja]=HTML ドキュメント
--- mimetypes/text/javascript.desktop
+++ mimetypes/text/javascript.desktop
@@ -28,6 +28,7 @@
 Comment[hi]=जावास्क्रिप्ट फ़ाइल
 Comment[hr]=JavaScript datoteka
 Comment[hu]=JavaScript-fájl
+Comment[id]=Berkas JavaScript
 Comment[is]=JavaScript-skrá
 Comment[it]=File JavaScript
 Comment[ja]=JavaScript ファイル
--- mimetypes/text/x-pascal.desktop
+++ mimetypes/text/x-pascal.desktop
@@ -28,6 +28,7 @@
 Comment[hi]=पासकल स्रोत फ़ाइल
 Comment[hr]=Pascal izvorni kod
 Comment[hu]=Pascal-forrásfájl
+Comment[id]=Berkas Sumber Pascal
 Comment[is]=Pascal-frumforrit
 Comment[it]=File sorgente Pascal
 Comment[ja]=Pascal ソースファイル
--- mimetypes/text/x-c++hdr.desktop
+++ mimetypes/text/x-c++hdr.desktop
@@ -28,6 +28,7 @@
 Comment[hi]=सी++ हेडर फ़ाइल
 Comment[hr]=C++ datoteka zaglavlja
 Comment[hu]=C++ header fájl
+Comment[id]=Berkas Header C++
 Comment[is]=C++ skilgreiningar
 Comment[it]=File header C++
 Comment[ja]=C++ ヘッダーファイル
@@ -35,6 +36,7 @@
 Comment[ko]=C++ 머리글 파일
 Comment[lb]=C++-Header-Datei
 Comment[lt]=C++ antraščių byla
+Comment[lv]=C++ galvenes fails
 Comment[mk]=C++ заглавие
 Comment[mn]=C++-Толгой
 Comment[ms]=Fail Pengepala C++
--- mimetypes/text/vnd.abc.desktop
+++ mimetypes/text/vnd.abc.desktop
@@ -23,6 +23,7 @@
 Comment[hi]=एबीसी संगीत फ़ाइल
 Comment[hr]=ABC glazbena datoteka
 Comment[hu]=ABC-zenefájl
+Comment[id]=Berkas Musik ABC
 Comment[is]=ABC tónlistarskrá
 Comment[it]=File ABC Music
 Comment[ja]=ABC 音楽ファイル
--- mimetypes/text/docbook.desktop
+++ mimetypes/text/docbook.desktop
@@ -29,6 +29,7 @@
 Comment[hi]=डॉकबुक दस्तावेज़
 Comment[hr]=DocBook dokument
 Comment[hu]=DocBook-dokumentum
+Comment[id]=Dokumen DocBook
 Comment[is]=DocBook skjal
 Comment[it]=Documento DocBook
 Comment[ja]=DocBook ドキュメント
--- mimetypes/text/enriched.desktop
+++ mimetypes/text/enriched.desktop
@@ -16,7 +16,7 @@
 Comment[es]=Documento de texto ligeramente enriquecido
 Comment[et]=Vormindatud tekstidokument
 Comment[eu]=Arinki hobetutako testu dokumentua
-Comment[fa]=سند متن غنی شده سبک
+Comment[fa]=سند متن غنی‌شدۀ سبک
 Comment[fi]=Kevyesti rikastettu tekstiasiakirja
 Comment[fr]=Document en texte légèrement enrichi
 Comment[fy]=Licht opmakke tekst Dokumint
@@ -25,6 +25,7 @@
 Comment[hi]=लाइटली एनरिच्ड पाठ दस्तावेज़
 Comment[hr]=Malo obogaćeni tekstualni dokument
 Comment[hu]=Lightly Enriched szöveges fájl
+Comment[id]=Dokumen Teks Terformat
 Comment[is]=Lítillega viðbætt textaskjal
 Comment[it]=Documento di testo arricchito semplicemente
 Comment[ja]=Lightly Enriched テキストドキュメント
--- mimetypes/text/x-latex.desktop
+++ mimetypes/text/x-latex.desktop
@@ -29,6 +29,7 @@
 Comment[hi]=LaTeX दस्तावेज़
 Comment[hr]=LaTeX dokument
 Comment[hu]=LaTeX-dokumentum
+Comment[id]=Dokumen LaTeX
 Comment[is]=LaTeX skjal
 Comment[it]=Documento LaTeX
 Comment[ja]=LaTeX ドキュメント
--- mimetypes/text/x-moc.desktop
+++ mimetypes/text/x-moc.desktop
@@ -19,7 +19,7 @@
 Comment[es]=Archivo metaobjeto de Qt
 Comment[et]=Qt metaobjektfail
 Comment[eu]=Qt meta-objektu fitxategia
-Comment[fa]=پروندۀ فراشي Qt
+Comment[fa]=پروندۀ فراشیء Qt
 Comment[fi]=Qt Meta -objektitiedosto
 Comment[fr]=Fichier Méta-objet pour Qt
 Comment[fy]=Qt-Meta-Objekt-triem
@@ -28,6 +28,7 @@
 Comment[hi]=क्यूटी मेटा ओबजेक्ट फ़ाइल
 Comment[hr]=Qt Meta objektna datoteka
 Comment[hu]=Qt metaobjektum-fájl
+Comment[id]=Berkas Meta Object Qt
 Comment[is]=Qt-metahlutarskrá (meta object)
 Comment[it]=File meta-oggetto Qt
 Comment[km]=ឯកសារ​វត្ថុ Qt Meta
--- mimetypes/text/x-ldif.desktop
+++ mimetypes/text/x-ldif.desktop
@@ -29,6 +29,7 @@
 Comment[hi]=LDAP पता पुस्तिका
 Comment[hr]=LDAP adresar
 Comment[hu]=LDAP-címjegyzékfájl
+Comment[id]=Buku Alamat LDAP
 Comment[is]=LDAP vistfangaskrá
 Comment[it]=Rubrica LDAP
 Comment[ja]=LDAP ドキュメント
--- mimetypes/text/x-mswinurl.desktop
+++ mimetypes/text/x-mswinurl.desktop
@@ -32,6 +32,7 @@
 Comment[hi]=इंटरनेट शॉर्टकट
 Comment[hr]=Internetski prečac
 Comment[hu]=Internetes linkfájl
+Comment[id]=Shortcut Internet
 Comment[is]=Internet tilvísun
 Comment[it]=Scorciatoia Internet
 Comment[ja]=インターネットショートカット
--- mimetypes/text/x-katefilelist.desktop
+++ mimetypes/text/x-katefilelist.desktop
@@ -26,6 +26,7 @@
 Comment[hi]=फ़ाइल सूची(के-एटीई फ़ाइल लिस्ट लोडर प्लगिन के लिए)
 Comment[hr]=Popis datoteka (za dodatak učitavanje popisa datoteka Kate)
 Comment[hu]=Fájllista (a Kate fájllista-betöltő bővítőmodulhoz)
+Comment[id]=Daftar Berkas (untuk Plugin Pemuat Daftar Berkas Kate)
 Comment[is]=Skráarlisti (Fyrir Kate skráarlista íforrit)
 Comment[it]=Lista di file (per il plugin Caricamento lista file di Kate)
 Comment[ja]=ファイルリスト(Kate ファイルリスト読み込みプラグイン)
--- mimetypes/text/x-chdr.desktop
+++ mimetypes/text/x-chdr.desktop
@@ -28,6 +28,7 @@
 Comment[hi]=सी हेडर फ़ाइल
 Comment[hr]=C datoteka zaglavlja
 Comment[hu]=C header fájl
+Comment[id]=Berkas Header C
 Comment[is]=C skilgreiningar
 Comment[it]=File header C
 Comment[ja]=C ヘッダファイル
@@ -35,6 +36,7 @@
 Comment[ko]=C 머리글 파일
 Comment[lb]=C-Header-Datei
 Comment[lt]=C antraščių byla
+Comment[lv]=C galvenes fails
 Comment[mk]=C заглавие
 Comment[mn]=C-Толгой
 Comment[ms]=Fail Pengepala C
--- mimetypes/text/x-c++src.desktop
+++ mimetypes/text/x-c++src.desktop
@@ -28,6 +28,7 @@
 Comment[hi]=सी++ स्रोत फ़ाइल
 Comment[hr]=C++ datoteka izvornog koda
 Comment[hu]=C++ forrásfájl
+Comment[id]=Berkas Sumber C++
 Comment[is]=C++ frumforrit
 Comment[it]=File sorgente C++
 Comment[ja]=C++ ソースファイル
--- mimetypes/text/x-log.desktop
+++ mimetypes/text/x-log.desktop
@@ -27,6 +27,7 @@
 Comment[hi]=ऐपलिकेशल लौग फ़ाइल
 Comment[hr]=Datoteka zapisnika programa
 Comment[hu]=Naplófájl
+Comment[id]=Berkas Log Aplikasi
 Comment[is]=Keyrsluannálar forrits
 Comment[it]=File di registro di un'applicazione
 Comment[ja]=アプリケーションログファイル
--- mimetypes/text/x-tcl.desktop
+++ mimetypes/text/x-tcl.desktop
@@ -29,6 +29,7 @@
 Comment[hi]=Tcl फ़ाइल
 Comment[hr]=Tcl datoteka
 Comment[hu]=Tcl-fájl
+Comment[id]=Berkas Tcl
 Comment[is]=Tcl-skrá
 Comment[it]=File Tcl
 Comment[ja]=Tcl ファイル
--- mimetypes/text/x-hex.desktop
+++ mimetypes/text/x-hex.desktop
@@ -18,7 +18,7 @@
 Comment[es]=Formato de archivo Intel® Hexadecimal Object
 Comment[et]=Intel® 16nd-objektfaili vorming
 Comment[eu]=Intel® objektu hamaiseitarreko fitxategi formatua
-Comment[fa]=قالب پروندۀ شي شانزده شانزدهی  Intel® 
+Comment[fa]=قالب پروندۀ شیء شانزده شانزدهی  Intel® 
 Comment[fi]=Intel® Heksadesimaaliolion tiedostomuoto
 Comment[fr]=Format de fichier objet hexadécimal Intel®
 Comment[fy]=Intel® Hexadecimal Objekt Triem yndieling
@@ -27,6 +27,7 @@
 Comment[hi]=इंटेल® हेक्ज़ाडेसीमल ओबजेक्ट फ़ाइल फ़ॉर्मेट
 Comment[hr]=Intel® heksadecimalni objektni oblik datoteke
 Comment[hu]=Intel® hexadecimális objektumfájl
+Comment[id]=Format Berkas Obyek Intel® Hexadecimal
 Comment[is]=Intel® Hexadecimal hlutsskráarsnið
 Comment[it]=Formato file oggetto esadecimale Intel®
 Comment[ja]=Intel® 16進数オブジェクトファイルフォーマット
--- mimetypes/text/x-csrc.desktop
+++ mimetypes/text/x-csrc.desktop
@@ -28,6 +28,7 @@
 Comment[hi]=सी स्रोत फ़ाइल
 Comment[hr]=C datoteka izvornog koda
 Comment[hu]=C forrásfájl
+Comment[id]=Berkas Sumber C
 Comment[is]=C frumforrit
 Comment[it]=File sorgente C
 Comment[ja]=C ソースファイル
--- mimetypes/text/x-xslt.desktop
+++ mimetypes/text/x-xslt.desktop
@@ -18,7 +18,7 @@
 Comment[es]=Archivo de hoja de estilo XSLT
 Comment[et]=XSLT laaditabeli fail
 Comment[eu]=XSLT estilo-orriko fitxategia
-Comment[fa]=پروندۀ برگه‌شیوۀ XSLT
+Comment[fa]=پروندۀ برگۀ سبک XSLT
 Comment[fi]=XSLT-tyylitiedosto
 Comment[fr]=Feuille de style XSLT
 Comment[fy]=XSLT-stylblêdtriem
@@ -28,6 +28,7 @@
 Comment[hi]=XSLT स्टाइलशीट फ़ाइल
 Comment[hr]=XSLT stilsko oblikovanje
 Comment[hu]=XSLT-stíluslapfájl
+Comment[id]=Berkas Stylesheet XSLT
 Comment[is]=XSLT stílskrá
 Comment[it]=Foglio di stile XSLT
 Comment[ja]=XSLT スタイルシートファイル
--- mimetypes/text/x-csv.desktop
+++ mimetypes/text/x-csv.desktop
@@ -32,6 +32,7 @@
 Comment[hi]=पाठ फ़ाइल विराम चिह्न के द्वारा अलग की गई 
 Comment[hr]=Tekstualna datoteka razdijeljena zarezom
 Comment[hu]=Szöveges fájl (CSV)
+Comment[id]=Berkas Teks dengan Nilai Dipisahkan Koma
 Comment[is]=Dálkskipt textaskjal (CSV)
 Comment[it]=File di testo con valori separati da virgole
 Comment[ja]=値がコンマで区切られたテキストファイル (CSV)
--- mimetypes/text/xml.desktop
+++ mimetypes/text/xml.desktop
@@ -29,6 +29,7 @@
 Comment[hi]=एक्सएमएल दस्तावेज़ 
 Comment[hr]=XML dokument
 Comment[hu]=XML-dokumentum
+Comment[id]=Dokumen XML
 Comment[is]=XML skjal
 Comment[it]=Documento XML
 Comment[ja]=XML ドキュメント
--- mimetypes/text/sgml.desktop
+++ mimetypes/text/sgml.desktop
@@ -30,6 +30,7 @@
 Comment[hi]=SGML दस्तावेज़
 Comment[hr]=SGML dokument
 Comment[hu]=SGML-dokumentum
+Comment[id]=Dokumen SGML
 Comment[is]=SGML skjal
 Comment[it]=Documento SGML
 Comment[ja]=SGML ドキュメント
--- mimetypes/text/plain.desktop
+++ mimetypes/text/plain.desktop
@@ -29,6 +29,7 @@
 Comment[hi]=सादा पाठ दस्तावेज़
 Comment[hr]=Običan tekstualni dokument
 Comment[hu]=Egyszerű szöveg
+Comment[id]=Dokumen Teks Murni
 Comment[is]=Textaskjal
 Comment[it]=Documento di testo semplice
 Comment[ja]=プレーン テキスト ドキュメント
--- mimetypes/text/x-vcalendar.desktop
+++ mimetypes/text/x-vcalendar.desktop
@@ -27,6 +27,7 @@
 Comment[hi]=वी-केलैन्डर इन्टरचेंज फ़ाइल 
 Comment[hr]=vCalendar datoteka za razmjenu
 Comment[hu]=vCalendar-fájl
+Comment[id]=Berkas interchange vCalendar 
 Comment[is]=vCalendar gagnaskrá
 Comment[it]=File di interscambio vCalendar
 Comment[ja]=vCalendar 交換ファイル
--- mimetypes/text/x-tex.desktop
+++ mimetypes/text/x-tex.desktop
@@ -29,6 +29,7 @@
 Comment[hi]=TeX फ़ाइल
 Comment[hr]=TeX datoteka
 Comment[hu]=TeX-dokumentum
+Comment[id]=Berkas TeX
 Comment[is]=TeX-skjal
 Comment[it]=File TeX
 Comment[ja]=TeX ファイル
--- mimetypes/video/x-ogm.desktop
+++ mimetypes/video/x-ogm.desktop
@@ -31,6 +31,7 @@
 Comment[hi]=Ogg/Ogm वीडियो
 Comment[hr]=Ogg/Ogm video
 Comment[hu]=Ogg/Ogm-videó
+Comment[id]=Video Ogg/Ogm
 Comment[is]=Ogg/Ogm kvikmynd
 Comment[it]=Video Ogg/Ogm
 Comment[ja]=Ogg/Ogm ビデオ
--- mimetypes/video/x-theora.desktop
+++ mimetypes/video/x-theora.desktop
@@ -30,6 +30,7 @@
 Comment[hi]=थिओरा वीडियो
 Comment[hr]=Theora video
 Comment[hu]=Theora-videó
+Comment[id]=Video Theora
 Comment[is]=Theora kvikmynd
 Comment[it]=Video Theora
 Comment[ja]=Theora ビデオ
--- mimetypes/video/x-ms-asf.desktop
+++ mimetypes/video/x-ms-asf.desktop
@@ -30,6 +30,7 @@
 Comment[he]=מדיית ASF
 Comment[hi]=ASF मीडिया
 Comment[hu]=ASF fájl
+Comment[id]=Media ASF
 Comment[is]=ASF miðill
 Comment[it]=File multimediale ASF
 Comment[ja]=ASF メディア
--- mimetypes/video/vnd.rn-realvideo.desktop
+++ mimetypes/video/vnd.rn-realvideo.desktop
@@ -33,6 +33,7 @@
 Comment[hi]=रीयलवीडियो फ़ाइल
 Comment[hr]=RealVidio datoteka
 Comment[hu]=RealVideo-fájl
+Comment[id]=Berkas RealVideo
 Comment[is]=RealVideo skrá
 Comment[it]=File RealVideo
 Comment[ja]=RealVideo ファイル
--- mimetypes/video/mp4.desktop
+++ mimetypes/video/mp4.desktop
@@ -31,6 +31,7 @@
 Comment[hi]=MPEG-4 वीडियो
 Comment[hr]=MPEG-4 video
 Comment[hu]=MPEG-4-videó
+Comment[id]=Video MPEG-4
 Comment[is]=MPEG-4 kvikmynd
 Comment[it]=Video MPEG-4
 Comment[ja]=MPEG-4 ビデオ
--- mimetypes/video/x-flic.desktop
+++ mimetypes/video/x-flic.desktop
@@ -33,6 +33,7 @@
 Comment[hi]=आटोडेस्क का FLIC फ़ाइल
 Comment[hr]=Autodesk FLIC datoteka
 Comment[hu]=Autodesk FLIC-animáció
+Comment[id]=Berkas Autodesk's FLIC
 Comment[is]=Autodesk FLIC-skrár
 Comment[it]=File FLIC di Autodesk
 Comment[ja]=Autodesk's FLIC ファイル
--- mimetypes/video/x-matroska.desktop
+++ mimetypes/video/x-matroska.desktop
@@ -30,6 +30,7 @@
 Comment[hi]=मात्रोस्का वीडियो
 Comment[hr]=Matroska video
 Comment[hu]=Matroska-videó
+Comment[id]=Video Matroska
 Comment[is]=Matroska kvikmynd
 Comment[it]=Video Matroska
 Comment[ja]=Matroska ビデオ
--- mimetypes/video/x-mng.desktop
+++ mimetypes/video/x-mng.desktop
@@ -33,6 +33,7 @@
 Comment[hi]=MNG छवि
 Comment[hr]=MNG slika
 Comment[hu]=MNG-animáció
+Comment[id]=Gambar MNG
 Comment[is]=MNG-mynd
 Comment[it]=Immagine MNG
 Comment[ja]=MNG 画像
--- mimetypes/inode/directory-locked.desktop
+++ mimetypes/inode/directory-locked.desktop
@@ -28,6 +28,7 @@
 Comment[hi]=तालाबंद फ़ोल्डर
 Comment[hr]=Zaključana mapa
 Comment[hu]=Zárolt könyvtár
+Comment[id]=Folder Tekunci
 Comment[is]=Læst mappa
 Comment[it]=Cartella bloccata
 Comment[ja]=ロックされたフォルダ
--- kioslave/file/file.h
+++ kioslave/file/file.h
@@ -48,10 +48,10 @@
   virtual ~FileProtocol() { }
 
   virtual void get( const KURL& url );
-  virtual void put( const KURL& url, int _mode,
-		    bool _overwrite, bool _resume );
+  virtual void put( const KURL& url, int permissions,
+		    bool overwrite, bool resume );
   virtual void copy( const KURL &src, const KURL &dest,
-                     int mode, bool overwrite );
+                     int permissions, bool overwrite );
   virtual void rename( const KURL &src, const KURL &dest,
                        bool overwrite );
   virtual void symlink( const QString &target, const KURL &dest,
--- kioslave/http/kcookiejar/kcookiejar.desktop
+++ kioslave/http/kcookiejar/kcookiejar.desktop
@@ -11,7 +11,7 @@
 Name[ca]=Mòdul Jar de cookies per a KDED
 Name[cs]=KDED modul pro cookies
 Name[cy]=Modiwl Jar Cwci KDED
-Name[da]=KDED-cookie-dåse-modul
+Name[da]=KDED-cookie-jar-modul
 Name[de]=KDED-Modul für die Cookie-Verwaltung
 Name[el]=Άρθρωμα Cookie Jar του KDED
 Name[eo]=KDED-kuketotraktila modulo
@@ -93,6 +93,7 @@
 Comment[hi]=तंत्र की सभी कुकी की जानकारी रखता है
 Comment[hr]=Vođenje evidencije o svim kolačićima na sustavu
 Comment[hu]=Nyomon követi a rendszerben létrejövő cookie-kat
+Comment[id]=Menyimpan semua cookies pada sistem
 Comment[is]=Heldur utanum allar smákökur í kerfinu
 Comment[it]=Tiene traccia di tutti i cookie del sistema
 Comment[ja]=システムのすべてのクッキーを管理します
--- kioslave/http/http_cache_cleaner.desktop
+++ kioslave/http/http_cache_cleaner.desktop
@@ -19,7 +19,7 @@
 Name[es]=Limpiador del caché de HTTP
 Name[et]=HTTP vahemälu puhastaja
 Name[eu]=HTTP cache-garbitzailea
-Name[fa]=پاک‌کننده نهانگاه قام
+Name[fa]=پاک‌کنندۀ نهانگاه قام
 Name[fi]=HTTP-välimuistin tyhjentäjä
 Name[fr]=Nettoyage du cache HTTP
 Name[fy]=HTTP Cache oprommer
--- kioslave/http/http.h
+++ kioslave/http/http.h
@@ -190,16 +190,16 @@
   virtual void slave_status();
 
   virtual void get( const KURL& url );
-  virtual void put( const KURL& url, int _mode, bool overwrite,
-                    bool _resume );
+  virtual void put( const KURL& url, int permissions, bool overwrite,
+                    bool resume );
 
 //----------------- Re-implemented methods for WebDAV -----------
   virtual void listDir( const KURL& url );
-  virtual void mkdir( const KURL& url, int _permissions );
+  virtual void mkdir( const KURL& url, int permissions );
 
   virtual void rename( const KURL& src, const KURL& dest, bool overwrite );
-  virtual void copy( const KURL& src, const KURL& dest, int _permissions, bool overwrite );
-  virtual void del( const KURL& url, bool _isfile );
+  virtual void copy( const KURL& src, const KURL& dest, int permissions, bool overwrite );
+  virtual void del( const KURL& url, bool isfile );
 
   // ask the host whether it supports WebDAV & cache this info
   bool davHostOk();
--- kioslave/ftp/ftp.h
+++ kioslave/ftp/ftp.h
@@ -260,7 +260,7 @@
 
   virtual void listDir( const KURL & url );
   virtual void mkdir( const KURL & url, int permissions );
-  virtual void rename( const KURL & src, const KURL & dst, bool overwrite );
+  virtual void rename( const KURL & src, const KURL & dest, bool overwrite );
   virtual void del( const KURL & url, bool isfile );
   virtual void chmod( const KURL & url, int permissions );
 
--- kioslave/gzip/kgzipfilter.cpp
+++ kioslave/gzip/kgzipfilter.cpp
@@ -38,8 +38,12 @@
 public:
     KGzipFilterFactory() : KLibFactory() {}
     ~KGzipFilterFactory(){}
-    QObject *createObject( QObject *, const char *, const char*, const QStringList & )
+    QObject *createObject( QObject *parent, const char *name, const char*className, const QStringList & args )
     {
+        Q_UNUSED(parent);
+        Q_UNUSED(name);
+        Q_UNUSED(className);
+        Q_UNUSED(args);
         return new KGzipFilter;
     }
 };
--- kinit/configure.in.in
+++ kinit/configure.in.in
@@ -49,10 +49,11 @@
 case $target_os in
     linux*)
         AC_MSG_RESULT(yes)
-        kdeinit_setuid=1
+        KDEINIT_SETUID=1
         AC_DEFINE(KDEINIT_OOM_PROTECT,1,[Enable prevention against poor Linux OOM-killer])
         ;;
     *)  AC_MSG_RESULT(no)
+        KDEINIT_SETUID=0
         ;;
 esac
-AM_CONDITIONAL(KDEINIT_SETUID, test -n "$kdeinit_setuid" )
+AC_SUBST(KDEINIT_SETUID)
--- kinit/Makefile.am
+++ kinit/Makefile.am
@@ -82,14 +82,9 @@
 dummy.cpp:
 	echo > dummy.cpp
 
-if KDEINIT_SETUID
-# start_kdeinit needs to be installed setuid root on Linux
 install-exec-hook:
-	@(chown 0 $(DESTDIR)$(bindir)/start_kdeinit && chmod 4755 $(DESTDIR)$(bindir)/start_kdeinit) || echo "Please make start_kdeinit setuid root" >&2
-	@echo ""
-	@echo "start_kdeinit is by default installed on Linux with a set SETUID root bit!"
-	@echo "This is needed to prevent kdeinit from being killed by a bad heuristic in the OOM-killer when running out of memory."
-	@echo ""
-endif
+	@if test \${KDEINIT_SETUID} != 0; then \
+		(chown 0 $(DESTDIR)$(bindir)/start_kdeinit && chmod 4755 $(DESTDIR)$(bindir)/start_kdeinit) || echo "Please make start_kdeinit setuid root" ; \
+	fi
 
 include $(top_srcdir)/admin/Doxyfile.am
--- kimgio/rgb.kimgio
+++ kimgio/rgb.kimgio
@@ -28,6 +28,7 @@
 Name[hi]=एसजीआई छवि (आरजीबी)
 Name[hr]=SGI slika (RGB)
 Name[hu]=SGI-kép (RGB)
+Name[id]=Gambar SGI (RGB)
 Name[is]=SGI mynd (RGB)
 Name[it]=Immagine SGI (RGB)
 Name[ja]=SGI 画像 (RGB)
--- kimgio/hdr.kimgio
+++ kimgio/hdr.kimgio
@@ -12,7 +12,7 @@
 Name[es]=Imagen de gran rango dinámico
 Name[et]=High Dynamic Range pildifail
 Name[eu]=Dinamika Altuko Barruti irudia
-Name[fa]=گستره پویایی بالای تصویر
+Name[fa]=گسترۀ پویایی بالای تصویر
 Name[fi]=Korkeatasoinen muuttuvien arvoalueiden kuva
 Name[fr]=Image à définition dynamique haute
 Name[fy]=High Dynamic Range-ôfbylding
--- kimgio/xcf.kimgio
+++ kimgio/xcf.kimgio
@@ -25,6 +25,7 @@
 Name[hi]=गिम्प छवि
 Name[hr]=GIMP slika
 Name[hu]=GIMP-kép
+Name[id]=Gambar GIMP
 Name[is]=GIMP mynd
 Name[it]=Immagine GIMP
 Name[ja]=GIMP 画像
--- kimgio/mng.kimgio
+++ kimgio/mng.kimgio
@@ -26,6 +26,7 @@
 Name[hi]=एमएनजी छवि
 Name[hr]=MNG slika
 Name[hu]=MNG-kép
+Name[id]=Gambar MNG
 Name[is]=MNG mynd
 Name[it]=Immagine MNG
 Name[ja]=MNG 画像
--- kimgio/psd.kimgio
+++ kimgio/psd.kimgio
@@ -28,6 +28,7 @@
 Name[km]= រូបភាព​របស់ Adobe Photoshop
 Name[lb]=Adobe-Photoshop-Bild
 Name[lt]=Adobe Photoshop paveiksliukas
+Name[lv]=Adobe Photoshop attēls
 Name[mk]=Adobe Photoshop-слика
 Name[ms]=Imej Adobe Photoshop
 Name[nb]=Adobe Photoshop-bilde
--- kimgio/eps.kimgio
+++ kimgio/eps.kimgio
@@ -20,7 +20,7 @@
 Name[es]=Imagen PostScript encapsulada
 Name[et]=Kapseldatud PostScript pildifail
 Name[eu]=Kapsulatutako PostScript irudia
-Name[fa]=تصویر پست اسکریپت کپسوله شده
+Name[fa]=تصویر پست اسکریپت کپسوله‌شده
 Name[fi]=Encapsulated PostScript (EPS) -kuva
 Name[fr]=Image PostScript encapsulée
 Name[fy]=Ynsletten PostSkript ôfbylding
--- kimgio/pbm.kimgio
+++ kimgio/pbm.kimgio
@@ -18,7 +18,7 @@
 Name[es]=Imagen Bitmap portable
 Name[et]=Portable bittraster-pildifail
 Name[eu]=Bitmap irudi eramangarria
-Name[fa]=تصویر نگاشت بیت حمل پذیر
+Name[fa]=تصویر نگاشت بیت حمل‌پذیر
 Name[fi]=Portable Bitmap -kuva
 Name[fr]=Image Bitmap Portable
 Name[fy]=Portable Bitmap ôfbylding
--- kimgio/pgm.kimgio
+++ kimgio/pgm.kimgio
@@ -19,7 +19,7 @@
 Name[es]=Imagen portable Graymap
 Name[et]=Portable Graymap pildifail
 Name[eu]=Graymap irudi eramangarria
-Name[fa]=تصویر نگاشت خاکستری حمل پذیر
+Name[fa]=تصویر نگاشت خاکستری حمل‌پذیر
 Name[fi]=Portable Graymap -kuva
 Name[fr]=Image Graymap Portable
 Name[fy]=Portable Graymap ôfbylding
--- kimgio/exr.kimgio
+++ kimgio/exr.kimgio
@@ -20,6 +20,7 @@
 Name[hi]=आईएलएम ईएक्सआर छवि के-इमिजियो
 Name[hr]=ILM EXR Kimgio slika
 Name[hu]=ILM EXR-kép Kimgio
+Name[id]=Kimgio Gambar ILM EXR
 Name[is]=ILM EXR mynd Kimgio
 Name[it]=Immagine Kimgio ILM EXR
 Name[ja]=ILM EXR 画像 Kimgio
--- kio/kfileplugin.desktop
+++ kio/kfileplugin.desktop
@@ -28,7 +28,7 @@
 Name[hi]=KFile मेटा ङाटा प्लगइन
 Name[hr]=KFile dodatak za meta-podatke
 Name[hu]=KFile metaadat-modul
-Name[id]=Plugin Meta Data KFile
+Name[id]=Plugin Meta Data KBerkas
 Name[is]=KFile lýsiskráar-íforrit
 Name[it]=Plugin informazioni aggiuntive per KFile
 Name[ja]=KFile メタデータプラグイン
--- kio/kio/slavebase.cpp
+++ kio/kio/slavebase.cpp
@@ -58,6 +58,8 @@
 #include "kio/ioslave_defaults.h"
 #include "kio/slaveinterface.h"
 
+#include "uiserver_stub.h"
+
 #ifndef NDEBUG
 #ifdef HAVE_BACKTRACE
 #include <execinfo.h>
@@ -85,21 +87,22 @@
 
    QStringList groupList() const { return QStringList(); }
 
-   QMap<QString,QString> entryMap(const QString &) const
-      { return QMap<QString,QString>(); }
+   QMap<QString,QString> entryMap(const QString &group) const
+      { Q_UNUSED(group); return QMap<QString,QString>(); }
 
    void reparseConfiguration() { }
 
-   KEntryMap internalEntryMap( const QString &) const { return KEntryMap(); }
+   KEntryMap internalEntryMap( const QString &pGroup) const { Q_UNUSED(pGroup); return KEntryMap(); }
 
    KEntryMap internalEntryMap() const { return KEntryMap(); }
 
-   void putData(const KEntryKey &, const KEntry&, bool) { }
+   void putData(const KEntryKey &_key, const KEntry&_data, bool _checkGroup) 
+   { Q_UNUSED(_key); Q_UNUSED(_data); Q_UNUSED(_checkGroup); }
 
-   KEntry lookupData(const KEntryKey &key) const
+   KEntry lookupData(const KEntryKey &_key) const
    {
      KEntry entry;
-     QString value = slave->metaData(key.c_key);
+     QString value = slave->metaData(_key.c_key);
      if (!value.isNull())
         entry.mValue = value.utf8();
      return entry;
@@ -820,11 +823,16 @@
     QByteArray reply;
     AuthInfo authResult;
     long windowId = metaData("window-id").toLong();
+    long progressId = metaData("progress-id").toLong();
 
-    kdDebug(7019) << "SlaveBase::openPassDlg window-id=" << windowId << endl;
+    kdDebug(7019) << "SlaveBase::openPassDlg window-id=" << windowId << " progress-id=" << progressId << endl;
 
     (void) dcopClient(); // Make sure to have a dcop client.
 
+    UIServer_stub uiserver( "kio_uiserver", "UIServer" );
+    if (progressId)
+      uiserver.setJobVisible( progressId, false );
+
     QDataStream stream(params, IO_WriteOnly);
 
     if (metaData("no-auth-prompt").lower() == "true")
@@ -832,8 +840,13 @@
     else
        stream << info << errorMsg << windowId << s_seqNr;
 
-    if (!d->dcopClient->call( "kded", "kpasswdserver", "queryAuthInfo(KIO::AuthInfo, QString, long int, long int)",
-                               params, replyType, reply ) )
+    bool callOK = d->dcopClient->call( "kded", "kpasswdserver", "queryAuthInfo(KIO::AuthInfo, QString, long int, long int)",
+                                        params, replyType, reply );
+
+    if (progressId)
+      uiserver.setJobVisible( progressId, true );
+
+    if (!callOK)
     {
        kdWarning(7019) << "Can't communicate with kded_kpasswdserver!" << endl;
        return false;
--- kio/kio/defaultprogress.h
+++ kio/kio/defaultprogress.h
@@ -48,7 +48,7 @@
   /**
    * Creates a new default progress dialog.
    * @param parent the parent of the dialog (or 0 for top-level)
-   * @param the name of the dialog, can be 0
+   * @param name the name of the dialog, can be 0
    * @since 3.1
    */
   DefaultProgress( QWidget* parent, const char* name = 0 );
@@ -62,16 +62,16 @@
                                     unsigned long totalFiles );
 
 public slots:
-  virtual void slotTotalSize( KIO::Job*, KIO::filesize_t size );
-  virtual void slotTotalFiles( KIO::Job*, unsigned long files );
-  virtual void slotTotalDirs( KIO::Job*, unsigned long dirs );
+  virtual void slotTotalSize( KIO::Job *job, KIO::filesize_t size );
+  virtual void slotTotalFiles( KIO::Job *job, unsigned long files );
+  virtual void slotTotalDirs( KIO::Job *job, unsigned long dirs );
 
-  virtual void slotProcessedSize( KIO::Job*, KIO::filesize_t bytes );
-  virtual void slotProcessedFiles( KIO::Job*, unsigned long files );
-  virtual void slotProcessedDirs( KIO::Job*, unsigned long dirs );
+  virtual void slotProcessedSize( KIO::Job *job, KIO::filesize_t bytes );
+  virtual void slotProcessedFiles( KIO::Job *job, unsigned long files );
+  virtual void slotProcessedDirs( KIO::Job *job, unsigned long dirs );
 
-  virtual void slotSpeed( KIO::Job*, unsigned long speed );
-  virtual void slotPercent( KIO::Job*, unsigned long percent );
+  virtual void slotSpeed( KIO::Job *job, unsigned long speed );
+  virtual void slotPercent( KIO::Job *job, unsigned long percent );
   /**
    * Called to set an information message.
    * @param job the KIO::Job
@@ -79,38 +79,38 @@
    */
   virtual void slotInfoMessage( KIO::Job *job, const QString & msg );
 
-  virtual void slotCopying( KIO::Job*, const KURL& src, const KURL& dest );
-  virtual void slotMoving( KIO::Job*, const KURL& src, const KURL& dest );
-  virtual void slotDeleting( KIO::Job*, const KURL& url );
+  virtual void slotCopying( KIO::Job* job, const KURL& src, const KURL& dest );
+  virtual void slotMoving( KIO::Job* job, const KURL& src, const KURL& dest );
+  virtual void slotDeleting( KIO::Job* job, const KURL& url );
   /**
    * Called when the job is transferring.
    * @param job the KIO::Job
    * @param url the url to transfer
    * @since 3.1
    */
-  void slotTransferring( KIO::Job*, const KURL& url );
-  virtual void slotCreatingDir( KIO::Job*, const KURL& dir );
+  void slotTransferring( KIO::Job* job, const KURL& url );
+  virtual void slotCreatingDir( KIO::Job* job, const KURL& dir );
   /**
    * Called when the job is requesting a stat.
    * @param job the KIO::Job
    * @param dir the dir to stat
    * @since 3.1
    */
-  virtual void slotStating( KIO::Job*, const KURL& dir );
+  virtual void slotStating( KIO::Job* job, const KURL& dir );
   /**
    * Called when the job is mounting.
    * @param job the KIO::Job
    * @param dev the device to mount
    * @param point the mount point
    */
-  virtual void slotMounting( KIO::Job*, const QString & dev, const QString & point );
+  virtual void slotMounting( KIO::Job* job, const QString & dev, const QString & point );
   /**
    * Called when the job is unmounting.
    * @param job the KIO::Job
    * @param point the mount point
    */
-  virtual void slotUnmounting( KIO::Job*, const QString & point );
-  virtual void slotCanResume( KIO::Job*, KIO::filesize_t );
+  virtual void slotUnmounting( KIO::Job* job, const QString & point );
+  virtual void slotCanResume( KIO::Job* job, KIO::filesize_t from);
 
   /**
    * Called when the job is cleaned.
--- kio/kio/kmimetype.cpp
+++ kio/kio/kmimetype.cpp
@@ -1013,7 +1013,7 @@
     } else {
       if(kapp->dcopClient()->call( app, object,
                    function.utf8(),
-                   dataToSend, replyType, replyData, true, 100)
+                   dataToSend, replyType, replyData, true, -1)
 	    && replyType == "QStringList" ) {
 
         QDataStream dataStreamIn(replyData, IO_ReadOnly);
--- kio/kio/slavebase.h
+++ kio/kio/slavebase.h
@@ -395,7 +395,7 @@
      *
      * @see canResume()
      */
-    virtual void put( const KURL& url, int permissions, bool overwrite, bool /*resume*/ );
+    virtual void put( const KURL& url, int permissions, bool overwrite, bool resume );
 
     /**
      * Finds all details for one file or directory.
--- kio/kio/job.cpp
+++ kio/kio/job.cpp
@@ -110,6 +110,7 @@
     if ( showProgressInfo )
     {
         m_progressId = Observer::self()->newJob( this, true );
+        addMetaData("progress-id", QString::number(m_progressId));
         //kdDebug(7007) << "Created job " << this << " with progress info -- m_progressId=" << m_progressId << endl;
         // Connect global progress info signals
         connect( this, SIGNAL( percent( KIO::Job*, unsigned long ) ),
@@ -410,15 +411,6 @@
   : Job(showProgressInfo), m_slave(0), m_packedArgs(packedArgs),
     m_url(url), m_command(command), m_totalSize(0)
 {
-    if (!m_url.isValid())
-    {
-        m_error = ERR_MALFORMED_URL;
-        m_errorText = m_url.url();
-        QTimer::singleShot(0, this, SLOT(slotFinished()) );
-        return;
-    }
-
-
     if (m_url.hasSubURL())
     {
        KURL::List list = KURL::split(m_url);
@@ -430,6 +422,15 @@
     }
 
     Scheduler::doJob(this);
+
+    if (!m_url.isValid())
+    {
+        kdDebug() << "ERR_MALFORMED_URL" << endl;
+        m_error = ERR_MALFORMED_URL;
+        m_errorText = m_url.url();
+        QTimer::singleShot(0, this, SLOT(slotFinished()) );
+        return;
+    }
 }
 
 void SimpleJob::kill( bool quietly )
--- kio/kio/kservice.cpp
+++ kio/kio/kservice.cpp
@@ -447,19 +447,21 @@
 
    QStringList groupList() const { return QStringList(); }
 
-   QMap<QString,QString> entryMap(const QString &) const
-      { return QMap<QString,QString>(); }
+   QMap<QString,QString> entryMap(const QString &group) const
+      { Q_UNUSED(group); return QMap<QString,QString>(); }
 
    void reparseConfiguration() { }
 
-   KEntryMap internalEntryMap( const QString &) const { return KEntryMap(); }
+   KEntryMap internalEntryMap( const QString &pGroup) const 
+   { Q_UNUSED(pGroup); return KEntryMap(); }
 
    KEntryMap internalEntryMap() const { return KEntryMap(); }
 
-   void putData(const KEntryKey &, const KEntry&, bool) { }
+   void putData(const KEntryKey &_key, const KEntry& _data, bool _checkGroup) 
+   { Q_UNUSED(_key); Q_UNUSED(_data); Q_UNUSED(_checkGroup); }
 
-   KEntry lookupData(const KEntryKey &) const
-   { KEntry entry; entry.mValue = value; return entry; }
+   KEntry lookupData(const KEntryKey &_key) const
+   { Q_UNUSED(_key); KEntry entry; entry.mValue = value; return entry; }
 protected:
    QString key;
    QCString value;
--- kio/kio/kscan.h
+++ kio/kio/kscan.h
@@ -339,7 +339,7 @@
     KOCRDialogFactory( QObject *parent=0, const char *name=0 );
 
     virtual QObject* createObject( QObject* parent = 0, const char* name = 0,
-                                   const char* classname = "QObject",
+                                   const char* className = "QObject",
                                    const QStringList &args = QStringList() );
 
 
--- kio/kfile/kfiletreeview.h
+++ kio/kfile/kfiletreeview.h
@@ -214,9 +214,9 @@
    // The drop event allows to differentiate between move and copy
    void dropped( QWidget*, QDropEvent*, KURL::List&, KURL& );
 
-   void dropped( QDropEvent *, QListViewItem * );
+   void dropped( QDropEvent *e, QListViewItem * after);
    void dropped(KFileTreeView *, QDropEvent *, QListViewItem *);
-   void dropped(QDropEvent *, QListViewItem *, QListViewItem *);
+   void dropped(QDropEvent *e, QListViewItem * parent, QListViewItem * after);
    void dropped(KFileTreeView *, QDropEvent *, QListViewItem *, QListViewItem *);
 
 protected:
--- kio/kfile/kurlrequester.cpp
+++ kio/kfile/kurlrequester.cpp
@@ -306,7 +306,7 @@
     emit urlSelected( d->url() );
 }
 
-void KURLRequester::setMode(unsigned int mode)
+void KURLRequester::setMode(uint mode)
 {
     Q_ASSERT( (mode & KFile::Files) == 0 );
     d->fileDialogMode = mode;
--- kio/kdatatool.desktop
+++ kio/kdatatool.desktop
@@ -19,7 +19,7 @@
 Comment[es]=Herramienta KDE de datos
 Comment[et]=KDE andmete rakendus
 Comment[eu]=KDEren datuen tresna
-Comment[fa]=ابزار داده KDE
+Comment[fa]=ابزار دادۀ KDE
 Comment[fi]=KDE:n datatyökalu
 Comment[fr]=Outil de données KDE
 Comment[fy]=KDE data-helpprogramma
--- kio/misc/kssld/kssld.desktop
+++ kio/misc/kssld/kssld.desktop
@@ -102,6 +102,7 @@
 Comment[hi]=केडीईडी के लिए केएसएसएल डेमन मॉड्यूल
 Comment[hr]=KSSL demon modul za KDED
 Comment[hu]=KSSL szolgáltatásmodul a KDED-hez
+Comment[id]=Modul daemon KSSL untuk KDED
 Comment[is]=KSSL þjónseining fyrir KDED
 Comment[it]=Modulo demone KSSL per KDED
 Comment[ja]=KDED用のKSSLデーモンモジュール
--- kio/misc/uiserver.h
+++ kio/misc/uiserver.h
@@ -276,6 +276,7 @@
 
   /**
    * Popup a message box.
+   * @param id The message identifier.
    * @param type type of message box: QuestionYesNo, WarningYesNo, WarningContinueCancel...
    *   This enum is defined in slavebase.h, it currently is:
    *   QuestionYesNo = 1, WarningYesNo = 2, WarningContinueCancel = 3,
--- kio/misc/mms.protocol
+++ kio/misc/mms.protocol
@@ -27,6 +27,7 @@
 Description[hi]=माइक्रोसॉफ़्ट मीडिया सर्वर प्रोटोकॉल
 Description[hr]=Protokol Microsoft Media poslužitelja
 Description[hu]=MMS protokoll
+Description[id]=Protokol Server Microsoft Media
 Description[is]=Microsoft Media Server samskiptaregla
 Description[it]=Protocollo Microsoft Media Server
 Description[ja]=Microsoft メディアサーバ プロトコル
--- kio/misc/kwalletd/kwalletd.desktop
+++ kio/misc/kwalletd/kwalletd.desktop
@@ -93,6 +93,7 @@
 Comment[hi]=केडीईडी के लिए के-वॉलेट डेमन मॉड्यूल
 Comment[hr]=KWallet demon modul za KDED
 Comment[hu]=KWallet szolgáltatásmodul a KDED-hez
+Comment[id]=Modul daemon KWallet untuk KDED
 Comment[is]=KWallet þjónseining fyrir KDED
 Comment[it]=Modulo demone KWallet per KDED
 Comment[ja]=KDED用のKWallet デーモンモジュール
--- kio/misc/kpac/eventsrc
+++ kio/misc/kpac/eventsrc
@@ -163,6 +163,7 @@
 Comment[hi]=ङाउनलोडेड प्रॉक्सी कॉन्फ़िगरेटर स्क्रिप्ट अवैध है।
 Comment[hr]=Preuzeta skripta konfiguriranja proxyja je neispravna
 Comment[hu]=A letöltött proxybeállító szkript érvénytelen
+Comment[id]=Skrip konfigurasi proxy yang diunduh tidak valid
 Comment[is]=Sótt milliþjónsskrifta er ógild
 Comment[it]=Lo script di configurazione proxy scaricato non è valido
 Comment[ja]=ダウンロードされたプロキシ設定スクリプトは無効です。
@@ -215,7 +216,7 @@
 Name[ca]=Error descàrrega de l'script
 Name[cs]=Chyba ve stažení skriptu
 Name[cy]=Gwall wrth lawrlwytho'r sgript
-Name[da]=Script nedtagningsfejl-fejl
+Name[da]=Script download-fejl
 Name[de]=Skript-Fehler beim Herunterladen
 Name[el]=Σφάλμα λήψης σεναρίου
 Name[eo]=Skripta ŝarĝeraro
@@ -300,6 +301,7 @@
 Comment[hi]=प्रॉक्सी कॉन्फ़िगरेशन स्क्रिप्ट डाउनलोड नही की जा सकी।
 Comment[hr]=Skripta konfiguriranja proxyja nije mogla biti preuzetom s Interneta
 Comment[hu]=A proxybeállító szkript letöltése nem sikerült
+Comment[id]= Skrip konfigurasi proxy tidak dapat diunduh
 Comment[is]=Gat ekki sótt stillingaskriftu milliþjóns
 Comment[it]=Impossibile scaricare lo script di configurazione proxy
 Comment[ja]=プロキシ設定スクリプトをダウンロードできませんでした
@@ -433,6 +435,7 @@
 Comment[hi]=प्रॉक्सी कॉन्फ़िगरेशन स्क्रिप्ट चलाने में त्रुटि हुई
 Comment[hr]=Došlo je do pogreške pri izvršavanju konfiguracijske skripte proxyja
 Comment[hu]=Hiba történt a proxybeállító szkript végrehajtása közben
+Comment[id]=Kesalahan sewaktu menjalankan skrip konfigurasi proxy
 Comment[is]=Það kom upp villa við keyrslu stillingaskriftu milliþjóns
 Comment[it]=Si è verificato un errore durante l'esecuzione dello script di configurazione proxy
 Comment[ja]=プロキシ設定スクリプトの実行中にエラーが発生しました
--- kio/misc/kpac/proxyscout.desktop
+++ kio/misc/kpac/proxyscout.desktop
@@ -72,6 +72,7 @@
 Comment[hi]=स्वचालित प्रॉक्सी कॉन्फ़िगरेशन
 Comment[hr]=Automatsko konfiguriranje proxyja
 Comment[hu]=Automatikus proxybeállítás
+Comment[id]=Konfigurasi proxi otomatis
 Comment[is]=Sjálfvirkar stillingar milliþjóns
 Comment[it]=Configurazione automatica proxy
 Comment[ja]=自動プロキシ設定
--- kio/kcomprfilter.desktop
+++ kio/kcomprfilter.desktop
@@ -19,7 +19,7 @@
 Name[es]=Filtro de compresión de KDE
 Name[et]=KDE pakkimise filter
 Name[eu]=KDEren konpresio-iragazkia
-Name[fa]=پالایه فشرده سازی KDE
+Name[fa]=پالایۀ فشرده‌سازی KDE
 Name[fi]=KDE:n pakkaussuodin
 Name[fr]=Filtre de compression de KDE
 Name[fy]=KDE kompresjefilter
--- kio/data.protocol
+++ kio/data.protocol
@@ -25,6 +25,7 @@
 Description[hi]=डाटा यूआरआई (आरएफसी2397) के लिए एक के-आई-ओ-स्लेव
 Description[hr]=kioslave za podatkovne URI-ije (rfc2397)
 Description[hu]=KDE-protokoll adat-URI-k használataához (RFC 2397)
+Description[id]=Kioslave for URI data (rfc2397)
 Description[is]=kioslave fyrir gagnaslóðir (rfc2397)
 Description[it]=Un kioslave per il protocollo di URI di dati (rfc2397)
 Description[ja]=データ URIs (rfc2397) の kioslave
--- kio/kcmodule.desktop
+++ kio/kcmodule.desktop
@@ -21,7 +21,7 @@
 Name[es]=Módulo de control de KDE
 Name[et]=KDE juhtimismoodul
 Name[eu]=KDEren kontrol-modulua
-Name[fa]=پیمانه کنترل KDE
+Name[fa]=پیمانۀ کنترل KDE
 Name[fi]=KDE:n ohjausmoduuli
 Name[fr]=Module de configuration de KDE
 Name[fy]=KDE konfiguraasjemodule
--- kio/kpasswdserver.desktop
+++ kio/kpasswdserver.desktop
@@ -98,6 +98,7 @@
 Comment[hi]=पासवर्ड कैचिंग समर्थन
 Comment[hr]=Podrška međuspremanja lozinki
 Comment[hu]=Jelszóelmentési támogatás
+Comment[id]=Dukungan penyimpanan password
 Comment[is]=Skyndiminni fyrir lykilorð
 Comment[it]=Supporto per la memorizzazione temporanea delle password
 Comment[ja]=パスワードキャッシュサポート
--- kio/kssl/ksslcsessioncache.h
+++ kio/kssl/ksslcsessioncache.h
@@ -31,14 +31,14 @@
 
     /**
      * Store a SSL session (client side only)
-     * @param url URL the key belongs to. Method, host and port are used
+     * @param kurl URL the key belongs to. Method, host and port are used
      * @param session QString representing session to store
      */
     static void putSessionForURL(const KURL &kurl, const QString &session);
 
     /**
      * Retrieve a SSL session (client side only)
-     * @param url URL the key belongs to
+     * @param kurl URL the key belongs to
      * @return if a key can be found, QString::null otherwise
      */
     static QString getSessionForURL(const KURL &kurl);
--- kio/kssl/ksmimecrypto.h
+++ kio/kssl/ksmimecrypto.h
@@ -85,7 +85,7 @@
      * Does not check certificates for validity!
      * @param signedText signed message block
      * @param clearText cleartext of signed message
-     * @foundCerts certificates found in this mesasge
+     * @param foundCerts certificates found in this mesasge
      * @return 0 on success
      */
     rc checkOpaqueSignature(const QByteArray &signedText,
@@ -101,7 +101,7 @@
      * @param clearText MIME representation of message to encrypt
      * @param cipherText returned encrypted message
      * @param algorithm encryption algorithm
-     * @recip recipient certificates
+     * @param recip recipient certificates
      * @return 0 on success
      */
     rc encryptMessage(const QCString &clearText,
--- kstyles/themes/light-v2.themerc
+++ kstyles/themes/light-v2.themerc
@@ -26,7 +26,7 @@
 Name[hi]=लाइट शैली, 2रा संशोधन
 Name[hr]=Lagani stil, druga revizija
 Name[hu]=Light stílus, 2. verzió
-Name[id]=Gaya Ringan, revisi ke-2
+Name[id]=Light, revisi ke-2
 Name[is]=Léttur stíll, - taka 2
 Name[it]=Stile Light, seconda versione
 Name[ja]=Light スタイル、第2版
@@ -96,6 +96,7 @@
 Comment[hi]=सादा और सुरूचिकर 'लाइट' विजेट शैली का दूसरा संशोधन.
 Comment[hr]=Druga revizija jednostavnog i elegantnog 'laganog' widget stila.
 Comment[hu]=A nemesen egyszerű 'Light' elemstílus második változata.
+Comment[id]=Revisi kedua dari gaya widget sederhana dan elegan 'Light'.
 Comment[is]=Önnur útgáfa af einföldum og snotrum stíl
 Comment[it]=Seconda versione dello stile semplice ed elegante "Light".
 Comment[ja]=シンプルでエレガントな'Light'ウィジェットスタイル第2版。
--- kstyles/themes/light-v3.themerc
+++ kstyles/themes/light-v3.themerc
@@ -26,7 +26,7 @@
 Name[hi]=लाइट शैली, 3रा संशोधन
 Name[hr]=Lagani stil, treća revizija
 Name[hu]=Light stílus, 3. verzió
-Name[id]=Gaya Ringan, revisi ke-3
+Name[id]=Light, revisi ke-2
 Name[is]=Léttur stíll, - taka 3
 Name[it]=Stile Light, terza versione
 Name[ja]=Light スタイル、第3版
@@ -96,6 +96,7 @@
 Comment[hi]=सादा और सुरूचिकर 'लाइट' विजेट शैली का तीसरा संशोधन.
 Comment[hr]=Treća revizija jednostavnog i elegantnog 'laganog' widget stila.
 Comment[hu]=A nemesen egyszerű 'Light' elemstílus harmadik változata.
+Comment[id]=Revisi ketiga dari gaya widget sederhana dan elegan 'Light'.
 Comment[is]=Þriðja útgáfa af einföldum og snotrum stíl
 Comment[it]=Terza versione dello stile semplice ed elegante "Light".
 Comment[ja]=シンプルでエレガントな'Light'ウィジェットスタイル第3版。
--- kstyles/themes/qtplatinum.themerc
+++ kstyles/themes/qtplatinum.themerc
@@ -40,7 +40,7 @@
 Comment[es]=Estilo incorporado Platinum sin tema
 Comment[et]=Qt Platinum teemata stiil
 Comment[eu]=Gairik gabeko Platinum estiloa
-Comment[fa]=سبک پلاتین بدون چهره توکار
+Comment[fa]=سبک پلاتین بدون چهرۀ توکار
 Comment[fi]=Sisäänrakennettu teemoittamaton Platinium-tyyli
 Comment[fr]=Style Platinum d'origine sans thème
 Comment[fy]=Ynboude, temaleaze Platinum-styl
@@ -50,7 +50,7 @@
 Comment[hi]=अंतर्निर्मित अनथीम्ड प्लेटिनम शैली
 Comment[hr]=Ugrađeni Platinum stil, bez teme
 Comment[hu]=Beépített Platinum stílus
-Comment[id]=Gaya unthemed Platinum built-in
+Comment[id]=Gaya ala Platinum built-in tanpa tema 
 Comment[is]=Innbyggði Platínum stíllinn (án þema)
 Comment[it]=Stile Platino interno senza tema
 Comment[ja]=ビルトイン Platinum スタイル (テーマなし)
--- kstyles/themes/qtwindows.themerc
+++ kstyles/themes/qtwindows.themerc
@@ -38,7 +38,7 @@
 Comment[hi]=अंतर्निर्मित विंडोज़ 9x शैली
 Comment[hr]=Ugrađeni Windows 9x stil, bez teme
 Comment[hu]=Beépített Windows 9x-stílus
-Comment[id]=Gaya unthemed Windows 9x built-in
+Comment[id]=Gaya ala Windows 9x built-in tanpa tema
 Comment[is]=Innbyggður stíll sem minnir á Windows 9x (án þema)
 Comment[it]=Stile Windows 9x interno senza tema
 Comment[ja]=ビルトイン Windows 9x スタイル (テーマなし)
--- kstyles/themes/qtcde.themerc
+++ kstyles/themes/qtcde.themerc
@@ -31,7 +31,7 @@
 Comment[hi]=अंतर्निर्मित अनथीम्ड सीडीई शैली
 Comment[hr]=Ugrađeni CDE stil, bez teme
 Comment[hu]=Beépített CDE-stílus
-Comment[id]=Gaya unthemed CDE built-in
+Comment[id]=Gaya ala CDE built-in tanpa tema 
 Comment[is]=Innbyggður stíll sem minnir á CDE notendaskilin (án þema)
 Comment[it]=Stile CDE interno senza tema
 Comment[ja]=ビルトイン CDE スタイル (テーマなし)
--- kstyles/themes/mega.themerc
+++ kstyles/themes/mega.themerc
@@ -21,6 +21,7 @@
 Name[hi]=मेगाग्रंडिएंट हाईकलर शैली
 Name[hr]=MegaGradient stil s puno boja
 Name[hu]=Megagradiens (színgazdag)
+Name[id]=Gaya highcolor MegaGradient
 Name[is]=MegaGradient fjöllitastíll
 Name[it]=Mega sfumature con molti colori
 Name[ja]=MegaGradient ハイカラースタイル
--- kstyles/themes/qtmotif.themerc
+++ kstyles/themes/qtmotif.themerc
@@ -36,7 +36,7 @@
 Comment[hi]=अंतर्निर्मित अनथीम्ड मोटिफ शैली
 Comment[hr]=Ugrađeni Motif stil, bez teme
 Comment[hu]=Beépített Motif-stílus
-Comment[id]=Gaya unthemed Motif built-in
+Comment[id]=Gaya ala Motif built-in tanpa tema 
 Comment[is]=Innbyggður stíll sem minnir á Motif unhverfið (án þema)
 Comment[it]=Stile Motif interno senza tema
 Comment[ja]=ビルトイン Motif スタイル (テーマなし)
--- kstyles/themes/keramik.themerc
+++ kstyles/themes/keramik.themerc
@@ -44,12 +44,14 @@
 Comment[he]=ערכה משתמשת במיזוג אלפא
 Comment[hr]=Stil s upotrebom Alfa pretapanja
 Comment[hu]=Alfakeverést használó stílus
+Comment[id]=Gaya dengan alphablending
 Comment[is]=Stíll sem notar alfa blöndun
 Comment[it]=Stile con effetti di trasparenza
 Comment[ja]=アルファブレンディングを使用したスタイル
 Comment[km]=រចនាប័ទ្ម​លំនាំដើម​ដោយ​ប្រើ ល្បាយ​អាល់ហ្វា
 Comment[lb]=E Stil, deen Alphablending benotzt
 Comment[lt]=Stilius, naudojantis alfa spalvų maišymą
+Comment[lv]=Stils izmantojot alfasaplūšanu
 Comment[mk]=Стил што користи алфа-мешање
 Comment[ms]=Gaya piawai menggunakan pengadunan alfa
 Comment[nb]=En stil som bruker alfablending
--- kstyles/themes/kstep.themerc
+++ kstyles/themes/kstep.themerc
@@ -50,7 +50,7 @@
 Comment[hi]=अनथीम्ड नेक्स्ट शैली क़िस्म
 Comment[hr]=Stil bez teme, nalikuje na Next
 Comment[hu]=Next-szerű stílus, téma nélkül
-Comment[id]=Gaya Unthemed Next-like
+Comment[id]=Gaya ala Next tanpa tema
 Comment[is]=Stíll sem minnir á Next stýrikerfið (án þema)
 Comment[it]=Stile senza tema simile a Next
 Comment[ja]=Next 風のスタイル (テーマなし)
--- kstyles/themes/qtsgi.themerc
+++ kstyles/themes/qtsgi.themerc
@@ -32,7 +32,7 @@
 Comment[hi]=अंतर्निर्मित एसजीआई शैली
 Comment[hr]=Ugrađeni SGI stil
 Comment[hu]=Beépített SGI stílus
-Comment[id]=Gaya SGI built-in
+Comment[id]=Gaya ala SGI built-in
 Comment[is]=Innbyggður stíll sem minnir á SGI notendaskilin
 Comment[it]=Stile SGI interno
 Comment[ja]=ビルトイン SGI スタイル
--- kstyles/themes/qtmotifplus.themerc
+++ kstyles/themes/qtmotifplus.themerc
@@ -33,7 +33,7 @@
 Comment[es]=Estilo incorporado Motif mejorado
 Comment[et]=Qt täiustatud Motif'i-laadne stiil
 Comment[eu]=Gairik gabeko Motif estilo hobetua
-Comment[fa]=سبک موتیف افزوده  توکار
+Comment[fa]=سبک موتیف افزودۀ  توکار
 Comment[fi]=Sisäänrakennettu paranneltu Motif-tyyli
 Comment[fr]=Style Motif amélioré d'origine
 Comment[fy]=Ynboude, ferbettere Motif-styl
@@ -43,7 +43,7 @@
 Comment[hi]=अंतर्निर्मित एनहेंस्ड मोटिफ शैली
 Comment[hr]=Ugrađeni unaprijeđeni Motif stil, bez teme
 Comment[hu]=Beépített továbbfejlesztett Motif-stílus
-Comment[id]=Gaya enhanced Motif built-in
+Comment[id]=Gaya modifikasi Motif tanpa tema 
 Comment[is]=Innbyggður stíll, endurbætt Motif unhverfi
 Comment[it]=Stile Motif interno avanzato
 Comment[ja]=ビルトイン Motif スタイル 改良版
--- kstyles/themes/beos.themerc
+++ kstyles/themes/beos.themerc
@@ -31,6 +31,7 @@
 Comment[hi]=अनथीम्ड बीईओएस जैसी शैली
 Comment[hr]=Stil bez teme, nalikuje na BeOS
 Comment[hu]=BeOS-szerű megjelenés, téma nélkül
+Comment[id]=Gaya ala BeOS tanpa tema
 Comment[is]=Stíll í anda BeOS stýrikerfisins (án þema)
 Comment[it]=Stile senza tema simile a BeOS
 Comment[ja]=BeOS 風のスタイル (テーマなし)
--- kstyles/plastik/plastik.themerc
+++ kstyles/plastik/plastik.themerc
@@ -46,6 +46,7 @@
 Comment[hi]=एक सादा और साफ शैली
 Comment[hr]=Jednostavan i pregledan stil
 Comment[hu]=Áttekinthető, egyszerű alapstílus
+Comment[id]=Gaya yang ringkas dan sederhana
 Comment[is]=Einfaldur og hreinlegur stíll
 Comment[it]=Uno stile semplice e pulito
 Comment[ja]=シンプルできれいなスタイル
--- kstyles/highcontrast/highcontrast.themerc
+++ kstyles/highcontrast/highcontrast.themerc
@@ -24,6 +24,7 @@
 Name[km]=កម្រិត​ពណ៌​ខ្ពស់
 Name[lb]=HéichKontrast
 Name[lt]=Didelis kontrastas
+Name[lv]=Augsts kontrasts
 Name[mk]=Висок контраст
 Name[ms]=Kontras Tinggi
 Name[nb]=HøyKontrast
@@ -71,6 +72,7 @@
 Comment[gl]=Un estilo que traballa ben con esquemas de cor de alto contraste
 Comment[hr]=Stil koji dobro fukcionira s shemama bojanja u visokom kontrastu
 Comment[hu]=Erősen kontrasztos színsémákhoz jól illeszkedő stílus
+Comment[id]=Gaya yang sesuai untuk skema warna kontras tinggi
 Comment[is]=Stíll sem passar vel við litaskemu sem nota há birtuskil
 Comment[it]=Uno stile che funziona bene con combinazioni di colori ad alto contrasto
 Comment[ja]=高コントラストの色スキームにふさわしいスタイル
--- kstyles/web/web.themerc
+++ kstyles/web/web.themerc
@@ -99,6 +99,7 @@
 Comment[hi]=वेब विज़ेट शैली
 Comment[hr]=Web widget stil
 Comment[hu]=Webes elemstílus
+Comment[id]=Gaya widget Web
 Comment[is]=Vefeiningastíll
 Comment[it]=Stile Web
 Comment[ja]=ウェブウィジェットスタイル
--- kabc/vcard21parser.h
+++ kabc/vcard21parser.h
@@ -204,8 +204,8 @@
   friend class VCardLineX;
 
 public:
-  VCard21ParserImpl() {  };
-  virtual ~VCard21ParserImpl() {  };
+  VCard21ParserImpl();
+  virtual ~VCard21ParserImpl();
   static VCard21ParserImpl *parseVCard(const QString& vc, int *err = NULL);
   QString getValue(const QString& name, const QString& qualifier);
   QString getValue(const QString& name);
--- kabc/plugins/sql/resourcesql.h
+++ kabc/plugins/sql/resourcesql.h
@@ -43,7 +43,7 @@
   Ticket *requestSaveTicket();
 
   bool load();
-  bool save( Ticket * );
+  bool save( Ticket * ticket );
 
   QString identifier() const;
 
--- kabc/plugins/ldapkio/resourceldapkio.h
+++ kabc/plugins/ldapkio/resourceldapkio.h
@@ -57,8 +57,8 @@
 
     virtual bool load();
     virtual bool asyncLoad();
-    virtual bool save( Ticket * );
-    virtual bool asyncSave( Ticket * );
+    virtual bool save( Ticket * ticket );
+    virtual bool asyncSave( Ticket * ticket );
 
     virtual void removeAddressee( const Addressee& addr );
 
--- kabc/vcard21parser.cpp
+++ kabc/vcard21parser.cpp
@@ -208,17 +208,17 @@
 KABC::Addressee VCard21Parser::readFromString( const QString &data)
 {
   KABC::Addressee addressee;
-  VCard21ParserImpl *mVCard = VCard21ParserImpl::parseVCard(data);
+  VCard21ParserImpl *vCard = VCard21ParserImpl::parseVCard(data);
   QString tmpStr;
 
   // Check if parsing failed
-  if (mVCard == 0)
+  if (vCard == 0)
   {
      kdDebug() << "Parsing failed" << endl;
      return addressee;
   }
   //set the addressees name and formated name
-  QStringList tmpList = mVCard->getValues(VCARD_N);
+  QStringList tmpList = vCard->getValues(VCARD_N);
   QString formattedName = "";
   if (tmpList.count() > 0)
     addressee.setFamilyName(tmpList[0]);
@@ -231,38 +231,38 @@
   if (tmpList.count() > 4)
     addressee.setSuffix(tmpList[4]);
 
-  tmpStr = (mVCard->getValue(VCARD_FN));
+  tmpStr = (vCard->getValue(VCARD_FN));
   if (!tmpStr.isEmpty())
     addressee.setFormattedName(tmpStr);
 
   //set the addressee's nick name
-  tmpStr = mVCard->getValue(VCARD_NICKNAME);
+  tmpStr = vCard->getValue(VCARD_NICKNAME);
   addressee.setNickName(tmpStr);
   //set the addressee's organization
-  tmpStr = mVCard->getValue(VCARD_ORG);
+  tmpStr = vCard->getValue(VCARD_ORG);
   addressee.setOrganization(tmpStr);
   //set the addressee's title
-  tmpStr = mVCard->getValue(VCARD_TITLE);
+  tmpStr = vCard->getValue(VCARD_TITLE);
   addressee.setTitle(tmpStr);
   //set the addressee's email - we can only deal with two.  The preferenced one and one other.
-  tmpStr = mVCard->getValue(VCARD_EMAIL, VCARD_EMAIL_INTERNET);
+  tmpStr = vCard->getValue(VCARD_EMAIL, VCARD_EMAIL_INTERNET);
   addressee.insertEmail(tmpStr, false);
-  tmpStr = mVCard->getValue(VCARD_EMAIL,VCARD_EMAIL_PREF);
+  tmpStr = vCard->getValue(VCARD_EMAIL,VCARD_EMAIL_PREF);
   addressee.insertEmail(tmpStr, true);
   //set the addressee's url
-  tmpStr = mVCard->getValue(VCARD_URL);
-  if (tmpStr.isEmpty()) tmpStr = mVCard->getValue(VCARD_URL, VCARD_ADR_WORK);
-  if (tmpStr.isEmpty()) tmpStr = mVCard->getValue(VCARD_URL, VCARD_ADR_HOME);
+  tmpStr = vCard->getValue(VCARD_URL);
+  if (tmpStr.isEmpty()) tmpStr = vCard->getValue(VCARD_URL, VCARD_ADR_WORK);
+  if (tmpStr.isEmpty()) tmpStr = vCard->getValue(VCARD_URL, VCARD_ADR_HOME);
   if (!tmpStr.isEmpty()) {
     addressee.setUrl(KURL(tmpStr));
   }
 
   //set the addressee's birthday
-  tmpStr = mVCard->getValue(VCARD_BDAY);
+  tmpStr = vCard->getValue(VCARD_BDAY);
   addressee.setBirthday(VCardStringToDate(tmpStr));
 
   //set the addressee's phone numbers
-  for ( QValueListIterator<VCardLineX> i = mVCard->_vcdata->begin();i != mVCard->_vcdata->end(); ++i ) {
+  for ( QValueListIterator<VCardLineX> i = vCard->_vcdata->begin();i != vCard->_vcdata->end(); ++i ) {
     if ( (*i).name == VCARD_TEL ) {
       int type = 0;
       if ( (*i).qualified ) {
@@ -300,7 +300,7 @@
   }
 
   //set the addressee's addresses
-  for ( QValueListIterator<VCardLineX> i = mVCard->_vcdata->begin();i != mVCard->_vcdata->end(); ++i ) {
+  for ( QValueListIterator<VCardLineX> i = vCard->_vcdata->begin();i != vCard->_vcdata->end(); ++i ) {
     if ( (*i).name == VCARD_ADR ) {
       int type = 0;
       if ( (*i).qualified ) {
@@ -324,7 +324,7 @@
   }
 
   //set the addressee's delivery label
-  tmpStr = mVCard->getValue(VCARD_LABEL);
+  tmpStr = vCard->getValue(VCARD_LABEL);
   if (!tmpStr.isEmpty()) {
     tmpStr.replace("\r\n","\n");
     Address tmpAddress;
@@ -333,17 +333,17 @@
   }
 
   //set the addressee's notes
-  tmpStr = mVCard->getValue(VCARD_NOTE);
+  tmpStr = vCard->getValue(VCARD_NOTE);
   tmpStr.replace("\r\n","\n");
   addressee.setNote(tmpStr);
 
   //set the addressee's timezone
-  tmpStr = mVCard->getValue(VCARD_TZ);
+  tmpStr = vCard->getValue(VCARD_TZ);
   TimeZone tmpZone(tmpStr.toInt());
   addressee.setTimeZone(tmpZone);
 
   //set the addressee's geographical position
-  tmpList = mVCard->getValues(VCARD_GEO);
+  tmpList = vCard->getValues(VCARD_GEO);
   if (tmpList.count()==2)
   {
     tmpStr = tmpList[0];
@@ -355,13 +355,15 @@
   }
 
   //set the last revision date
-  tmpStr = mVCard->getValue(VCARD_REV);
+  tmpStr = vCard->getValue(VCARD_REV);
   addressee.setRevision(VCardStringToDate(tmpStr));
 
   //set the role of the addressee
-  tmpStr = mVCard->getValue(VCARD_ROLE);
+  tmpStr = vCard->getValue(VCARD_ROLE);
   addressee.setRole(tmpStr);
 
+  delete vCard;
+
   return addressee;
 }
 
@@ -396,10 +398,10 @@
   int _err = 0;
   int _state = VC_STATE_BEGIN;
 
-  QValueList<VCardLineX> *_vcdata;
+  QValueList<VCardLineX> *vcdata;
   QValueList<QString> lines;
 
-  _vcdata = new QValueList<VCardLineX>;
+  vcdata = new QValueList<VCardLineX>;
 
   lines = QStringList::split( QRegExp( "[\x0d\x0a]" ), vc );
 
@@ -505,7 +507,7 @@
     }
 
     // add to vector
-    _vcdata->append( _vcl );
+    vcdata->append( _vcl );
   }
 
   // errors to check at the last minute (exit state related)
@@ -524,18 +526,29 @@
     *err = _err;
 
   if ( _err != 0 ) {
-    delete _vcdata;
+    delete vcdata;
     return 0;
   }
 
-  return new VCard21ParserImpl( _vcdata );
+  return new VCard21ParserImpl( vcdata );
 }
 
-VCard21ParserImpl::VCard21ParserImpl(QValueList<VCardLineX> *_vcd) : _vcdata(_vcd)
+VCard21ParserImpl::VCard21ParserImpl()
+  : _vcdata( 0 )
 {
 }
 
+VCard21ParserImpl::VCard21ParserImpl(QValueList<VCardLineX> *_vcd)
+  : _vcdata(_vcd)
+{
+}
 
+VCard21ParserImpl::~VCard21ParserImpl()
+{
+  delete _vcdata;
+  _vcdata = 0;
+}
+
 QString VCard21ParserImpl::getValue(const QString& name, const QString& qualifier)
 {
   QString failed;
--- kabc/kabc_manager.desktop
+++ kabc/kabc_manager.desktop
@@ -24,6 +24,7 @@
 Name[hr]=Kontakti
 Name[hsb]=Adresy
 Name[hu]=Névjegyek
+Name[id]=Kontak
 Name[is]=Tengiliðir
 Name[it]=Contatti
 Name[ja]=コンタクト
--- kabc/sortmode.h
+++ kabc/sortmode.h
@@ -66,6 +66,7 @@
       Creates a NameSortMethod with the specified name type.
 
       @param type The name type.
+      @param ascending true for ascending sort, false for descending.
      */
     NameSortMode( NameType type, bool ascending = true );
 
@@ -91,6 +92,7 @@
       Creates a FieldSortMethod with the specified field.
 
       @param field The field.
+      @param ascending true for ascending sort, false for descending.
      */
     FieldSortMode( KABC::Field *field, bool ascending = true );
 
--- kabc/sound.h
+++ kabc/sound.h
@@ -51,7 +51,7 @@
  *      }
  *      KAudioPlayer::play( tmpFile ); 
  *    }
- *  \code
+ *  \endcode
  *       
  *  Unfortunetly KAudioPlayer::play is ASync, so to delete the temporary file, the best you can really do is set a timer.
  *
--- kabc/field.h
+++ kabc/field.h
@@ -97,7 +97,7 @@
   virtual bool isCustom();
 
   /**
-   * Returns, if the field is equal with @param field.
+   * Returns, if the field is equal with @a field.
    */
   virtual bool equals( Field *field );
 
--- kcert/kcertpart.h
+++ kcert/kcertpart.h
@@ -73,7 +73,7 @@
 	    const QStringList &args = QStringList() );
   virtual ~KCertPart();
 
-  virtual void setReadWrite(bool rw);
+  virtual void setReadWrite(bool readwrite);
 
   static KAboutData *createAboutData();
 
--- kcert/kcertpart.desktop
+++ kcert/kcertpart.desktop
@@ -18,7 +18,7 @@
 Comment[es]=Administrador empotrable de certificados personales
 Comment[et]=Põimitav personaalsete sertifikaatide haldur
 Comment[eu]=Ziurtagiri pertsonalen kudeatzaile kapsulagarria
-Comment[fa]=مدیر گواهی نامه شخصی نهفته
+Comment[fa]=مدیر گواهینامۀ شخصی نهفته
 Comment[fi]=Upotettava henkilökohtaisten sertifikaattien hallintatyökalu
 Comment[fr]=Gestionnaire de certificats personnels intégrable
 Comment[fy]=Yn te sluten Persoanlik-sertifikaatbehearder
@@ -29,6 +29,7 @@
 Comment[hr]=Ugradivi upravitelj osobnim potvrdama
 Comment[hsb]=Integrujomny Personal Certificate Manager
 Comment[hu]=Beágyazható személyes tanúsítványkezelő
+Comment[id]=Manajer Sertifikat Pribadi Tersisipkan
 Comment[is]=Ívefjanlegur einkaskírteina-stjóri
 Comment[it]=Gestione integrabile dei certificati personali
 Comment[ja]=埋め込み可能な個人証明書マネージャ
--- kutils/kplugininfo.desktop
+++ kutils/kplugininfo.desktop
@@ -31,6 +31,7 @@
 Name[hi]=केडीई प्लगिन जानकारी
 Name[hr]=Podaci o KDE dodatku
 Name[hu]=A KDE bővítőmodulok áttekintése
+Name[id]=Informasi Plugin KDE
 Name[is]=KDE íforritsupplýsingar
 Name[it]=Informazioni plugin KDE
 Name[ja]=KDE プラグイン情報
--- kdesu/process.h
+++ kdesu/process.h
@@ -119,7 +119,7 @@
      */
     int pid() {return m_Pid;};
 
-public /* static */:
+public: /* static */
     /*
     ** This is a collection of static functions that can be
     ** used for process control inside kdesu. I'd suggest 
@@ -127,7 +127,7 @@
     ** nicer Qt based ways to do what you want.
     */
 
-    /*
+    /**
     ** Wait @p ms miliseconds (ie. 1/10th of a second is 100ms),
     ** using @p fd as a filedescriptor to wait on. Returns
     ** select(2)'s result, which is -1 on error, 0 on timeout,
@@ -139,14 +139,14 @@
     static int waitMS(int fd,int ms);
 
 
-    /*
+    /**
     ** Basic check for the existence of @p pid.
     ** Returns true iff @p pid is an extant process,
     ** (one you could kill - see man kill(2) for signal 0).
     */
     static bool checkPid(pid_t pid);
 
-    /*
+    /**
     ** Check process exit status for process @p pid.
     ** On error (no child, no exit), return -1.
     ** If child @p pid has exited, return its exit status,
--- kspell2/plugins/aspell/kspell_aspellclient.h
+++ kspell2/plugins/aspell/kspell_aspellclient.h
@@ -1,4 +1,4 @@
-/**
+/*
  * kspell_aspellclient.h
  *
  * Copyright (C)  2003  Zack Rusin <zack@kde.org>
--- kspell2/plugins/aspell/kspell_aspellclient.cpp
+++ kspell2/plugins/aspell/kspell_aspellclient.cpp
@@ -1,4 +1,4 @@
-/**
+/*
  * kspell_aspellclient.cpp
  *
  * Copyright (C)  2003  Zack Rusin <zack@kde.org>
--- kspell2/plugins/ispell/kspell_ispellclient.cpp
+++ kspell2/plugins/ispell/kspell_ispellclient.cpp
@@ -1,4 +1,4 @@
-/**
+/*
  * kspell_aspellclient.cpp
  *
  * Copyright (C)  2003  Zack Rusin <zack@kde.org>
--- kspell2/plugins/ispell/kspell_ispellclient.h
+++ kspell2/plugins/ispell/kspell_ispellclient.h
@@ -1,4 +1,4 @@
-/**
+/*
  * kspell_ispellclient.h
  *
  * Copyright (C)  2003  Zack Rusin <zack@kde.org>
--- kspell2/settings.cpp
+++ kspell2/settings.cpp
@@ -1,5 +1,5 @@
 // -*- Mode: C++; c-basic-offset: 4; indent-tabs-mode: nil; -*-
-/**
+/*
  * settings.cpp
  *
  * Copyright (C)  2003  Zack Rusin <zack@kde.org>
--- kspell2/threadevents.h
+++ kspell2/threadevents.h
@@ -1,4 +1,4 @@
-/**
+/*
  * threadevents.h
  *
  * Copyright (C)  2004  Zack Rusin <zack@kde.org>
--- kspell2/dictionary.h
+++ kspell2/dictionary.h
@@ -1,5 +1,5 @@
 // -*- Mode: C++; c-basic-offset: 4; indent-tabs-mode: nil; -*-
-/**
+/*
  * dictionary.h
  *
  * Copyright (C)  2004  Zack Rusin <zack@kde.org>
--- kspell2/backgroundengine.h
+++ kspell2/backgroundengine.h
@@ -1,4 +1,4 @@
-/**
+/*
  * backgroundengine.h
  *
  * Copyright (C)  2004  Zack Rusin <zack@kde.org>
--- kspell2/client.cpp
+++ kspell2/client.cpp
@@ -1,5 +1,5 @@
 // -*- Mode: C++; c-basic-offset: 4; indent-tabs-mode: nil; -*-
-/**
+/*
  * client.cpp
  *
  * Copyright (C)  2003  Zack Rusin <zack@kde.org>
--- kspell2/defaultdictionary.h
+++ kspell2/defaultdictionary.h
@@ -1,4 +1,4 @@
-/**
+/*
  * defaultdictionary.h
  *
  * Copyright (C)  2004  Zack Rusin <zack@kde.org>
--- kspell2/kspellclient.desktop
+++ kspell2/kspellclient.desktop
@@ -29,6 +29,7 @@
 Comment[hi]=के-स्पैल क्लाएंट
 Comment[hr]=KSpell klijent
 Comment[hu]=KSpell-kliens
+Comment[id]=Klien KSpell
 Comment[is]=KSpell biðlarinn
 Comment[it]=Client KSpell
 Comment[ja]=KSpell クライアント
--- kspell2/client.h
+++ kspell2/client.h
@@ -1,5 +1,5 @@
 // -*- Mode: C++; c-basic-offset: 4; indent-tabs-mode: nil; -*-
-/**
+/*
  * client.cpp
  *
  * Copyright (C)  2003  Zack Rusin <zack@kde.org>
@@ -28,16 +28,16 @@
 
 #include <kdelibs_export.h>
 
-/**
- * The fact that this class inherits from QObject makes me
- * hugely unhappy. The reason for as of writting is that
- * I don't really feel like writting my own KLibFactory
- * that would load anything else then QObject derivatives.
- */
 namespace KSpell2
 {
     class Dictionary;
 
+    /**
+     * The fact that this class inherits from QObject makes me
+     * hugely unhappy. The reason for as of writting is that
+     * I don't really feel like writting my own KLibFactory
+     * that would load anything else then QObject derivatives.
+     */
     class KDE_EXPORT Client : public QObject
     {
         Q_OBJECT
--- kspell2/filter.cpp
+++ kspell2/filter.cpp
@@ -1,5 +1,5 @@
 // -*- Mode: C++; c-basic-offset: 4; indent-tabs-mode: nil; -*-
-/**
+/*
  * filter.cpp
  *
  * Copyright (C)  2004  Zack Rusin <zack@kde.org>
--- kspell2/filter.h
+++ kspell2/filter.h
@@ -1,5 +1,5 @@
 // -*- Mode: C++; c-basic-offset: 4; indent-tabs-mode: nil; -*-
-/**
+/*
  * filter.h
  *
  * Copyright (C)  2004  Zack Rusin <zack@kde.org>
--- kspell2/ui/configwidget.h
+++ kspell2/ui/configwidget.h
@@ -1,4 +1,4 @@
-/**
+/*
  * configwidget.h
  *
  * Copyright (C)  2004  Zack Rusin <zack@kde.org>
--- kspell2/ui/highlighter.cpp
+++ kspell2/ui/highlighter.cpp
@@ -1,4 +1,4 @@
-/**
+/*
  * highlighter.cpp
  *
  * Copyright (C)  2004  Zack Rusin <zack@kde.org>
--- kspell2/ui/dialog.cpp
+++ kspell2/ui/dialog.cpp
@@ -1,4 +1,4 @@
-/**
+/*
  * dialog.cpp
  *
  * Copyright (C)  2003  Zack Rusin <zack@kde.org>
--- kspell2/ui/highlighter.h
+++ kspell2/ui/highlighter.h
@@ -1,4 +1,4 @@
-/**
+/*
  * highlighter.h
  *
  * Copyright (C)  2004  Zack Rusin <zack@kde.org>
--- kspell2/ui/dialog.h
+++ kspell2/ui/dialog.h
@@ -1,5 +1,5 @@
 // -*- Mode: C++; c-basic-offset: 4; indent-tabs-mode: nil; -*-
-/**
+/*
  * dialog.h
  *
  * Copyright (C)  2003  Zack Rusin <zack@kde.org>
--- kspell2/ui/configdialog.cpp
+++ kspell2/ui/configdialog.cpp
@@ -1,4 +1,4 @@
-/**
+/*
  * configdialog.cpp
  *
  * Copyright (C)  2004  Zack Rusin <zack@kde.org>
--- kspell2/ui/configwidget.cpp
+++ kspell2/ui/configwidget.cpp
@@ -1,4 +1,4 @@
-/**
+/*
  * configwidget.cpp
  *
  * Copyright (C)  2004  Zack Rusin <zack@kde.org>
--- kspell2/ui/configdialog.h
+++ kspell2/ui/configdialog.h
@@ -1,4 +1,4 @@
-/**
+/*
  * configdialog.h
  *
  * Copyright (C)  2004  Zack Rusin <zack@kde.org>
--- kdecore/kglobalaccel_mac.h
+++ kdecore/kglobalaccel_mac.h
@@ -14,16 +14,16 @@
     {}
 
     // reimplemented pure virtuals
-    void setEnabled( bool )
-    {}
-    bool emitSignal( Signal )
-    { return false; }
-    bool connectKey( KAccelAction&, const KKeyServer::Key& )
-    { return false; }
-    bool connectKey( const KKeyServer::Key& )
-    { return false; }
-    bool disconnectKey( KAccelAction&, const KKeyServer::Key& )
-    { return false; }
+    void setEnabled( bool bEnabled )
+    { Q_UNUSED(bEnabled); }
+    bool emitSignal( Signal signal )
+    { Q_UNUSED(signal); return false; }
+    bool connectKey( KAccelAction& action, const KKeyServer::Key& key)
+    { Q_UNUSED(action); Q_UNUSED(key); return false; }
+    bool connectKey( const KKeyServer::Key& key)
+    { Q_UNUSED(key); return false; }
+    bool disconnectKey( KAccelAction&, const KKeyServer::Key& key)
+    { Q_UNUSED(key); return false; }
     bool disconnectKey( const KKeyServer::Key& )
     { return false; }
 };
--- kdecore/kstandarddirs.cpp
+++ kdecore/kstandarddirs.cpp
@@ -441,7 +441,7 @@
     }
 
 #ifndef NDEBUG
-    if(false && type != "locale")
+    if(false && strcmp(type, "locale"))
       kdDebug() << "KStdDirs::findResDir(): can't find \"" << filename << "\" in type \"" << type << "\"." << endl;
 #endif
 
@@ -690,7 +690,7 @@
 
     /* If the path contains symlinks, get the real name */
     if (realpath( QFile::encodeName(dirname).data(), realpath_buffer) != 0) {
-        // succes, use result from realpath
+        // success, use result from realpath
         int len = strlen(realpath_buffer);
         realpath_buffer[len] = '/';
         realpath_buffer[len+1] = 0;
@@ -708,7 +708,7 @@
 
     /* If the path contains symlinks, get the real name */
     if (realpath( QFile::encodeName(filename).data(), realpath_buffer) != 0) {
-        // succes, use result from realpath
+        // success, use result from realpath
         return QFile::decodeName(realpath_buffer);
     }
 
@@ -1287,6 +1287,7 @@
            kdedirList.append(kdedir);
         }
     }
+
 #ifndef Q_OS_WIN //no default KDEDIR on win32 defined
     kdedirList.append(KDEDIR);
 #endif
--- kdecore/kglobalaccel_emb.h
+++ kdecore/kglobalaccel_emb.h
@@ -9,7 +9,7 @@
 public:
 	KGlobalAccelPrivate();
 
-	virtual void setEnabled( bool );
+	virtual void setEnabled( bool bEnabled );
 
 	virtual bool connectKey( KAccelAction&, KKeySequence );
 	virtual bool disconnectKey( KAccelAction&, KKeySequence );
--- kdecore/kaccelprivate.h
+++ kdecore/kaccelprivate.h
@@ -21,17 +21,17 @@
 
 	KAccelPrivate( KAccel* pParent, QWidget* pWatch );
 
-	virtual void setEnabled( bool );
+	virtual void setEnabled( bool bEnabled );
 
 	bool setEnabled( const QString& sAction, bool bEnable );
 
 	virtual bool removeAction( const QString& sAction );
 
-	virtual bool emitSignal( KAccelBase::Signal );
-	virtual bool connectKey( KAccelAction&, const KKeyServer::Key& );
-	virtual bool connectKey( const KKeyServer::Key& );
-	virtual bool disconnectKey( KAccelAction&, const KKeyServer::Key& );
-	virtual bool disconnectKey( const KKeyServer::Key& );
+	virtual bool emitSignal( KAccelBase::Signal signal );
+	virtual bool connectKey( KAccelAction& action, const KKeyServer::Key& key );
+	virtual bool connectKey( const KKeyServer::Key& key );
+	virtual bool disconnectKey( KAccelAction& action, const KKeyServer::Key& key );
+	virtual bool disconnectKey( const KKeyServer::Key& key );
 
  signals:
 	void menuItemActivated();
--- kdecore/kglobalaccel_x11.h
+++ kdecore/kglobalaccel_x11.h
@@ -38,13 +38,13 @@
 	KGlobalAccelPrivate();
 	virtual ~KGlobalAccelPrivate();
 
-	virtual void setEnabled( bool );
+	virtual void setEnabled( bool bEnabled );
 
-	virtual bool emitSignal( Signal );
-	virtual bool connectKey( KAccelAction&, const KKeyServer::Key& );
-	virtual bool connectKey( const KKeyServer::Key& );
-	virtual bool disconnectKey( KAccelAction&, const KKeyServer::Key& );
-	virtual bool disconnectKey( const KKeyServer::Key& );
+	virtual bool emitSignal( Signal signal );
+	virtual bool connectKey( KAccelAction& action, const KKeyServer::Key& key );
+	virtual bool connectKey( const KKeyServer::Key& key );
+	virtual bool disconnectKey( KAccelAction& action, const KKeyServer::Key& key );
+	virtual bool disconnectKey( const KKeyServer::Key& key );
 
  protected:
 	/**
--- kdecore/eventsrc
+++ kdecore/eventsrc
@@ -96,7 +96,7 @@
 Name[es]=Papelera: vaciada
 Name[et]=Prügikast: tühjendatud
 Name[eu]=Zakarrontzia: hustuta
-Name[fa]=زباله:خالی 
+Name[fa]=زباله: خالی‌شده 
 Name[fi]=Roskakori: tyhjennetty
 Name[fr]=Corbeille : vidée
 Name[fy]=Jiskefet: leech makke
@@ -106,12 +106,14 @@
 Name[hr]=Otpad: ispražnjeno
 Name[hsb]=Papjernik: wuprózdnjeny
 Name[hu]=Szemétkosár: kiürítve
+Name[id]=Tempat Sampah: emptied
 Name[is]=Rusl: tæmt
 Name[it]=Cestino: svuotato
 Name[ja]=ごみ箱: カラ
 Name[km]=ធុង​សំរាម ៖ បាន​សម្អាត
 Name[lb]=Dreckskëscht: eidel
 Name[lt]=Šiukšliadėžė: ištuštinta
+Name[lv]=Miskaste: iztukšota
 Name[mk]=Корпа: празна
 Name[ms]=Tong Sampah; dikosongkan
 Name[nb]=Papirkurven: tømt
@@ -155,7 +157,7 @@
 Comment[es]=La papelera se ha vaciado
 Comment[et]=Prügikast on tühjendatud
 Comment[eu]=Zakarrontzia hustu da
-Comment[fa]=زباله خالی شده
+Comment[fa]=زباله خالی شده است
 Comment[fi]=Roskakori on tyhjennetty
 Comment[fr]=La corbeille a été vidée
 Comment[fy]=It jiskefet is leech makke
@@ -164,12 +166,14 @@
 Comment[hr]=Otpad je ispražnjen
 Comment[hsb]=sym papjernik wuprózdnił
 Comment[hu]=A szemétkosár kiürült
+Comment[id]=Tempat sampah sudah dikosongkan
 Comment[is]=Ruslafatan hefur verið tæmd
 Comment[it]=Il cestino è stato svuotato
 Comment[ja]=ごみ箱が空になりました
 Comment[km]=ធុង​សំរាម​ត្រូវ​បាន​សម្អាត
 Comment[lb]=D'Dreckskëscht ass eidelgemat ginn
 Comment[lt]=Šiukšliadėžė buvo ištuštinta
+Comment[lv]=Miskaste ir iztukšota
 Comment[mk]=Корпата беше испразнета
 Comment[ms]=Tong sampah telah dikosongkan
 Comment[nb]=Papirkurven er tømt
@@ -219,7 +223,7 @@
 Name[es]=Completado de texto: rotación
 Name[et]=Teksti lõpetamine: pööramine
 Name[eu]=Testu-osaketa: biraketa
-Name[fa]=تکمیل متن:چرخش
+Name[fa]=تکمیل متن: چرخش
 Name[fi]=Tekstintäydennys: pyöritys
 Name[fr]=Autocomplètement de texte : rotation
 Name[fy]=Tekstkompletearing: rotaasje
@@ -302,6 +306,7 @@
 Comment[hr]=Stiglo se do završetka popisa podudarnosti
 Comment[hsb]=Sym na kóncu lisćiny namakankow
 Comment[hu]=A találatok listájának végére értem
+Comment[id]=Akhir daftar pencocokan telah dicapai
 Comment[is]=Enda listans yfir atriði sem passa náð
 Comment[it]=È stata raggiunta la fine della lista delle corrispondenze
 Comment[ja]=マッチリストの終端に達しました
@@ -358,7 +363,7 @@
 Name[es]=Completado de texto: no hay concordancias
 Name[et]=Teksti lõpetamine: kokkulangevus puudub
 Name[eu]=Testu-osaketa: ez dago bat datorrenik
-Name[fa]=تکمیل متن:بدون تطبیق
+Name[fa]=تکمیل متن: بدون تطبیق
 Name[fi]=Tekstintäydennys: ei osumia
 Name[fr]=Autocomplètement de texte : aucune correspondance
 Name[fy]=Tekstkompletearing - gjin oerienkomst
@@ -441,6 +446,7 @@
 Comment[hr]=Nije pronađena nijedna podudarnost
 Comment[hsb]=Žane wudospołnjenje so njehodźi
 Comment[hu]=Nem található megfelelő kiegészítés
+Comment[id]=Tidak ada pelengkapan yang cocok
 Comment[is]=Ekkert passar
 Comment[it]=Nessun completamento corrispondente trovato
 Comment[ja]=マッチする補完は見つかりませんでした
@@ -498,7 +504,7 @@
 Name[es]=Completado de texto: concordancia parcial
 Name[et]=Teksti lõpetamine: osaline kokkulangevus
 Name[eu]=Testu-osaketa: bat datorren partziala
-Name[fa]=تکمیل متن:تطبیق جزیی
+Name[fa]=تکمیل متن: تطبیق جزیی
 Name[fi]=Tekstintäydennys: osittainen osuma
 Name[fr]=Autocomplètement de texte : correspondance partielle
 Name[fy]=Tekstkompletearing - foar in diel oerienkommend
@@ -581,6 +587,7 @@
 Comment[hr]=Postoji više od jedne moguće podudarnosti
 Comment[hsb]=Wjace hač jedne móžne wudospołnjenje
 Comment[hu]=Egynél több lehetséges kiegészítés van
+Comment[id]=Lebih dari satu kemungkinan cocok
 Comment[is]=Það eru fleiri en eitt atriði sem passar
 Comment[it]=C'è più di una corrispondenza possibile
 Comment[ja]=1つ以上のマッチがあります
@@ -639,7 +646,7 @@
 Name[es]=No se puede abrir archivo
 Name[et]=Faili avamine ebaõnnestus
 Name[eu]=Ezin da fitxategia ireki
-Name[fa]=نمی‌توانید پرونده را باز کنید
+Name[fa]=نمی‌توان پرونده را باز کرد
 Name[fi]=Ei voitu avata tiedostoa
 Name[fo]=Kann ikki opna fíla
 Name[fr]=Impossible d'ouvrir un fichier
@@ -719,7 +726,7 @@
 Comment[es]=El archivo seleccionado no se puede abrir para leer o escribir.
 Comment[et]=Valitud faili pole võimalik avada lugemiseks või kirjutamiseks.
 Comment[eu]=Hautatutako fitxategia ezin da irakurtzeko edo idazteko ireki
-Comment[fa]=پروندۀ انتخاب شده نمی‌تواند برای خواندن یا نوشتن باز شود
+Comment[fa]=پروندۀ برگزیده نمی‌تواند برای خواندن یا نوشتن باز شود
 Comment[fi]=Valittua tiedostoa ei voida avata luettavaksi tai kirjoitettavaksi
 Comment[fr]=Le fichier sélectionné ne peut être ouvert ni en lecture ni en écriture
 Comment[fy]=It selektearre triem kin net iepene wurde om te lêzen of skriuwen
@@ -800,7 +807,7 @@
 Name[es]=Error fatal
 Name[et]=Fataalne viga
 Name[eu]=Errore larria
-Name[fa]=خطای مخرب
+Name[fa]=خطای مهلک
 Name[fi]=Peruuttamaton virhe
 Name[fr]=Problème critique
 Name[fy]=Fatale flater
@@ -885,6 +892,7 @@
 Comment[hr]=Program je morao završiti s radom zbog ozbiljne pogreške
 Comment[hsb]=Je so chutny zmylk stał, kiž je program skónčił
 Comment[hu]=Súlyos hiba történt, ezért a program futása félbeszakadt.
+Comment[id]=Ada kesalahan serius yang menyebabkan progam diakhiri
 Comment[is]=Alvarleg villa stöðvaði keyrslu forritsins.
 Comment[it]=Si è verificato un errore grave che ha causato la fine del programma
 Comment[ja]=プログラムが終了する深刻なエラーがあります
@@ -1028,6 +1036,7 @@
 Comment[hr]=Nešto se posebno dogodilo u programu
 Comment[hsb]=Něšto njewočakowane je so stało
 Comment[hu]=Valami különleges történt a programban
+Comment[id]=Sesuatu yang khusus terjadi dalam program
 Comment[is]=Eitthvað sérstakt gerðist í forritinu
 Comment[it]=È successo qualcosa di speciale nel programma
 Comment[ja]=何か特別なことがプログラムにおこりました
@@ -1163,7 +1172,7 @@
 Comment[es]=Hubo un error en el programa que puede causar problemas
 Comment[et]=Programmis ilmnes viga, mis võib tekitada probleeme
 Comment[eu]=Arazoak sor ditzakeen errorea gertatu da programan
-Comment[fa]=خطایی در برنامه وجود دارد که ممکن است باعث بروزمشکلاتی شود
+Comment[fa]=خطایی در برنامه وجود دارد که ممکن است باعث بروز مسائلی شود
 Comment[fi]=Ohjelmassa tapahtui virhe, joka voi aiheuttaa ongelmia
 Comment[fr]=Une erreur est survenu dans le programme, pouvant causer des dysfonctionnements.
 Comment[fy]=Der wie in flater yn it programma wat swierrichheid feroorsaakje kin
@@ -1174,6 +1183,7 @@
 Comment[hr]=Uočena je pogreška u programu zbog koje bi moglo biti problema
 Comment[hsb]=Je so někajki zmylk stał, kiž móhł problemy sčinić
 Comment[hu]=Olyan hiba történt a programban, mely további problémákat okozhat
+Comment[id]=Ada kesalahan dalam program yang dapat menyebabkan masalah
 Comment[is]=Það kom upp villa í forritinu sem gæti valdið vandræðum
 Comment[it]=Nel programma si è verificato un errore che può causare problemi
 Comment[ja]=プログラムに問題を引き起こすエラーがあります
@@ -1307,7 +1317,7 @@
 Comment[es]=Ocurrió un error muy serio, causando al menos el cierre del programa.
 Comment[et]=Ilmnes väga tõsine viga, mis sundis programmi tööd lõpetama.
 Comment[eu]=Errore oso larria gertatu da, programa itxiaraziz
-Comment[fa]=یک خطای بسیار جدی رخ داد ،حداقل باعث خروج برنامه شد.
+Comment[fa]=یک خطای بسیار جدی رخ داد ،حداقل باعث خروج برنامه شد
 Comment[fi]=Tapahtui vakava virhe, jonka takia ohjelma ainakin lopetetaan.
 Comment[fr]=Une erreur très grave s'est produite, provoquant au moins l'arrêt du programme
 Comment[fy]=In serieuse flater had him foardyn wertroch it programma sluten is
@@ -1462,6 +1472,7 @@
 Comment[hr]=Podizanje KDE
 Comment[hsb]=KDE so startuje
 Comment[hu]=A KDE elindul
+Comment[id]=KDE mulai dijalankan
 Comment[is]=KDE er að ræsa
 Comment[it]=Avvio di KDE
 Comment[ja]=KDE 起動中
@@ -1604,6 +1615,7 @@
 Comment[hr]=Izlazak KDE
 Comment[hsb]=KDE so zakónči
 Comment[hu]=A KDE kilép
+Comment[id]=KDE sedang diakhiri
 Comment[is]=KDE er að hætta
 Comment[it]=Uscita da KDE
 Comment[ja]=KDE 終了中
@@ -2256,7 +2268,7 @@
 Name[es]=Pregunta
 Name[et]=Küsimus
 Name[eu]=Galdera
-Name[fa]=سوال
+Name[fa]=سؤال
 Name[fi]=Kysymys
 Name[fy]=Fraach
 Name[ga]=Ceist
@@ -2326,7 +2338,7 @@
 Comment[es]=Se está haciendo una pregunta
 Comment[et]=Esitatakse küsimus
 Comment[eu]=Galdera egiten ari da
-Comment[fa]=سوالی پرسیده می‌شود
+Comment[fa]=سؤالی پرسیده می‌شود
 Comment[fi]=Kysytään kysymys
 Comment[fr]=Une question est posée actuellement
 Comment[fy]=In fraach is stelt
--- kdecore/kglobalaccel_win.h
+++ kdecore/kglobalaccel_win.h
@@ -38,13 +38,13 @@
 	KGlobalAccelPrivate();
 	virtual ~KGlobalAccelPrivate();
 
-	virtual void setEnabled( bool );
+	virtual void setEnabled( bool bEnabled );
 
-	virtual bool emitSignal( Signal );
-	virtual bool connectKey( KAccelAction&, const KKeyServer::Key& );
-	virtual bool connectKey( const KKeyServer::Key& );
-	virtual bool disconnectKey( KAccelAction&, const KKeyServer::Key& );
-	virtual bool disconnectKey( const KKeyServer::Key& );
+	virtual bool emitSignal( Signal signal );
+	virtual bool connectKey( KAccelAction& action, const KKeyServer::Key& key );
+	virtual bool connectKey( const KKeyServer::Key& key );
+	virtual bool disconnectKey( KAccelAction& action, const KKeyServer::Key& key );
+	virtual bool disconnectKey( const KKeyServer::Key& key );
 
  protected:
 
--- kdecore/kiconloader.cpp
+++ kdecore/kiconloader.cpp
@@ -728,8 +728,10 @@
                 // Try "User" icon too. Some apps expect this.
                 if (!name.isEmpty())
                     pix = loadIcon(name, KIcon::User, size, state, path_store, true);
-                if (!pix.isNull() || canReturnNull)
+                if (!pix.isNull() || canReturnNull) {
+                    QPixmapCache::insert(key, pix);
                     return pix;
+                }
 
                 icon = findMatchingIcon(str_unknown, size);
                 if (!icon.isValid())
--- kdecore/kconfigbase.h
+++ kdecore/kconfigbase.h
@@ -2133,7 +2133,7 @@
   bool groupIsImmutable() const;
 
    // The following functions are reimplemented:
-   virtual void setDirty(bool b);
+   virtual void setDirty(bool _bDirty);
    virtual void putData(const KEntryKey &_key, const KEntry &_data, bool _checkGroup = true);
    virtual KEntry lookupData(const KEntryKey &_key) const;
    virtual void sync();
--- kdecore/all_languages.desktop
+++ kdecore/all_languages.desktop
@@ -172,7 +172,7 @@
 Name[eo]=Afrikansa
 Name[et]=Afrikaani
 Name[eu]=Afrikaansa
-Name[fa]=آفریقایی
+Name[fa]=آفریکانس
 Name[fy]=Afrikaansk
 Name[ga]=Afracáinis
 Name[gl]=Africáner
@@ -2028,13 +2028,14 @@
 Name[hr]=Britanski Engleski
 Name[hsb]=Jendźelsce (WB)
 Name[hu]=Angol (brit)
+Name[id]=Inggris Inggris
 Name[is]=Bresk enska
 Name[it]=Inglese britannico
 Name[ja]=イギリス英語
 Name[km]=អង់គ្លេស (អង់គ្លេស)
 Name[lb]=Britescht Englesch
 Name[lt]=Anglų (D.Britanijos)
-Name[lv]=Britu Angļu
+Name[lv]=Britu angļu
 Name[mk]=Англиски (британски)
 Name[nb]=Britisk engelsk
 Name[nds]=Britsch Engelsch
@@ -2088,12 +2089,14 @@
 Name[hr]=Američki Engleski
 Name[hsb]=Jendźelsce (USA)
 Name[hu]=Angol (amerikai)
+Name[id]=Inggris Amerika
 Name[is]=Bandarísk enska
 Name[it]=Inglese americano
 Name[ja]=アメリカ英語
 Name[km]=អង់គ្លេស អាមេរិក
 Name[lb]=Amerikanescht Englesch
 Name[lt]=Anglų (JAV)
+Name[lv]=Amerikāņu angļu
 Name[mk]=Англиски (американски)
 Name[nb]=Amerikansk engelsk
 Name[nds]=Amerikaansch Engelsch
@@ -2422,6 +2425,7 @@
 Name[hr]=Farsi (Perzijski)
 Name[hsb]=Farsi (Persisce)
 Name[hu]=Fárszi (perzsa)
+Name[id]=Persia
 Name[is]=Farsi (Persneska)
 Name[it]=Farsi (Persiano)
 Name[ja]=ファルシ語 (ペルシア語)
@@ -6053,6 +6057,7 @@
 Name[ko]=버마어
 Name[lb]=Burmesesch
 Name[lt]=Birmiečių
+Name[lv]=Birmiešu
 Name[mk]=Бурмански
 Name[mn]=Бүрм
 Name[ms]=Burma
@@ -6228,6 +6233,7 @@
 Name[hr]=Ndebele, Sjeverni
 Name[hsb]=Ndebele, Sewjerne
 Name[hu]=Ndebele (északi)
+Name[id]=Ndebele, Utara
 Name[is]=Ndebele, norður
 Name[it]=Ndebele settentrionale
 Name[ja]=ヌデベレ語、北
@@ -6303,7 +6309,7 @@
 Name[lv]=Lejas sakšu
 Name[mk]=Долносаксонски
 Name[nb]=Lavgermansk
-Name[nds]=Neddersass'sch
+Name[nds]=Plattdüütsch
 Name[nl]=Nedersaksisch
 Name[nn]=Låggermansk
 Name[pa]=ਲੋਅ ਸਾਕੋਨ
@@ -6606,6 +6612,7 @@
 Name[hr]=Ndebele, Južni
 Name[hsb]=Ndebele, Južne
 Name[hu]=Ndebele (déli)
+Name[id]=Ndebele, Selatan
 Name[is]=Ndebele, suður
 Name[it]=Ndebele meridionale
 Name[ja]=ヌデベレ語、南
@@ -6683,6 +6690,7 @@
 Name[ko]=북부 소토어
 Name[lb]=Nördlecht Sotho
 Name[lt]=Šiaurės Sotho
+Name[lv]=Ziemeļu Sotho
 Name[mk]=Северен Сото
 Name[mn]=Умард Сото
 Name[ms]=Sotho Utara
@@ -8549,6 +8557,7 @@
 Name[km]=សែប៊ី (ឡាតាំង)
 Name[lb]=Latäinescht Serbesch
 Name[lt]=Serbų lotyniška
+Name[lv]=Serbu latīņu
 Name[mk]=Српски (латиница)
 Name[ms]=Latin Serbia
 Name[nb]=Serbisk (latinsk)
@@ -9568,6 +9577,7 @@
 Name[ko]=타히티어
 Name[lb]=Tahitesch
 Name[lt]=Tahiti
+Name[lv]=Taitiešu
 Name[mk]=Тахитски
 Name[mn]=Тахит
 Name[ms]=Tahiti
@@ -10376,7 +10386,7 @@
 Name[es]=Chino simplificado
 Name[et]=Hiina (lihtsustatud)
 Name[eu]=Txinatar soildua
-Name[fa]=زبان چینی ساده شده
+Name[fa]=زبان چینی ساده‌شده
 Name[fi]=Yksinkertaistettu kiina
 Name[fr]=Chinois simplifié
 Name[fy]=Sjineesk (ynfaldich)
@@ -10386,6 +10396,7 @@
 Name[hr]=Kineski pojednostavljen
 Name[hsb]=Chinsce (zjednorjene)
 Name[hu]=Kínai (egyszerűsített)
+Name[id]=Cina Sederhana
 Name[is]=Einfölduð kínverska
 Name[it]=Cinese semplificato
 Name[ja]=中国語 簡体字
@@ -10440,12 +10451,14 @@
 Name[ga]=Sínis (Hong Cong)
 Name[hr]=Kineski (Hong Kong)
 Name[hu]=Kínai (hongkongi)
+Name[id]=Cina (Hong Kong)
 Name[is]=Kínverska (Hong Kong)
 Name[it]=Cinese (Hong Kong)
 Name[ja]=中国語 (香港)
 Name[km]=ចិន (ហុងកុង)
 Name[lb]=Chinesesch (Hong Kong)
 Name[lt]=Kiniečių (honkongo)
+Name[lv]=Ķīniešu (Honkongas)
 Name[mk]=Кинески (Хонг Конг)
 Name[ms]=China (Hong Kong)
 Name[nb]=Kinesisk (Hong kong)
@@ -10495,6 +10508,7 @@
 Name[hr]=Kineski tradicionalan
 Name[hsb]=Chinsce (tradicionalnje)
 Name[hu]=Kínai (hagyományos)
+Name[id]=Cina Tradisional
 Name[is]=Hefðbundin kínverska
 Name[it]=Cinese tradizionale
 Name[ja]=中国語 繁体字
--- kdecore/network/kstreamsocket.cpp
+++ kdecore/network/kstreamsocket.cpp
@@ -27,6 +27,7 @@
 #include <qsocketnotifier.h>
 #include <qdatetime.h>
 #include <qtimer.h>
+#include <qguardedptr.h>
 
 #include "ksocketaddress.h"
 #include "kresolver.h"
@@ -309,8 +310,11 @@
   setError(IO_TimeOutError, Timeout);
   setState(HostFound);
   emit stateChanged(HostFound);
+
+  QGuardedPtr<KStreamSocket> that = this;
   emit gotError(Timeout);
-  emit timedOut();
+  if (!that.isNull())
+    emit timedOut();
 }
 
 bool KStreamSocket::bindLocallyFor(const KResolverEntry& peer)
--- kdecore/kwin.h
+++ kdecore/kwin.h
@@ -394,7 +394,7 @@
      * Convenience function to set the current viewport to @p viewport.
      * See NETRootInfo.
      * @param desktop the number of the new desktop
-     * @param desktop the number of the new viewport
+     * @param viewport the position of the new viewport
      * @since 3.5.5
      */
     static void setCurrentDesktopViewport( int desktop, QPoint viewport );
--- kdecore/kstartupinfo.cpp
+++ kdecore/kstartupinfo.cpp
@@ -146,7 +146,7 @@
         d->wm_module = NULL;
     connect( &d->msgs, SIGNAL( gotMessage( const QString& )), SLOT( got_message( const QString& )));
 #endif
-    d->cleanup = new QTimer( this );
+    d->cleanup = new QTimer( this, "cleanup" );
     connect( d->cleanup, SIGNAL( timeout()), SLOT( startups_cleanup()));
     }
 
--- kdecore/kapplication.cpp
+++ kdecore/kapplication.cpp
@@ -525,7 +525,7 @@
         {
             if( d->app_started_timer == NULL )
             {
-                d->app_started_timer = new QTimer( this );
+                d->app_started_timer = new QTimer( this, "app_started_timer" );
                 connect( d->app_started_timer, SIGNAL( timeout()), SLOT( checkAppStartedSlot()));
             }
             if( !d->app_started_timer->isActive())
--- kdecore/kcrash.cpp
+++ kdecore/kcrash.cpp
@@ -32,6 +32,7 @@
 #include <stdio.h>
 #include <stdlib.h>
 #include <unistd.h>
+#include <time.h>
 #include "kcrash.h"
 
 #include <sys/types.h>
@@ -308,7 +309,11 @@
   {
     if( kill( pid, 0 ) < 0 )
       _exit(253);
-    sleep( 1 ); // the debugger should stop this process anyway
+    struct timeval tm;
+    tm.tv_sec = 8;
+    tm.tv_usec = 0;
+    select(0, 0, 0, 0, &tm);
+    // the debugger should stop this process anyway
   }
 }
 
--- kdecore/kstartupinfo.h
+++ kdecore/kstartupinfo.h
@@ -175,7 +175,7 @@
         static bool sendStartup( const KStartupInfoId& id, const KStartupInfoData& data );
 
 	/**
-	 * Like sendStartup , uses dpy instead of qt_x11display() for sending the info.
+	 * Like sendStartup , uses dpy instead of qt_xdisplay() for sending the info.
 	 * @param dpy the display of the application. Note that the name field
          * in data is required.
 	 * @param id the id of the application
@@ -198,7 +198,7 @@
         static bool sendChange( const KStartupInfoId& id, const KStartupInfoData& data );
 
 	/**
-	 * Like sendChange , uses dpy instead of qt_x11display() for sending the info.
+	 * Like sendChange , uses dpy instead of qt_xdisplay() for sending the info.
 	 * @param dpy the display of the application.
 	 * @param id the id of the application
 	 * @param data the application's data
@@ -215,7 +215,7 @@
         static bool sendFinish( const KStartupInfoId& id );
 
 	/**
-	 * Like sendFinish , uses dpy instead of qt_x11display() for sending the info.
+	 * Like sendFinish , uses dpy instead of qt_xdisplay() for sending the info.
 	 * @param dpy the display of the application.
 	 * @param id the id of the application
 	 * @return true if successful, false otherwise
@@ -232,7 +232,7 @@
         static bool sendFinish( const KStartupInfoId& id, const KStartupInfoData& data );
 
 	/**
-	 * Like sendFinish , uses dpy instead of qt_x11display() for sending the info.
+	 * Like sendFinish , uses dpy instead of qt_xdisplay() for sending the info.
 	 * @param dpy the display of the application.
 	 * @param id the id of the application
 	 * @param data the application's data
--- khtml/khtml_part.cpp
+++ khtml/khtml_part.cpp
@@ -1878,7 +1878,7 @@
     d->m_openableSuppressedPopups = 0;
     for ( QValueListIterator<QGuardedPtr<KHTMLPart> > i = d->m_suppressedPopupOriginParts.begin();
           i != d->m_suppressedPopupOriginParts.end(); ++i ) {
-       
+
       if (KHTMLPart* part = *i) {
         KJS::Window *w = KJS::Window::retrieveWindow( part );
         if (w)
@@ -1991,26 +1991,32 @@
 
 void KHTMLPart::write( const QString &str )
 {
-  if ( str.isNull() )
-    return;
+    if ( str.isNull() )
+        return;
 
-  if(d->m_bFirstData) {
-      // determine the parse mode
-      d->m_doc->setParseMode( DocumentImpl::Strict );
-      d->m_bFirstData = false;
-  }
-  khtml::Tokenizer* t = d->m_doc->tokenizer();
-  if(t)
-    t->write( str, true );
+    if(d->m_bFirstData) {
+        // determine the parse mode
+        d->m_doc->setParseMode( DocumentImpl::Strict );
+        d->m_bFirstData = false;
+    }
+    khtml::Tokenizer* t = d->m_doc->tokenizer();
+    if(t)
+        t->write( str, true );
 }
 
 void KHTMLPart::end()
 {
-    // make sure nothing's left in there...
-    if(d->m_decoder)
-        write(d->m_decoder->flush());
-    if (d->m_doc)
+    if (d->m_doc) {
+        if (d->m_decoder) {
+            QString decoded = d->m_decoder->flush();
+            if (d->m_bFirstData) {
+                d->m_bFirstData = false;
+                d->m_doc->determineParseMode(decoded);
+            }
+            write(decoded);
+        }
         d->m_doc->finishParsing();
+    }
 }
 
 bool KHTMLPart::doOpenStream( const QString& mimeType )
@@ -4316,7 +4322,7 @@
   {
     if ( processObjectRequest(*it, KURL("about:blank"), QString("text/html") ) ) {
       KHTMLPart* p = static_cast<KHTMLPart*>(static_cast<KParts::ReadOnlyPart *>((*it)->m_part));
-      
+
       // See if we want to replace content with javascript: output..
       QVariant res = p->executeScript( DOM::Node(), KURL::decode_string( url.right( url.length() - 11) ) );
       if ( res.type() == QVariant::String ) {
--- khtml/khtmlimage.desktop
+++ khtml/khtmlimage.desktop
@@ -19,7 +19,7 @@
 Comment[es]=Componente incrustable para visualizar imágenes
 Comment[et]=Põimitav pildifailide näitamise komponent
 Comment[eu]=Kapsulatutako irudi-ikustailea
-Comment[fa]=مولفۀ مشاهده تصویر نهفته
+Comment[fa]=مولفۀ مشاهدۀ تصویر نهفته
 Comment[fi]=Upotettava kuviennäyttökomponentti
 Comment[fr]=Composant d'affichage d'images intégrable
 Comment[fy]=Yn te sluten komponint foar byldwerjefte
--- khtml/khtmlview.cpp
+++ khtml/khtmlview.cpp
@@ -2031,6 +2031,15 @@
 
     DocumentImpl *doc = m_part->xmlDocImpl();
     NodeImpl *oldFocusNode = doc->focusNode();
+    
+    // See whether we're in the middle of detach. If so, we want to 
+    // clear focus... The document code will be careful to not 
+    // emit events in that case..
+    if (oldFocusNode && oldFocusNode->renderer() && 
+        !oldFocusNode->renderer()->parent()) {
+        doc->setFocusNode(0);
+        return true;
+    }
 
 #if 1
     // If the user has scrolled the document, then instead of picking
--- khtml/kmultipart/kmultipart.desktop
+++ khtml/kmultipart/kmultipart.desktop
@@ -16,7 +16,7 @@
 Name[es]=Componente empotrado para multiparte/mezcla
 Name[et]=Multipart/mixed põimitav komponent
 Name[eu]=Kapsulatutako zati-anitzen/nahastuen osagaia
-Name[fa]=مولفه نهفته برای چند بخش/مخلوط
+Name[fa]=مؤلفۀ نهفته برای چند بخش/مخلوط
 Name[fi]=Upotettava komponentti multipart/mixed-hallintaan
 Name[fr]=Composant intégrable pour le type multipart / mixed
 Name[fy]=Yn te sluten komponint foar mulipart/mixed
@@ -25,6 +25,7 @@
 Name[hi]=मल्टीपार्ट/मिक्स्ड के लिए अंतर्निहित करने योग्य घटक
 Name[hr]=Ugradiva komponenta za multipart/mixed
 Name[hu]=Beágyazható komponens a multipart/mixed adattípushoz
+Name[id]=Komponen Tersisipkan untuk multipart/mixed
 Name[is]=Ívefjanleg eining fyrir MIME multipart/mixed
 Name[it]=Componente integrabile per multipart/mixed
 Name[ja]=マルチパート/混合 の埋め込み可能なコンポーネント
--- khtml/html/htmltokenizer.cpp
+++ khtml/html/htmltokenizer.cpp
@@ -123,7 +123,7 @@
 #endif
 // ----------------------------------------------------------------------------
 
-HTMLTokenizer::HTMLTokenizer(DOM::DocumentPtr *_doc, KHTMLView *_view)
+HTMLTokenizer::HTMLTokenizer(DOM::DocumentImpl *_doc, KHTMLView *_view)
 {
     view = _view;
     buffer = 0;
@@ -138,7 +138,7 @@
     reset();
 }
 
-HTMLTokenizer::HTMLTokenizer(DOM::DocumentPtr *_doc, DOM::DocumentFragmentImpl *i)
+HTMLTokenizer::HTMLTokenizer(DOM::DocumentImpl *_doc, DOM::DocumentFragmentImpl *i)
 {
     view = 0;
     buffer = 0;
@@ -966,7 +966,7 @@
                     }
                     else {
                         DOMString v("");
-                        currToken.addAttribute(parser->docPtr()->document(), buffer, attrName, v);
+                        currToken.addAttribute(parser->docPtr(), buffer, attrName, v);
                         dest = buffer;
                         tag = SearchAttribute;
                     }
@@ -1021,7 +1021,7 @@
                         while(dest > buffer+1 && (*(dest-1) == '\n' || *(dest-1) == '\r'))
                             dest--; // remove trailing newlines
                         DOMString v(buffer+1, dest-buffer-1);
-                        currToken.addAttribute(parser->docPtr()->document(), buffer, attrName, v);
+                        currToken.addAttribute(parser->docPtr(), buffer, attrName, v);
 
                         dest = buffer;
                         tag = SearchAttribute;
@@ -1057,7 +1057,7 @@
                     if ( curchar <= ' ' || curchar == '>' )
                     {
                         DOMString v(buffer+1, dest-buffer-1);
-                        currToken.addAttribute(parser->docPtr()->document(), buffer, attrName, v);
+                        currToken.addAttribute(parser->docPtr(), buffer, attrName, v);
                         dest = buffer;
                         tag = SearchAttribute;
                         break;
--- khtml/html/html_blockimpl.cpp
+++ khtml/html/html_blockimpl.cpp
@@ -159,7 +159,7 @@
  // WinIE uses 60ms as the minimum delay by default.
 const int defaultMinimumDelay = 60;
 
-HTMLMarqueeElementImpl::HTMLMarqueeElementImpl(DocumentPtr *doc)
+HTMLMarqueeElementImpl::HTMLMarqueeElementImpl(DocumentImpl *doc)
 : HTMLElementImpl(doc),
   m_minimumDelay(defaultMinimumDelay)
 {
@@ -256,7 +256,7 @@
 
 // ------------------------------------------------------------------------
 
-HTMLLayerElementImpl::HTMLLayerElementImpl(DocumentPtr *doc, ushort _tagid)
+HTMLLayerElementImpl::HTMLLayerElementImpl(DocumentImpl *doc, ushort _tagid)
     : HTMLDivElementImpl( doc, _tagid )
 {
     transparent = fixed = false;
--- khtml/html/html_miscimpl.cpp
+++ khtml/html/html_miscimpl.cpp
@@ -34,7 +34,7 @@
 
 #include <kdebug.h>
 
-HTMLBaseFontElementImpl::HTMLBaseFontElementImpl(DocumentPtr *doc)
+HTMLBaseFontElementImpl::HTMLBaseFontElementImpl(DocumentImpl *doc)
     : HTMLElementImpl(doc)
 {
 }
--- khtml/html/html_elementimpl.h
+++ khtml/html/html_elementimpl.h
@@ -35,7 +35,7 @@
 class HTMLElementImpl : public ElementImpl
 {
 public:
-    HTMLElementImpl(DocumentPtr *doc);
+    HTMLElementImpl(DocumentImpl *doc);
 
     virtual ~HTMLElementImpl();
 
@@ -74,7 +74,7 @@
 class HTMLGenericElementImpl : public HTMLElementImpl
 {
 public:
-    HTMLGenericElementImpl(DocumentPtr *doc, ushort i);
+    HTMLGenericElementImpl(DocumentImpl *doc, ushort i);
 
     virtual ~HTMLGenericElementImpl();
 
--- khtml/html/html_headimpl.cpp
+++ khtml/html/html_headimpl.cpp
@@ -323,7 +323,7 @@
 
 // -------------------------------------------------------------------------
 
-HTMLScriptElementImpl::HTMLScriptElementImpl(DocumentPtr *doc)
+HTMLScriptElementImpl::HTMLScriptElementImpl(DocumentImpl *doc)
     : HTMLElementImpl(doc), m_cachedScript(0), m_createdByParser(false), m_evaluated(false)
 {
 }
--- khtml/html/html_formimpl.cpp
+++ khtml/html/html_formimpl.cpp
@@ -72,7 +72,7 @@
 using namespace DOM;
 using namespace khtml;
 
-HTMLFormElementImpl::HTMLFormElementImpl(DocumentPtr *doc, bool implicit)
+HTMLFormElementImpl::HTMLFormElementImpl(DocumentImpl *doc, bool implicit)
     : HTMLElementImpl(doc)
 {
     m_implicit = implicit;
@@ -788,7 +788,7 @@
 
 // -------------------------------------------------------------------------
 
-HTMLGenericFormElementImpl::HTMLGenericFormElementImpl(DocumentPtr *doc, HTMLFormElementImpl *f)
+HTMLGenericFormElementImpl::HTMLGenericFormElementImpl(DocumentImpl *doc, HTMLFormElementImpl *f)
     : HTMLElementImpl(doc)
 {
     m_disabled = m_readOnly = false;
@@ -1064,7 +1064,7 @@
 
 // -------------------------------------------------------------------------
 
-HTMLButtonElementImpl::HTMLButtonElementImpl(DocumentPtr *doc, HTMLFormElementImpl *f)
+HTMLButtonElementImpl::HTMLButtonElementImpl(DocumentImpl *doc, HTMLFormElementImpl *f)
     : HTMLGenericFormElementImpl(doc, f)
 {
     m_clicked = false;
@@ -1177,7 +1177,7 @@
 
 // -------------------------------------------------------------------------
 
-HTMLFieldSetElementImpl::HTMLFieldSetElementImpl(DocumentPtr *doc, HTMLFormElementImpl *f)
+HTMLFieldSetElementImpl::HTMLFieldSetElementImpl(DocumentImpl *doc, HTMLFormElementImpl *f)
     : HTMLGenericFormElementImpl(doc, f)
 {
 }
@@ -1214,7 +1214,7 @@
 
 // -------------------------------------------------------------------------
 
-HTMLInputElementImpl::HTMLInputElementImpl(DocumentPtr *doc, HTMLFormElementImpl *f)
+HTMLInputElementImpl::HTMLInputElementImpl(DocumentImpl *doc, HTMLFormElementImpl *f)
     : HTMLGenericFormElementImpl(doc, f)
 {
     m_type = TEXT;
@@ -1861,7 +1861,7 @@
 
 // -------------------------------------------------------------------------
 
-HTMLLabelElementImpl::HTMLLabelElementImpl(DocumentPtr *doc)
+HTMLLabelElementImpl::HTMLLabelElementImpl(DocumentImpl *doc)
     : HTMLGenericFormElementImpl(doc)
 {
 }
@@ -1930,7 +1930,7 @@
 
 // -------------------------------------------------------------------------
 
-HTMLLegendElementImpl::HTMLLegendElementImpl(DocumentPtr *doc, HTMLFormElementImpl *f)
+HTMLLegendElementImpl::HTMLLegendElementImpl(DocumentImpl *doc, HTMLFormElementImpl *f)
     : HTMLGenericFormElementImpl(doc, f)
 {
 }
@@ -1972,7 +1972,7 @@
 
 // -------------------------------------------------------------------------
 
-HTMLSelectElementImpl::HTMLSelectElementImpl(DocumentPtr *doc, HTMLFormElementImpl *f)
+HTMLSelectElementImpl::HTMLSelectElementImpl(DocumentImpl *doc, HTMLFormElementImpl *f)
     : HTMLGenericFormElementImpl(doc, f)
 {
     m_multiple = false;
@@ -2460,7 +2460,7 @@
 
 // -------------------------------------------------------------------------
 
-HTMLKeygenElementImpl::HTMLKeygenElementImpl(DocumentPtr* doc, HTMLFormElementImpl* f)
+HTMLKeygenElementImpl::HTMLKeygenElementImpl(DocumentImpl* doc, HTMLFormElementImpl* f)
     : HTMLSelectElementImpl(doc, f)
 {
     const QStringList keys = KSSLKeyGen::supportedKeySizes();
@@ -2469,7 +2469,7 @@
     for ( ; i != iEnd; ++i) {
         HTMLOptionElementImpl* const o = new HTMLOptionElementImpl(doc, form());
         addChild(o);
-        o->addChild(doc->document()->createTextNode(DOMString(*i).implementation()));
+        o->addChild(doc->createTextNode(DOMString(*i).implementation()));
     }
 }
 
@@ -2519,7 +2519,7 @@
 
 // -------------------------------------------------------------------------
 
-HTMLOptionElementImpl::HTMLOptionElementImpl(DocumentPtr *doc, HTMLFormElementImpl *f)
+HTMLOptionElementImpl::HTMLOptionElementImpl(DocumentImpl *doc, HTMLFormElementImpl *f)
     : HTMLGenericFormElementImpl(doc, f)
 {
     m_selected = false;
@@ -2622,7 +2622,7 @@
 
 // -------------------------------------------------------------------------
 
-HTMLTextAreaElementImpl::HTMLTextAreaElementImpl(DocumentPtr *doc, HTMLFormElementImpl *f)
+HTMLTextAreaElementImpl::HTMLTextAreaElementImpl(DocumentImpl *doc, HTMLFormElementImpl *f)
     : HTMLGenericFormElementImpl(doc, f)
 {
     // DTD requires rows & cols be specified, but we will provide reasonable defaults
@@ -2921,7 +2921,7 @@
 
 // -------------------------------------------------------------------------
 
-HTMLIsIndexElementImpl::HTMLIsIndexElementImpl(DocumentPtr *doc, HTMLFormElementImpl *f)
+HTMLIsIndexElementImpl::HTMLIsIndexElementImpl(DocumentImpl *doc, HTMLFormElementImpl *f)
     : HTMLInputElementImpl(doc, f)
 {
     m_type = TEXT;
--- khtml/html/html_objectimpl.cpp
+++ khtml/html/html_objectimpl.cpp
@@ -48,7 +48,7 @@
 using namespace khtml;
 
 // -------------------------------------------------------------------------
-HTMLObjectBaseElementImpl::HTMLObjectBaseElementImpl(DocumentPtr *doc)
+HTMLObjectBaseElementImpl::HTMLObjectBaseElementImpl(DocumentImpl *doc)
     : HTMLElementImpl(doc)
 {
     needWidgetUpdate = false;
@@ -217,7 +217,7 @@
 
 // -------------------------------------------------------------------------
 
-HTMLAppletElementImpl::HTMLAppletElementImpl(DocumentPtr *doc)
+HTMLAppletElementImpl::HTMLAppletElementImpl(DocumentImpl *doc)
   : HTMLObjectBaseElementImpl(doc)
 {
     serviceType = "application/x-java-applet";
@@ -283,7 +283,7 @@
 
 // -------------------------------------------------------------------------
 
-HTMLEmbedElementImpl::HTMLEmbedElementImpl(DocumentPtr *doc)
+HTMLEmbedElementImpl::HTMLEmbedElementImpl(DocumentImpl *doc)
     : HTMLObjectBaseElementImpl(doc)
 {
 }
@@ -358,7 +358,7 @@
 
 // -------------------------------------------------------------------------
 
-HTMLObjectElementImpl::HTMLObjectElementImpl(DocumentPtr *doc)
+HTMLObjectElementImpl::HTMLObjectElementImpl(DocumentImpl *doc)
     : HTMLObjectBaseElementImpl(doc)
 {
 }
--- khtml/html/html_baseimpl.cpp
+++ khtml/html/html_baseimpl.cpp
@@ -48,7 +48,7 @@
 using namespace DOM;
 using namespace khtml;
 
-HTMLBodyElementImpl::HTMLBodyElementImpl(DocumentPtr *doc)
+HTMLBodyElementImpl::HTMLBodyElementImpl(DocumentImpl *doc)
     : HTMLElementImpl(doc),
     m_bgSet( false ), m_fgSet( false )
 {
@@ -233,7 +233,7 @@
 
 // -------------------------------------------------------------------------
 
-HTMLFrameElementImpl::HTMLFrameElementImpl(DocumentPtr *doc)
+HTMLFrameElementImpl::HTMLFrameElementImpl(DocumentImpl *doc)
     : HTMLElementImpl(doc)
 {
     frameBorder = true;
@@ -430,7 +430,7 @@
 
 // -------------------------------------------------------------------------
 
-HTMLFrameSetElementImpl::HTMLFrameSetElementImpl(DocumentPtr *doc)
+HTMLFrameSetElementImpl::HTMLFrameSetElementImpl(DocumentImpl *doc)
     : HTMLElementImpl(doc)
 {
     // default value for rows and cols...
@@ -590,7 +590,7 @@
 
 // -------------------------------------------------------------------------
 
-HTMLIFrameElementImpl::HTMLIFrameElementImpl(DocumentPtr *doc) : HTMLFrameElementImpl(doc)
+HTMLIFrameElementImpl::HTMLIFrameElementImpl(DocumentImpl *doc) : HTMLFrameElementImpl(doc)
 {
     frameBorder = false;
     marginWidth = 0;
--- khtml/html/htmlparser.h
+++ khtml/html/htmlparser.h
@@ -48,7 +48,7 @@
 
 namespace DOM {
     class HTMLDocumentImpl;
-    class DocumentPtr;
+    class DocumentImpl;
     class HTMLElementImpl;
     class NodeImpl;
     class HTMLFormElementImpl;
@@ -68,8 +68,8 @@
 class KHTMLParser
 {
 public:
-    KHTMLParser( KHTMLView *w, DOM::DocumentPtr *i );
-    KHTMLParser( DOM::DocumentFragmentImpl *frag, DOM::DocumentPtr *doc );
+    KHTMLParser( KHTMLView *w, DOM::DocumentImpl *i );
+    KHTMLParser( DOM::DocumentFragmentImpl *frag, DOM::DocumentImpl *doc );
     virtual ~KHTMLParser();
 
     /**
@@ -86,13 +86,13 @@
     bool noSpaces() const { return (inSelect || !m_inline  || !inBody); }
     bool selectMode() const { return inSelect; }
 
-    DOM::HTMLDocumentImpl *doc() const { return static_cast<DOM::HTMLDocumentImpl *>(document->document()); }
-    DOM::DocumentPtr *docPtr() const { return document; }
+    DOM::HTMLDocumentImpl *doc() const { return static_cast<DOM::HTMLDocumentImpl *>(document); }
+    DOM::DocumentImpl *docPtr() const { return document; }
 
 protected:
 
     KHTMLView *HTMLWidget;
-    DOM::DocumentPtr *document;
+    DOM::DocumentImpl *document;
 
     /*
      * generate an element from the token
--- khtml/html/html_listimpl.h
+++ khtml/html/html_listimpl.h
@@ -37,7 +37,7 @@
 class HTMLUListElementImpl : public HTMLElementImpl
 {
 public:
-    HTMLUListElementImpl(DocumentPtr *doc) : HTMLElementImpl(doc) {}
+    HTMLUListElementImpl(DocumentImpl *doc) : HTMLElementImpl(doc) {}
 
     virtual Id id() const;
 
@@ -51,7 +51,7 @@
 class HTMLDirectoryElementImpl : public HTMLElementImpl
 {
 public:
-    HTMLDirectoryElementImpl(DocumentPtr *doc) : HTMLElementImpl(doc) {}
+    HTMLDirectoryElementImpl(DocumentImpl *doc) : HTMLElementImpl(doc) {}
 
     virtual Id id() const;
 };
@@ -61,7 +61,7 @@
 class HTMLMenuElementImpl : public HTMLElementImpl
 {
 public:
-    HTMLMenuElementImpl(DocumentPtr *doc) : HTMLElementImpl(doc) {}
+    HTMLMenuElementImpl(DocumentImpl *doc) : HTMLElementImpl(doc) {}
     virtual ~HTMLMenuElementImpl() {}
 
     virtual Id id() const;
@@ -72,7 +72,7 @@
 class HTMLOListElementImpl : public HTMLUListElementImpl
 {
 public:
-    HTMLOListElementImpl(DocumentPtr *doc)
+    HTMLOListElementImpl(DocumentImpl *doc)
         : HTMLUListElementImpl(doc), _start(1) {}
 
     virtual Id id() const;
@@ -88,7 +88,7 @@
 class HTMLLIElementImpl : public HTMLElementImpl
 {
 public:
-    HTMLLIElementImpl(DocumentPtr *doc)
+    HTMLLIElementImpl(DocumentImpl *doc)
         : HTMLElementImpl(doc) {}
 
     virtual Id id() const;
@@ -101,7 +101,7 @@
 class HTMLDListElementImpl : public HTMLElementImpl
 {
 public:
-    HTMLDListElementImpl(DocumentPtr *doc) : HTMLElementImpl(doc) {}
+    HTMLDListElementImpl(DocumentImpl *doc) : HTMLElementImpl(doc) {}
     virtual ~HTMLDListElementImpl() {}
 
     virtual Id id() const;
--- khtml/html/html_imageimpl.cpp
+++ khtml/html/html_imageimpl.cpp
@@ -52,7 +52,7 @@
 
 // -------------------------------------------------------------------------
 
-HTMLImageElementImpl::HTMLImageElementImpl(DocumentPtr *doc, HTMLFormElementImpl *f)
+HTMLImageElementImpl::HTMLImageElementImpl(DocumentImpl *doc, HTMLFormElementImpl *f)
     : HTMLElementImpl(doc), ismap(false), loadEventSent(true), m_image(0), m_form(f)
 {
     if (m_form)
@@ -343,7 +343,7 @@
 
 // -------------------------------------------------------------------------
 
-HTMLMapElementImpl::HTMLMapElementImpl(DocumentPtr *doc)
+HTMLMapElementImpl::HTMLMapElementImpl(DocumentImpl *doc)
     : HTMLElementImpl(doc)
 {
 }
@@ -435,7 +435,7 @@
 
 // -------------------------------------------------------------------------
 
-HTMLAreaElementImpl::HTMLAreaElementImpl(DocumentPtr *doc)
+HTMLAreaElementImpl::HTMLAreaElementImpl(DocumentImpl *doc)
     : HTMLAnchorElementImpl(doc)
 {
     m_coords=0;
--- khtml/html/html_inlineimpl.h
+++ khtml/html/html_inlineimpl.h
@@ -33,7 +33,7 @@
 class HTMLAnchorElementImpl : public HTMLElementImpl
 {
 public:
-    HTMLAnchorElementImpl(DocumentPtr *doc)
+    HTMLAnchorElementImpl(DocumentImpl *doc)
         : HTMLElementImpl(doc), m_hasTarget(false) {}
 
     virtual bool isFocusable() const { return m_hasAnchor; }
@@ -50,7 +50,7 @@
 class HTMLBRElementImpl : public HTMLElementImpl
 {
 public:
-    HTMLBRElementImpl(DocumentPtr *doc)
+    HTMLBRElementImpl(DocumentImpl *doc)
         : HTMLElementImpl(doc) {}
 
     virtual Id id() const;
@@ -63,7 +63,7 @@
 class HTMLFontElementImpl : public HTMLElementImpl
 {
 public:
-    HTMLFontElementImpl(DocumentPtr *doc)
+    HTMLFontElementImpl(DocumentImpl *doc)
         : HTMLElementImpl(doc) {}
 
     virtual Id id() const;
--- khtml/html/html_elementimpl.cpp
+++ khtml/html/html_elementimpl.cpp
@@ -56,10 +56,10 @@
 using namespace DOM;
 using namespace khtml;
 
-HTMLElementImpl::HTMLElementImpl(DocumentPtr *doc)
+HTMLElementImpl::HTMLElementImpl(DocumentImpl *doc)
     : ElementImpl( doc )
 {
-    m_htmlCompat = doc && doc->document() ? doc->document()->htmlMode() != DocumentImpl::XHtml : false;
+    m_htmlCompat = doc && doc->htmlMode() != DocumentImpl::XHtml;
 }
 
 HTMLElementImpl::~HTMLElementImpl()
@@ -460,7 +460,7 @@
 
 DOMString HTMLElementImpl::innerText() const
 {
-    DOMString text = "";
+    QString text = "";
     if(!firstChild())
         return text;
 
@@ -481,7 +481,8 @@
             n = next;
         }
         if(n->isTextNode() ) {
-            text += static_cast<const TextImpl *>(n)->data();
+            DOMStringImpl* data = static_cast<const TextImpl *>(n)->string();
+            text += QConstString(data->s, data->l).string();
         }
     }
  end:
@@ -663,7 +664,7 @@
 }
 
 // -------------------------------------------------------------------------
-HTMLGenericElementImpl::HTMLGenericElementImpl(DocumentPtr *doc, ushort i)
+HTMLGenericElementImpl::HTMLGenericElementImpl(DocumentImpl *doc, ushort i)
     : HTMLElementImpl(doc)
 {
     _id = i;
--- khtml/html/html_tableimpl.h
+++ khtml/html/html_tableimpl.h
@@ -53,7 +53,7 @@
 
 {
 public:
-    HTMLTablePartElementImpl(DocumentPtr *doc)
+    HTMLTablePartElementImpl(DocumentImpl *doc)
         : HTMLElementImpl(doc)
         { }
 
@@ -65,7 +65,7 @@
 class HTMLTableSectionElementImpl : public HTMLTablePartElementImpl
 {
 public:
-    HTMLTableSectionElementImpl(DocumentPtr *doc, ushort tagid, bool implicit);
+    HTMLTableSectionElementImpl(DocumentImpl *doc, ushort tagid, bool implicit);
 
     ~HTMLTableSectionElementImpl();
 
@@ -85,7 +85,7 @@
 class HTMLTableRowElementImpl : public HTMLTablePartElementImpl
 {
 public:
-    HTMLTableRowElementImpl(DocumentPtr *doc)
+    HTMLTableRowElementImpl(DocumentImpl *doc)
         : HTMLTablePartElementImpl(doc) {}
 
     virtual Id id() const;
@@ -105,7 +105,7 @@
 class HTMLTableCellElementImpl : public HTMLTablePartElementImpl
 {
 public:
-    HTMLTableCellElementImpl(DocumentPtr *doc, int tagId);
+    HTMLTableCellElementImpl(DocumentImpl *doc, int tagId);
     ~HTMLTableCellElementImpl();
 
     long cellIndex() const;
@@ -138,7 +138,7 @@
 class HTMLTableColElementImpl : public HTMLTablePartElementImpl
 {
 public:
-    HTMLTableColElementImpl(DocumentPtr *doc, ushort i);
+    HTMLTableColElementImpl(DocumentImpl *doc, ushort i);
 
     virtual Id id() const;
 
@@ -163,7 +163,7 @@
 class HTMLTableCaptionElementImpl : public HTMLTablePartElementImpl
 {
 public:
-    HTMLTableCaptionElementImpl(DocumentPtr *doc)
+    HTMLTableCaptionElementImpl(DocumentImpl *doc)
         : HTMLTablePartElementImpl(doc) {}
 
     virtual Id id() const;
@@ -249,7 +249,7 @@
         Box    = 0x0f
     };
 
-    HTMLTableElementImpl(DocumentPtr *doc);
+    HTMLTableElementImpl(DocumentImpl *doc);
     ~HTMLTableElementImpl();
 
     virtual Id id() const;
--- khtml/html/htmltokenizer.h
+++ khtml/html/htmltokenizer.h
@@ -44,7 +44,7 @@
 class KHTMLView;
 
 namespace DOM {
-    class DocumentPtr;
+    class DocumentImpl;
     class DocumentFragmentImpl;
 }
 
@@ -122,8 +122,8 @@
 {
     friend class KHTMLParser;
 public:
-    HTMLTokenizer(DOM::DocumentPtr *, KHTMLView * = 0);
-    HTMLTokenizer(DOM::DocumentPtr *, DOM::DocumentFragmentImpl *frag);
+    HTMLTokenizer(DOM::DocumentImpl *, KHTMLView * = 0);
+    HTMLTokenizer(DOM::DocumentImpl *, DOM::DocumentFragmentImpl *frag);
     virtual ~HTMLTokenizer();
 
     void begin();
--- khtml/html/html_blockimpl.h
+++ khtml/html/html_blockimpl.h
@@ -36,7 +36,7 @@
 class HTMLDivElementImpl : public HTMLGenericElementImpl
 {
 public:
-    HTMLDivElementImpl(DocumentPtr *doc, ushort _tagid)
+    HTMLDivElementImpl(DocumentImpl *doc, ushort _tagid)
         : HTMLGenericElementImpl(doc, _tagid) {}
 
     virtual void parseAttribute(AttributeImpl *token);
@@ -47,7 +47,7 @@
 class HTMLHRElementImpl : public HTMLElementImpl
 {
 public:
-    HTMLHRElementImpl(DocumentPtr *doc)
+    HTMLHRElementImpl(DocumentImpl *doc)
         : HTMLElementImpl(doc) {}
 
     virtual NodeImpl::Id id() const;
@@ -60,7 +60,7 @@
 class HTMLPreElementImpl : public HTMLGenericElementImpl
 {
 public:
-    HTMLPreElementImpl(DocumentPtr *doc, ushort _tagid)
+    HTMLPreElementImpl(DocumentImpl *doc, ushort _tagid)
         : HTMLGenericElementImpl(doc, _tagid) {}
 
     long width() const;
@@ -72,7 +72,7 @@
 class HTMLMarqueeElementImpl : public HTMLElementImpl
 {
 public:
-    HTMLMarqueeElementImpl(DocumentPtr *doc);
+    HTMLMarqueeElementImpl(DocumentImpl *doc);
 
     virtual NodeImpl::Id id() const;
     virtual void parseAttribute(AttributeImpl *token);
@@ -88,7 +88,7 @@
 class HTMLLayerElementImpl : public HTMLDivElementImpl
 {
 public:
-    HTMLLayerElementImpl( DocumentPtr *doc, ushort _tagid );
+    HTMLLayerElementImpl( DocumentImpl *doc, ushort _tagid );
 
     virtual void parseAttribute(AttributeImpl *);
     virtual NodeImpl *addChild(NodeImpl *child);
--- khtml/html/html_miscimpl.h
+++ khtml/html/html_miscimpl.h
@@ -36,7 +36,7 @@
 class HTMLBaseFontElementImpl : public HTMLElementImpl
 {
 public:
-    HTMLBaseFontElementImpl(DocumentPtr *doc);
+    HTMLBaseFontElementImpl(DocumentImpl *doc);
 
     ~HTMLBaseFontElementImpl();
 
--- khtml/html/html_headimpl.h
+++ khtml/html/html_headimpl.h
@@ -46,7 +46,7 @@
 class HTMLBaseElementImpl : public HTMLElementImpl
 {
 public:
-    HTMLBaseElementImpl(DocumentPtr *doc)
+    HTMLBaseElementImpl(DocumentImpl *doc)
         : HTMLElementImpl(doc) {}
 
     DOMString href() const { return m_href; }
@@ -71,7 +71,7 @@
 class HTMLLinkElementImpl : public khtml::CachedObjectClient, public HTMLElementImpl
 {
 public:
-    HTMLLinkElementImpl(DocumentPtr *doc)
+    HTMLLinkElementImpl(DocumentImpl *doc)
         : HTMLElementImpl(doc), m_cachedSheet(0), m_sheet(0), m_isDisabled(false),
 	m_loading(false), m_alternate(false), m_isCSSSheet(false) {}
 
@@ -119,7 +119,7 @@
 class HTMLMetaElementImpl : public HTMLElementImpl
 {
 public:
-    HTMLMetaElementImpl(DocumentPtr *doc)
+    HTMLMetaElementImpl(DocumentImpl *doc)
         : HTMLElementImpl(doc) {}
 
     virtual Id id() const;
@@ -138,7 +138,7 @@
 class HTMLScriptElementImpl : public HTMLElementImpl, public khtml::CachedObjectClient
 {
 public:
-    HTMLScriptElementImpl(DocumentPtr *doc);
+    HTMLScriptElementImpl(DocumentImpl *doc);
     ~HTMLScriptElementImpl();
 
     virtual void insertedIntoDocument();
@@ -185,7 +185,7 @@
 class HTMLStyleElementImpl : public HTMLElementImpl
 {
 public:
-    HTMLStyleElementImpl(DocumentPtr *doc)
+    HTMLStyleElementImpl(DocumentImpl *doc)
         : HTMLElementImpl(doc), m_sheet(0), m_loading(false) {}
     ~HTMLStyleElementImpl();
 
@@ -214,7 +214,7 @@
 class HTMLTitleElementImpl : public HTMLElementImpl
 {
 public:
-    HTMLTitleElementImpl(DocumentPtr *doc)
+    HTMLTitleElementImpl(DocumentImpl *doc)
         : HTMLElementImpl(doc) {}
 
     DOMString text();
--- khtml/html/html_formimpl.h
+++ khtml/html/html_formimpl.h
@@ -65,7 +65,7 @@
 class HTMLFormElementImpl : public HTMLElementImpl
 {
 public:
-    HTMLFormElementImpl(DocumentPtr *doc, bool implicit);
+    HTMLFormElementImpl(DocumentImpl *doc, bool implicit);
     virtual ~HTMLFormElementImpl();
 
     virtual Id id() const;
@@ -137,7 +137,7 @@
     friend class khtml::RenderFormElement;
 
 public:
-    HTMLGenericFormElementImpl(DocumentPtr *doc, HTMLFormElementImpl *f = 0);
+    HTMLGenericFormElementImpl(DocumentImpl *doc, HTMLFormElementImpl *f = 0);
     virtual ~HTMLGenericFormElementImpl();
 
     HTMLFormElementImpl *form() { return m_form; }
@@ -189,7 +189,7 @@
 class HTMLButtonElementImpl : public HTMLGenericFormElementImpl
 {
 public:
-    HTMLButtonElementImpl(DocumentPtr *doc, HTMLFormElementImpl *f = 0);
+    HTMLButtonElementImpl(DocumentImpl *doc, HTMLFormElementImpl *f = 0);
 
     virtual ~HTMLButtonElementImpl();
 
@@ -227,7 +227,7 @@
 class HTMLFieldSetElementImpl : public HTMLGenericFormElementImpl
 {
 public:
-    HTMLFieldSetElementImpl(DocumentPtr *doc, HTMLFormElementImpl *f = 0);
+    HTMLFieldSetElementImpl(DocumentImpl *doc, HTMLFormElementImpl *f = 0);
 
     virtual ~HTMLFieldSetElementImpl();
 
@@ -261,7 +261,7 @@
         BUTTON
     };
 
-    HTMLInputElementImpl(DocumentPtr *doc, HTMLFormElementImpl *f = 0);
+    HTMLInputElementImpl(DocumentImpl *doc, HTMLFormElementImpl *f = 0);
     virtual ~HTMLInputElementImpl();
 
     virtual Id id() const;
@@ -289,7 +289,7 @@
 
     virtual bool maintainsState() { return true; }
     virtual QString state();
-    virtual void restoreState(const QString &);
+    virtual void restoreState(const QString &state);
 
     void select();
     void click();
@@ -345,7 +345,7 @@
 class HTMLLabelElementImpl : public HTMLGenericFormElementImpl
 {
 public:
-    HTMLLabelElementImpl(DocumentPtr *doc);
+    HTMLLabelElementImpl(DocumentImpl *doc);
     virtual ~HTMLLabelElementImpl();
 
     virtual Id id() const;
@@ -364,7 +364,7 @@
 class HTMLLegendElementImpl : public HTMLGenericFormElementImpl
 {
 public:
-    HTMLLegendElementImpl(DocumentPtr *doc, HTMLFormElementImpl *f = 0);
+    HTMLLegendElementImpl(DocumentImpl *doc, HTMLFormElementImpl *f = 0);
     virtual ~HTMLLegendElementImpl();
 
     virtual Id id() const;
@@ -380,7 +380,7 @@
     friend class khtml::RenderSelect;
 
 public:
-    HTMLSelectElementImpl(DocumentPtr *doc, HTMLFormElementImpl *f = 0);
+    HTMLSelectElementImpl(DocumentImpl *doc, HTMLFormElementImpl *f = 0);
     ~HTMLSelectElementImpl();
 
     virtual Id id() const;
@@ -410,7 +410,7 @@
 
     virtual bool maintainsState() { return true; }
     virtual QString state();
-    virtual void restoreState(const QString &);
+    virtual void restoreState(const QString &state);
 
     virtual NodeImpl *insertBefore ( NodeImpl *newChild, NodeImpl *refChild, int &exceptioncode );
     virtual void      replaceChild ( NodeImpl *newChild, NodeImpl *oldChild, int &exceptioncode );
@@ -457,7 +457,7 @@
 class HTMLKeygenElementImpl : public HTMLSelectElementImpl
 {
 public:
-    HTMLKeygenElementImpl(DocumentPtr *doc, HTMLFormElementImpl *f = 0);
+    HTMLKeygenElementImpl(DocumentImpl *doc, HTMLFormElementImpl *f = 0);
 
     virtual Id id() const;
 
@@ -479,7 +479,7 @@
 class HTMLOptGroupElementImpl : public HTMLGenericFormElementImpl
 {
 public:
-    HTMLOptGroupElementImpl(DocumentPtr *doc, HTMLFormElementImpl *f = 0)
+    HTMLOptGroupElementImpl(DocumentImpl *doc, HTMLFormElementImpl *f = 0)
         : HTMLGenericFormElementImpl(doc, f) {}
 
     virtual Id id() const;
@@ -494,7 +494,7 @@
     friend class DOM::HTMLSelectElementImpl;
 
 public:
-    HTMLOptionElementImpl(DocumentPtr *doc, HTMLFormElementImpl *f = 0);
+    HTMLOptionElementImpl(DocumentImpl *doc, HTMLFormElementImpl *f = 0);
 
     virtual Id id() const;
 
@@ -530,7 +530,7 @@
         ta_Physical
     };
 
-    HTMLTextAreaElementImpl(DocumentPtr *doc, HTMLFormElementImpl *f = 0);
+    HTMLTextAreaElementImpl(DocumentImpl *doc, HTMLFormElementImpl *f = 0);
     ~HTMLTextAreaElementImpl();
 
     virtual Id id() const;
@@ -547,7 +547,7 @@
 
     virtual bool maintainsState() { return true; }
     virtual QString state();
-    virtual void restoreState(const QString &);
+    virtual void restoreState(const QString &state);
 
     void select (  );
 
@@ -588,7 +588,7 @@
 class HTMLIsIndexElementImpl : public HTMLInputElementImpl
 {
 public:
-    HTMLIsIndexElementImpl(DocumentPtr *doc, HTMLFormElementImpl *f = 0);
+    HTMLIsIndexElementImpl(DocumentImpl *doc, HTMLFormElementImpl *f = 0);
     ~HTMLIsIndexElementImpl();
 
     virtual Id id() const;
--- khtml/html/htmlparser.cpp
+++ khtml/html/htmlparser.cpp
@@ -125,7 +125,7 @@
  *
  */
 
-KHTMLParser::KHTMLParser( KHTMLView *_parent, DocumentPtr *doc)
+KHTMLParser::KHTMLParser( KHTMLView *_parent, DocumentImpl *doc)
 {
     //kdDebug( 6035 ) << "parser constructor" << endl;
 #if SPEED_DEBUG > 0
@@ -134,7 +134,6 @@
 
     HTMLWidget    = _parent;
     document      = doc;
-    document->ref();
 
     blockStack = 0;
     current = 0;
@@ -145,11 +144,10 @@
     reset();
 }
 
-KHTMLParser::KHTMLParser( DOM::DocumentFragmentImpl *i, DocumentPtr *doc )
+KHTMLParser::KHTMLParser( DOM::DocumentFragmentImpl *i, DocumentImpl *doc )
 {
     HTMLWidget = 0;
     document = doc;
-    document->ref();
 
     forbiddenTag = new ushort[ID_CLOSE_TAG+1];
 
@@ -173,15 +171,13 @@
 
     if (current) current->deref();
 
-    document->deref();
-
     delete [] forbiddenTag;
     delete isindex;
 }
 
 void KHTMLParser::reset()
 {
-    setCurrent ( document->document() );
+    setCurrent ( document );
 
     freeBlock();
 
@@ -230,7 +226,7 @@
 
     // holy shit. apparently some sites use </br> instead of <br>
     // be compatible with IE and NS
-    if(t->tid == ID_BR+ID_CLOSE_TAG && document->document()->inCompatMode())
+    if(t->tid == ID_BR+ID_CLOSE_TAG && document->inCompatMode())
         t->tid -= ID_CLOSE_TAG;
 
     if(t->tid > ID_CLOSE_TAG)
@@ -349,8 +345,8 @@
             if(!n->attached() && HTMLWidget)
                 n->attach();
             if (n->maintainsState()) {
-                document->document()->registerMaintainsState(n);
-                QString state(document->document()->nextState());
+                document->registerMaintainsState(n);
+                QString state(document->nextState());
                 if (!state.isNull()) n->restoreState(state);
             }
             n->close();
@@ -886,8 +882,8 @@
             // we can't implement that behavior now because it could cause too many
             // regressions and the headaches are not worth the work as long as there is
             // no site actually relying on that detail (Dirk)
-            if (static_cast<HTMLDocumentImpl*>(document->document())->body())
-                static_cast<HTMLDocumentImpl*>(document->document())->body()
+            if (static_cast<HTMLDocumentImpl*>(document)->body())
+                static_cast<HTMLDocumentImpl*>(document)->body()
                     ->addCSSProperty(CSS_PROP_DISPLAY, CSS_VAL_NONE);
             inBody = false;
         }
@@ -1312,18 +1308,21 @@
 
 void KHTMLParser::handleResidualStyleCloseTagAcrossBlocks(HTMLStackElem* elem)
 {
-    // Find the element that crosses over to a higher level.   For now, if there is more than
-    // one, we will just give up and not attempt any sort of correction.  It's highly unlikely that
-    // there will be more than one, since <p> tags aren't allowed to be nested.
+    // Find the element that crosses over to a higher level.
+    // ### For now, if there is more than one, we will only make sure we close the residual style.
     int exceptionCode = 0;
     HTMLStackElem* curr = blockStack;
     HTMLStackElem* maxElem = 0;
+    HTMLStackElem* endElem = 0;
     HTMLStackElem* prev = 0;
     HTMLStackElem* prevMaxElem = 0;
+    bool advancedResidual = false; // ### if set we only close the residual style
     while (curr && curr != elem) {
         if (curr->level > elem->level) {
-            if (maxElem)
-                return;
+            if (!isAffectedByResidualStyle(curr->id)) return;
+            if (maxElem) advancedResidual = true;
+            else
+                endElem = curr;
             maxElem = curr;
             prevMaxElem = prev;
         }
@@ -1332,7 +1331,7 @@
         curr = curr->next;
     }
 
-    if (!curr || !maxElem || !isAffectedByResidualStyle(maxElem->id)) return;
+    if (!curr || !maxElem ) return;
 
     NodeImpl* residualElem = prev->node;
     NodeImpl* blockElem = prevMaxElem ? prevMaxElem->node : current;
@@ -1345,7 +1344,7 @@
     if (!parentElem->childAllowed(blockElem))
         return;
 
-    if (maxElem->node->parentNode() != elem->node) {
+    if (maxElem->node->parentNode() != elem->node && !advancedResidual) {
         // Walk the stack and remove any elements that aren't residual style tags.  These
         // are basically just being closed up.  Example:
         // <font><span>Moo<p>Goo</font></p>.
@@ -1379,6 +1378,8 @@
             if (isResidualStyleTag(currElem->node->id())) {
                 // Create a clone of this element.
                 currNode = currElem->node->cloneNode(false);
+                currElem->node->close();
+                removeForbidden(currElem->id, forbiddenTag);
 
                 // Change the stack element's node to point to the clone.
                 currElem->setNode(currNode);
@@ -1411,6 +1412,7 @@
     SharedPtr<NodeImpl> guard(blockElem);
     blockElem->parentNode()->removeChild(blockElem, exceptionCode);
 
+    if (!advancedResidual) {
     // Step 2: Clone |residualElem|.
     NodeImpl* newNode = residualElem->cloneNode(false); // Shallow clone. We don't pick up the same kids.
 
@@ -1437,6 +1439,7 @@
     // Step 4: Place |newNode| under |blockElem|.  |blockElem| is still out of the document, so no
     // attachment can occur yet.
     blockElem->appendChild(newNode, exceptionCode);
+    }
 
     // Step 5: Reparent |blockElem|.  Now the full attachment of the fixed up tree takes place.
     parentElem->appendChild(blockElem, exceptionCode);
@@ -1458,7 +1461,7 @@
     // In the above example, Goo should stay italic.
     curr = blockStack;
     HTMLStackElem* residualStyleStack = 0;
-    while (curr && curr != maxElem) {
+    while (curr && curr != endElem) {
         // We will actually schedule this tag for reopening
         // after we complete the close of this entire block.
         NodeImpl* currNode = current;
@@ -1631,9 +1634,9 @@
 
 #if SPEED_DEBUG < 1
     if((Elem->node != current)) {
-        if (current->maintainsState() && document->document()){
-            document->document()->registerMaintainsState(current);
-            QString state(document->document()->nextState());
+        if (current->maintainsState() && document){
+            document->registerMaintainsState(current);
+            QString state(document->nextState());
             if (!state.isNull()) current->restoreState(state);
         }
         current->close();
--- khtml/html/html_objectimpl.h
+++ khtml/html/html_objectimpl.h
@@ -40,7 +40,7 @@
 {
     Q_OBJECT
 public:
-    HTMLObjectBaseElementImpl(DocumentPtr *doc);
+    HTMLObjectBaseElementImpl(DocumentImpl *doc);
 
     virtual void parseAttribute(AttributeImpl *attr);
     virtual void attach();
@@ -72,7 +72,7 @@
 class HTMLAppletElementImpl : public HTMLObjectBaseElementImpl
 {
 public:
-    HTMLAppletElementImpl(DocumentPtr *doc);
+    HTMLAppletElementImpl(DocumentImpl *doc);
 
     ~HTMLAppletElementImpl();
 
@@ -89,7 +89,7 @@
 class HTMLEmbedElementImpl : public HTMLObjectBaseElementImpl
 {
 public:
-    HTMLEmbedElementImpl(DocumentPtr *doc);
+    HTMLEmbedElementImpl(DocumentImpl *doc);
     ~HTMLEmbedElementImpl();
 
     virtual Id id() const;
@@ -106,7 +106,7 @@
 class HTMLObjectElementImpl : public HTMLObjectBaseElementImpl
 {
 public:
-    HTMLObjectElementImpl(DocumentPtr *doc);
+    HTMLObjectElementImpl(DocumentImpl *doc);
 
     ~HTMLObjectElementImpl();
 
@@ -127,7 +127,7 @@
 {
     friend class HTMLAppletElementImpl;
 public:
-    HTMLParamElementImpl(DocumentPtr* _doc) : HTMLElementImpl(_doc) {}
+    HTMLParamElementImpl(DocumentImpl* _doc) : HTMLElementImpl(_doc) {}
 
     virtual Id id() const;
 
--- khtml/html/html_baseimpl.h
+++ khtml/html/html_baseimpl.h
@@ -53,7 +53,7 @@
 class HTMLBodyElementImpl : public HTMLElementImpl
 {
 public:
-    HTMLBodyElementImpl(DocumentPtr *doc);
+    HTMLBodyElementImpl(DocumentImpl *doc);
     ~HTMLBodyElementImpl();
 
     virtual Id id() const;
@@ -80,7 +80,7 @@
     friend class khtml::RenderPartObject;
 
 public:
-    HTMLFrameElementImpl(DocumentPtr *doc);
+    HTMLFrameElementImpl(DocumentImpl *doc);
 
     ~HTMLFrameElementImpl();
 
@@ -116,7 +116,7 @@
 {
     friend class khtml::RenderFrameSet;
 public:
-    HTMLFrameSetElementImpl(DocumentPtr *doc);
+    HTMLFrameSetElementImpl(DocumentImpl *doc);
 
     ~HTMLFrameSetElementImpl();
 
@@ -159,7 +159,7 @@
 class HTMLHeadElementImpl : public HTMLElementImpl
 {
 public:
-    HTMLHeadElementImpl(DocumentPtr *doc)
+    HTMLHeadElementImpl(DocumentImpl *doc)
         : HTMLElementImpl(doc) {}
 
     virtual Id id() const;
@@ -170,7 +170,7 @@
 class HTMLHtmlElementImpl : public HTMLElementImpl
 {
 public:
-    HTMLHtmlElementImpl(DocumentPtr *doc)
+    HTMLHtmlElementImpl(DocumentImpl *doc)
         : HTMLElementImpl(doc) {}
 
     virtual Id id() const;
@@ -182,7 +182,7 @@
 class HTMLIFrameElementImpl : public HTMLFrameElementImpl
 {
 public:
-    HTMLIFrameElementImpl(DocumentPtr *doc);
+    HTMLIFrameElementImpl(DocumentImpl *doc);
 
     ~HTMLIFrameElementImpl();
 
--- khtml/html/html_tableimpl.cpp
+++ khtml/html/html_tableimpl.cpp
@@ -48,7 +48,7 @@
 using namespace khtml;
 using namespace DOM;
 
-HTMLTableElementImpl::HTMLTableElementImpl(DocumentPtr *doc)
+HTMLTableElementImpl::HTMLTableElementImpl(DocumentImpl *doc)
   : HTMLElementImpl(doc)
 {
     rules = None;
@@ -661,7 +661,7 @@
 
 // -------------------------------------------------------------------------
 
-HTMLTableSectionElementImpl::HTMLTableSectionElementImpl(DocumentPtr *doc,
+HTMLTableSectionElementImpl::HTMLTableSectionElementImpl(DocumentImpl *doc,
                                                          ushort tagid, bool implicit)
     : HTMLTablePartElementImpl(doc)
 {
@@ -833,7 +833,7 @@
 
 // -------------------------------------------------------------------------
 
-HTMLTableCellElementImpl::HTMLTableCellElementImpl(DocumentPtr *doc, int tag)
+HTMLTableCellElementImpl::HTMLTableCellElementImpl(DocumentImpl *doc, int tag)
   : HTMLTablePartElementImpl(doc)
 {
   _col = -1;
@@ -930,7 +930,7 @@
 
 // -------------------------------------------------------------------------
 
-HTMLTableColElementImpl::HTMLTableColElementImpl(DocumentPtr *doc, ushort i)
+HTMLTableColElementImpl::HTMLTableColElementImpl(DocumentImpl *doc, ushort i)
     : HTMLTablePartElementImpl(doc)
 {
     _id = i;
--- khtml/html/html_imageimpl.h
+++ khtml/html/html_imageimpl.h
@@ -40,7 +40,7 @@
 {
     friend class HTMLFormElementImpl;
 public:
-    HTMLImageElementImpl(DocumentPtr *doc, HTMLFormElementImpl *f = 0);
+    HTMLImageElementImpl(DocumentImpl *doc, HTMLFormElementImpl *f = 0);
     ~HTMLImageElementImpl();
 
     virtual Id id() const;
@@ -95,7 +95,7 @@
 
     enum Shape { Default, Poly, Rect, Circle, Unknown };
 
-    HTMLAreaElementImpl(DocumentPtr *doc);
+    HTMLAreaElementImpl(DocumentImpl *doc);
     ~HTMLAreaElementImpl();
 
     virtual Id id() const;
@@ -127,7 +127,7 @@
 class HTMLMapElementImpl : public HTMLElementImpl
 {
 public:
-    HTMLMapElementImpl(DocumentPtr *doc);
+    HTMLMapElementImpl(DocumentImpl *doc);
 
     ~HTMLMapElementImpl();
 
--- khtml/ecma/kjs_navigator.cpp
+++ khtml/ecma/kjs_navigator.cpp
@@ -46,7 +46,7 @@
     // Its ctor and dtor take care of the refcounting on the static lists.
     class PluginBase : public ObjectImp {
     public:
-        PluginBase(ExecState *exec);
+        PluginBase(ExecState *exec, bool loadPluginInfo);
         virtual ~PluginBase();
 
         struct MimeClassInfo;
@@ -76,30 +76,40 @@
 
     class Plugins : public PluginBase {
     public:
-        Plugins(ExecState *exec) : PluginBase(exec) {};
+        Plugins(ExecState *exec, bool pluginsEnabled)
+          : PluginBase(exec, pluginsEnabled),
+            m_pluginsEnabled(pluginsEnabled) {};
         virtual Value get(ExecState *exec, const Identifier &propertyName) const;
         Value getValueProperty(ExecState *exec, int token) const;
         virtual const ClassInfo* classInfo() const { return &info; }
         static const ClassInfo info;
         Value pluginByName( ExecState* exec, const QString& name ) const;
+        bool pluginsEnabled() const { return m_pluginsEnabled; };
+    private:
+        bool m_pluginsEnabled;
     };
 
 
     class MimeTypes : public PluginBase {
     public:
-        MimeTypes(ExecState *exec) : PluginBase(exec) { };
+        MimeTypes(ExecState *exec, bool pluginsEnabled)
+          : PluginBase(exec, pluginsEnabled),
+            m_pluginsEnabled(pluginsEnabled) {};
         virtual Value get(ExecState *exec, const Identifier &propertyName) const;
         virtual const ClassInfo* classInfo() const { return &info; }
         static const ClassInfo info;
         Value getValueProperty(ExecState *exec, int token) const;
         Value mimeTypeByName( ExecState* exec, const QString& name ) const;
+        bool pluginsEnabled() const { return m_pluginsEnabled; };
+    private:
+        bool m_pluginsEnabled;
     };
 
 
     class Plugin : public PluginBase {
     public:
         Plugin( ExecState *exec, PluginBase::PluginInfo *info )
-          : PluginBase( exec )
+          : PluginBase( exec, true )
         { m_info = info; };
         virtual Value get(ExecState *exec, const Identifier &propertyName) const;
         virtual const ClassInfo* classInfo() const { return &info; }
@@ -115,7 +125,7 @@
     class MimeType : public PluginBase {
     public:
         MimeType( ExecState *exec, PluginBase::MimeClassInfo *info )
-          : PluginBase( exec )
+          : PluginBase( exec, true )
         { m_info = info; };
         virtual Value get(ExecState *exec, const Identifier &propertyName) const;
         virtual const ClassInfo* classInfo() const { return &info; }
@@ -259,9 +269,9 @@
       return String("x86");
   }
   case _Plugins:
-    return Value(new Plugins(exec));
+    return Value(new Plugins(exec, m_part->pluginsEnabled()));
   case _MimeTypes:
-    return Value(new MimeTypes(exec));
+    return Value(new MimeTypes(exec, m_part->pluginsEnabled()));
   case CookieEnabled:
     return Boolean(true); /// ##### FIXME
   default:
@@ -272,20 +282,15 @@
 
 /*******************************************************************/
 
-PluginBase::PluginBase(ExecState *exec)
+PluginBase::PluginBase(ExecState *exec, bool loadPluginInfo)
   : ObjectImp(exec->interpreter()->builtinObjectPrototype() )
 {
-    if ( !plugins ) {
+    if ( loadPluginInfo && !plugins ) {
         plugins = new QPtrList<PluginInfo>;
         mimes = new QPtrList<MimeClassInfo>;
         plugins->setAutoDelete( true );
         mimes->setAutoDelete( true );
 
-        // FIXME: add domain support here
-        KConfig kc("konquerorrc", true);
-        if (!KConfigGroup(&kc, "Java/JavaScript Settings").readBoolEntry("EnablePlugins", true))
-            return; // plugins disabled
-
         // read in using KTrader
         KTrader::OfferList offers = KTrader::self()->query("Browser/View");
         KTrader::OfferList::iterator it;
@@ -378,25 +383,31 @@
 #ifdef KJS_VERBOSE
   kdDebug(6070) << "Plugins::get " << propertyName.qstring() << endl;
 #endif
-  if ( propertyName == lengthPropertyName )
-    return Number(plugins->count());
+  if (!pluginsEnabled()) {
+    if (propertyName == lengthPropertyName )
+      return Number(0);
+  } else {
+    if ( propertyName == lengthPropertyName )
+      return Number(plugins->count());
 
-  // plugins[#]
-  bool ok;
-  unsigned int i = propertyName.toULong(&ok);
-  if( ok && i<plugins->count() )
-    return Value( new Plugin( exec, plugins->at(i) ) );
+    // plugins[#]
+    bool ok;
+    unsigned int i = propertyName.toULong(&ok);
+    if( ok && i<plugins->count() )
+      return Value( new Plugin( exec, plugins->at(i) ) );
 
-  // plugin[name]
-  Value val = pluginByName( exec, propertyName.qstring() );
-  if (!val.isA(UndefinedType))
-    return val;
+    // plugin[name]
+    Value val = pluginByName( exec, propertyName.qstring() );
+    if (!val.isA(UndefinedType))
+      return val;
+  }
 
   return lookupGet<PluginsFunc,Plugins,ObjectImp>(exec,propertyName,&PluginsTable,this);
 }
 
 Value Plugins::pluginByName( ExecState* exec, const QString& name ) const
 {
+  Q_ASSERT(plugins);
   for ( PluginInfo *pl = plugins->first(); pl!=0; pl = plugins->next() ) {
     if ( pl->name == name )
       return Value( new Plugin( exec, pl ) );
@@ -414,26 +425,30 @@
 {
   KJS_CHECK_THIS( KJS::Plugins, thisObj );
   KJS::Plugins* base = static_cast<KJS::Plugins *>(thisObj.imp());
-  switch( id ) {
-  case Plugins_Refresh:
-    return Undefined(); //## TODO
-  case Plugins_Item:
-  {
-    bool ok;
-    unsigned int i = args[0].toString(exec).toArrayIndex(&ok);
-    if( ok && i<base->plugins->count() )
-      return Value( new Plugin( exec, base->plugins->at(i) ) );
-    return Undefined();
+  if (!base->pluginsEnabled()) {
+    if (id == Plugins_Refresh || //## TODO
+        id == Plugins_Item ||
+        id == Plugins_NamedItem)
+      return Undefined();
+  } else {
+    switch( id ) {
+    case Plugins_Refresh:
+      return Undefined(); //## TODO
+    case Plugins_Item:
+    {
+      bool ok;
+      unsigned int i = args[0].toString(exec).toArrayIndex(&ok);
+      if( ok && i<base->plugins->count() )
+        return Value( new Plugin( exec, base->plugins->at(i) ) );
+      return Undefined();
+    }
+    case Plugins_NamedItem:
+      UString s = args[0].toString(exec);
+      return base->pluginByName( exec, s.qstring() );
+    }
   }
-  case Plugins_NamedItem:
-  {
-    UString s = args[0].toString(exec);
-    return base->pluginByName( exec, s.qstring() );
-  }
-  default:
-    kdDebug(6070) << "WARNING: Unhandled token in PluginsFunc::tryCall : " << id << endl;
-    return Undefined();
-  }
+  kdDebug(6070) << "WARNING: Unhandled token in PluginsFunc::tryCall : " << id << endl;
+  return Undefined();
 }
 
 /*******************************************************************/
@@ -453,19 +468,24 @@
 #ifdef KJS_VERBOSE
   kdDebug(6070) << "MimeTypes::get " << propertyName.qstring() << endl;
 #endif
-  if( propertyName==lengthPropertyName )
-    return Number( mimes->count() );
+  if (!pluginsEnabled()) {
+    if (propertyName == lengthPropertyName )
+        return Number(0);
+  } else {
+    if( propertyName==lengthPropertyName )
+      return Number( mimes->count() );
 
-  // mimeTypes[#]
-  bool ok;
-  unsigned int i = propertyName.toULong(&ok);
-  if( ok && i<mimes->count() )
-    return Value( new MimeType( exec, mimes->at(i) ) );
+    // mimeTypes[#]
+    bool ok;
+    unsigned int i = propertyName.toULong(&ok);
+    if( ok && i<mimes->count() )
+      return Value( new MimeType( exec, mimes->at(i) ) );
 
-  // mimeTypes[name]
-  Value val = mimeTypeByName( exec, propertyName.qstring() );
-  if (!val.isA(UndefinedType))
-    return val;
+    // mimeTypes[name]
+    Value val = mimeTypeByName( exec, propertyName.qstring() );
+    if (!val.isA(UndefinedType))
+      return val;
+  }
 
   return lookupGet<MimeTypesFunc,MimeTypes,ObjectImp>(exec,propertyName,&MimeTypesTable,this);
 }
@@ -473,6 +493,7 @@
 Value MimeTypes::mimeTypeByName( ExecState* exec, const QString& name ) const
 {
   //kdDebug(6070) << "MimeTypes[" << name << "]" << endl;
+  Q_ASSERT(mimes);
   for ( MimeClassInfo *m = mimes->first(); m!=0; m = mimes->next() ) {
     if ( m->type == name )
       return Value( new MimeType( exec, m ) );
@@ -490,24 +511,27 @@
 {
   KJS_CHECK_THIS( KJS::MimeTypes, thisObj );
   KJS::MimeTypes* base = static_cast<KJS::MimeTypes *>(thisObj.imp());
-  switch( id ) {
-  case MimeTypes_Item:
-  {
-    bool ok;
-    unsigned int i = args[0].toString(exec).toArrayIndex(&ok);
-    if( ok && i<base->mimes->count() )
-      return Value( new MimeType( exec, base->mimes->at(i) ) );
-    return Undefined();
+  if (!base->pluginsEnabled()) {
+    if (id == MimeTypes_Item ||
+        id == MimeTypes_NamedItem)
+      return Undefined();
+  } else {
+    switch( id ) {
+    case MimeTypes_Item:
+    {
+      bool ok;
+      unsigned int i = args[0].toString(exec).toArrayIndex(&ok);
+      if( ok && i<base->mimes->count() )
+        return Value( new MimeType( exec, base->mimes->at(i) ) );
+      return Undefined();
+    }
+    case MimeTypes_NamedItem:
+      UString s = args[0].toString(exec);
+      return base->mimeTypeByName( exec, s.qstring() );
+    }
   }
-  case MimeTypes_NamedItem:
-  {
-    UString s = args[0].toString(exec);
-    return base->mimeTypeByName( exec, s.qstring() );
-  }
-  default:
-    kdDebug(6070) << "WARNING: Unhandled token in MimeTypesFunc::tryCall : " << id << endl;
-    return Undefined();
-  }
+  kdDebug(6070) << "WARNING: Unhandled token in MimeTypesFunc::tryCall : " << id << endl;
+  return Undefined();
 }
 
 /************************************************************************/
--- khtml/ecma/kjs_range.cpp
+++ khtml/ecma/kjs_range.cpp
@@ -1,3 +1,4 @@
+
 // -*- c-basic-offset: 2 -*-
 /*
  *  This file is part of the KDE libraries
@@ -23,7 +24,7 @@
 #include "kjs_range.lut.h"
 #include <kdebug.h>
 
-using namespace KJS;
+namespace KJS {
 
 // -------------------------------------------------------------------------
 
@@ -59,9 +60,9 @@
   createContextualFragment  DOMRange::CreateContextualFragment  DontDelete|Function 1
 @end
 */
-DEFINE_PROTOTYPE("DOMRange",DOMRangeProto)
+KJS_DEFINE_PROTOTYPE(DOMRangeProto)
 IMPLEMENT_PROTOFUNC_DOM(DOMRangeProtoFunc)
-IMPLEMENT_PROTOTYPE(DOMRangeProto,DOMRangeProtoFunc)
+KJS_IMPLEMENT_PROTOTYPE("DOMRange",DOMRangeProto,DOMRangeProtoFunc)
 
 DOMRange::DOMRange(ExecState *exec, DOM::Range r)
  : DOMObject(DOMRangeProto::self(exec)), range(r) {}
@@ -183,7 +184,7 @@
   return result;
 }
 
-Value KJS::getDOMRange(ExecState *exec, DOM::Range r)
+Value getDOMRange(ExecState *exec, DOM::Range r)
 {
   return cacheDOMObject<DOM::Range, KJS::DOMRange>(exec, r);
 }
@@ -213,13 +214,13 @@
   return Number(token);
 }
 
-Value KJS::getRangeConstructor(ExecState *exec)
+Value getRangeConstructor(ExecState *exec)
 {
   return cacheGlobalObject<RangeConstructor>(exec, "[[range.constructor]]");
 }
 
 
-DOM::Range KJS::toRange(const Value& val)
+DOM::Range toRange(const Value& val)
 {
   Object obj = Object::dynamicCast(val);
   if (!obj.isValid() || !obj.inherits(&DOMRange::info))
@@ -228,3 +229,5 @@
   const DOMRange *dobj = static_cast<const DOMRange*>(obj.imp());
   return dobj->toRange();
 }
+
+} //namespace KJS
--- khtml/ecma/kjs_html.h
+++ khtml/ecma/kjs_html.h
@@ -57,7 +57,7 @@
 
   class HTMLElement : public DOMElement {
   public:
-    HTMLElement(ExecState *exec, const DOM::HTMLElement& e) : DOMElement(exec, e) { }
+    HTMLElement(ExecState *exec, const DOM::HTMLElement& e);
     virtual Value tryGet(ExecState *exec, const Identifier &propertyName) const;
     Value getValueProperty(ExecState *exec, int token) const;
     virtual void tryPut(ExecState *exec, const Identifier &propertyName, const Value& value, int attr = None);
@@ -160,7 +160,6 @@
     DOM::HTMLElement toElement() const { return static_cast<DOM::HTMLElement>(node); }
   };
 
-
   class HTMLElementFunction : public DOMFunction {
   public:
     HTMLElementFunction(ExecState *exec, int i, int len);
@@ -231,6 +230,65 @@
 
   Value getHTMLCollection(ExecState *exec, const DOM::HTMLCollection& c, bool hide=false);
   Value getSelectHTMLCollection(ExecState *exec, const DOM::HTMLCollection& c, const DOM::HTMLSelectElement& e);
+  
+  
+  //All the pseudo constructors..
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLHtmlElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLHeadElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLLinkElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLTitleElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLMetaElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLBaseElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLIsIndexElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLStyleElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLBodyElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLFormElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLSelectElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLOptGroupElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLOptionElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLInputElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLTextAreaElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLButtonElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLLabelElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLFieldSetElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLLegendElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLUListElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLOListElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLDListElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLDirectoryElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLMenuElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLLIElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLDivElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLParagraphElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLHeadingElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLBlockQuoteElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLQuoteElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLPreElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLBRElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLBaseFontElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLFontElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLHRElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLModElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLAnchorElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLImageElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLObjectElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLParamElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLAppletElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLMapElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLAreaElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLScriptElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLTableElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLTableCaptionElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLTableColElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLTableSectionElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLTableRowElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLTableCellElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLFrameSetElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLLayerElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLFrameElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLIFrameElementPseudoCtor)
+  DEFINE_PSEUDO_CONSTRUCTOR(HTMLMarqueeElementPseudoCtor)
 } // namespace
 
 #endif
--- khtml/ecma/kjs_events.h
+++ khtml/ecma/kjs_events.h
@@ -35,7 +35,9 @@
   public:
     /**
      * @param _listener the function object, that will be called when the event is emitted
+     * @param _compareListenerImp Compare Listener implementation.
      * @param _win Window object, for memory management and caching.
+     * @param _html \c true if it is HTML. 
      * Never create a JSEventListener directly, use Window::getJSEventListener.
      */
     JSEventListener(Object _listener, ObjectImp *_compareListenerImp, const Object &_win, bool _html = false);
--- khtml/ecma/kjs_window.h
+++ khtml/ecma/kjs_window.h
@@ -145,7 +145,21 @@
            Onmouseout, Onmouseover, Onmouseup, Onmove, Onreset, Onresize,
            Onselect, Onsubmit, Onunload,
            MutationEventCtor, KeyboardEventCtor, EventExceptionCtor,
-           ElementCtor, DocumentCtor, HTMLElementCtor, HTMLDocumentCtor,
+           ElementCtor, DocumentCtor, HTMLDocumentCtor,
+           HTMLElementCtor, HTMLHtmlElementCtor, HTMLHeadElementCtor, HTMLLinkElementCtor, 
+           HTMLTitleElementCtor, HTMLMetaElementCtor, HTMLBaseElementCtor, HTMLIsIndexElementCtor, 
+           HTMLStyleElementCtor, HTMLBodyElementCtor, HTMLFormElementCtor, HTMLSelectElementCtor,
+           HTMLOptGroupElementCtor, HTMLOptionElementCtor, HTMLInputElementCtor, HTMLTextAreaElementCtor,
+           HTMLButtonElementCtor, HTMLLabelElementCtor, HTMLFieldSetElementCtor, HTMLLegendElementCtor,
+           HTMLUListElementCtor, HTMLOListElementCtor, HTMLDListElementCtor, HTMLDirectoryElementCtor,
+           HTMLMenuElementCtor, HTMLLIElementCtor, HTMLDivElementCtor, HTMLParagraphElementCtor, 
+           HTMLHeadingElementCtor, HTMLBlockQuoteElementCtor, HTMLQuoteElementCtor, HTMLPreElementCtor,
+           HTMLBRElementCtor, HTMLBaseFontElementCtor, HTMLFontElementCtor, HTMLHRElementCtor, HTMLModElementCtor,
+           HTMLAnchorElementCtor, HTMLImageElementCtor, HTMLObjectElementCtor, HTMLParamElementCtor,
+           HTMLAppletElementCtor, HTMLMapElementCtor, HTMLAreaElementCtor, HTMLScriptElementCtor,
+           HTMLTableElementCtor, HTMLTableCaptionElementCtor, HTMLTableColElementCtor, 
+           HTMLTableSectionElementCtor, HTMLTableRowElementCtor, HTMLTableCellElementCtor, 
+           HTMLFrameSetElementCtor, HTMLLayerElementCtor, HTMLFrameElementCtor, HTMLIFrameElementCtor,
            CSSStyleDeclarationCtor};
     WindowQObject *winq;
 
--- khtml/ecma/kjs_binding.h
+++ khtml/ecma/kjs_binding.h
@@ -245,10 +245,78 @@
     else
       thisObj->putValueProperty(exec, entry->value, value, attr);
   }
+  
+// Versions of prototype functions that properly support instanceof,
+// and are compatible with trunk.
+#define KJS_DEFINE_PROTOTYPE_IMP(ClassProto,ProtoCode) \
+  class ClassProto : public ObjectImp { \
+  friend Object cacheGlobalObject<ClassProto>(ExecState *exec, const Identifier &propertyName); \
+  public: \
+    static Object self(ExecState *exec); \
+    virtual const ClassInfo *classInfo() const { return &info; } \
+    static const ClassInfo info; \
+    Value get(ExecState *exec, const Identifier &propertyName) const; \
+  protected: \
+    ClassProto( ExecState *exec ) \
+      : ObjectImp( ProtoCode ) {} \
+    \
+    static Identifier* s_name; \
+    static Identifier* name(); \
+  };
 
+#define KJS_DEFINE_PROTOTYPE(ClassProto) \
+        KJS_DEFINE_PROTOTYPE_IMP(ClassProto, exec->interpreter()->builtinObjectPrototype())
+
+#define KJS_DEFINE_PROTOTYPE_WITH_PROTOTYPE(ClassProto, ClassProtoProto) \
+            KJS_DEFINE_PROTOTYPE_IMP(ClassProto, ClassProtoProto::self(exec))
+
+#define KJS_EMPTY_PROTOTYPE_IMP(ClassName, ClassProto, ProtoCode) \
+      class ClassProto : public ObjectImp { \
+      friend Object cacheGlobalObject<ClassProto>(ExecState *exec, const Identifier &propertyName); \
+      public: \
+        static Object self(ExecState *exec) { \
+          return cacheGlobalObject<ClassProto>(exec, *name()); \
+        } \
+        virtual const ClassInfo *classInfo() const { return &info; } \
+        static const ClassInfo info; \
+      protected: \
+        ClassProto( ExecState *exec ) \
+          : ObjectImp( ProtoCode ) {} \
+        \
+        static Identifier* s_name; \
+        static Identifier* name() { \
+            if (!s_name) s_name = new Identifier("[[" ClassName ".prototype]]"); \
+            return s_name; \
+        }\
+      }; \
+      Identifier* ClassProto::s_name = 0; \
+      const ClassInfo ClassProto::info = { ClassName, 0, 0, 0 };
+      
+#define KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE(ClassName, ClassProto, ClassProtoProto) \
+  KJS_EMPTY_PROTOTYPE_IMP(ClassName, ClassProto, ClassProtoProto::self(exec))
+
+//### this doesn't implement hasProperty, but stuff in lookup.h didn't 
+//either (just did the forward)
+#define KJS_IMPLEMENT_PROTOTYPE(ClassName, ClassProto, ClassFunc) \
+    const ClassInfo ClassProto::info = { ClassName, 0, &ClassProto##Table, 0 }; \
+    Identifier* ClassProto::s_name = 0; \
+    Object ClassProto::self(ExecState *exec) \
+    { \
+      return cacheGlobalObject<ClassProto>(exec, *name()); \
+    } \
+    Value ClassProto::get(ExecState *exec, const Identifier &propertyName) const \
+    { \
+      /*fprintf( stderr, "%sProto::get(%s) [in macro, no parent]\n", info.className, propertyName.ascii());*/ \
+      return lookupGetFunction<ClassFunc,ObjectImp>(exec, propertyName, &ClassProto##Table, this ); \
+    } \
+    Identifier* ClassProto::name() \
+    { \
+      if (!s_name) s_name = new Identifier("[[" ClassName ".prototype]]"); \
+      return s_name; \
+    } 
+    
   // Modified version of IMPLEMENT_PROTOFUNC, to use DOMFunction and tryCall
 #define IMPLEMENT_PROTOFUNC_DOM(ClassFunc) \
-  namespace KJS { \
   class ClassFunc : public DOMFunction { \
   public: \
     ClassFunc(ExecState *exec, int i, int len) \
@@ -260,8 +328,7 @@
     virtual Value tryCall(ExecState *exec, Object &thisObj, const List &args); \
   private: \
     int id; \
-  }; \
-  }
+  }; 
 
   Value getLiveConnectValue(KParts::LiveConnectExtension *lc, const QString & name, const int type, const QString & value, int id);
 
@@ -294,26 +361,49 @@
 #define IMPLEMENT_PSEUDO_CONSTRUCTOR_WITH_PARENT(Class,ClassName,ProtoClass,ParentProtoClass) \
     IMPLEMENT_PSEUDO_CONSTRUCTOR_IMP(Class,ClassName,ProtoClass,ParentProtoClass::self(exec))
 
-// This is used to implement a constant table. Can be used as a prototype
-#define CREATE_CONSTANT_TABLE(Class,ClassName) \
+// This declares a constant table, which merely maps everything in its 
+// table to its token value. Can be used as a prototype
+#define DEFINE_CONSTANT_TABLE(Class) \
    class Class : public DOMObject { \
    public: \
-     Class(ExecState *exec): DOMObject(exec->interpreter()->builtinObjectPrototype()) {} \
-     virtual Value tryGet(ExecState *exec, const Identifier &propertyName) const { \
+     Class(ExecState *exec): DOMObject(exec->lexicalInterpreter()->builtinObjectPrototype()) {} \
+     \
+     virtual Value tryGet(ExecState *exec, const Identifier &propertyName) const;\
+     Value  getValueProperty(ExecState * /*exec*/, int token) const; \
+     virtual const ClassInfo* classInfo() const { return &info; } \
+     static const ClassInfo info; \
+     static Object self(ExecState *exec);\
+     static Identifier* s_name; \
+     static Identifier* name(); \
+   };
+
+// Emits an implementation of a constant table 
+#define IMPLEMENT_CONSTANT_TABLE(Class,ClassName) \
+    Value Class::tryGet(ExecState *exec, const Identifier &propertyName) const { \
         return DOMObjectLookupGetValue<Class, DOMObject>(exec, propertyName, &Class##Table, this);\
-     } \
-     Value getValueProperty(ExecState * /*exec*/, int token) const { \
+    } \
+    Value Class::getValueProperty(ExecState * /*exec*/, int token) const { \
         /* We use the token as the value to return directly*/ \
         return Number((unsigned int)token); \
-     }  \
-     virtual const ClassInfo* classInfo() const { return &info; } \
-     static const ClassInfo info; \
-     static Object self(ExecState *exec) { \
-        return Object(cacheGlobalObject<Class>(exec, "[[" ClassName ".constant_table]]")); \
-     } \
-   }; \
-   const ClassInfo Class::info = { ClassName, 0, &Class##Table, 0 };
+    }  \
+    Object Class::self(ExecState *exec) { \
+        return cacheGlobalObject<Class>(exec, *name()); \
+    } \
+    Identifier* Class::s_name = 0; \
+    Identifier* Class::name() { \
+        if (!s_name) s_name = new Identifier("[[" ClassName ".constant_table]]"); \
+        return s_name; \
+    } \
+    const ClassInfo Class::info = { ClassName, 0, &Class##Table, 0 };
 
+   
+// Hide some of the stuff in lookup.h..
+#undef PUBLIC_DEFINE_PROTOTYPE
+#undef DEFINE_PROTOTYPE
+#undef IMPLEMENT_PROTOTYPE
+#undef PUBLIC_IMPLEMENT_PROTOTYPE
+#undef IMPLEMENT_PROTOTYPE_WITH_PARENT
+
 } // namespace
 
 #endif
--- khtml/ecma/kjs_dom.cpp
+++ khtml/ecma/kjs_dom.cpp
@@ -43,7 +43,7 @@
 #include "kjs_dom.lut.h"
 #include "khtmlpart_p.h"
 
-using namespace KJS;
+namespace KJS {
 
 // -------------------------------------------------------------------------
 /* Source for DOMNodeConstantsTable.
@@ -62,7 +62,7 @@
   NOTATION_NODE     DOM::Node::NOTATION_NODE        DontDelete|ReadOnly
 @end
 */
-CREATE_CONSTANT_TABLE(DOMNodeConstants,"DOMNodeConstants")
+IMPLEMENT_CONSTANT_TABLE(DOMNodeConstants,"DOMNodeConstants")
 // -------------------------------------------------------------------------
 /* Source for DOMNodeProtoTable.
 @begin DOMNodeProtoTable 13
@@ -87,9 +87,8 @@
   item          DOMNode::Item           DontDelete|Function 1
 @end
 */
-DEFINE_PROTOTYPE("DOMNode",DOMNodeProto)
 IMPLEMENT_PROTOFUNC_DOM(DOMNodeProtoFunc)
-IMPLEMENT_PROTOTYPE_WITH_PARENT(DOMNodeProto,DOMNodeProtoFunc,DOMNodeConstants)
+KJS_IMPLEMENT_PROTOTYPE("DOMNode", DOMNodeProto, DOMNodeProtoFunc)
 
 const ClassInfo DOMNode::info = { "Node", 0, &DOMNodeTable, 0 };
 
@@ -633,10 +632,11 @@
   namedItem	DOMNodeList::NamedItem		DontDelete|Function 1
 @end
 */
-DEFINE_PROTOTYPE("DOMNodeList", DOMNodeListProto)
+KJS_DEFINE_PROTOTYPE(DOMNodeListProto)
 IMPLEMENT_PROTOFUNC_DOM(DOMNodeListProtoFunc)
-IMPLEMENT_PROTOTYPE(DOMNodeListProto,DOMNodeListProtoFunc)
+KJS_IMPLEMENT_PROTOTYPE("DOMNodeList", DOMNodeListProto, DOMNodeListProtoFunc)
 
+
 const ClassInfo DOMNodeList::info = { "NodeList", 0, 0, 0 };
 
 DOMNodeList::DOMNodeList(ExecState *exec, const DOM::NodeList& l)
@@ -795,6 +795,7 @@
 
 // -------------------------------------------------------------------------
 
+//### FIXME: link to the node prototype.
 const ClassInfo DOMAttr::info = { "Attr", &DOMNode::info, &DOMAttrTable, 0 };
 
 /* Source for DOMAttrTable.
@@ -878,8 +879,7 @@
 @end
 */
 IMPLEMENT_PROTOFUNC_DOM(DOMDocumentProtoFunc)
-PUBLIC_IMPLEMENT_PROTOTYPE_WITH_PARENT(DOMDocumentProto, "DOMDocument", DOMDocumentProtoFunc, DOMNodeProto)
-
+KJS_IMPLEMENT_PROTOTYPE("DOMDocument", DOMDocumentProto, DOMDocumentProtoFunc)
 IMPLEMENT_PSEUDO_CONSTRUCTOR(DocumentPseudoCtor, "Document", DOMDocumentProto)
 
 const ClassInfo DOMDocument::info = { "Document", &DOMNode::info, &DOMDocumentTable, 0 };
@@ -1127,9 +1127,8 @@
   hasAttributeNS	DOMElement::HasAttributeNS	DontDelete|Function 2
 @end
 */
-DEFINE_PROTOTYPE("DOMElement",DOMElementProto)
 IMPLEMENT_PROTOFUNC_DOM(DOMElementProtoFunc)
-IMPLEMENT_PROTOTYPE_WITH_PARENT(DOMElementProto,DOMElementProtoFunc,DOMNodeProto)
+KJS_IMPLEMENT_PROTOTYPE("DOMElement", DOMElementProto, DOMElementProtoFunc)
 
 IMPLEMENT_PSEUDO_CONSTRUCTOR(ElementPseudoCtor, "Element", DOMElementProto)
 
@@ -1241,9 +1240,9 @@
   createHTMLDocument    DOMDOMImplementation::CreateHTMLDocument        DontDelete|Function 1
 @end
 */
-DEFINE_PROTOTYPE("DOMImplementation",DOMDOMImplementationProto)
+KJS_DEFINE_PROTOTYPE(DOMDOMImplementationProto)
 IMPLEMENT_PROTOFUNC_DOM(DOMDOMImplementationProtoFunc)
-IMPLEMENT_PROTOTYPE(DOMDOMImplementationProto,DOMDOMImplementationProtoFunc)
+KJS_IMPLEMENT_PROTOTYPE("DOMImplementation", DOMDOMImplementationProto, DOMDOMImplementationProtoFunc)
 
 const ClassInfo DOMDOMImplementation::info = { "DOMImplementation", 0, 0, 0 };
 
@@ -1352,9 +1351,9 @@
   length		DOMNamedNodeMap::Length			DontDelete|Function 1
 @end
 */
-DEFINE_PROTOTYPE("NamedNodeMap", DOMNamedNodeMapProto)
+KJS_DEFINE_PROTOTYPE(DOMNamedNodeMapProto)
 IMPLEMENT_PROTOFUNC_DOM(DOMNamedNodeMapProtoFunc)
-IMPLEMENT_PROTOTYPE(DOMNamedNodeMapProto,DOMNamedNodeMapProtoFunc)
+KJS_IMPLEMENT_PROTOTYPE("NamedNodeMap", DOMNamedNodeMapProto, DOMNamedNodeMapProtoFunc)
 
 const ClassInfo DOMNamedNodeMap::info = { "NamedNodeMap", 0, &DOMNamedNodeMapTable, 0 };
 
@@ -1415,7 +1414,7 @@
 }
 
 // -------------------------------------------------------------------------
-
+//### FIXME: proto
 const ClassInfo DOMProcessingInstruction::info = { "ProcessingInstruction", &DOMNode::info, &DOMProcessingInstructionTable, 0 };
 
 /* Source for DOMProcessingInstructionTable.
@@ -1515,7 +1514,7 @@
 
 // -------------------------------------------------------------------------
 
-bool KJS::checkNodeSecurity(ExecState *exec, const DOM::Node& n)
+bool checkNodeSecurity(ExecState *exec, const DOM::Node& n)
 {
   // Check to see if the currently executing interpreter is allowed to access the specified node
   if (n.isNull())
@@ -1527,7 +1526,7 @@
   return true;
 }
 
-Value KJS::getDOMNode(ExecState *exec, const DOM::Node& n)
+Value getDOMNode(ExecState *exec, const DOM::Node& n)
 {
   DOMObject *ret = 0;
   if (n.isNull())
@@ -1585,17 +1584,17 @@
   return Value(ret);
 }
 
-Value KJS::getDOMNamedNodeMap(ExecState *exec, const DOM::NamedNodeMap& m)
+Value getDOMNamedNodeMap(ExecState *exec, const DOM::NamedNodeMap& m)
 {
   return Value(cacheDOMObject<DOM::NamedNodeMap, KJS::DOMNamedNodeMap>(exec, m));
 }
 
-Value KJS::getDOMNodeList(ExecState *exec, const DOM::NodeList& l)
+Value getDOMNodeList(ExecState *exec, const DOM::NodeList& l)
 {
   return Value(cacheDOMObject<DOM::NodeList, KJS::DOMNodeList>(exec, l));
 }
 
-Value KJS::getDOMDOMImplementation(ExecState *exec, const DOM::DOMImplementation& i)
+Value getDOMDOMImplementation(ExecState *exec, const DOM::DOMImplementation& i)
 {
   return Value(cacheDOMObject<DOM::DOMImplementation, KJS::DOMDOMImplementation>(exec, i));
 }
@@ -1679,7 +1678,7 @@
 #endif
 }
 
-Object KJS::getDOMExceptionConstructor(ExecState *exec)
+Object getDOMExceptionConstructor(ExecState *exec)
 {
   return cacheGlobalObject<DOMExceptionConstructor>(exec, "[[DOMException.constructor]]");
 }
@@ -1735,9 +1734,9 @@
   replaceData	DOMCharacterData::ReplaceData	DontDelete|Function 2
 @end
 */
-DEFINE_PROTOTYPE("DOMCharacterData",DOMCharacterDataProto)
+KJS_DEFINE_PROTOTYPE_WITH_PROTOTYPE(DOMCharacterDataProto, DOMNodeProto)
 IMPLEMENT_PROTOFUNC_DOM(DOMCharacterDataProtoFunc)
-IMPLEMENT_PROTOTYPE_WITH_PARENT(DOMCharacterDataProto,DOMCharacterDataProtoFunc, DOMNodeProto)
+KJS_IMPLEMENT_PROTOTYPE("DOMCharacterData", DOMCharacterDataProto, DOMCharacterDataProtoFunc)
 
 DOMCharacterData::DOMCharacterData(ExecState *exec, const DOM::CharacterData& d)
  : DOMNode(DOMCharacterDataProto::self(exec), d) {}
@@ -1812,9 +1811,9 @@
   splitText	DOMText::SplitText	DontDelete|Function 1
 @end
 */
-DEFINE_PROTOTYPE("DOMText",DOMTextProto)
+KJS_DEFINE_PROTOTYPE_WITH_PROTOTYPE(DOMTextProto, DOMCharacterDataProto)
 IMPLEMENT_PROTOFUNC_DOM(DOMTextProtoFunc)
-IMPLEMENT_PROTOTYPE_WITH_PARENT(DOMTextProto,DOMTextProtoFunc,DOMCharacterDataProto)
+KJS_IMPLEMENT_PROTOTYPE("DOMText", DOMTextProto, DOMTextProtoFunc)
 
 DOMText::DOMText(ExecState *exec, const DOM::Text& t)
   : DOMCharacterData(DOMTextProto::self(exec), t) { }
@@ -1839,3 +1838,5 @@
   }
   return Undefined();
 }
+
+}
--- khtml/ecma/xmlserializer.cpp
+++ khtml/ecma/xmlserializer.cpp
@@ -27,7 +27,6 @@
 
 #include <kdebug.h>
 
-using namespace KJS;
 
 ////////////////////// XMLSerializer Object ////////////////////////
 
@@ -36,12 +35,13 @@
   serializeToString XMLSerializer::SerializeToString DontDelete|Function 1
 @end
 */
-DEFINE_PROTOTYPE("XMLSerializer",XMLSerializerProto)
-IMPLEMENT_PROTOFUNC_DOM(XMLSerializerProtoFunc)
-IMPLEMENT_PROTOTYPE(XMLSerializerProto,XMLSerializerProtoFunc)
 
 namespace KJS {
 
+KJS_DEFINE_PROTOTYPE(XMLSerializerProto)
+IMPLEMENT_PROTOFUNC_DOM(XMLSerializerProtoFunc)
+KJS_IMPLEMENT_PROTOTYPE("XMLSerializer", XMLSerializerProto, XMLSerializerProtoFunc)
+
 XMLSerializerConstructorImp::XMLSerializerConstructorImp(ExecState *)
     : ObjectImp()
 {
--- khtml/ecma/kjs_css.cpp
+++ khtml/ecma/kjs_css.cpp
@@ -28,9 +28,11 @@
 #include <css/css_base.h>
 #include "kjs_dom.h"
 
-using namespace KJS;
+
 #include <kdebug.h>
 
+namespace KJS {
+
 static QString cssPropertyName( const Identifier &p, bool& hadPixelPrefix )
 {
     QString prop = p.qstring();
@@ -76,9 +78,9 @@
   parentRule		DOMCSSStyleDeclaration::ParentRule	DontDelete|ReadOnly
 @end
 */
-DEFINE_PROTOTYPE("DOMCSSStyleDeclaration", DOMCSSStyleDeclarationProto)
+KJS_DEFINE_PROTOTYPE(DOMCSSStyleDeclarationProto)
 IMPLEMENT_PROTOFUNC_DOM(DOMCSSStyleDeclarationProtoFunc)
-IMPLEMENT_PROTOTYPE(DOMCSSStyleDeclarationProto, DOMCSSStyleDeclarationProtoFunc)
+KJS_IMPLEMENT_PROTOTYPE("DOMCSSStyleDeclaration", DOMCSSStyleDeclarationProto, DOMCSSStyleDeclarationProtoFunc)
 
 IMPLEMENT_PSEUDO_CONSTRUCTOR(CSSStyleDeclarationPseudoCtor, "DOMCSSStyleDeclaration",DOMCSSStyleDeclarationProto)
 
@@ -224,7 +226,7 @@
   }
 }
 
-Value KJS::getDOMCSSStyleDeclaration(ExecState *exec, const DOM::CSSStyleDeclaration& s)
+Value getDOMCSSStyleDeclaration(ExecState *exec, const DOM::CSSStyleDeclaration& s)
 {
   return cacheDOMObject<DOM::CSSStyleDeclaration, KJS::DOMCSSStyleDeclaration>(exec, s);
 }
@@ -289,7 +291,7 @@
     DOMObject::tryPut(exec, propertyName, value, attr);
 }
 
-Value KJS::getDOMStyleSheet(ExecState *exec, const DOM::StyleSheet& ss)
+Value getDOMStyleSheet(ExecState *exec, const DOM::StyleSheet& ss)
 {
   DOMObject *ret;
   if (ss.isNull())
@@ -406,7 +408,7 @@
   return Undefined();
 }
 
-Value KJS::getDOMStyleSheetList(ExecState *exec, const DOM::StyleSheetList& ssl, const DOM::Document& doc)
+Value getDOMStyleSheetList(ExecState *exec, const DOM::StyleSheetList& ssl, const DOM::Document& doc)
 {
   // Can't use the cacheDOMObject macro because of the doc argument
   DOMObject *ret;
@@ -446,9 +448,9 @@
   appendMedium	DOMMediaList::AppendMedium	DontDelete|Function 1
 @end
 */
-DEFINE_PROTOTYPE("DOMMediaList", DOMMediaListProto)
+KJS_DEFINE_PROTOTYPE(DOMMediaListProto)
 IMPLEMENT_PROTOFUNC_DOM(DOMMediaListProtoFunc)
-IMPLEMENT_PROTOTYPE(DOMMediaListProto, DOMMediaListProtoFunc)
+KJS_IMPLEMENT_PROTOTYPE("DOMMediaList", DOMMediaListProto, DOMMediaListProtoFunc)
 
 DOMMediaList::DOMMediaList(ExecState *exec, const DOM::MediaList& ml)
   : DOMObject(DOMMediaListProto::self(exec)), mediaList(ml) { }
@@ -481,7 +483,7 @@
     DOMObject::tryPut(exec, propertyName, value, attr);
 }
 
-Value KJS::getDOMMediaList(ExecState *exec, const DOM::MediaList& ml)
+Value getDOMMediaList(ExecState *exec, const DOM::MediaList& ml)
 {
   return cacheDOMObject<DOM::MediaList, KJS::DOMMediaList>(exec, ml);
 }
@@ -523,9 +525,9 @@
   removeRule	DOMCSSStyleSheet::RemoveRule	DontDelete|Function 1
 @end
 */
-DEFINE_PROTOTYPE("DOMCSSStyleSheet",DOMCSSStyleSheetProto)
+KJS_DEFINE_PROTOTYPE(DOMCSSStyleSheetProto)
 IMPLEMENT_PROTOFUNC_DOM(DOMCSSStyleSheetProtoFunc)
-IMPLEMENT_PROTOTYPE(DOMCSSStyleSheetProto,DOMCSSStyleSheetProtoFunc) // warning, use _WITH_PARENT if DOMStyleSheet gets a proto
+KJS_IMPLEMENT_PROTOTYPE("DOMCSSStyleSheet",DOMCSSStyleSheetProto,DOMCSSStyleSheetProtoFunc) // warning, use _WITH_PARENT if DOMStyleSheet gets a proto
 
 DOMCSSStyleSheet::DOMCSSStyleSheet(ExecState *exec, const DOM::CSSStyleSheet& ss)
   : DOMStyleSheet(DOMCSSStyleSheetProto::self(exec),ss) { }
@@ -625,7 +627,7 @@
   }
 }
 
-Value KJS::getDOMCSSRuleList(ExecState *exec, const DOM::CSSRuleList& rl)
+Value getDOMCSSRuleList(ExecState *exec, const DOM::CSSRuleList& rl)
 {
   return cacheDOMObject<DOM::CSSRuleList, KJS::DOMCSSRuleList>(exec, rl);
 }
@@ -832,7 +834,7 @@
   return Undefined();
 }
 
-Value KJS::getDOMCSSRule(ExecState *exec, const DOM::CSSRule& r)
+Value getDOMCSSRule(ExecState *exec, const DOM::CSSRule& r)
 {
   return cacheDOMObject<DOM::CSSRule, KJS::DOMCSSRule>(exec, r);
 }
@@ -840,7 +842,7 @@
 // -------------------------------------------------------------------------
 
 
-DOM::CSSRule KJS::toCSSRule(const Value& val)
+DOM::CSSRule toCSSRule(const Value& val)
 {
   Object obj = Object::dynamicCast(val);
   if (!obj.isValid() || !obj.inherits(&DOMCSSRule::info))
@@ -896,7 +898,7 @@
   return Value();
 }
 
-Value KJS::getCSSRuleConstructor(ExecState *exec)
+Value getCSSRuleConstructor(ExecState *exec)
 {
   return cacheGlobalObject<CSSRuleConstructor>( exec, "[[cssRule.constructor]]" );
 }
@@ -939,7 +941,7 @@
     DOMObject::tryPut(exec, propertyName, value, attr);
 }
 
-Value KJS::getDOMCSSValue(ExecState *exec, const DOM::CSSValue& v)
+Value getDOMCSSValue(ExecState *exec, const DOM::CSSValue& v)
 {
   DOMObject *ret;
   if (v.isNull())
@@ -996,7 +998,7 @@
   return Value();
 }
 
-Value KJS::getCSSValueConstructor(ExecState *exec)
+Value getCSSValueConstructor(ExecState *exec)
 {
   return cacheGlobalObject<CSSValueConstructor>( exec, "[[cssValue.constructor]]" );
 }
@@ -1018,9 +1020,9 @@
   getRGBColorValue	DOMCSSPrimitiveValue::GetRGBColorValue	DontDelete|Function 0
 @end
 */
-DEFINE_PROTOTYPE("DOMCSSPrimitiveValue",DOMCSSPrimitiveValueProto)
+KJS_DEFINE_PROTOTYPE(DOMCSSPrimitiveValueProto)
 IMPLEMENT_PROTOFUNC_DOM(DOMCSSPrimitiveValueProtoFunc)
-IMPLEMENT_PROTOTYPE(DOMCSSPrimitiveValueProto,DOMCSSPrimitiveValueProtoFunc)
+KJS_IMPLEMENT_PROTOTYPE("DOMCSSPrimitiveValue",DOMCSSPrimitiveValueProto,DOMCSSPrimitiveValueProtoFunc)
 
 DOMCSSPrimitiveValue::DOMCSSPrimitiveValue(ExecState *exec, const DOM::CSSPrimitiveValue& v)
   : DOMCSSValue(DOMCSSPrimitiveValueProto::self(exec), v) { }
@@ -1104,7 +1106,7 @@
   return Number(token);
 }
 
-Value KJS::getCSSPrimitiveValueConstructor(ExecState *exec)
+Value getCSSPrimitiveValueConstructor(ExecState *exec)
 {
   return cacheGlobalObject<CSSPrimitiveValueConstructor>( exec, "[[cssPrimitiveValue.constructor]]" );
 }
@@ -1197,7 +1199,7 @@
   }
 }
 
-Value KJS::getDOMRGBColor(ExecState *exec, const DOM::RGBColor& c)
+Value getDOMRGBColor(ExecState *exec, const DOM::RGBColor& c)
 {
   // ### implement equals for RGBColor since they're not refcounted objects
   return Value(new DOMRGBColor(exec, c));
@@ -1247,7 +1249,7 @@
   }
 }
 
-Value KJS::getDOMRect(ExecState *exec, const DOM::Rect& r)
+Value getDOMRect(ExecState *exec, const DOM::Rect& r)
 {
   return cacheDOMObject<DOM::Rect, KJS::DOMRect>(exec, r);
 }
@@ -1292,7 +1294,9 @@
   }
 }
 
-Value KJS::getDOMCounter(ExecState *exec, const DOM::Counter& c)
+Value getDOMCounter(ExecState *exec, const DOM::Counter& c)
 {
   return cacheDOMObject<DOM::Counter, KJS::DOMCounter>(exec, c);
 }
+
+} //namespace KJS
--- khtml/ecma/xmlhttprequest.cpp
+++ khtml/ecma/xmlhttprequest.cpp
@@ -50,9 +50,10 @@
                             "delete,head,trace,put,propfind,proppatch,"\
                             "mkcol,lock,unlock,options,via"
 
-using namespace KJS;
 using khtml::Decoder;
 
+namespace KJS {
+
 ////////////////////// XMLHttpRequest Object ////////////////////////
 
 /* Source for XMLHttpRequestProtoTable.
@@ -65,11 +66,10 @@
   setRequestHeader	XMLHttpRequest::SetRequestHeader	DontDelete|Function 2
 @end
 */
-DEFINE_PROTOTYPE("XMLHttpRequest",XMLHttpRequestProto)
+KJS_DEFINE_PROTOTYPE(XMLHttpRequestProto)
 IMPLEMENT_PROTOFUNC_DOM(XMLHttpRequestProtoFunc)
-IMPLEMENT_PROTOTYPE(XMLHttpRequestProto,XMLHttpRequestProtoFunc)
+KJS_IMPLEMENT_PROTOTYPE("XMLHttpRequest", XMLHttpRequestProto,XMLHttpRequestProtoFunc)
 
-namespace KJS {
 
 XMLHttpRequestQObject::XMLHttpRequestQObject(XMLHttpRequest *_jsObject)
 {
@@ -761,4 +761,5 @@
 
 } // end namespace
 
+
 #include "xmlhttprequest.moc"
--- khtml/ecma/kjs_traversal.cpp
+++ khtml/ecma/kjs_traversal.cpp
@@ -28,7 +28,7 @@
 #include <khtml_part.h>
 #include <kdebug.h>
 
-using namespace KJS;
+namespace KJS {
 
 // -------------------------------------------------------------------------
 
@@ -46,9 +46,9 @@
   detach	DOMNodeIterator::Detach		DontDelete|Function 0
 @end
 */
-DEFINE_PROTOTYPE("DOMNodeIterator",DOMNodeIteratorProto)
+KJS_DEFINE_PROTOTYPE(DOMNodeIteratorProto)
 IMPLEMENT_PROTOFUNC_DOM(DOMNodeIteratorProtoFunc)
-IMPLEMENT_PROTOTYPE(DOMNodeIteratorProto,DOMNodeIteratorProtoFunc)
+KJS_IMPLEMENT_PROTOTYPE("DOMNodeIterator", DOMNodeIteratorProto,DOMNodeIteratorProtoFunc)
 
 DOMNodeIterator::DOMNodeIterator(ExecState *exec, DOM::NodeIterator ni)
   : DOMObject(DOMNodeIteratorProto::self(exec)), nodeIterator(ni) {}
@@ -97,7 +97,7 @@
   return Undefined();
 }
 
-Value KJS::getDOMNodeIterator(ExecState *exec, DOM::NodeIterator ni)
+Value getDOMNodeIterator(ExecState *exec, DOM::NodeIterator ni)
 {
   return cacheDOMObject<DOM::NodeIterator, DOMNodeIterator>(exec, ni);
 }
@@ -143,7 +143,7 @@
   return Number(token);
 }
 
-Value KJS::getNodeFilterConstructor(ExecState *exec)
+Value getNodeFilterConstructor(ExecState *exec)
 {
   return cacheGlobalObject<NodeFilterConstructor>(exec, "[[nodeFilter.constructor]]");
 }
@@ -156,9 +156,9 @@
   acceptNode	DOMNodeFilter::AcceptNode	DontDelete|Function 0
 @end
 */
-DEFINE_PROTOTYPE("DOMNodeFilter",DOMNodeFilterProto)
+KJS_DEFINE_PROTOTYPE(DOMNodeFilterProto)
 IMPLEMENT_PROTOFUNC_DOM(DOMNodeFilterProtoFunc)
-IMPLEMENT_PROTOTYPE(DOMNodeFilterProto,DOMNodeFilterProtoFunc)
+KJS_IMPLEMENT_PROTOTYPE("DOMNodeFilter",DOMNodeFilterProto,DOMNodeFilterProtoFunc)
 
 DOMNodeFilter::DOMNodeFilter(ExecState *exec, DOM::NodeFilter nf)
   : DOMObject(DOMNodeFilterProto::self(exec)), nodeFilter(nf) {}
@@ -179,7 +179,7 @@
   return Undefined();
 }
 
-Value KJS::getDOMNodeFilter(ExecState *exec, DOM::NodeFilter nf)
+Value getDOMNodeFilter(ExecState *exec, DOM::NodeFilter nf)
 {
   return cacheDOMObject<DOM::NodeFilter, DOMNodeFilter>(exec, nf);
 }
@@ -205,9 +205,9 @@
   nextNode	DOMTreeWalker::NextNode		DontDelete|Function 0
 @end
 */
-DEFINE_PROTOTYPE("DOMTreeWalker",DOMTreeWalkerProto)
+KJS_DEFINE_PROTOTYPE(DOMTreeWalkerProto)
 IMPLEMENT_PROTOFUNC_DOM(DOMTreeWalkerProtoFunc)
-IMPLEMENT_PROTOTYPE(DOMTreeWalkerProto,DOMTreeWalkerProtoFunc)
+KJS_IMPLEMENT_PROTOTYPE("DOMTreeWalker", DOMTreeWalkerProto,DOMTreeWalkerProtoFunc)
 
 DOMTreeWalker::DOMTreeWalker(ExecState *exec, DOM::TreeWalker tw)
   : DOMObject(DOMTreeWalkerProto::self(exec)), treeWalker(tw) {}
@@ -275,12 +275,12 @@
   return Undefined();
 }
 
-Value KJS::getDOMTreeWalker(ExecState *exec, DOM::TreeWalker tw)
+Value getDOMTreeWalker(ExecState *exec, DOM::TreeWalker tw)
 {
   return cacheDOMObject<DOM::TreeWalker, DOMTreeWalker>(exec, tw);
 }
 
-DOM::NodeFilter KJS::toNodeFilter(const Value& val)
+DOM::NodeFilter toNodeFilter(const Value& val)
 {
   Object obj = Object::dynamicCast(val);
   if (!obj.isValid() || !obj.inherits(&DOMNodeFilter::info))
@@ -302,7 +302,7 @@
 
 short JSNodeFilter::acceptNode(const DOM::Node &n)
 {
-  KHTMLView *view = static_cast<DOM::DocumentImpl *>( n.handle()->docPtr()->document() )->view();
+  KHTMLView *view = static_cast<DOM::DocumentImpl *>( n.handle()->docPtr() )->view();
   if (!view)
       return DOM::NodeFilter::FILTER_REJECT;
 
@@ -323,3 +323,5 @@
 
   return DOM::NodeFilter::FILTER_REJECT;
 }
+
+} //namespace KJS
--- khtml/ecma/kjs_html.cpp
+++ khtml/ecma/kjs_html.cpp
@@ -62,11 +62,11 @@
 
 #include <kdebug.h>
 
-using namespace KJS;
+namespace KJS {
 
-DEFINE_PROTOTYPE("HTMLDocument",HTMLDocumentProto)
+KJS_DEFINE_PROTOTYPE_WITH_PROTOTYPE(HTMLDocumentProto, DOMDocumentProto)
 IMPLEMENT_PROTOFUNC_DOM(HTMLDocFunction)
-IMPLEMENT_PROTOTYPE_WITH_PARENT(HTMLDocumentProto,HTMLDocFunction,DOMDocumentProto)
+KJS_IMPLEMENT_PROTOTYPE("HTMLDocument", HTMLDocumentProto, HTMLDocFunction)
 
 IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLDocumentPseudoCtor, "HTMLDocument", HTMLDocumentProto)
 
@@ -478,9 +478,14 @@
 const ClassInfo KJS::HTMLElement::frameSet_info = { "HTMLFrameSetElement", &KJS::HTMLElement::info, &HTMLFrameSetElementTable, 0 };
 const ClassInfo KJS::HTMLElement::frame_info = { "HTMLFrameElement", &KJS::HTMLElement::info, &HTMLFrameElementTable, 0 };
 const ClassInfo KJS::HTMLElement::iFrame_info = { "HTMLIFrameElement", &KJS::HTMLElement::info, &HTMLIFrameElementTable, 0 };
-const ClassInfo KJS::HTMLElement::marquee_info = { "HTMLMarqueeElement", &KJS::HTMLElement::info, &HTMLMarqueeElementTable, 0 };
+const ClassInfo KJS::HTMLElement::marquee_info = { "HTMLMarqueeElement", &KJS::HTMLElement::info, 0, 0 };
 const ClassInfo KJS::HTMLElement::layer_info = { "HTMLLayerElement", &KJS::HTMLElement::info, &HTMLLayerElementTable, 0 };
 
+static Object prototypeForID(ExecState* exec, DOM::NodeImpl::Id id);
+
+KJS::HTMLElement::HTMLElement(ExecState *exec, const DOM::HTMLElement& e) :
+        DOMElement(prototypeForID(exec, e.elementId()), e) { }
+
 const ClassInfo* KJS::HTMLElement::classInfo() const
 {
   DOM::HTMLElement element = static_cast<DOM::HTMLElement>(node);
@@ -587,15 +592,12 @@
   case ID_COLGROUP:
     return &col_info;
   case ID_THEAD:
-    return &tablesection_info;
   case ID_TBODY:
-    return &tablesection_info;
   case ID_TFOOT:
     return &tablesection_info;
   case ID_TR:
     return &tr_info;
   case ID_TH:
-    return &tablecell_info;
   case ID_TD:
     return &tablecell_info;
   case ID_FRAMESET:
@@ -626,6 +628,8 @@
 # IE extension
   children	KJS::HTMLElement::ElementChildren  DontDelete|ReadOnly
   all           KJS::HTMLElement::ElementAll       DontDelete|ReadOnly
+@end
+@begin HTMLElementProtoTable 1
   scrollIntoView KJS::HTMLElement::ElementScrollIntoView DontDelete|Function 0
 @end
 @begin HTMLHtmlElementTable 1
@@ -690,6 +694,8 @@
   enctype	KJS::HTMLElement::FormEncType	DontDelete
   method	KJS::HTMLElement::FormMethod	DontDelete
   target	KJS::HTMLElement::FormTarget	DontDelete
+@end
+@begin HTMLFormElementProtoTable 2
   submit	KJS::HTMLElement::FormSubmit	DontDelete|Function 0
   reset		KJS::HTMLElement::FormReset	DontDelete|Function 0
 @end
@@ -706,6 +712,8 @@
   name		KJS::HTMLElement::SelectName	DontDelete
   size		KJS::HTMLElement::SelectSize	DontDelete
   tabIndex	KJS::HTMLElement::SelectTabIndex	DontDelete
+@end
+@begin HTMLSelectElementProtoTable 4
   add		KJS::HTMLElement::SelectAdd	DontDelete|Function 2
   remove	KJS::HTMLElement::SelectRemove	DontDelete|Function 1
   blur		KJS::HTMLElement::SelectBlur	DontDelete|Function 0
@@ -748,6 +756,8 @@
   value		KJS::HTMLElement::InputValue		DontDelete
   selectionStart KJS::HTMLElement::InputSelectionStart  DontDelete
   selectionEnd   KJS::HTMLElement::InputSelectionEnd    DontDelete
+@end
+@begin HTMLInputElementProtoTable 5
   blur		KJS::HTMLElement::InputBlur		DontDelete|Function 0
   focus		KJS::HTMLElement::InputFocus		DontDelete|Function 0
   select	KJS::HTMLElement::InputSelect		DontDelete|Function 0
@@ -769,6 +779,8 @@
   selectionStart KJS::HTMLElement::TextAreaSelectionStart DontDelete
   selectionEnd   KJS::HTMLElement::TextAreaSelectionEnd   DontDelete
   textLength     KJS::HTMLElement::TextAreaTextLength     DontDelete|ReadOnly
+@end
+@begin HTMLTextAreaElementProtoTable 4
   blur		KJS::HTMLElement::TextAreaBlur		DontDelete|Function 0
   focus		KJS::HTMLElement::TextAreaFocus		DontDelete|Function 0
   select	KJS::HTMLElement::TextAreaSelect	DontDelete|Function 0
@@ -782,6 +794,8 @@
   tabIndex	KJS::HTMLElement::ButtonTabIndex	DontDelete
   type		KJS::HTMLElement::ButtonType		DontDelete|ReadOnly
   value		KJS::HTMLElement::ButtonValue		DontDelete
+@end
+@begin HTMLButtonElementProtoTable 2
   blur		KJS::HTMLElement::ButtonBlur            DontDelete|Function 0
   focus		KJS::HTMLElement::ButtonFocus           DontDelete|Function 0
 @end
@@ -882,6 +896,8 @@
   target	KJS::HTMLElement::AnchorTarget		DontDelete
   text		KJS::HTMLElement::AnchorText		DontDelete|ReadOnly
   type		KJS::HTMLElement::AnchorType		DontDelete
+@end
+@begin HTMLAnchorElementProtoTable 3
   blur		KJS::HTMLElement::AnchorBlur		DontDelete|Function 0
   focus		KJS::HTMLElement::AnchorFocus		DontDelete|Function 0
   click		KJS::HTMLElement::AnchorClick		DontDelete|Function 0
@@ -988,6 +1004,8 @@
   rules		KJS::HTMLElement::TableRules		DontDelete
   summary	KJS::HTMLElement::TableSummary		DontDelete
   width		KJS::HTMLElement::TableWidth		DontDelete
+@end
+@begin HTMLTableElementProtoTable 8
   createTHead	KJS::HTMLElement::TableCreateTHead	DontDelete|Function 0
   deleteTHead	KJS::HTMLElement::TableDeleteTHead	DontDelete|Function 0
   createTFoot	KJS::HTMLElement::TableCreateTFoot	DontDelete|Function 0
@@ -1014,6 +1032,8 @@
   chOff		KJS::HTMLElement::TableSectionChOff		DontDelete
   vAlign	KJS::HTMLElement::TableSectionVAlign		DontDelete
   rows		KJS::HTMLElement::TableSectionRows		DontDelete|ReadOnly
+@end
+@begin HTMLTableSectionElementProtoTable 2
   insertRow	KJS::HTMLElement::TableSectionInsertRow		DontDelete|Function 1
   deleteRow	KJS::HTMLElement::TableSectionDeleteRow		DontDelete|Function 1
 @end
@@ -1026,6 +1046,8 @@
   ch		KJS::HTMLElement::TableRowCh			DontDelete
   chOff		KJS::HTMLElement::TableRowChOff			DontDelete
   vAlign	KJS::HTMLElement::TableRowVAlign		DontDelete
+@end
+@begin HTMLTableRowElementProtoTable 2
   insertCell	KJS::HTMLElement::TableRowInsertCell		DontDelete|Function 1
   deleteCell	KJS::HTMLElement::TableRowDeleteCell		DontDelete|Function 1
 @end
@@ -1090,7 +1112,7 @@
   width		  KJS::HTMLElement::IFrameWidth			DontDelete
 @end
 
-@begin HTMLMarqueeElementTable 2
+@begin HTMLMarqueeElementProtoTable 2
   start           KJS::HTMLElement::MarqueeStart		DontDelete|Function 0
   stop            KJS::HTMLElement::MarqueeStop                 DontDelete|Function 0
 @end
@@ -3074,6 +3096,313 @@
   }
 }
 
+//Prototype mess for this...
+KJS_DEFINE_PROTOTYPE_WITH_PROTOTYPE(HTMLElementProto, DOMElementProto)
+KJS_IMPLEMENT_PROTOTYPE("HTMLElement", HTMLElementProto, HTMLElementFunction)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLElementPseudoCtor, "HTMLElement", HTMLElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLHtmlElement", HTMLHtmlElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLHtmlElementPseudoCtor, "HTMLHtmlElement", HTMLHtmlElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLHeadElement", HTMLHeadElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLHeadElementPseudoCtor, "HTMLHeadElement", HTMLHeadElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLLinkElement", HTMLLinkElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLLinkElementPseudoCtor, "HTMLLinkElement", HTMLLinkElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLTitleElement", HTMLTitleElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLTitleElementPseudoCtor, "HTMLTitleElement", HTMLTitleElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLMetaElement", HTMLMetaElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLMetaElementPseudoCtor, "HTMLMetaElement", HTMLMetaElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLBaseElement", HTMLBaseElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLBaseElementPseudoCtor, "HTMLBaseElement", HTMLBaseElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLIsIndexElement", HTMLIsIndexElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLIsIndexElementPseudoCtor, "HTMLIsIndexElement", HTMLIsIndexElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLStyleElement", HTMLStyleElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLStyleElementPseudoCtor, "HTMLStyleElement", HTMLStyleElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLBodyElement", HTMLBodyElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLBodyElementPseudoCtor, "HTMLBodyElement", HTMLBodyElementProto)
+
+KJS_DEFINE_PROTOTYPE_WITH_PROTOTYPE(HTMLFormElementProto, HTMLElementProto)
+KJS_IMPLEMENT_PROTOTYPE("HTMLFormElement", HTMLFormElementProto, HTMLElementFunction)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLFormElementPseudoCtor, "HTMLFormElement", HTMLFormElementProto)
+
+KJS_DEFINE_PROTOTYPE_WITH_PROTOTYPE(HTMLSelectElementProto, HTMLElementProto)
+KJS_IMPLEMENT_PROTOTYPE("HTMLSelectElement", HTMLSelectElementProto, HTMLElementFunction)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLSelectElementPseudoCtor, "HTMLSelectElement", HTMLSelectElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLOptGroupElement", HTMLOptGroupElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLOptGroupElementPseudoCtor, "HTMLOptGroupElement", HTMLOptGroupElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLOptionElement", HTMLOptionElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLOptionElementPseudoCtor, "HTMLOptionElement", HTMLOptionElementProto)
+
+KJS_DEFINE_PROTOTYPE_WITH_PROTOTYPE(HTMLInputElementProto, HTMLElementProto)
+KJS_IMPLEMENT_PROTOTYPE("HTMLInputElement", HTMLInputElementProto, HTMLElementFunction)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLInputElementPseudoCtor, "HTMLInputElement", HTMLInputElementProto)
+
+KJS_DEFINE_PROTOTYPE_WITH_PROTOTYPE(HTMLTextAreaElementProto, HTMLElementProto)
+KJS_IMPLEMENT_PROTOTYPE("HTMLTextAreaElement", HTMLTextAreaElementProto, HTMLElementFunction)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLTextAreaElementPseudoCtor, "HTMLTextAreaElement", HTMLTextAreaElementProto)
+
+KJS_DEFINE_PROTOTYPE_WITH_PROTOTYPE(HTMLButtonElementProto, HTMLElementProto)
+KJS_IMPLEMENT_PROTOTYPE("HTMLButtonElement", HTMLButtonElementProto, HTMLElementFunction)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLButtonElementPseudoCtor, "HTMLButtonElement", HTMLButtonElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLLabelElement", HTMLLabelElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLLabelElementPseudoCtor, "HTMLLabelElement", HTMLLabelElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLFieldSetElement", HTMLFieldSetElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLFieldSetElementPseudoCtor, "HTMLFieldSetElement", HTMLFieldSetElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLLegendElement", HTMLLegendElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLLegendElementPseudoCtor, "HTMLLegendElement", HTMLLegendElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLUListElement", HTMLUListElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLUListElementPseudoCtor, "HTMLUListElement", HTMLUListElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLOListElement", HTMLOListElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLOListElementPseudoCtor, "HTMLOListElement", HTMLOListElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLDListElement", HTMLDListElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLDListElementPseudoCtor, "HTMLDListElement", HTMLDListElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLDirectoryElement", HTMLDirectoryElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLDirectoryElementPseudoCtor, "HTMLDirectoryElement", HTMLDirectoryElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLMenuElement", HTMLMenuElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLMenuElementPseudoCtor, "HTMLMenuElement", HTMLMenuElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLLIElement", HTMLLIElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLLIElementPseudoCtor, "HTMLLIElement", HTMLLIElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLDivElement", HTMLDivElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLDivElementPseudoCtor, "HTMLDivElement", HTMLDivElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLParagraphElement", HTMLParagraphElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLParagraphElementPseudoCtor, "HTMLParagraphElement", HTMLParagraphElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLHeadingElement", HTMLHeadingElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLHeadingElementPseudoCtor, "HTMLHeadingElement", HTMLHeadingElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLBlockQuoteElement", HTMLBlockQuoteElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLBlockQuoteElementPseudoCtor, "HTMLBlockQuoteElement", HTMLBlockQuoteElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLQuoteElement", HTMLQuoteElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLQuoteElementPseudoCtor, "HTMLQuoteElement", HTMLQuoteElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLPreElement", HTMLPreElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLPreElementPseudoCtor, "HTMLPreElement", HTMLPreElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLBRElement", HTMLBRElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLBRElementPseudoCtor, "HTMLBRElement", HTMLBRElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLBaseFontElement", HTMLBaseFontElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLBaseFontElementPseudoCtor, "HTMLBaseFontElement", HTMLBaseFontElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLFontElement", HTMLFontElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLFontElementPseudoCtor, "HTMLFontElement", HTMLFontElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLHRElement", HTMLHRElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLHRElementPseudoCtor, "HTMLHRElement", HTMLHRElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLModElement", HTMLModElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLModElementPseudoCtor, "HTMLModElement", HTMLModElementProto)
+
+KJS_DEFINE_PROTOTYPE_WITH_PROTOTYPE(HTMLAnchorElementProto, HTMLElementProto)
+KJS_IMPLEMENT_PROTOTYPE("HTMLAnchorElement", HTMLAnchorElementProto, HTMLElementFunction)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLAnchorElementPseudoCtor, "HTMLAnchorElement", HTMLAnchorElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLImageElement", HTMLImageElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLImageElementPseudoCtor, "HTMLImageElement", HTMLImageElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLObjectElement", HTMLObjectElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLObjectElementPseudoCtor, "HTMLObjectElement", HTMLObjectElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLParamElement", HTMLParamElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLParamElementPseudoCtor, "HTMLParamElement", HTMLParamElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLAppletElement", HTMLAppletElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLAppletElementPseudoCtor, "HTMLAppletElement", HTMLAppletElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLMapElement", HTMLMapElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLMapElementPseudoCtor, "HTMLMapElement", HTMLMapElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLAreaElement", HTMLAreaElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLAreaElementPseudoCtor, "HTMLAreaElement", HTMLAreaElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLScriptElement", HTMLScriptElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLScriptElementPseudoCtor, "HTMLScriptElement", HTMLScriptElementProto)
+
+KJS_DEFINE_PROTOTYPE_WITH_PROTOTYPE(HTMLTableElementProto, HTMLElementProto)
+KJS_IMPLEMENT_PROTOTYPE("HTMLTableElement", HTMLTableElementProto, HTMLElementFunction)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLTableElementPseudoCtor, "HTMLTableElement", HTMLTableElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLTableCaptionElement", HTMLTableCaptionElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLTableCaptionElementPseudoCtor, "HTMLTableCaptionElement", HTMLTableCaptionElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLTableColElement", HTMLTableColElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLTableColElementPseudoCtor, "HTMLTableColElement", HTMLTableColElementProto)
+
+KJS_DEFINE_PROTOTYPE_WITH_PROTOTYPE(HTMLTableSectionElementProto, HTMLElementProto)
+KJS_IMPLEMENT_PROTOTYPE("HTMLTableSectionElement", HTMLTableSectionElementProto, HTMLElementFunction)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLTableSectionElementPseudoCtor, "HTMLTableSectionElement", HTMLTableSectionElementProto)
+
+KJS_DEFINE_PROTOTYPE_WITH_PROTOTYPE(HTMLTableRowElementProto, HTMLElementProto)
+KJS_IMPLEMENT_PROTOTYPE("HTMLTableRowElement", HTMLTableRowElementProto, HTMLElementFunction)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLTableRowElementPseudoCtor, "HTMLTableRowElement", HTMLTableRowElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLTableCellElement", HTMLTableCellElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLTableCellElementPseudoCtor, "HTMLTableCellElement", HTMLTableCellElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLFrameSetElement", HTMLFrameSetElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLFrameSetElementPseudoCtor, "HTMLFrameSetElement", HTMLFrameSetElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLLayerElement", HTMLLayerElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLLayerElementPseudoCtor, "HTMLLayerElement", HTMLLayerElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLFrameElement", HTMLFrameElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLFrameElementPseudoCtor, "HTMLFrameElement", HTMLFrameElementProto)
+
+KJS_EMPTY_PROTOTYPE_WITH_PROTOTYPE("HTMLIFrameElement", HTMLIFrameElementProto, HTMLElementProto)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLIFrameElementPseudoCtor, "HTMLIFrameElement", HTMLIFrameElementProto)
+
+KJS_DEFINE_PROTOTYPE_WITH_PROTOTYPE(HTMLMarqueeElementProto, HTMLElementProto)
+KJS_IMPLEMENT_PROTOTYPE("HTMLMarqueeElement", HTMLMarqueeElementProto, HTMLElementFunction)
+IMPLEMENT_PSEUDO_CONSTRUCTOR(HTMLMarqueeElementPseudoCtor, "HTMLMarqueeElement", HTMLMarqueeElementProto)
+
+static Object prototypeForID(ExecState* exec, DOM::NodeImpl::Id id) {
+  switch (id) {
+  case ID_HTML:
+    return HTMLHtmlElementProto::self(exec);
+  case ID_HEAD:
+    return HTMLHeadElementProto::self(exec);
+  case ID_LINK:
+    return HTMLLinkElementProto::self(exec);
+  case ID_TITLE:
+    return HTMLTitleElementProto::self(exec);
+  case ID_META:
+    return HTMLMetaElementProto::self(exec);
+  case ID_BASE:
+    return HTMLBaseElementProto::self(exec);
+  case ID_ISINDEX:
+    return HTMLIsIndexElementProto::self(exec);
+  case ID_STYLE:
+    return HTMLStyleElementProto::self(exec);
+  case ID_BODY:
+    return HTMLBodyElementProto::self(exec);
+  case ID_FORM:
+    return HTMLFormElementProto::self(exec);
+  case ID_SELECT:
+    return HTMLSelectElementProto::self(exec);
+  case ID_OPTGROUP:
+    return HTMLOptGroupElementProto::self(exec);
+  case ID_OPTION:
+    return HTMLOptionElementProto::self(exec);
+  case ID_INPUT:
+    return HTMLInputElementProto::self(exec);
+  case ID_TEXTAREA:
+    return HTMLTextAreaElementProto::self(exec);
+  case ID_BUTTON:
+    return HTMLButtonElementProto::self(exec);
+  case ID_LABEL:
+    return HTMLLabelElementProto::self(exec);
+  case ID_FIELDSET:
+    return HTMLFieldSetElementProto::self(exec);
+  case ID_LEGEND:
+    return HTMLLegendElementProto::self(exec);
+  case ID_UL:
+    return HTMLUListElementProto::self(exec);
+  case ID_OL:
+    return HTMLOListElementProto::self(exec);
+  case ID_DL:
+    return HTMLDListElementProto::self(exec);
+  case ID_DIR:
+    return HTMLDirectoryElementProto::self(exec);
+  case ID_MENU:
+    return HTMLMenuElementProto::self(exec);
+  case ID_LI:
+    return HTMLLIElementProto::self(exec);
+  case ID_DIV:
+    return HTMLDivElementProto::self(exec);
+  case ID_P:
+    return HTMLParagraphElementProto::self(exec);
+  case ID_H1:
+  case ID_H2:
+  case ID_H3:
+  case ID_H4:
+  case ID_H5:
+  case ID_H6:
+    return HTMLHeadingElementProto::self(exec);
+  case ID_BLOCKQUOTE:
+    return HTMLBlockQuoteElementProto::self(exec);
+  case ID_Q:
+    return HTMLQuoteElementProto::self(exec);
+  case ID_PRE:
+    return HTMLPreElementProto::self(exec);
+  case ID_BR:
+    return HTMLBRElementProto::self(exec);
+  case ID_BASEFONT:
+    return HTMLBaseFontElementProto::self(exec);
+  case ID_FONT:
+    return HTMLFontElementProto::self(exec);
+  case ID_HR:
+    return HTMLHRElementProto::self(exec);
+  case ID_INS:
+  case ID_DEL:
+    return HTMLModElementProto::self(exec);
+  case ID_A:
+    return HTMLAnchorElementProto::self(exec);
+  case ID_IMG:
+    return HTMLImageElementProto::self(exec);
+  case ID_OBJECT:
+    return HTMLObjectElementProto::self(exec);
+  case ID_PARAM:
+    return HTMLParamElementProto::self(exec);
+  case ID_APPLET:
+    return HTMLAppletElementProto::self(exec);
+  case ID_MAP:
+    return HTMLMapElementProto::self(exec);
+  case ID_AREA:
+    return HTMLAreaElementProto::self(exec);
+  case ID_SCRIPT:
+    return HTMLScriptElementProto::self(exec);
+  case ID_TABLE:
+    return HTMLTableElementProto::self(exec);
+  case ID_CAPTION:
+    return HTMLTableCaptionElementProto::self(exec);
+  case ID_COL:
+  case ID_COLGROUP:
+    return HTMLTableColElementProto::self(exec);
+  case ID_THEAD:
+  case ID_TBODY:
+  case ID_TFOOT:
+    return HTMLTableSectionElementProto::self(exec);
+  case ID_TR:
+    return HTMLTableRowElementProto::self(exec);
+  case ID_TD:
+  case ID_TH:
+    return HTMLTableCellElementProto::self(exec);
+  case ID_FRAMESET:
+    return HTMLFrameSetElementProto::self(exec);
+  case ID_LAYER:
+    return HTMLLayerElementProto::self(exec);
+  case ID_FRAME:
+    return HTMLFrameElementProto::self(exec);
+  case ID_IFRAME:
+    return HTMLIFrameElementProto::self(exec);
+  case ID_MARQUEE:
+    return HTMLMarqueeElementProto::self(exec);
+  default:
+    return HTMLElementProto::self(exec);
+  }
+}
+
 // -------------------------------------------------------------------------
 /* Source for HTMLCollectionProtoTable.
 @begin HTMLCollectionProtoTable 3
@@ -3082,9 +3411,9 @@
   tags		HTMLCollection::Tags		DontDelete|Function 1
 @end
 */
-DEFINE_PROTOTYPE("HTMLCollection", HTMLCollectionProto)
+KJS_DEFINE_PROTOTYPE(HTMLCollectionProto)
 IMPLEMENT_PROTOFUNC_DOM(HTMLCollectionProtoFunc)
-IMPLEMENT_PROTOTYPE(HTMLCollectionProto,HTMLCollectionProtoFunc)
+KJS_IMPLEMENT_PROTOTYPE("HTMLCollection", HTMLCollectionProto,HTMLCollectionProtoFunc)
 
 const ClassInfo KJS::HTMLCollection::info = { "HTMLCollection", 0, 0, 0 };
 
@@ -3340,9 +3669,9 @@
   add		HTMLSelectCollection::Add		DontDelete|Function 2
 @end
 */
-DEFINE_PROTOTYPE("HTMLOptionsCollection", HTMLSelectCollectionProto)
+KJS_DEFINE_PROTOTYPE_WITH_PROTOTYPE(HTMLSelectCollectionProto, HTMLCollectionProto)
 IMPLEMENT_PROTOFUNC_DOM(HTMLSelectCollectionProtoFunc)
-IMPLEMENT_PROTOTYPE_WITH_PARENT(HTMLSelectCollectionProto,HTMLSelectCollectionProtoFunc,HTMLCollectionProto)
+KJS_IMPLEMENT_PROTOTYPE("HTMLOptionsCollection",  HTMLSelectCollectionProto, HTMLSelectCollectionProtoFunc)
 
 const ClassInfo KJS::HTMLSelectCollection::info = { "HTMLOptionsCollection", &HTMLCollection::info, 0, 0 };
 
@@ -3561,7 +3890,7 @@
   return Object::dynamicCast(getDOMNode(exec,image));
 }
 
-Value KJS::getHTMLCollection(ExecState *exec, const DOM::HTMLCollection& c, bool hide)
+Value getHTMLCollection(ExecState *exec, const DOM::HTMLCollection& c, bool hide)
 {
   Value coll = cacheDOMObject<DOM::HTMLCollection, KJS::HTMLCollection>(exec, c);
   if (hide) {
@@ -3571,7 +3900,7 @@
   return coll;
 }
 
-Value KJS::getSelectHTMLCollection(ExecState *exec, const DOM::HTMLCollection& c, const DOM::HTMLSelectElement& e)
+Value getSelectHTMLCollection(ExecState *exec, const DOM::HTMLCollection& c, const DOM::HTMLSelectElement& e)
 {
   DOMObject *ret;
   if (c.isNull())
@@ -3585,3 +3914,5 @@
     return Value(ret);
   }
 }
+
+} //namespace KJS
--- khtml/ecma/kjs_events.cpp
+++ khtml/ecma/kjs_events.cpp
@@ -34,9 +34,10 @@
 
 #include <kdebug.h>
 
-using namespace KJS;
 using namespace DOM;
 
+namespace KJS {
+
 // -------------------------------------------------------------------------
 
 JSEventListener::JSEventListener(Object _listener, ObjectImp *_compareListenerImp, const Object &_win, bool _html)
@@ -243,9 +244,9 @@
   initEvent		DOMEvent::InitEvent		DontDelete|Function 3
 @end
 */
-DEFINE_PROTOTYPE("DOMEvent", DOMEventProto)
+KJS_DEFINE_PROTOTYPE(DOMEventProto)
 IMPLEMENT_PROTOFUNC_DOM(DOMEventProtoFunc)
-IMPLEMENT_PROTOTYPE(DOMEventProto, DOMEventProtoFunc)
+KJS_IMPLEMENT_PROTOTYPE("DOMEvent", DOMEventProto, DOMEventProtoFunc)
 
 DOMEvent::DOMEvent(ExecState *exec, DOM::Event e)
   : DOMObject(DOMEventProto::self(exec)), event(e) { }
@@ -344,7 +345,7 @@
   return Undefined();
 }
 
-Value KJS::getDOMEvent(ExecState *exec, DOM::Event e)
+Value getDOMEvent(ExecState *exec, DOM::Event e)
 {
   DOM::EventImpl *ei = e.handle();
   if (!ei)
@@ -371,7 +372,7 @@
   return Value(ret);
 }
 
-DOM::Event KJS::toEvent(const Value& val)
+DOM::Event toEvent(const Value& val)
 {
   Object obj = Object::dynamicCast(val);
   if (!obj.isValid() || !obj.inherits(&DOMEvent::info))
@@ -406,7 +407,8 @@
   CHANGE        32768               DontDelete|ReadOnly
 @end
 */
-CREATE_CONSTANT_TABLE(EventConstants, "EventConstants")
+DEFINE_CONSTANT_TABLE(EventConstants)
+IMPLEMENT_CONSTANT_TABLE(EventConstants, "EventConstants")
 
 IMPLEMENT_PSEUDO_CONSTRUCTOR_WITH_PARENT(EventConstructor, "EventConstructor", DOMEventProto, EventConstants)
 // -------------------------------------------------------------------------
@@ -434,7 +436,7 @@
   return Number(token);
 }
 
-Value KJS::getEventExceptionConstructor(ExecState *exec)
+Value getEventExceptionConstructor(ExecState *exec)
 {
   return cacheGlobalObject<EventExceptionConstructor>(exec, "[[eventException.constructor]]");
 }
@@ -458,9 +460,9 @@
   initUIEvent	DOMUIEvent::InitUIEvent	DontDelete|Function 5
 @end
 */
-DEFINE_PROTOTYPE("DOMUIEvent",DOMUIEventProto)
+KJS_DEFINE_PROTOTYPE_WITH_PROTOTYPE(DOMUIEventProto, DOMEventProto)
 IMPLEMENT_PROTOFUNC_DOM(DOMUIEventProtoFunc)
-IMPLEMENT_PROTOTYPE_WITH_PARENT(DOMUIEventProto,DOMUIEventProtoFunc,DOMEventProto)
+KJS_IMPLEMENT_PROTOTYPE("DOMUIEvent", DOMUIEventProto, DOMUIEventProtoFunc)
 
 DOMUIEvent::DOMUIEvent(ExecState *exec, DOM::UIEvent ue) :
   DOMEvent(DOMUIEventProto::self(exec), ue) {}
@@ -556,9 +558,9 @@
   initMouseEvent	DOMMouseEvent::InitMouseEvent	DontDelete|Function 15
 @end
 */
-DEFINE_PROTOTYPE("DOMMouseEvent",DOMMouseEventProto)
+KJS_DEFINE_PROTOTYPE_WITH_PROTOTYPE(DOMMouseEventProto, DOMUIEventProto)
 IMPLEMENT_PROTOFUNC_DOM(DOMMouseEventProtoFunc)
-IMPLEMENT_PROTOTYPE_WITH_PARENT(DOMMouseEventProto,DOMMouseEventProtoFunc,DOMUIEventProto)
+KJS_IMPLEMENT_PROTOTYPE("DOMMouseEvent", DOMMouseEventProto, DOMMouseEventProtoFunc)
 
 DOMMouseEvent::DOMMouseEvent(ExecState *exec, DOM::MouseEvent me) :
   DOMUIEvent(DOMMouseEventProto::self(exec), me) {}
@@ -602,7 +604,7 @@
     if ( rend ) {
       int xPos, yPos;
       if ( rend->absolutePosition( xPos, yPos ) ) {
-        kdDebug() << "DOMMouseEvent::getValueProperty rend=" << rend << "  xPos=" << xPos << "  yPos=" << yPos << endl;
+        //kdDebug() << "DOMMouseEvent::getValueProperty rend=" << rend << "  xPos=" << xPos << "  yPos=" << yPos << endl;
         x -= xPos;
         y -= yPos;
       }
@@ -744,9 +746,9 @@
   # Missing: initTextEventNS
 @end
 */
-DEFINE_PROTOTYPE("DOMTextEvent",DOMTextEventProto)
+KJS_DEFINE_PROTOTYPE_WITH_PROTOTYPE(DOMTextEventProto, DOMUIEventProto) //Note: no proto in KeyBase
 IMPLEMENT_PROTOFUNC_DOM(DOMTextEventProtoFunc)
-IMPLEMENT_PROTOTYPE_WITH_PARENT(DOMTextEventProto,DOMTextEventProtoFunc,DOMUIEventProto) //Note: no proto in KeyBase
+KJS_IMPLEMENT_PROTOTYPE("DOMTextEvent", DOMTextEventProto, DOMTextEventProtoFunc)
 
 DOMTextEvent::DOMTextEvent(ExecState *exec, DOM::TextEvent ke) :
   DOMKeyEventBase(DOMTextEventProto::self(exec), ke) {}
@@ -804,9 +806,9 @@
   getModifierState      DOMKeyboardEvent::GetModifierState      DontDelete|Function 1
 @end
 */
-DEFINE_PROTOTYPE("DOMKeyboardEvent",DOMKeyboardEventProto)
+KJS_DEFINE_PROTOTYPE_WITH_PROTOTYPE(DOMKeyboardEventProto, DOMUIEventProto) //Note: no proto in KeyBase
 IMPLEMENT_PROTOFUNC_DOM(DOMKeyboardEventProtoFunc)
-IMPLEMENT_PROTOTYPE_WITH_PARENT(DOMKeyboardEventProto,DOMKeyboardEventProtoFunc,DOMUIEventProto) //Note: no proto in KeyBase
+KJS_IMPLEMENT_PROTOTYPE("DOMKeyboardEvent", DOMKeyboardEventProto, DOMKeyboardEventProtoFunc)
 
 DOMKeyboardEvent::DOMKeyboardEvent(ExecState *exec, DOM::TextEvent ke) :
   DOMKeyEventBase(DOMKeyboardEventProto::self(exec), ke) {}
@@ -882,7 +884,7 @@
   return Number(token);
 }
 
-Value KJS::getKeyboardEventConstructor(ExecState *exec)
+Value getKeyboardEventConstructor(ExecState *exec)
 {
   return cacheGlobalObject<KeyboardEventConstructor>(exec, "[[keyboardEvent.constructor]]");
 }
@@ -913,7 +915,7 @@
   return Number(token);
 }
 
-Value KJS::getMutationEventConstructor(ExecState *exec)
+Value getMutationEventConstructor(ExecState *exec)
 {
   return cacheGlobalObject<MutationEventConstructor>(exec, "[[mutationEvent.constructor]]");
 }
@@ -933,9 +935,9 @@
   initMutationEvent	DOMMutationEvent::InitMutationEvent	DontDelete|Function 8
 @end
 */
-DEFINE_PROTOTYPE("DOMMutationEvent",DOMMutationEventProto)
+KJS_DEFINE_PROTOTYPE_WITH_PROTOTYPE(DOMMutationEventProto, DOMEventProto)
 IMPLEMENT_PROTOFUNC_DOM(DOMMutationEventProtoFunc)
-IMPLEMENT_PROTOTYPE_WITH_PARENT(DOMMutationEventProto,DOMMutationEventProtoFunc,DOMEventProto)
+KJS_IMPLEMENT_PROTOTYPE("DOMMutationEvent", DOMMutationEventProto, DOMMutationEventProtoFunc)
 
 DOMMutationEvent::DOMMutationEvent(ExecState *exec, DOM::MutationEvent me) :
   DOMEvent(DOMMutationEventProto::self(exec), me) {}
@@ -986,3 +988,5 @@
   }
   return Undefined();
 }
+
+} //namespace KJS
--- khtml/ecma/kjs_window.cpp
+++ khtml/ecma/kjs_window.cpp
@@ -130,7 +130,7 @@
 #include "rendering/render_replaced.h"
 
 ////////////////////// Screen Object ////////////////////////
-
+namespace KJS {
 // table for screen object
 /*
 @begin ScreenTable 7
@@ -220,7 +220,7 @@
 const ClassInfo Window::info = { "Window", &DOMAbstractView::info, &WindowTable, 0 };
 
 /*
-@begin WindowTable 89
+@begin WindowTable 162
   atob		Window::AToB		DontDelete|Function 1
   btoa		Window::BToA		DontDelete|Function 1
   closed	Window::Closed		DontDelete|ReadOnly
@@ -340,7 +340,61 @@
   #this one is an alias since we don't have a separate XMLDocument
   XMLDocument Window::DocumentCtor DontDelete
   HTMLElement  Window::HTMLElementCtor DontDelete
-  HTMLDocument Window::HTMLDocumentCtor DontDelete
+  HTMLDocument  Window::HTMLDocumentCtor DontDelete
+  HTMLHtmlElement Window::HTMLHtmlElementCtor DontDelete
+  HTMLHeadElement Window::HTMLHeadElementCtor DontDelete
+  HTMLLinkElement Window::HTMLLinkElementCtor DontDelete
+  HTMLTitleElement Window::HTMLTitleElementCtor DontDelete
+  HTMLMetaElement Window::HTMLMetaElementCtor DontDelete
+  HTMLBaseElement Window::HTMLBaseElementCtor DontDelete
+  HTMLIsIndexElement Window::HTMLIsIndexElementCtor DontDelete
+  HTMLStyleElement Window::HTMLStyleElementCtor DontDelete
+  HTMLBodyElement Window::HTMLBodyElementCtor DontDelete
+  HTMLFormElement Window::HTMLFormElementCtor DontDelete
+  HTMLSelectElement Window::HTMLSelectElementCtor DontDelete
+  HTMLOptGroupElement Window::HTMLOptGroupElementCtor DontDelete
+  HTMLOptionElement Window::HTMLOptionElementCtor DontDelete
+  HTMLInputElement Window::HTMLInputElementCtor DontDelete
+  HTMLTextAreaElement Window::HTMLTextAreaElementCtor DontDelete
+  HTMLButtonElement Window::HTMLButtonElementCtor DontDelete
+  HTMLLabelElement Window::HTMLLabelElementCtor DontDelete
+  HTMLFieldSetElement Window::HTMLFieldSetElementCtor DontDelete
+  HTMLLegendElement Window::HTMLLegendElementCtor DontDelete
+  HTMLUListElement Window::HTMLUListElementCtor DontDelete
+  HTMLOListElement Window::HTMLOListElementCtor DontDelete
+  HTMLDListElement Window::HTMLDListElementCtor DontDelete
+  HTMLDirectoryElement Window::HTMLDirectoryElementCtor DontDelete
+  HTMLMenuElement Window::HTMLMenuElementCtor DontDelete
+  HTMLLIElement Window::HTMLLIElementCtor DontDelete
+  HTMLDivElement Window::HTMLDivElementCtor DontDelete
+  HTMLParagraphElement Window::HTMLParagraphElementCtor DontDelete
+  HTMLHeadingElement Window::HTMLHeadingElementCtor DontDelete
+  HTMLBlockQuoteElement Window::HTMLBlockQuoteElementCtor DontDelete
+  HTMLQuoteElement Window::HTMLQuoteElementCtor DontDelete
+  HTMLPreElement Window::HTMLPreElementCtor DontDelete
+  HTMLBRElement Window::HTMLBRElementCtor DontDelete
+  HTMLBaseFontElement Window::HTMLBaseFontElementCtor DontDelete
+  HTMLFontElement Window::HTMLFontElementCtor DontDelete
+  HTMLHRElement Window::HTMLHRElementCtor DontDelete
+  HTMLModElement Window::HTMLModElementCtor DontDelete
+  HTMLAnchorElement Window::HTMLAnchorElementCtor DontDelete
+  HTMLImageElement Window::HTMLImageElementCtor DontDelete
+  HTMLObjectElement Window::HTMLObjectElementCtor DontDelete
+  HTMLParamElement Window::HTMLParamElementCtor DontDelete
+  HTMLAppletElement Window::HTMLAppletElementCtor DontDelete
+  HTMLMapElement Window::HTMLMapElementCtor DontDelete
+  HTMLAreaElement Window::HTMLAreaElementCtor DontDelete
+  HTMLScriptElement Window::HTMLScriptElementCtor DontDelete
+  HTMLTableElement Window::HTMLTableElementCtor DontDelete
+  HTMLTableCaptionElement Window::HTMLTableCaptionElementCtor DontDelete
+  HTMLTableColElement Window::HTMLTableColElementCtor DontDelete
+  HTMLTableSectionElement Window::HTMLTableSectionElementCtor DontDelete
+  HTMLTableRowElement Window::HTMLTableRowElementCtor DontDelete
+  HTMLTableCellElement Window::HTMLTableCellElementCtor DontDelete
+  HTMLFrameSetElement Window::HTMLFrameSetElementCtor DontDelete
+  HTMLLayerElement Window::HTMLLayerElementCtor DontDelete
+  HTMLFrameElement Window::HTMLFrameElementCtor DontDelete
+  HTMLIFrameElement Window::HTMLIFrameElementCtor DontDelete
   CSSStyleDeclaration Window::CSSStyleDeclarationCtor DontDelete
 @end
 */
@@ -610,8 +664,117 @@
     case CSSRule:
       return getCSSRuleConstructor(exec);
     case ElementCtor:
-    case HTMLElementCtor: //Hack -- we don't have a separate prototype here
       return ElementPseudoCtor::self(exec);
+    case HTMLElementCtor:
+      return HTMLElementPseudoCtor::self(exec);
+    case HTMLHtmlElementCtor:
+      return HTMLHtmlElementPseudoCtor::self(exec);
+    case HTMLHeadElementCtor:
+      return HTMLHeadElementPseudoCtor::self(exec);
+    case HTMLLinkElementCtor:
+      return HTMLLinkElementPseudoCtor::self(exec);
+    case HTMLTitleElementCtor:
+      return HTMLTitleElementPseudoCtor::self(exec);
+    case HTMLMetaElementCtor:
+      return HTMLMetaElementPseudoCtor::self(exec);
+    case HTMLBaseElementCtor:
+      return HTMLBaseElementPseudoCtor::self(exec);
+    case HTMLIsIndexElementCtor:
+      return HTMLIsIndexElementPseudoCtor::self(exec);
+    case HTMLStyleElementCtor:
+      return HTMLStyleElementPseudoCtor::self(exec);
+    case HTMLBodyElementCtor:
+      return HTMLBodyElementPseudoCtor::self(exec);
+    case HTMLFormElementCtor:
+      return HTMLFormElementPseudoCtor::self(exec);
+    case HTMLSelectElementCtor:
+      return HTMLSelectElementPseudoCtor::self(exec);
+    case HTMLOptGroupElementCtor:
+      return HTMLOptGroupElementPseudoCtor::self(exec);
+    case HTMLOptionElementCtor:
+      return HTMLOptionElementPseudoCtor::self(exec);
+    case HTMLInputElementCtor:
+      return HTMLInputElementPseudoCtor::self(exec);
+    case HTMLTextAreaElementCtor:
+      return HTMLTextAreaElementPseudoCtor::self(exec);
+    case HTMLButtonElementCtor:
+      return HTMLButtonElementPseudoCtor::self(exec);
+    case HTMLLabelElementCtor:
+      return HTMLLabelElementPseudoCtor::self(exec);
+    case HTMLFieldSetElementCtor:
+      return HTMLFieldSetElementPseudoCtor::self(exec);
+    case HTMLLegendElementCtor:
+      return HTMLLegendElementPseudoCtor::self(exec);
+    case HTMLUListElementCtor:
+      return HTMLUListElementPseudoCtor::self(exec);
+    case HTMLOListElementCtor:
+      return HTMLOListElementPseudoCtor::self(exec);
+    case HTMLDListElementCtor:
+      return HTMLDListElementPseudoCtor::self(exec);
+    case HTMLDirectoryElementCtor:
+      return HTMLDirectoryElementPseudoCtor::self(exec);
+    case HTMLMenuElementCtor:
+      return HTMLMenuElementPseudoCtor::self(exec);
+    case HTMLLIElementCtor:
+      return HTMLLIElementPseudoCtor::self(exec);
+    case HTMLDivElementCtor:
+      return HTMLDivElementPseudoCtor::self(exec);
+    case HTMLParagraphElementCtor:
+      return HTMLParagraphElementPseudoCtor::self(exec);
+    case HTMLHeadingElementCtor:
+      return HTMLHeadingElementPseudoCtor::self(exec);
+    case HTMLBlockQuoteElementCtor:
+      return HTMLBlockQuoteElementPseudoCtor::self(exec);
+    case HTMLQuoteElementCtor:
+      return HTMLQuoteElementPseudoCtor::self(exec);
+    case HTMLPreElementCtor:
+      return HTMLPreElementPseudoCtor::self(exec);
+    case HTMLBRElementCtor:
+      return HTMLBRElementPseudoCtor::self(exec);
+    case HTMLBaseFontElementCtor:
+      return HTMLBaseFontElementPseudoCtor::self(exec);
+    case HTMLFontElementCtor:
+      return HTMLFontElementPseudoCtor::self(exec);
+    case HTMLHRElementCtor:
+      return HTMLHRElementPseudoCtor::self(exec);
+    case HTMLModElementCtor:
+      return HTMLModElementPseudoCtor::self(exec);
+    case HTMLAnchorElementCtor:
+      return HTMLAnchorElementPseudoCtor::self(exec);
+    case HTMLImageElementCtor:
+      return HTMLImageElementPseudoCtor::self(exec);
+    case HTMLObjectElementCtor:
+      return HTMLObjectElementPseudoCtor::self(exec);
+    case HTMLParamElementCtor:
+      return HTMLParamElementPseudoCtor::self(exec);
+    case HTMLAppletElementCtor:
+      return HTMLAppletElementPseudoCtor::self(exec);
+    case HTMLMapElementCtor:
+      return HTMLMapElementPseudoCtor::self(exec);
+    case HTMLAreaElementCtor:
+      return HTMLAreaElementPseudoCtor::self(exec);
+    case HTMLScriptElementCtor:
+      return HTMLScriptElementPseudoCtor::self(exec);
+    case HTMLTableElementCtor:
+      return HTMLTableElementPseudoCtor::self(exec);
+    case HTMLTableCaptionElementCtor:
+      return HTMLTableCaptionElementPseudoCtor::self(exec);
+    case HTMLTableColElementCtor:
+      return HTMLTableColElementPseudoCtor::self(exec);
+    case HTMLTableSectionElementCtor:
+      return HTMLTableSectionElementPseudoCtor::self(exec);
+    case HTMLTableRowElementCtor:
+      return HTMLTableRowElementPseudoCtor::self(exec);
+    case HTMLTableCellElementCtor:
+      return HTMLTableCellElementPseudoCtor::self(exec);
+    case HTMLFrameSetElementCtor:
+      return HTMLFrameSetElementPseudoCtor::self(exec);
+    case HTMLLayerElementCtor:
+      return HTMLLayerElementPseudoCtor::self(exec);
+    case HTMLFrameElementCtor:
+      return HTMLFrameElementPseudoCtor::self(exec);
+    case HTMLIFrameElementCtor:
+      return HTMLIFrameElementPseudoCtor::self(exec);
     case DocumentCtor:
       return DocumentPseudoCtor::self(exec);
     case HTMLDocumentCtor:
@@ -2734,5 +2897,6 @@
 
 #endif
 /////////////////////////////////////////////////////////////////////////////
+} //namespace KJS
 
 #include "kjs_window.moc"
--- khtml/ecma/kjs_dom.h
+++ khtml/ecma/kjs_dom.h
@@ -29,7 +29,6 @@
 
 #include "ecma/kjs_binding.h"
 
-PUBLIC_DEFINE_PROTOTYPE("DOMDocument", DOMDocumentProto)
 
 namespace KJS {
 
@@ -74,6 +73,10 @@
     DOM::Node node;
   };
 
+  DEFINE_CONSTANT_TABLE(DOMNodeConstants)
+  KJS_DEFINE_PROTOTYPE_WITH_PROTOTYPE(DOMNodeProto, DOMNodeConstants)
+  DEFINE_PSEUDO_CONSTRUCTOR(NodeConstructor)
+
   class DOMNodeList : public DOMObject {
   public:
     DOMNodeList(ExecState *, const DOM::NodeList& l);
@@ -118,6 +121,8 @@
            CreateEvent, StyleSheets, GetOverrideStyle, Abort, Load, LoadXML,
            PreferredStylesheetSet, SelectedStylesheetSet, ReadyState, Async };
   };
+  
+  KJS_DEFINE_PROTOTYPE_WITH_PROTOTYPE(DOMDocumentProto, DOMNodeProto)
 
   DEFINE_PSEUDO_CONSTRUCTOR(DocumentPseudoCtor)
 
@@ -149,7 +154,8 @@
            GetAttributeNS, SetAttributeNS, RemoveAttributeNS, GetAttributeNodeNS,
            SetAttributeNodeNS, GetElementsByTagNameNS, HasAttribute, HasAttributeNS };
   };
-
+  
+  KJS_DEFINE_PROTOTYPE_WITH_PROTOTYPE(DOMElementProto, DOMNodeProto)
   DEFINE_PSEUDO_CONSTRUCTOR(ElementPseudoCtor)
 
   class DOMDOMImplementation : public DOMObject {
@@ -229,8 +235,6 @@
     enum { PublicId, SystemId, NotationName };
   };
 
-  DEFINE_PSEUDO_CONSTRUCTOR(NodeConstructor)
-
   // Constructor for DOMException - constructor stuff not implemented yet
   class DOMExceptionConstructor : public DOMObject {
   public:
@@ -278,7 +282,7 @@
     enum { Data, Length,
            SubstringData, AppendData, InsertData, DeleteData, ReplaceData };
   };
-
+  
   class DOMText : public DOMCharacterData {
   public:
     DOMText(ExecState *exec, const DOM::Text& t);
--- khtml/ecma/domparser.cpp
+++ khtml/ecma/domparser.cpp
@@ -38,13 +38,13 @@
 @end
 */
 
-using namespace KJS;
 
-DEFINE_PROTOTYPE("DOMParser",DOMParserProto)
+namespace KJS {
+
+KJS_DEFINE_PROTOTYPE(DOMParserProto)
 IMPLEMENT_PROTOFUNC_DOM(DOMParserProtoFunc)
-IMPLEMENT_PROTOTYPE(DOMParserProto,DOMParserProtoFunc)
+KJS_IMPLEMENT_PROTOTYPE("DOMParser", DOMParserProto, DOMParserProtoFunc)
 
-namespace KJS {
 
 DOMParserConstructorImp::DOMParserConstructorImp(ExecState *, DOM::DocumentImpl *d)
     : doc(d)
--- khtml/rendering/render_style.cpp
+++ khtml/rendering/render_style.cpp
@@ -658,7 +658,7 @@
     if (noninherited_flags.f._styleType==NOPSEUDO)
         for (ps = pseudoStyle; ps; ps = ps->pseudoStyle)
             if (ps->noninherited_flags.f._styleType==pid)
-		break;
+                break;
     return ps;
 }
 
--- khtml/rendering/render_flow.cpp
+++ khtml/rendering/render_flow.cpp
@@ -85,8 +85,10 @@
 void RenderFlow::addChildWithContinuation(RenderObject* newChild, RenderObject* beforeChild)
 {
     RenderFlow* flow = continuationBefore(beforeChild);
-    KHTMLAssert(!beforeChild || beforeChild->parent()->isRenderBlock() ||
-                beforeChild->parent()->isRenderInline());
+    while(beforeChild && beforeChild->parent() != this && !beforeChild->parent()->isAnonymousBlock()) {
+        // skip implicit containers around beforeChild
+        beforeChild = beforeChild->parent();
+    }
     RenderFlow* beforeChildParent = beforeChild ? static_cast<RenderFlow*>(beforeChild->parent()) :
                                     (flow->continuation() ? flow->continuation() : flow);
 
@@ -260,7 +262,7 @@
             }
         }
     }
-    
+
     return false;
 }
 
--- khtml/rendering/table_layout.cpp
+++ khtml/rendering/table_layout.cpp
@@ -233,7 +233,10 @@
     // unlimited.
 
     int bs = table->bordersPaddingAndSpacing();
-    int tableWidth = table->style()->width().isFixed() ? table->style()->width().value() - bs : 0;
+    int tableWidth = 0;
+    if (table->style()->width().isFixed()) {
+        tableWidth = table->calcBoxWidth(table->style()->width().value());
+    }
 
     int mw = calcWidthArray() + bs;
     table->m_minWidth = kMin( kMax( mw, tableWidth ), 0x7fff );
@@ -599,7 +602,8 @@
 
     Length tw = table->style()->width();
     if ( tw.isFixed() && tw.value() > 0 ) {
-	minWidth = kMax( minWidth, int( tw.value() ) );
+        int width = table->calcBoxWidth(tw.value());
+        minWidth = kMax( minWidth, width );
 	maxWidth = minWidth;
     }
 
--- khtml/rendering/render_table.h
+++ khtml/rendering/render_table.h
@@ -73,6 +73,10 @@
     int borderRight() const;
     int borderTop() const;
     int borderBottom() const;
+    int paddingLeft() const { return collapseBorders() ? 0 : RenderBlock::paddingLeft(); }
+    int paddingRight() const { return collapseBorders() ? 0 : RenderBlock::paddingRight(); }
+    int paddingTop() const { return collapseBorders() ? 0 : RenderBlock::paddingTop(); }
+    int paddingBottom() const { return collapseBorders() ? 0 : RenderBlock::paddingBottom(); }
 
     const QColor &bgColor() const { return style()->backgroundColor(); }
 
@@ -244,6 +248,11 @@
     virtual int leftmostPosition(bool includeOverflowInterior, bool includeSelf) const;
     virtual int highestPosition(bool includeOverflowInterior, bool includeSelf) const;
 
+    int borderLeft() const { return table()->collapseBorders() ? 0 : RenderBox::borderLeft(); }
+    int borderRight() const { return table()->collapseBorders() ? 0 : RenderBox::borderRight(); }
+    int borderTop() const { return table()->collapseBorders() ? 0 : RenderBox::borderTop(); }
+    int borderBottom() const { return table()->collapseBorders() ? 0 : RenderBox::borderBottom(); }
+
     virtual void paint( PaintInfo& i, int tx, int ty);
 
     int numRows() const { return grid.size(); }
--- khtml/rendering/render_replaced.cpp
+++ khtml/rendering/render_replaced.cpp
@@ -616,6 +616,14 @@
         return false;
     if ( !element() ) return true;
 
+
+    static bool directToWidget = false;
+    if (directToWidget) {
+      //We're trying to get the event to the widget 
+      //promptly. So get out of here..
+      return false;
+    }
+
     ref();
     element()->ref();
 
@@ -624,12 +632,25 @@
     //kdDebug() << "RenderWidget::eventFilter type=" << e->type() << endl;
     switch(e->type()) {
     case QEvent::FocusOut:
+        // First, forward it to the widget, so that Qt gets a precise
+        // state of the focus before pesky JS can try changing it..
+        directToWidget = true;
+        QApplication::sendEvent(m_widget, e);
+        directToWidget = false;
+        filtered       = true; //We already delivered it!
+        
         // Don't count popup as a valid reason for losing the focus
         // (example: opening the options of a select combobox shouldn't emit onblur)
         if ( QFocusEvent::reason() != QFocusEvent::Popup )
             handleFocusOut();
         break;
     case QEvent::FocusIn:
+        //As above, forward to the widget first...
+        directToWidget = true;
+        QApplication::sendEvent(m_widget, e);
+        directToWidget = false;
+        filtered       = true; //We already delivered it!
+
         //kdDebug(6000) << "RenderWidget::eventFilter captures FocusIn" << endl;
         element()->getDocument()->setFocusNode(element());
 //         if ( isEditable() ) {
--- khtml/rendering/render_table.cpp
+++ khtml/rendering/render_table.cpp
@@ -231,29 +231,29 @@
     }
 
     RenderBlock *cb = containingBlock();
-    int availableWidth = cb->contentWidth();
+    int availableWidth = cb->lineWidth( m_y );
 
-    // Subtract minimum margins
-    availableWidth -= style()->marginLeft().minWidth(cb->contentWidth());
-    availableWidth -= style()->marginRight().minWidth(cb->contentWidth());
-
     LengthType widthType = style()->width().type();
     if(widthType > Relative && style()->width().value() > 0) {
-	// Percent or fixed table
-        m_width = style()->width().minWidth( availableWidth );
-        if(m_minWidth > m_width) m_width = m_minWidth;
+        // Percent or fixed table
+        // Percent is calculated from contentWidth, not available width
+        m_width = calcBoxWidth(style()->width().minWidth( cb->contentWidth() ));
     } else {
-        m_width = KMIN(short( availableWidth ), short(m_maxWidth));
-    }
+        // Subtract out any fixed margins from our available width for auto width tables.
+        int marginTotal = 0;
+        if (!style()->marginLeft().isVariable())
+            marginTotal += style()->marginLeft().width(availableWidth);
+        if (!style()->marginRight().isVariable())
+            marginTotal += style()->marginRight().width(availableWidth);
 
-    // restrict width to what we really have
-    // EXCEPT percent tables, which are still calculated as above
+        // Subtract out our margins to get the available content width.
+        int availContentWidth = kMax(0, availableWidth - marginTotal);
 
-    availableWidth = cb->lineWidth( m_y );
-    if ( widthType != Percent )
-        m_width = KMIN( short( availableWidth ), m_width );
+        // Ensure we aren't bigger than our max width or smaller than our min width.
+        m_width = kMin(availContentWidth, m_maxWidth);
+    }
 
-    m_width = KMAX (m_width, m_minWidth);
+    m_width = kMax (m_width, m_minWidth);
 
     // Finally, with our true width determined, compute our margins for real.
     m_marginRight=0;
@@ -286,7 +286,7 @@
     int oldWidth = m_width;
     calcWidth();
     m_overflowWidth = m_width;
-    
+
     if (tCaption && (oldWidth != m_width || tCaption->style()->height().isPercent()))
         tCaption->setChildNeedsLayout(true);
 
@@ -759,7 +759,7 @@
     }
     return RenderBlock::borderBottom();
 }
- 
+
 RenderTableSection* RenderTable::sectionAbove(const RenderTableSection* section, bool skipEmptySections) const
 {
     if (section == head)
@@ -1300,10 +1300,10 @@
     int totalRows = grid.size();
     int hspacing = table()->borderHSpacing();
     int vspacing = table()->borderVSpacing();
-    
+
     // Set the width of our section now.  The rows will also be this width.
     m_width = table()->contentWidth();
-    
+
     if (markedForRepaint()) {
         repaintDuringLayout();
         setMarkedForRepaint(false);
@@ -1405,7 +1405,7 @@
 
 #ifdef APPLE_CHANGES
         // in WC, rows and cells share the same coordinate space, so that rows can have
-        // dimensions in the layer system. This is of dubious value, and a heavy maintenance burden 
+        // dimensions in the layer system. This is of dubious value, and a heavy maintenance burden
         // (RenderObject's coordinates can't be used deterministically anymore) so we'll consider other options.
 
         // Set the row's x/y position and width/height.
@@ -1729,7 +1729,7 @@
                             colGroup = col->parent();
                     }
                     RenderObject* row = cell->parent();
-                    
+
                     // ###
                     // Column groups and columns first.
                     // FIXME: Columns and column groups do not currently support opacity, and they are being painted "too late" in
@@ -2909,7 +2909,7 @@
             if (!old.isNull())
                 creg = old.intersect(creg);
             pI.p->setClipRegion(creg);
-        }                                                                            
+        }
 	paintBackground(pI.p, c, bgLayer, my, mh, _tx, _ty, w, h);
         if (hasLayer && tableElt->collapseBorders())
             pI.p->restore();
--- khtml/rendering/render_box.cpp
+++ khtml/rendering/render_box.cpp
@@ -568,24 +568,26 @@
             calculateBackgroundSize(bgLayer, scaledImageWidth, scaledImageHeight);
             EBackgroundRepeat bgr = bgLayer->backgroundRepeat();
 
-            if( (bgr == NO_REPEAT || bgr == REPEAT_Y) && pw > scaledImageWidth ) {
-                cw = scaledImageWidth;
-                cx = vr.x() + bgLayer->backgroundXPosition().minWidth(pw - scaledImageWidth);
+            int xPosition = bgLayer->backgroundXPosition().minWidth(pw-scaledImageWidth);
+            if (bgr == NO_REPEAT || bgr == REPEAT_Y) {
+                cw = kMin(scaledImageWidth, pw - xPosition);
+                cx = vr.x() + xPosition;
             } else {
                 cw = pw;
                 cx = vr.x();
                 if (scaledImageWidth > 0)
-                    sx = scaledImageWidth - bgLayer->backgroundXPosition().minWidth(pw - scaledImageWidth) % scaledImageWidth;
+                    sx = scaledImageWidth - xPosition % scaledImageWidth;
             }
 
-            if( (bgr == NO_REPEAT || bgr == REPEAT_X) && ph > scaledImageHeight ) {
-                ch = scaledImageHeight;
-                cy = vr.y() + bgLayer->backgroundYPosition().minWidth(ph - scaledImageHeight);
+            int yPosition = bgLayer->backgroundYPosition().minWidth(ph-scaledImageHeight);
+            if (bgr == NO_REPEAT || bgr == REPEAT_X) {
+                ch = kMin(scaledImageHeight, ph - yPosition);
+                cy = vr.y() + yPosition;
             } else {
                 ch = ph;
                 cy = vr.y();
                 if (scaledImageHeight > 0)
-                    sy = scaledImageHeight - bgLayer->backgroundYPosition().minWidth(ph - scaledImageHeight) % scaledImageHeight;
+                    sy = scaledImageHeight - yPosition % scaledImageHeight;
             }
 
             QRect fix(cx, cy, cw, ch);
@@ -705,6 +707,10 @@
     }
 
     RenderBlock* cb = containingBlock();
+    if (isRenderBlock() && cb->isTable()) {
+        //captions are not affected by table border or padding
+        return cb->width();
+    }
     if (usesLineWidth())
         return cb->lineWidth(m_y);
     else
@@ -964,7 +970,7 @@
     }
     else
     {
-        if ( (ml.isVariable() && mr.isVariable()) ||
+        if ( (ml.isVariable() && mr.isVariable() && m_width<cw) ||
              (!ml.isVariable() && !mr.isVariable() &&
                 containingBlock()->style()->textAlign() == KHTML_CENTER) )
         {
@@ -972,14 +978,14 @@
             if (m_marginLeft<0) m_marginLeft=0;
             m_marginRight = cw - m_width - m_marginLeft;
         }
-        else if (mr.isVariable() ||
+        else if ( (mr.isVariable() && m_width<cw) ||
                  (!ml.isVariable() && containingBlock()->style()->direction() == RTL &&
                   containingBlock()->style()->textAlign() == KHTML_LEFT))
         {
             m_marginLeft = ml.width(cw);
             m_marginRight = cw - m_width - m_marginLeft;
         }
-        else if (ml.isVariable() ||
+        else if ( (ml.isVariable() && m_width<cw) ||
                  (!mr.isVariable() && containingBlock()->style()->direction() == LTR &&
                   containingBlock()->style()->textAlign() == KHTML_RIGHT))
         {
@@ -988,6 +994,7 @@
         }
         else
         {
+           // this makes auto margins 0 if we failed a m_width<cw test above (css2.1, 10.3.3)
             m_marginLeft = ml.minWidth(cw);
             m_marginRight = mr.minWidth(cw);
         }
@@ -1709,10 +1716,6 @@
 
     height += bordersPlusPadding;
 
-    // If our natural/content height exceeds the new height once we've set it, then we
-    // need to make sure to update overflow to track the spillout.
-    if (m_height > height && isRenderBlock())
-        static_cast<RenderBlock*>(this)->setOverflowHeight(m_height);
     // Set final height value.
     m_height = height;
 }
--- khtml/rendering/render_block.cpp
+++ khtml/rendering/render_block.cpp
@@ -224,7 +224,7 @@
         if(oldText->l >= 1) {
             oldText->ref();
             // begin: we need skip leading whitespace so that RenderBlock::findNextLineBreak
-            // won't think we're continuing from a previous run 
+            // won't think we're continuing from a previous run
             unsigned int begin = 0; // the position that first-letter begins
             unsigned int length = 0; // the position that "the rest" begins
             while ( length < oldText->l && (oldText->s+length)->isSpace() )
@@ -711,7 +711,7 @@
     int toAdd = borderBottom() + paddingBottom();
     if (m_layer && style()->scrollsOverflow() && style()->height().isVariable())
         toAdd += m_layer->horizontalScrollbarHeight();
-    if ( hasOverhangingFloats() && !style()->scrollsOverflow() && (isFloatingOrPositioned() || flowAroundFloats()) )
+    if ( hasOverhangingFloats() && (isFloatingOrPositioned() || flowAroundFloats()) )
         m_overflowHeight = m_height = floatBottom() + toAdd;
 
     int oldHeight = m_height;
@@ -930,7 +930,7 @@
         RenderObject* compactChild = compactInfo.compact();
         if (compactChild->height() > child->height())
             m_height += compactChild->height() - child->height();
-    } 
+    }
 }
 
 void RenderBlock::insertCompactIfNeeded(RenderObject* child, CompactInfo& compactInfo)
@@ -1896,7 +1896,6 @@
                 _height = o->height() + o->marginTop() + o->marginBottom();
                 f->width = o->width() + o->marginLeft() + o->marginRight();
             }
-            if (fx<0) fx=0;
             f->left = fx;
             //kdDebug( 6040 ) << "positioning left aligned float at (" << fx + o->marginLeft()  << "/" << y + o->marginTop() << ") fx=" << fx << endl;
             o->setPos(fx + o->marginLeft(), y + o->marginTop());
@@ -1921,14 +1920,18 @@
                 _height = o->height() + o->marginTop() + o->marginBottom();
                 f->width = o->width() + o->marginLeft() + o->marginRight();
             }
-            if (fx<f->width) fx=f->width;
             f->left = fx - f->width;
             //kdDebug( 6040 ) << "positioning right aligned float at (" << fx - o->marginRight() - o->width() << "/" << y + o->marginTop() << ")" << endl;
             o->setPos(fx - o->marginRight() - o->width(), y + o->marginTop());
         }
 
-        if ( m_layer && style()->hidesOverflow() && (o->xPos()+o->width() > m_overflowWidth) )
-            m_overflowWidth = o->xPos()+o->width();
+        if ( m_layer && style()->hidesOverflow()) {
+            if (o->xPos()+o->width() > m_overflowWidth)
+                m_overflowWidth = o->xPos()+o->width();
+            else
+            if (o->xPos() < m_overflowLeft)
+                m_overflowLeft = o->xPos();
+        }
 
         f->startY = y;
         f->endY = f->startY + _height;
--- khtml/java/kjavaappletviewer.desktop
+++ khtml/java/kjavaappletviewer.desktop
@@ -17,7 +17,7 @@
 Name[es]=Visor de applets de Java empotrables
 Name[et]=Põimitav Java apleti näitaja
 Name[eu]=Kapsulatutako Javaren applet-ikustailea
-Name[fa]=مشاهده گر برنامک جاوای نهفته
+Name[fa]=مشاهده‌گر برنامک جاوای نهفته
 Name[fi]=Upotettava Java-sovelmien näyttäjä
 Name[fr]=Afficheur d'applets Java intégré
 Name[fy]=yn sluten Java Applet Werjefte
@@ -27,6 +27,7 @@
 Name[hi]=अंतर्निहित जावा ऐपलेट दर्शक
 Name[hr]=Ugrađeni preglednik Java appleta
 Name[hu]=Beágyazott megjelenítőprogram Java kisalkalmazásokhoz
+Name[id]=Penampil Applet Java Tersisipkan
 Name[is]=Ívefjanlegur Java Applet skoðari
 Name[it]=Visualizzatore integrato di applet Java
 Name[ja]=埋め込み Java アプレットビューア
--- khtml/khtml_ext.h
+++ khtml/khtml_ext.h
@@ -160,7 +160,7 @@
             const char *slot, QObject *parent, const char *name );
     virtual ~KHTMLZoomFactorAction();
 
-    virtual int plug( QWidget *w, int index );
+    virtual int plug( QWidget *widget, int index );
 
 private slots:
     void slotActivated( int );
--- khtml/css/css_renderstyledeclarationimpl.h
+++ khtml/css/css_renderstyledeclarationimpl.h
@@ -1,4 +1,4 @@
-/**
+/*
  * css_renderstyleimpl.h
  *
  * Copyright (C)  2004  Zack Rusin <zack@kde.org>
--- khtml/css/quirks.css
+++ khtml/css/quirks.css
@@ -18,13 +18,14 @@
 
 /* Tables reset both line-height and white-space in quirks mode.
    Compatible with WinIE. For some reason they don't reset font-family */
-TABLE {
+table {
     white-space: normal;
     line-height: normal;
     color: -khtml-text;
     font-size: medium;
     empty-cells: hide;
     text-align: -khtml-auto;
+    font-weight: initial;
 }
 
 LAYER {
--- khtml/css/css_renderstyledeclarationimpl.cpp
+++ khtml/css/css_renderstyledeclarationimpl.cpp
@@ -330,12 +330,12 @@
 RenderStyleDeclarationImpl::RenderStyleDeclarationImpl( DOM::NodeImpl *node )
     : CSSStyleDeclarationImpl(0), m_node(node)
 {
-    kdDebug() << "Render Style Declaration created" << endl;
+    //kdDebug() << "Render Style Declaration created" << endl;
 }
 
 RenderStyleDeclarationImpl::~RenderStyleDeclarationImpl()
 {
-    kdDebug() << "Render Style Declaration destroyed" << endl;
+    //kdDebug() << "Render Style Declaration destroyed" << endl;
 }
 
 DOM::DOMString RenderStyleDeclarationImpl::cssText() const
--- khtml/css/cssstyleselector.cpp
+++ khtml/css/cssstyleselector.cpp
@@ -1087,27 +1087,28 @@
         DOMStringImpl* value = e->getAttributeImpl(sel->attr);
         if(!value) return false; // attribute is not set
 
+        // attributes are always case-sensitive in XHTML
+        // attributes are sometimes case-sensitive in HTML
+        // we only treat id and class selectors as case-sensitive in HTML strict
+        // for compatibility reasons
+        bool caseSensitive = e->getDocument()->htmlMode() == DocumentImpl::XHtml;
+        bool caseSensitive_alt = strictParsing || caseSensitive;
+        caseSensitive |= (sel->attr > ATTR_LAST_CI_ATTR);
+
         switch(sel->match)
         {
-        case CSSSelector::Exact:
-            /* attribute values are case insensitive in all HTML modes,
-               even in the strict ones */
-            if ( e->getDocument()->htmlMode() != DocumentImpl::XHtml ) {
-                if ( strcasecmp(sel->value, value) )
-                    return false;
-            } else {
-                if ( strcmp(sel->value, value) )
-                    return false;
-            }
+        case CSSSelector::Set:
+            // True if we make it this far
             break;
         case CSSSelector::Id:
-	    if( (strictParsing && strcmp(sel->value, value) ) ||
-                (!strictParsing && strcasecmp(sel->value, value)))
-                return false;
+            caseSensitive = caseSensitive_alt;
+            // no break
+        case CSSSelector::Exact:
+            return (caseSensitive && !strcmp(sel->value, value)) ||
+                   (!caseSensitive && !strcasecmp(sel->value, value));
             break;
-        case CSSSelector::Set:
-            break;
         case CSSSelector::Class:
+            caseSensitive = caseSensitive_alt;
             // no break
         case CSSSelector::List:
         {
@@ -1118,8 +1119,8 @@
             // Selector string may not contain spaces
             if ((sel->attr != ATTR_CLASS || e->hasClassList()) && sel->value.find(' ') != -1) return false;
             if (sel_len == val_len)
-                return (strictParsing && !strcmp(sel->value, value)) ||
-		       (!strictParsing && !strcasecmp(sel->value, value));
+                return (caseSensitive && !strcmp(sel->value, value)) ||
+		       (!caseSensitive && !strcasecmp(sel->value, value));
             // else the value is longer and can be a list
             if ( sel->match == CSSSelector::Class && !e->hasClassList() ) return false;
 
@@ -1131,7 +1132,7 @@
 
             int pos = 0;
             for ( ;; ) {
-                pos = val_str.string().find(sel_str.string(), pos, strictParsing);
+                pos = val_str.string().find(sel_str.string(), pos, caseSensitive);
                 if ( pos == -1 ) return false;
                 if ( pos == 0 || val_uc[pos-1].isSpace() ) {
                     int endpos = pos + sel_len;
@@ -1147,21 +1148,21 @@
             //kdDebug( 6080 ) << "checking for contains match" << endl;
             QConstString val_str(value->unicode(), value->length());
             QConstString sel_str(sel->value.unicode(), sel->value.length());
-            return val_str.string().contains(sel_str.string());
+            return val_str.string().contains(sel_str.string(), caseSensitive);
         }
         case CSSSelector::Begin:
         {
             //kdDebug( 6080 ) << "checking for beginswith match" << endl;
             QConstString val_str(value->unicode(), value->length());
             QConstString sel_str(sel->value.unicode(), sel->value.length());
-            return val_str.string().startsWith(sel_str.string());
+            return val_str.string().startsWith(sel_str.string(), caseSensitive);
         }
         case CSSSelector::End:
         {
             //kdDebug( 6080 ) << "checking for endswith match" << endl;
             QConstString val_str(value->unicode(), value->length());
             QConstString sel_str(sel->value.unicode(), sel->value.length());
-            return val_str.string().endsWith(sel_str.string());
+            return val_str.string().endsWith(sel_str.string(), caseSensitive);
         }
         case CSSSelector::Hyphen:
         {
@@ -1172,7 +1173,7 @@
             const QString& selStr = sel_str.string();
             if(str.length() < selStr.length()) return false;
             // Check if str begins with selStr:
-            if(str.find(selStr, 0, strictParsing) != 0) return false;
+            if(str.find(selStr, 0, caseSensitive) != 0) return false;
             // It does. Check for exact match or following '-':
             if(str.length() != selStr.length()
                 && str[selStr.length()] != '-') return false;
--- khtml/misc/makeattrs
+++ khtml/misc/makeattrs
@@ -39,8 +39,13 @@
 htmlattrs.in by makeattrs, do not edit */\n/* Copyright 1999 Lars Knoll */\n\n#ifndef HTML_ATTRS_H\n#define HTML_ATTRS_H\n\n#include \"dom/dom_string.h\"\n#include <kdemacros.h>\nusing namespace DOM;\n\n";
 
 my %amap = ();
+my $last_ci_attr = 0;
 $num = 0;
 while (<IN>) {
+    next if /^#/;
+    next if /^\s*$/;
+    /END_CI_ATTR/ and $last_ci_attr = $num and next;
+
     chomp;
     $attr = $_;
     $num = $num + 1;
@@ -57,6 +62,7 @@
 close(IN);
 
 print header "#define ATTR_LAST_ATTR $num\n";
+print header "#define ATTR_LAST_CI_ATTR $last_ci_attr\n";
 
 print out "%%\n";
 close out;
--- khtml/misc/htmlattrs.in
+++ khtml/misc/htmlattrs.in
@@ -1,15 +1,11 @@
-abbr
+# First, list attributes with a case-insensitive value
 accept-charset
 accept
 accesskey
-action
 align
 alink
-alt
-archive
 autocomplete
 axis
-background
 behavior
 bgcolor
 bgproperties
@@ -22,22 +18,14 @@
 charoff
 charset
 checked
-cite
-class
-classid
 clear
-code
-codebase
 codetype
 color
 cols
 colspan
 compact
-content
 contenteditable
 coords
-data
-datetime
 declare
 defer
 dir
@@ -45,26 +33,20 @@
 disabled
 enctype
 face
-for
 frame
 frameborder
-headers
 height
 hidden
-href
 hreflang
 hspace
 html
 http-equiv
-id
 ismap
-label
 lang
 language
 left
 leftmargin
 link
-longdesc
 loop
 marginheight
 marginwidth
@@ -72,34 +54,14 @@
 media
 method
 multiple
-name
 nohref
 noresize
 nosave
 noshade
 nowrap
-object
 onabort
-onblur
-onchange
-onclick
-ondblclick
 onerror
-onfocus
-onkeydown
-onkeypress
-onkeyup
-onload
-onmousedown
-onmousemove
-onmouseout
-onmouseover
-onmouseup
-onreset
 onresize
-onselect
-onsubmit
-onunload
 oversrc
 pagex
 pagey
@@ -107,15 +69,12 @@
 pluginpage
 pluginspage
 pluginurl
-profile
-prompt
 readonly
 rel
 rev
 rows
 rowspan
 rules
-scheme
 scope
 scrollamount
 scrolldelay
@@ -124,23 +83,17 @@
 shape
 size
 span
-src
-standby
 start
 style
-summary
 tabindex
 target
 text
-title
 top
 topmargin
 truespeed
 type
 unknown
-usemap
 valign
-value
 valuetype
 version
 visibility
@@ -149,3 +102,55 @@
 width
 wrap
 z-index
+END_CI_ATTRIBUTES
+
+# Then attributes listed as [CS] and [CT] in the HTML specification, 
+# which value is to be treated case sensitively.
+abbr
+action
+alt
+archive
+background
+cite
+class
+classid
+code
+codebase
+content
+data
+datetime
+for
+headers
+href
+id
+label
+longdesc
+name
+object
+onblur
+onchange
+onclick
+ondblclick
+onfocus
+onkeydown
+onkeypress
+onkeyup
+onload
+onmousedown
+onmousemove
+onmouseout
+onmouseover
+onmouseup
+onreset
+onselect
+onsubmit
+onunload
+profile
+prompt
+scheme
+src
+standby
+summary
+title
+usemap
+value
--- khtml/misc/shared.h
+++ khtml/misc/shared.h
@@ -1,3 +1,26 @@
+/*
+ * This file is part of the DOM implementation for KDE.
+ * Copyright (C) 2005, 2006 Apple Computer, Inc.
+ * Copyright (C) 2002 Lars Knoll
+ *
+ * This library is free software; you can redistribute it and/or
+ * modify it under the terms of the GNU Library General Public
+ * License as published by the Free Software Foundation; either
+ * version 2 of the License, or (at your option) any later version.
+ *
+ * This library is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+ * Library General Public License for more details.
+ *
+ * You should have received a copy of the GNU Library General Public License
+ * along with this library; see the file COPYING.LIB.  If not, write to
+ * the Free Software Foundation, Inc., 59 Temple Place - Suite 330,
+ * Boston, MA 02111-1307, USA.
+ *
+ */
+
+
 #ifndef SHARED_H
 #define SHARED_H
 
@@ -30,12 +53,14 @@
     TreeShared() { _ref = 0; m_parent = 0; /*counter++;*/ }
     TreeShared( type *parent ) { _ref=0; m_parent = parent; /*counter++;*/ }
     ~TreeShared() { /*counter--;*/ }
+    
+    virtual void removedLastRef() { delete static_cast<type*>(this); }
 
     void ref() { _ref++;  }
     void deref() {
 	if(_ref) _ref--;
 	if(!_ref && !m_parent) {
-	    delete static_cast<type *>(this);
+	    removedLastRef();
 	}
     }
     bool hasOneRef() { //kdDebug(300) << "ref=" << _ref << endl;
@@ -109,6 +134,95 @@
 template <class T, class U> inline SharedPtr<T> static_pointer_cast(const SharedPtr<U> &p) { return SharedPtr<T>(static_cast<T *>(p.get())); }
 template <class T, class U> inline SharedPtr<T> const_pointer_cast(const SharedPtr<U> &p) { return SharedPtr<T>(const_cast<T *>(p.get())); }
 
+//A special pointer for nodes keeping track of the document,
+//which helps distinguish back links from them to it, in order to break 
+//cycles
+template <class T> class DocPtr {
+public:
+    DocPtr() : m_ptr(0) {}
+    DocPtr(T *ptr) : m_ptr(ptr) { if (ptr) ptr->selfOnlyRef(); }
+    DocPtr(const DocPtr &o) : m_ptr(o.m_ptr) { if (T *ptr = m_ptr) ptr->selfOnlyRef(); }
+    ~DocPtr() { if (T *ptr = m_ptr) ptr->selfOnlyDeref(); }
+    
+    template <class U> DocPtr(const DocPtr<U> &o) : m_ptr(o.get()) { if (T *ptr = m_ptr) ptr->selfOnlyRef(); }
+    
+    void resetSkippingRef(T *o) { m_ptr = o; }
+    
+    T *get() const { return m_ptr; }
+    
+    T &operator*() const { return *m_ptr; }
+    T *operator->() const { return m_ptr; }
+    
+    bool operator!() const { return !m_ptr; }
+
+    // this type conversion operator allows implicit conversion to
+    // bool but not to other integer types
+    
+    typedef T * (DocPtr::*UnspecifiedBoolType)() const;
+    operator UnspecifiedBoolType() const
+    {
+        return m_ptr ? &DocPtr::get : 0;
+    }
+    
+    DocPtr &operator=(const DocPtr &);
+    DocPtr &operator=(T *);
+    
+ private:
+    T *m_ptr;
+};
+
+template <class T> DocPtr<T> &DocPtr<T>::operator=(const DocPtr<T> &o) 
+{
+    T *optr = o.m_ptr;
+    if (optr)
+        optr->selfOnlyRef();
+    if (T *ptr = m_ptr)
+        ptr->selfOnlyDeref();
+    m_ptr = optr;
+        return *this;
+}
+
+template <class T> inline DocPtr<T> &DocPtr<T>::operator=(T *optr)
+{
+    if (optr)
+        optr->selfOnlyRef();
+    if (T *ptr = m_ptr)
+        ptr->selfOnlyDeref();
+    m_ptr = optr;
+    return *this;
+}
+
+template <class T> inline bool operator==(const DocPtr<T> &a, const DocPtr<T> &b) 
+{ 
+    return a.get() == b.get(); 
+}
+
+template <class T> inline bool operator==(const DocPtr<T> &a, const T *b) 
+{ 
+    return a.get() == b; 
+}
+
+template <class T> inline bool operator==(const T *a, const DocPtr<T> &b) 
+{
+    return a == b.get(); 
+}
+
+template <class T> inline bool operator!=(const DocPtr<T> &a, const DocPtr<T> &b) 
+{ 
+    return a.get() != b.get(); 
+}
+
+template <class T> inline bool operator!=(const DocPtr<T> &a, const T *b)
+{
+    return a.get() != b; 
+}
+
+template <class T> inline bool operator!=(const T *a, const DocPtr<T> &b) 
+{ 
+    return a != b.get(); 
+}
+
+
 } // namespace
 
 #endif
--- khtml/misc/htmlattrs.c
+++ khtml/misc/htmlattrs.c
@@ -453,307 +453,307 @@
 
 static const struct attrs wordlist_attr[] =
   {
-#line 137 "htmlattrs.gperf"
+#line 156 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str0, ATTR_SRC},
-#line 43 "htmlattrs.gperf"
+#line 33 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str1, ATTR_COLS},
-#line 42 "htmlattrs.gperf"
+#line 32 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str2, ATTR_COLOR},
-#line 97 "htmlattrs.gperf"
+#line 72 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str3, ATTR_ONERROR},
-#line 146 "htmlattrs.gperf"
+#line 100 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str4, ATTR_TOP},
-#line 78 "htmlattrs.gperf"
+#line 59 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str5, ATTR_LOOP},
-#line 48 "htmlattrs.gperf"
+#line 37 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str6, ATTR_COORDS},
-#line 108 "htmlattrs.gperf"
+#line 149 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str7, ATTR_ONRESET},
-#line 110 "htmlattrs.gperf"
+#line 150 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str8, ATTR_ONSELECT},
-#line 39 "htmlattrs.gperf"
+#line 122 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str9, ATTR_CODE},
-#line 129 "htmlattrs.gperf"
+#line 87 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str10, ATTR_SCOPE},
-#line 123 "htmlattrs.gperf"
+#line 82 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str11, ATTR_REL},
-#line 58 "htmlattrs.gperf"
+#line 127 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str12, ATTR_FOR},
-#line 149 "htmlattrs.gperf"
+#line 103 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str13, ATTR_TYPE},
-#line 71 "htmlattrs.gperf"
+#line 131 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str14, ATTR_LABEL},
-#line 26 "htmlattrs.gperf"
+#line 21 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str15, ATTR_BORDER},
-#line 127 "htmlattrs.gperf"
+#line 86 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str16, ATTR_RULES},
-#line 27 "htmlattrs.gperf"
+#line 22 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str17, ATTR_BORDERCOLOR},
-#line 57 "htmlattrs.gperf"
+#line 44 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str18, ATTR_FACE},
-#line 121 "htmlattrs.gperf"
+#line 154 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str19, ATTR_PROMPT},
-#line 133 "htmlattrs.gperf"
+#line 91 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str20, ATTR_SELECTED},
-#line 74 "htmlattrs.gperf"
+#line 56 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str21, ATTR_LEFT},
-#line 102 "htmlattrs.gperf"
+#line 143 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str22, ATTR_ONLOAD},
-#line 124 "htmlattrs.gperf"
+#line 83 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str23, ATTR_REV},
-#line 11 "htmlattrs.gperf"
+#line 114 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str24, ATTR_ABBR},
-#line 93 "htmlattrs.gperf"
+#line 135 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str25, ATTR_ONBLUR},
-#line 92 "htmlattrs.gperf"
+#line 71 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str26, ATTR_ONABORT},
-#line 49 "htmlattrs.gperf"
+#line 125 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str27, ATTR_DATA},
-#line 52 "htmlattrs.gperf"
+#line 39 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str28, ATTR_DEFER},
-#line 13 "htmlattrs.gperf"
+#line 12 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str29, ATTR_ACCEPT},
-#line 69 "htmlattrs.gperf"
+#line 130 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str30, ATTR_ID},
-#line 143 "htmlattrs.gperf"
+#line 98 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str31, ATTR_TARGET},
-#line 98 "htmlattrs.gperf"
+#line 139 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str32, ATTR_ONFOCUS},
-#line 18 "htmlattrs.gperf"
+#line 116 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str33, ATTR_ALT},
-#line 36 "htmlattrs.gperf"
+#line 120 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str34, ATTR_CLASS},
-#line 148 "htmlattrs.gperf"
+#line 102 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str35, ATTR_TRUESPEED},
+#line 30 "htmlattrs.gperf"
+    {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str36, ATTR_CLEAR},
 #line 38 "htmlattrs.gperf"
-    {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str36, ATTR_CLEAR},
-#line 51 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str37, ATTR_DECLARE},
-#line 40 "htmlattrs.gperf"
+#line 123 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str38, ATTR_CODEBASE},
-#line 144 "htmlattrs.gperf"
+#line 99 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str39, ATTR_TEXT},
-#line 139 "htmlattrs.gperf"
+#line 95 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str40, ATTR_START},
-#line 158 "htmlattrs.gperf"
+#line 110 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str41, ATTR_VSPACE},
-#line 45 "htmlattrs.gperf"
+#line 35 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str42, ATTR_COMPACT},
-#line 153 "htmlattrs.gperf"
+#line 161 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str43, ATTR_VALUE},
-#line 109 "htmlattrs.gperf"
+#line 73 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str44, ATTR_ONRESIZE},
-#line 120 "htmlattrs.gperf"
+#line 153 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str45, ATTR_PROFILE},
-#line 30 "htmlattrs.gperf"
+#line 25 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str46, ATTR_CHAR},
-#line 59 "htmlattrs.gperf"
+#line 45 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str47, ATTR_FRAME},
-#line 85 "htmlattrs.gperf"
+#line 133 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str48, ATTR_NAME},
-#line 33 "htmlattrs.gperf"
+#line 28 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str49, ATTR_CHARSET},
-#line 136 "htmlattrs.gperf"
+#line 94 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str50, ATTR_SPAN},
-#line 134 "htmlattrs.gperf"
+#line 92 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str51, ATTR_SHAPE},
-#line 44 "htmlattrs.gperf"
+#line 34 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str52, ATTR_COLSPAN},
-#line 72 "htmlattrs.gperf"
+#line 54 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str53, ATTR_LANG},
-#line 106 "htmlattrs.gperf"
+#line 147 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str54, ATTR_ONMOUSEOVER},
-#line 50 "htmlattrs.gperf"
+#line 126 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str55, ATTR_DATETIME},
-#line 105 "htmlattrs.gperf"
+#line 146 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str56, ATTR_ONMOUSEOUT},
-#line 151 "htmlattrs.gperf"
+#line 160 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str57, ATTR_USEMAP},
-#line 20 "htmlattrs.gperf"
+#line 16 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str58, ATTR_AUTOCOMPLETE},
-#line 77 "htmlattrs.gperf"
+#line 132 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str59, ATTR_LONGDESC},
-#line 107 "htmlattrs.gperf"
+#line 148 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str60, ATTR_ONMOUSEUP},
-#line 114 "htmlattrs.gperf"
+#line 75 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str61, ATTR_PAGEX},
-#line 60 "htmlattrs.gperf"
+#line 46 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str62, ATTR_FRAMEBORDER},
-#line 46 "htmlattrs.gperf"
+#line 124 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str63, ATTR_CONTENT},
-#line 84 "htmlattrs.gperf"
+#line 65 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str64, ATTR_MULTIPLE},
-#line 70 "htmlattrs.gperf"
+#line 53 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str65, ATTR_ISMAP},
-#line 37 "htmlattrs.gperf"
+#line 121 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str66, ATTR_CLASSID},
-#line 88 "htmlattrs.gperf"
+#line 68 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str67, ATTR_NOSAVE},
-#line 24 "htmlattrs.gperf"
+#line 19 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str68, ATTR_BGCOLOR},
-#line 111 "htmlattrs.gperf"
+#line 151 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str69, ATTR_ONSUBMIT},
-#line 104 "htmlattrs.gperf"
+#line 145 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str70, ATTR_ONMOUSEMOVE},
-#line 32 "htmlattrs.gperf"
+#line 27 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str71, ATTR_CHAROFF},
-#line 112 "htmlattrs.gperf"
+#line 152 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str72, ATTR_ONUNLOAD},
-#line 125 "htmlattrs.gperf"
+#line 84 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str73, ATTR_ROWS},
-#line 113 "htmlattrs.gperf"
+#line 74 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str74, ATTR_OVERSRC},
-#line 87 "htmlattrs.gperf"
+#line 67 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str75, ATTR_NORESIZE},
-#line 64 "htmlattrs.gperf"
+#line 129 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str76, ATTR_HREF},
-#line 82 "htmlattrs.gperf"
+#line 63 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str77, ATTR_MEDIA},
-#line 15 "htmlattrs.gperf"
+#line 115 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str78, ATTR_ACTION},
-#line 53 "htmlattrs.gperf"
+#line 40 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str79, ATTR_DIR},
-#line 35 "htmlattrs.gperf"
+#line 119 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str80, ATTR_CITE},
-#line 145 "htmlattrs.gperf"
+#line 159 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str81, ATTR_TITLE},
-#line 91 "htmlattrs.gperf"
+#line 134 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str82, ATTR_OBJECT},
-#line 155 "htmlattrs.gperf"
+#line 107 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str83, ATTR_VERSION},
-#line 132 "htmlattrs.gperf"
+#line 90 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str84, ATTR_SCROLLING},
-#line 128 "htmlattrs.gperf"
+#line 155 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str85, ATTR_SCHEME},
-#line 95 "htmlattrs.gperf"
+#line 137 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str86, ATTR_ONCLICK},
-#line 66 "htmlattrs.gperf"
+#line 50 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str87, ATTR_HSPACE},
-#line 130 "htmlattrs.gperf"
+#line 88 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str88, ATTR_SCROLLAMOUNT},
-#line 135 "htmlattrs.gperf"
+#line 93 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str89, ATTR_SIZE},
-#line 83 "htmlattrs.gperf"
+#line 64 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str90, ATTR_METHOD},
-#line 56 "htmlattrs.gperf"
+#line 43 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str91, ATTR_ENCTYPE},
-#line 160 "htmlattrs.gperf"
+#line 112 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str92, ATTR_WRAP},
-#line 116 "htmlattrs.gperf"
+#line 77 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str93, ATTR_PLAIN},
-#line 34 "htmlattrs.gperf"
+#line 29 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str94, ATTR_CHECKED},
-#line 67 "htmlattrs.gperf"
+#line 51 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str95, ATTR_HTML},
-#line 96 "htmlattrs.gperf"
+#line 138 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str96, ATTR_ONDBLCLICK},
-#line 41 "htmlattrs.gperf"
+#line 31 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str97, ATTR_CODETYPE},
-#line 152 "htmlattrs.gperf"
+#line 105 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str98, ATTR_VALIGN},
-#line 61 "htmlattrs.gperf"
+#line 128 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str99, ATTR_HEADERS},
-#line 161 "htmlattrs.gperf"
+#line 113 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str100, ATTR_Z_INDEX},
-#line 142 "htmlattrs.gperf"
+#line 97 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str101, ATTR_TABINDEX},
-#line 140 "htmlattrs.gperf"
+#line 96 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str102, ATTR_STYLE},
-#line 31 "htmlattrs.gperf"
+#line 26 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str103, ATTR_CHALLENGE},
-#line 86 "htmlattrs.gperf"
+#line 66 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str104, ATTR_NOHREF},
-#line 25 "htmlattrs.gperf"
+#line 20 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str105, ATTR_BGPROPERTIES},
-#line 16 "htmlattrs.gperf"
+#line 14 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str106, ATTR_ALIGN},
-#line 131 "htmlattrs.gperf"
+#line 89 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str107, ATTR_SCROLLDELAY},
-#line 55 "htmlattrs.gperf"
+#line 42 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str108, ATTR_DISABLED},
-#line 115 "htmlattrs.gperf"
+#line 76 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str109, ATTR_PAGEY},
-#line 29 "htmlattrs.gperf"
+#line 24 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str110, ATTR_CELLSPACING},
-#line 12 "htmlattrs.gperf"
+#line 11 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str111, ATTR_ACCEPT_CHARSET},
-#line 89 "htmlattrs.gperf"
+#line 69 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str112, ATTR_NOSHADE},
-#line 147 "htmlattrs.gperf"
+#line 101 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str113, ATTR_TOPMARGIN},
-#line 28 "htmlattrs.gperf"
+#line 23 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str114, ATTR_CELLPADDING},
-#line 73 "htmlattrs.gperf"
+#line 55 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str115, ATTR_LANGUAGE},
-#line 90 "htmlattrs.gperf"
+#line 70 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str116, ATTR_NOWRAP},
-#line 126 "htmlattrs.gperf"
+#line 85 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str117, ATTR_ROWSPAN},
-#line 19 "htmlattrs.gperf"
+#line 117 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str118, ATTR_ARCHIVE},
-#line 21 "htmlattrs.gperf"
+#line 17 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str119, ATTR_AXIS},
-#line 47 "htmlattrs.gperf"
+#line 36 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str120, ATTR_CONTENTEDITABLE},
-#line 154 "htmlattrs.gperf"
+#line 106 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str121, ATTR_VALUETYPE},
-#line 94 "htmlattrs.gperf"
+#line 136 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str122, ATTR_ONCHANGE},
-#line 119 "htmlattrs.gperf"
+#line 80 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str123, ATTR_PLUGINURL},
-#line 75 "htmlattrs.gperf"
+#line 57 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str124, ATTR_LEFTMARGIN},
-#line 157 "htmlattrs.gperf"
+#line 109 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str125, ATTR_VLINK},
-#line 103 "htmlattrs.gperf"
+#line 144 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str126, ATTR_ONMOUSEDOWN},
-#line 23 "htmlattrs.gperf"
+#line 18 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str127, ATTR_BEHAVIOR},
-#line 54 "htmlattrs.gperf"
+#line 41 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str128, ATTR_DIRECTION},
-#line 22 "htmlattrs.gperf"
+#line 118 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str129, ATTR_BACKGROUND},
-#line 141 "htmlattrs.gperf"
+#line 158 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str130, ATTR_SUMMARY},
-#line 122 "htmlattrs.gperf"
+#line 81 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str131, ATTR_READONLY},
-#line 17 "htmlattrs.gperf"
+#line 15 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str132, ATTR_ALINK},
-#line 65 "htmlattrs.gperf"
+#line 49 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str133, ATTR_HREFLANG},
-#line 100 "htmlattrs.gperf"
+#line 141 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str134, ATTR_ONKEYPRESS},
-#line 68 "htmlattrs.gperf"
+#line 52 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str135, ATTR_HTTP_EQUIV},
-#line 138 "htmlattrs.gperf"
+#line 157 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str136, ATTR_STANDBY},
-#line 76 "htmlattrs.gperf"
+#line 58 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str137, ATTR_LINK},
-#line 101 "htmlattrs.gperf"
+#line 142 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str138, ATTR_ONKEYUP},
-#line 81 "htmlattrs.gperf"
+#line 62 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str139, ATTR_MAXLENGTH},
-#line 117 "htmlattrs.gperf"
+#line 78 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str140, ATTR_PLUGINPAGE},
-#line 118 "htmlattrs.gperf"
+#line 79 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str141, ATTR_PLUGINSPAGE},
-#line 14 "htmlattrs.gperf"
+#line 13 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str142, ATTR_ACCESSKEY},
-#line 63 "htmlattrs.gperf"
+#line 48 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str143, ATTR_HIDDEN},
-#line 62 "htmlattrs.gperf"
+#line 47 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str144, ATTR_HEIGHT},
-#line 150 "htmlattrs.gperf"
+#line 104 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str145, ATTR_UNKNOWN},
-#line 159 "htmlattrs.gperf"
+#line 111 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str146, ATTR_WIDTH},
-#line 99 "htmlattrs.gperf"
+#line 140 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str147, ATTR_ONKEYDOWN},
-#line 80 "htmlattrs.gperf"
+#line 61 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str148, ATTR_MARGINWIDTH},
-#line 156 "htmlattrs.gperf"
+#line 108 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str149, ATTR_VISIBILITY},
-#line 79 "htmlattrs.gperf"
+#line 60 "htmlattrs.gperf"
     {(int)(long)&((struct spool_attr_t *)0)->spool_attr_str150, ATTR_MARGINHEIGHT}
   };
 
@@ -843,18 +843,13 @@
 
 static const unsigned short attrList[] = {
     65535,
-    24,
     135,
     29,
     142,
-    78,
     106,
     132,
-    33,
-    118,
     58,
     119,
-    129,
     127,
     68,
     105,
@@ -867,22 +862,14 @@
     71,
     49,
     94,
-    80,
-    34,
-    66,
     36,
-    9,
-    38,
     97,
     2,
     1,
     52,
     42,
-    63,
     120,
     6,
-    27,
-    55,
     37,
     28,
     79,
@@ -890,26 +877,20 @@
     108,
     91,
     18,
-    12,
     47,
     62,
-    99,
     144,
     143,
-    76,
     133,
     87,
     95,
     135,
-    30,
     65,
-    14,
     53,
     115,
     21,
     124,
     137,
-    59,
     5,
     150,
     148,
@@ -917,34 +898,14 @@
     77,
     90,
     64,
-    48,
     104,
     75,
     67,
     112,
     116,
-    82,
     26,
-    25,
-    122,
-    86,
-    96,
     3,
-    32,
-    147,
-    134,
-    138,
-    22,
-    126,
-    70,
-    56,
-    54,
-    60,
-    7,
     44,
-    8,
-    69,
-    72,
     74,
     61,
     109,
@@ -952,15 +913,12 @@
     140,
     141,
     123,
-    45,
-    19,
     131,
     11,
     23,
     73,
     117,
     16,
-    85,
     10,
     88,
     107,
@@ -969,23 +927,17 @@
     51,
     89,
     50,
-    0,
-    136,
     40,
     102,
-    130,
     101,
     31,
     39,
-    81,
     4,
     113,
     35,
     13,
     145,
-    57,
     98,
-    43,
     121,
     83,
     149,
@@ -994,6 +946,54 @@
     146,
     92,
     135,
+    24,
+    78,
+    33,
+    118,
+    129,
+    80,
+    34,
+    66,
+    9,
+    38,
+    63,
+    27,
+    55,
+    12,
+    99,
+    76,
+    30,
+    14,
+    59,
+    48,
+    82,
+    25,
+    122,
+    86,
+    96,
+    32,
+    147,
+    134,
+    138,
+    22,
+    126,
+    70,
+    56,
+    54,
+    60,
+    7,
+    8,
+    69,
+    72,
+    45,
+    19,
+    85,
+    0,
+    136,
+    130,
+    81,
+    57,
+    43,
     65535
 };
 
--- khtml/misc/htmlattrs.h
+++ khtml/misc/htmlattrs.h
@@ -9,158 +9,159 @@
 #include <kdemacros.h>
 using namespace DOM;
 
-#define ATTR_ABBR 1
-#define ATTR_ACCEPT_CHARSET 2
-#define ATTR_ACCEPT 3
-#define ATTR_ACCESSKEY 4
-#define ATTR_ACTION 5
-#define ATTR_ALIGN 6
-#define ATTR_ALINK 7
-#define ATTR_ALT 8
-#define ATTR_ARCHIVE 9
-#define ATTR_AUTOCOMPLETE 10
-#define ATTR_AXIS 11
-#define ATTR_BACKGROUND 12
-#define ATTR_BEHAVIOR 13
-#define ATTR_BGCOLOR 14
-#define ATTR_BGPROPERTIES 15
-#define ATTR_BORDER 16
-#define ATTR_BORDERCOLOR 17
-#define ATTR_CELLPADDING 18
-#define ATTR_CELLSPACING 19
-#define ATTR_CHAR 20
-#define ATTR_CHALLENGE 21
-#define ATTR_CHAROFF 22
-#define ATTR_CHARSET 23
-#define ATTR_CHECKED 24
-#define ATTR_CITE 25
-#define ATTR_CLASS 26
-#define ATTR_CLASSID 27
-#define ATTR_CLEAR 28
-#define ATTR_CODE 29
-#define ATTR_CODEBASE 30
-#define ATTR_CODETYPE 31
-#define ATTR_COLOR 32
-#define ATTR_COLS 33
-#define ATTR_COLSPAN 34
-#define ATTR_COMPACT 35
-#define ATTR_CONTENT 36
-#define ATTR_CONTENTEDITABLE 37
-#define ATTR_COORDS 38
-#define ATTR_DATA 39
-#define ATTR_DATETIME 40
-#define ATTR_DECLARE 41
-#define ATTR_DEFER 42
-#define ATTR_DIR 43
-#define ATTR_DIRECTION 44
-#define ATTR_DISABLED 45
-#define ATTR_ENCTYPE 46
-#define ATTR_FACE 47
-#define ATTR_FOR 48
-#define ATTR_FRAME 49
-#define ATTR_FRAMEBORDER 50
-#define ATTR_HEADERS 51
-#define ATTR_HEIGHT 52
-#define ATTR_HIDDEN 53
-#define ATTR_HREF 54
-#define ATTR_HREFLANG 55
-#define ATTR_HSPACE 56
-#define ATTR_HTML 57
-#define ATTR_HTTP_EQUIV 58
-#define ATTR_ID 59
-#define ATTR_ISMAP 60
-#define ATTR_LABEL 61
-#define ATTR_LANG 62
-#define ATTR_LANGUAGE 63
-#define ATTR_LEFT 64
-#define ATTR_LEFTMARGIN 65
-#define ATTR_LINK 66
-#define ATTR_LONGDESC 67
-#define ATTR_LOOP 68
-#define ATTR_MARGINHEIGHT 69
-#define ATTR_MARGINWIDTH 70
-#define ATTR_MAXLENGTH 71
-#define ATTR_MEDIA 72
-#define ATTR_METHOD 73
-#define ATTR_MULTIPLE 74
-#define ATTR_NAME 75
-#define ATTR_NOHREF 76
-#define ATTR_NORESIZE 77
-#define ATTR_NOSAVE 78
-#define ATTR_NOSHADE 79
-#define ATTR_NOWRAP 80
-#define ATTR_OBJECT 81
-#define ATTR_ONABORT 82
-#define ATTR_ONBLUR 83
-#define ATTR_ONCHANGE 84
-#define ATTR_ONCLICK 85
-#define ATTR_ONDBLCLICK 86
-#define ATTR_ONERROR 87
-#define ATTR_ONFOCUS 88
-#define ATTR_ONKEYDOWN 89
-#define ATTR_ONKEYPRESS 90
-#define ATTR_ONKEYUP 91
-#define ATTR_ONLOAD 92
-#define ATTR_ONMOUSEDOWN 93
-#define ATTR_ONMOUSEMOVE 94
-#define ATTR_ONMOUSEOUT 95
-#define ATTR_ONMOUSEOVER 96
-#define ATTR_ONMOUSEUP 97
-#define ATTR_ONRESET 98
-#define ATTR_ONRESIZE 99
-#define ATTR_ONSELECT 100
-#define ATTR_ONSUBMIT 101
-#define ATTR_ONUNLOAD 102
-#define ATTR_OVERSRC 103
-#define ATTR_PAGEX 104
-#define ATTR_PAGEY 105
-#define ATTR_PLAIN 106
-#define ATTR_PLUGINPAGE 107
-#define ATTR_PLUGINSPAGE 108
-#define ATTR_PLUGINURL 109
-#define ATTR_PROFILE 110
-#define ATTR_PROMPT 111
-#define ATTR_READONLY 112
-#define ATTR_REL 113
-#define ATTR_REV 114
-#define ATTR_ROWS 115
-#define ATTR_ROWSPAN 116
-#define ATTR_RULES 117
-#define ATTR_SCHEME 118
-#define ATTR_SCOPE 119
-#define ATTR_SCROLLAMOUNT 120
-#define ATTR_SCROLLDELAY 121
-#define ATTR_SCROLLING 122
-#define ATTR_SELECTED 123
-#define ATTR_SHAPE 124
-#define ATTR_SIZE 125
-#define ATTR_SPAN 126
-#define ATTR_SRC 127
-#define ATTR_STANDBY 128
-#define ATTR_START 129
-#define ATTR_STYLE 130
-#define ATTR_SUMMARY 131
-#define ATTR_TABINDEX 132
-#define ATTR_TARGET 133
-#define ATTR_TEXT 134
-#define ATTR_TITLE 135
-#define ATTR_TOP 136
-#define ATTR_TOPMARGIN 137
-#define ATTR_TRUESPEED 138
-#define ATTR_TYPE 139
-#define ATTR_UNKNOWN 140
-#define ATTR_USEMAP 141
-#define ATTR_VALIGN 142
-#define ATTR_VALUE 143
-#define ATTR_VALUETYPE 144
-#define ATTR_VERSION 145
-#define ATTR_VISIBILITY 146
-#define ATTR_VLINK 147
-#define ATTR_VSPACE 148
-#define ATTR_WIDTH 149
-#define ATTR_WRAP 150
-#define ATTR_Z_INDEX 151
+#define ATTR_ACCEPT_CHARSET 1
+#define ATTR_ACCEPT 2
+#define ATTR_ACCESSKEY 3
+#define ATTR_ALIGN 4
+#define ATTR_ALINK 5
+#define ATTR_AUTOCOMPLETE 6
+#define ATTR_AXIS 7
+#define ATTR_BEHAVIOR 8
+#define ATTR_BGCOLOR 9
+#define ATTR_BGPROPERTIES 10
+#define ATTR_BORDER 11
+#define ATTR_BORDERCOLOR 12
+#define ATTR_CELLPADDING 13
+#define ATTR_CELLSPACING 14
+#define ATTR_CHAR 15
+#define ATTR_CHALLENGE 16
+#define ATTR_CHAROFF 17
+#define ATTR_CHARSET 18
+#define ATTR_CHECKED 19
+#define ATTR_CLEAR 20
+#define ATTR_CODETYPE 21
+#define ATTR_COLOR 22
+#define ATTR_COLS 23
+#define ATTR_COLSPAN 24
+#define ATTR_COMPACT 25
+#define ATTR_CONTENTEDITABLE 26
+#define ATTR_COORDS 27
+#define ATTR_DECLARE 28
+#define ATTR_DEFER 29
+#define ATTR_DIR 30
+#define ATTR_DIRECTION 31
+#define ATTR_DISABLED 32
+#define ATTR_ENCTYPE 33
+#define ATTR_FACE 34
+#define ATTR_FRAME 35
+#define ATTR_FRAMEBORDER 36
+#define ATTR_HEIGHT 37
+#define ATTR_HIDDEN 38
+#define ATTR_HREFLANG 39
+#define ATTR_HSPACE 40
+#define ATTR_HTML 41
+#define ATTR_HTTP_EQUIV 42
+#define ATTR_ISMAP 43
+#define ATTR_LANG 44
+#define ATTR_LANGUAGE 45
+#define ATTR_LEFT 46
+#define ATTR_LEFTMARGIN 47
+#define ATTR_LINK 48
+#define ATTR_LOOP 49
+#define ATTR_MARGINHEIGHT 50
+#define ATTR_MARGINWIDTH 51
+#define ATTR_MAXLENGTH 52
+#define ATTR_MEDIA 53
+#define ATTR_METHOD 54
+#define ATTR_MULTIPLE 55
+#define ATTR_NOHREF 56
+#define ATTR_NORESIZE 57
+#define ATTR_NOSAVE 58
+#define ATTR_NOSHADE 59
+#define ATTR_NOWRAP 60
+#define ATTR_ONABORT 61
+#define ATTR_ONERROR 62
+#define ATTR_ONRESIZE 63
+#define ATTR_OVERSRC 64
+#define ATTR_PAGEX 65
+#define ATTR_PAGEY 66
+#define ATTR_PLAIN 67
+#define ATTR_PLUGINPAGE 68
+#define ATTR_PLUGINSPAGE 69
+#define ATTR_PLUGINURL 70
+#define ATTR_READONLY 71
+#define ATTR_REL 72
+#define ATTR_REV 73
+#define ATTR_ROWS 74
+#define ATTR_ROWSPAN 75
+#define ATTR_RULES 76
+#define ATTR_SCOPE 77
+#define ATTR_SCROLLAMOUNT 78
+#define ATTR_SCROLLDELAY 79
+#define ATTR_SCROLLING 80
+#define ATTR_SELECTED 81
+#define ATTR_SHAPE 82
+#define ATTR_SIZE 83
+#define ATTR_SPAN 84
+#define ATTR_START 85
+#define ATTR_STYLE 86
+#define ATTR_TABINDEX 87
+#define ATTR_TARGET 88
+#define ATTR_TEXT 89
+#define ATTR_TOP 90
+#define ATTR_TOPMARGIN 91
+#define ATTR_TRUESPEED 92
+#define ATTR_TYPE 93
+#define ATTR_UNKNOWN 94
+#define ATTR_VALIGN 95
+#define ATTR_VALUETYPE 96
+#define ATTR_VERSION 97
+#define ATTR_VISIBILITY 98
+#define ATTR_VLINK 99
+#define ATTR_VSPACE 100
+#define ATTR_WIDTH 101
+#define ATTR_WRAP 102
+#define ATTR_Z_INDEX 103
+#define ATTR_ABBR 104
+#define ATTR_ACTION 105
+#define ATTR_ALT 106
+#define ATTR_ARCHIVE 107
+#define ATTR_BACKGROUND 108
+#define ATTR_CITE 109
+#define ATTR_CLASS 110
+#define ATTR_CLASSID 111
+#define ATTR_CODE 112
+#define ATTR_CODEBASE 113
+#define ATTR_CONTENT 114
+#define ATTR_DATA 115
+#define ATTR_DATETIME 116
+#define ATTR_FOR 117
+#define ATTR_HEADERS 118
+#define ATTR_HREF 119
+#define ATTR_ID 120
+#define ATTR_LABEL 121
+#define ATTR_LONGDESC 122
+#define ATTR_NAME 123
+#define ATTR_OBJECT 124
+#define ATTR_ONBLUR 125
+#define ATTR_ONCHANGE 126
+#define ATTR_ONCLICK 127
+#define ATTR_ONDBLCLICK 128
+#define ATTR_ONFOCUS 129
+#define ATTR_ONKEYDOWN 130
+#define ATTR_ONKEYPRESS 131
+#define ATTR_ONKEYUP 132
+#define ATTR_ONLOAD 133
+#define ATTR_ONMOUSEDOWN 134
+#define ATTR_ONMOUSEMOVE 135
+#define ATTR_ONMOUSEOUT 136
+#define ATTR_ONMOUSEOVER 137
+#define ATTR_ONMOUSEUP 138
+#define ATTR_ONRESET 139
+#define ATTR_ONSELECT 140
+#define ATTR_ONSUBMIT 141
+#define ATTR_ONUNLOAD 142
+#define ATTR_PROFILE 143
+#define ATTR_PROMPT 144
+#define ATTR_SCHEME 145
+#define ATTR_SRC 146
+#define ATTR_STANDBY 147
+#define ATTR_SUMMARY 148
+#define ATTR_TITLE 149
+#define ATTR_USEMAP 150
+#define ATTR_VALUE 151
 #define ATTR_LAST_ATTR 151
+#define ATTR_LAST_CI_ATTR 103
 const char* getAttrName(unsigned short id) KDE_NO_EXPORT;
 
 #endif
--- khtml/xml/dom2_rangeimpl.cpp
+++ khtml/xml/dom2_rangeimpl.cpp
@@ -35,20 +35,20 @@
 using namespace DOM;
 
 
-RangeImpl::RangeImpl(DocumentPtr *_ownerDocument)
+RangeImpl::RangeImpl(DocumentImpl *_ownerDocument)
 {
     m_ownerDocument = _ownerDocument;
     m_ownerDocument->ref();
-    m_startContainer = _ownerDocument->document();
+    m_startContainer = _ownerDocument;
     m_startContainer->ref();
-    m_endContainer = _ownerDocument->document();
+    m_endContainer = _ownerDocument;
     m_endContainer->ref();
     m_startOffset = 0;
     m_endOffset = 0;
     m_detached = false;
 }
 
-RangeImpl::RangeImpl(DocumentPtr *_ownerDocument,
+RangeImpl::RangeImpl(DocumentImpl *_ownerDocument,
               NodeImpl *_startContainer, long _startOffset,
               NodeImpl *_endContainer, long _endOffset)
 {
@@ -161,7 +161,7 @@
         return;
     }
 
-    if (refNode->getDocument() != m_ownerDocument->document()) {
+    if (refNode->getDocument() != m_ownerDocument) {
         exceptioncode = DOMException::WRONG_DOCUMENT_ERR;
         return;
     }
@@ -199,7 +199,7 @@
         return;
     }
 
-    if (refNode->getDocument() != m_ownerDocument->document()) {
+    if (refNode->getDocument() != m_ownerDocument) {
         exceptioncode = DOMException::WRONG_DOCUMENT_ERR;
         return;
     }
@@ -1270,7 +1270,7 @@
         return;
     }
 
-    if (refNode->getDocument() != m_ownerDocument->document()) {
+    if (refNode->getDocument() != m_ownerDocument) {
         exceptioncode = DOMException::WRONG_DOCUMENT_ERR;
         return;
     }
@@ -1294,7 +1294,7 @@
         return;
     }
 
-    if (refNode->getDocument() != m_ownerDocument->document()) {
+    if (refNode->getDocument() != m_ownerDocument) {
         exceptioncode = DOMException::WRONG_DOCUMENT_ERR;
         return;
     }
@@ -1318,7 +1318,7 @@
         return;
     }
 
-    if (refNode->getDocument() != m_ownerDocument->document()) {
+    if (refNode->getDocument() != m_ownerDocument) {
         exceptioncode = DOMException::WRONG_DOCUMENT_ERR;
         return;
     }
@@ -1527,7 +1527,7 @@
         return;
     }
 
-    if (refNode->getDocument() != m_ownerDocument->document()) {
+    if (refNode->getDocument() != m_ownerDocument) {
         exceptioncode = DOMException::WRONG_DOCUMENT_ERR;
         return;
     }
--- khtml/xml/xml_tokenizer.h
+++ khtml/xml/xml_tokenizer.h
@@ -42,7 +42,7 @@
     class DocumentImpl;
     class NodeImpl;
     class HTMLScriptElementImpl;
-    class DocumentPtr;
+    class DocumentImpl;
     class HTMLScriptElementImpl;
 }
 
@@ -51,7 +51,7 @@
 class XMLHandler : public QXmlDefaultHandler
 {
 public:
-    XMLHandler(DOM::DocumentPtr *_doc, KHTMLView *_view);
+    XMLHandler(DOM::DocumentImpl *_doc, KHTMLView *_view);
     virtual ~XMLHandler();
 
     // return the error protocol if parsing failed
@@ -100,7 +100,7 @@
     DOM::NodeImpl *currentNode() const;
 private:
     QString errorProt;
-    DOM::DocumentPtr *m_doc;
+    DOM::DocumentImpl *m_doc;
     KHTMLView *m_view;
     QPtrStack<DOM::NodeImpl> m_nodes;
     DOM::NodeImpl *m_rootNode;
@@ -162,7 +162,7 @@
 class XMLTokenizer : public Tokenizer, public khtml::CachedObjectClient
 {
 public:
-    XMLTokenizer(DOM::DocumentPtr *, KHTMLView * = 0);
+    XMLTokenizer(DOM::DocumentImpl *, KHTMLView * = 0);
     virtual ~XMLTokenizer();
     virtual void begin();
     virtual void write( const TokenizerString &str, bool );
@@ -177,7 +177,7 @@
     virtual bool isExecutingScript() const { return false; }
 
 protected:
-    DOM::DocumentPtr *m_doc;
+    DOM::DocumentImpl *m_doc;
     KHTMLView *m_view;
 
     void executeScripts();
--- khtml/xml/dom2_rangeimpl.h
+++ khtml/xml/dom2_rangeimpl.h
@@ -35,8 +35,8 @@
 {
     friend class DocumentImpl;
 public:
-    RangeImpl(DocumentPtr *_ownerDocument);
-    RangeImpl(DocumentPtr *_ownerDocument,
+    RangeImpl(DocumentImpl *_ownerDocument);
+    RangeImpl(DocumentImpl *_ownerDocument,
               NodeImpl *_startContainer, long _startOffset,
               NodeImpl *_endContainer, long _endOffset);
 
@@ -105,7 +105,7 @@
     bool readOnly() { return false; }
 
 protected:
-    DocumentPtr *m_ownerDocument;
+    DocumentImpl *m_ownerDocument;
     NodeImpl *m_startContainer;
     unsigned long m_startOffset;
     NodeImpl *m_endContainer;
--- khtml/xml/dom_textimpl.cpp
+++ khtml/xml/dom_textimpl.cpp
@@ -42,7 +42,7 @@
     return in.implementation()->escapeHTML();
 }
 
-CharacterDataImpl::CharacterDataImpl(DocumentPtr *doc, DOMStringImpl* _text)
+CharacterDataImpl::CharacterDataImpl(DocumentImpl *doc, DOMStringImpl* _text)
     : NodeImpl(doc)
 {
     str = _text ? _text : new DOMStringImpl(0, 0);
--- khtml/xml/dom_nodeimpl.cpp
+++ khtml/xml/dom_nodeimpl.cpp
@@ -1,4 +1,4 @@
-/**
+/*
  * This file is part of the DOM implementation for KDE.
  *
  * Copyright (C) 1999 Lars Knoll (knoll@kde.org)
@@ -54,8 +54,8 @@
 using namespace DOM;
 using namespace khtml;
 
-NodeImpl::NodeImpl(DocumentPtr *doc)
-    : document(doc),
+NodeImpl::NodeImpl(DocumentImpl *doc)
+    : m_document(doc),
       m_previous(0),
       m_next(0),
       m_render(0),
@@ -77,16 +77,12 @@
       m_hasClassList( false ),
       m_hasClass( false )
 {
-    if (document)
-        document->ref();
 }
 
 NodeImpl::~NodeImpl()
 {
     if (m_render)
         detach();
-    if (document)
-        document->deref();
     if (m_previous)
         m_previous->setNextSibling(0);
     if (m_next)
@@ -341,7 +337,7 @@
     evt->setTarget(this);
 
     // Since event handling code could cause this object to be deleted, grab a reference to the view now
-    KHTMLView *view = document->document()->view();
+    KHTMLView *view = getDocument()->view();
 
     dispatchGenericEvent( evt, exceptioncode );
 
@@ -407,7 +403,7 @@
     }
 
     // copy this over into a local variable, as the following deref() calls might cause this to be deleted.
-    DocumentPtr *doc = document;
+    DocumentImpl *doc = m_document.get();
     doc->ref();
 
     // deref all nodes in chain
@@ -436,20 +432,20 @@
     EventImpl* const evt = new EventImpl(static_cast<EventImpl::EventId>(_id),canBubbleArg,cancelableArg);
     evt->setTarget( 0 );
     evt->ref();
-    DocumentPtr *doc = document;
+    DocumentImpl *doc = getDocument();
     doc->ref();
     dispatchGenericEvent( evt, exceptioncode );
-    if (!evt->defaultPrevented() && doc->document())
-	doc->document()->defaultEventHandler(evt);
+    if (!evt->defaultPrevented() && doc)
+	doc->defaultEventHandler(evt);
 
-    if (_id == EventImpl::LOAD_EVENT && !evt->propagationStopped() && doc->document()) {
+    if (_id == EventImpl::LOAD_EVENT && !evt->propagationStopped() && doc) {
         // For onload events, send them to the enclosing frame only.
         // This is a DOM extension and is independent of bubbling/capturing rules of
         // the DOM.  You send the event only to the enclosing frame.  It does not
         // bubble through the parent document.
-        DOM::ElementImpl* elt = doc->document()->ownerElement();
+        DOM::ElementImpl* elt = doc->ownerElement();
         if (elt && (elt->getDocument()->domain().isNull() ||
-                    elt->getDocument()->domain() == doc->document()->domain())) {
+                    elt->getDocument()->domain() == doc->domain())) {
             // We also do a security check, since we don't want to allow the enclosing
             // iframe to see loads of child documents in other domains.
             evt->setCurrentTarget(elt);
@@ -1852,10 +1848,10 @@
 
 // ----------------------------------------------------------------------------
 
-GenericRONamedNodeMapImpl::GenericRONamedNodeMapImpl(DocumentPtr* doc)
+GenericRONamedNodeMapImpl::GenericRONamedNodeMapImpl(DocumentImpl* doc)
     : NamedNodeMapImpl()
 {
-    m_doc = doc->document();
+    m_doc = doc;
     m_contents = new QPtrList<NodeImpl>;
 }
 
--- khtml/xml/dom_elementimpl.cpp
+++ khtml/xml/dom_elementimpl.cpp
@@ -57,7 +57,7 @@
 using namespace DOM;
 using namespace khtml;
 
-AttrImpl::AttrImpl(ElementImpl* element, DocumentPtr* docPtr, NodeImpl::Id attrId,
+AttrImpl::AttrImpl(ElementImpl* element, DocumentImpl* docPtr, NodeImpl::Id attrId,
 		   DOMStringImpl *value, DOMStringImpl *prefix)
     : NodeBaseImpl(docPtr),
       m_element(element),
@@ -277,12 +277,12 @@
     }
 }
 
-AttrImpl *AttributeImpl::createAttr(ElementImpl *element, DocumentPtr *docPtr)
+AttrImpl *AttributeImpl::createAttr(ElementImpl *element, DocumentImpl *docPtr)
 {
     if (m_attrId) {
 	AttrImpl *attr = new AttrImpl(element,docPtr,m_attrId,m_data.value);
         if (!attr) return 0;
-        attr->setHTMLCompat( docPtr->document()->htmlMode() != DocumentImpl::XHtml );
+        attr->setHTMLCompat( docPtr->htmlMode() != DocumentImpl::XHtml );
 	m_data.value->deref();
 	m_data.attr = attr;
 	m_data.attr->ref();
@@ -305,7 +305,7 @@
 
 // -------------------------------------------------------------------------
 
-ElementImpl::ElementImpl(DocumentPtr *doc)
+ElementImpl::ElementImpl(DocumentImpl *doc)
     : NodeBaseImpl(doc)
 {
     namedAttrMap = 0;
@@ -883,14 +883,14 @@
 
 // -------------------------------------------------------------------------
 
-XMLElementImpl::XMLElementImpl(DocumentPtr *doc, NodeImpl::Id id)
+XMLElementImpl::XMLElementImpl(DocumentImpl *doc, NodeImpl::Id id)
     : ElementImpl(doc)
 {
     // Called from createElement(). In this case localName, prefix, and namespaceURI all need to be null.
     m_id = id;
 }
 
-XMLElementImpl::XMLElementImpl(DocumentPtr *doc, NodeImpl::Id id, DOMStringImpl *_prefix)
+XMLElementImpl::XMLElementImpl(DocumentImpl *doc, NodeImpl::Id id, DOMStringImpl *_prefix)
     : ElementImpl(doc)
 {
     // Called from createElementNS()
--- khtml/xml/dom_textimpl.h
+++ khtml/xml/dom_textimpl.h
@@ -37,8 +37,8 @@
 class CharacterDataImpl : public NodeImpl
 {
 public:
-    CharacterDataImpl(DocumentPtr *doc, DOMStringImpl* _text);
-    CharacterDataImpl(DocumentPtr *doc)
+    CharacterDataImpl(DocumentImpl *doc, DOMStringImpl* _text);
+    CharacterDataImpl(DocumentImpl *doc)
         : NodeImpl(doc), str(0) {}
 
     virtual ~CharacterDataImpl();
@@ -83,9 +83,9 @@
 class CommentImpl : public CharacterDataImpl
 {
 public:
-    CommentImpl(DocumentPtr *doc, DOMStringImpl* _text)
+    CommentImpl(DocumentImpl *doc, DOMStringImpl* _text)
         : CharacterDataImpl(doc, _text) {}
-    CommentImpl(DocumentPtr *doc)
+    CommentImpl(DocumentImpl *doc)
         : CharacterDataImpl(doc) {}
     // DOM methods overridden from  parent classes
     virtual DOMString nodeName() const;
@@ -105,9 +105,9 @@
 class TextImpl : public CharacterDataImpl
 {
 public:
-    TextImpl(DocumentPtr *impl, DOMStringImpl* _text)
+    TextImpl(DocumentImpl *impl, DOMStringImpl* _text)
         : CharacterDataImpl(impl, _text) {}
-    TextImpl(DocumentPtr *impl)
+    TextImpl(DocumentImpl *impl)
         : CharacterDataImpl(impl) {}
 
     // DOM methods & attributes for CharacterData
@@ -147,9 +147,9 @@
 class CDATASectionImpl : public TextImpl
 {
 public:
-    CDATASectionImpl(DocumentPtr *impl, DOMStringImpl* _text)
+    CDATASectionImpl(DocumentImpl *impl, DOMStringImpl* _text)
         : TextImpl(impl, _text) {}
-    CDATASectionImpl(DocumentPtr *impl)
+    CDATASectionImpl(DocumentImpl *impl)
         : TextImpl(impl) {}
 
     // DOM methods overridden from  parent classes
--- khtml/xml/dom_nodeimpl.h
+++ khtml/xml/dom_nodeimpl.h
@@ -58,18 +58,6 @@
 class RegisteredEventListener;
 class EventImpl;
 
-class DocumentPtr : public khtml::Shared<DocumentPtr>
-{
-public:
-    DocumentImpl *document() const { return doc; }
-private:
-    DocumentPtr() { doc = 0; }
-    friend class DocumentImpl;
-    friend class DOMImplementationImpl;
-
-    DocumentImpl *doc;
-};
-
 struct RegisteredListenerList {
     RegisteredListenerList() : listeners(0)
     {}
@@ -114,7 +102,7 @@
 {
     friend class DocumentImpl;
 public:
-    NodeImpl(DocumentPtr *doc);
+    NodeImpl(DocumentImpl *doc);
     virtual ~NodeImpl();
 
     // DOM methods & attributes for Node
@@ -272,7 +260,7 @@
     unsigned long nodeIndex() const;
     // Returns the document that this node is associated with. This is guaranteed to always be non-null, as opposed to
     // DOM's ownerDocument() which is null for Document nodes (and sometimes DocumentType nodes).
-    DocumentImpl* getDocument() const { return document->document(); }
+    DocumentImpl* getDocument() const { return m_document.get(); }
 
     void addEventListener(int id, EventListener *listener, const bool useCapture);
     void removeEventListener(int id, EventListener *listener, bool useCapture);
@@ -323,7 +311,7 @@
      */
     NodeImpl *traversePreviousNode() const;
 
-    DocumentPtr *docPtr() const { return document; }
+    DocumentImpl *docPtr() const { return m_document.get(); }
 
     khtml::RenderObject *renderer() const { return m_render; }
     khtml::RenderObject *nextRenderer();
@@ -447,10 +435,21 @@
      * @param found          When this is set to true, don't print anymore but closing tags.
      * @return An html formatted string for this node and its children between the selectionStart and selectionEnd.
      */
-    virtual DOMString selectionToString(NodeImpl * /*selectionStart*/, NodeImpl * /*selectionEnd*/, int /*startOffset*/, int /*endOffset*/, bool &/*found*/) const { return toString(); }
+    virtual DOMString selectionToString(NodeImpl * selectionStart, 
+                                        NodeImpl * selectionEnd, 
+                                        int startOffset, 
+                                        int endOffset, 
+                                        bool &found) const 
+    { Q_UNUSED(selectionStart);
+      Q_UNUSED(selectionEnd);
+      Q_UNUSED(startOffset);
+      Q_UNUSED(endOffset);
+      Q_UNUSED(found);
+      return toString(); 
+    }
 
 private: // members
-    DocumentPtr *document;
+    khtml::DocPtr<DocumentImpl> m_document;
     NodeImpl *m_previous;
     NodeImpl *m_next;
 protected:
@@ -483,7 +482,7 @@
 class NodeBaseImpl : public NodeImpl
 {
 public:
-    NodeBaseImpl(DocumentPtr *doc)
+    NodeBaseImpl(DocumentImpl *doc)
         : NodeImpl(doc), _first(0), _last(0) {}
     virtual ~NodeBaseImpl();
 
@@ -699,7 +698,7 @@
 class GenericRONamedNodeMapImpl : public NamedNodeMapImpl
 {
 public:
-    GenericRONamedNodeMapImpl(DocumentPtr* doc);
+    GenericRONamedNodeMapImpl(DocumentImpl* doc);
     virtual ~GenericRONamedNodeMapImpl();
 
     // DOM methods & attributes for NamedNodeMap
--- khtml/xml/dom_elementimpl.h
+++ khtml/xml/dom_elementimpl.h
@@ -53,7 +53,7 @@
     friend class NamedAttrMapImpl;
 
 public:
-    AttrImpl(ElementImpl* element, DocumentPtr* docPtr, NodeImpl::Id attrId,
+    AttrImpl(ElementImpl* element, DocumentImpl* docPtr, NodeImpl::Id attrId,
 	     DOMStringImpl *value, DOMStringImpl *prefix = 0);
     ~AttrImpl();
 
@@ -121,7 +121,7 @@
     DOMString name() { return m_attrId ? DOMString() : m_data.attr->name(); }
 
     void setValue(DOMStringImpl *value, ElementImpl *element);
-    AttrImpl *createAttr(ElementImpl *element, DocumentPtr *docPtr);
+    AttrImpl *createAttr(ElementImpl *element, DocumentImpl *docPtr);
     void free();
 
     NodeImpl::Id m_attrId;
@@ -139,7 +139,7 @@
     friend class NodeImpl;
     friend class khtml::CSSStyleSelector;
 public:
-    ElementImpl(DocumentPtr *doc);
+    ElementImpl(DocumentImpl *doc);
     ~ElementImpl();
 
     DOMString getAttribute( NodeImpl::Id id, bool nsAware = 0, const DOMString& qName = DOMString() ) const;
@@ -259,8 +259,8 @@
 {
 
 public:
-    XMLElementImpl(DocumentPtr *doc, NodeImpl::Id id);
-    XMLElementImpl(DocumentPtr *doc, NodeImpl::Id id, DOMStringImpl *_qualifiedName);
+    XMLElementImpl(DocumentImpl *doc, NodeImpl::Id id);
+    XMLElementImpl(DocumentImpl *doc, NodeImpl::Id id, DOMStringImpl *_qualifiedName);
     ~XMLElementImpl();
 
     // DOM methods overridden from  parent classes
--- khtml/xml/dom_xmlimpl.cpp
+++ khtml/xml/dom_xmlimpl.cpp
@@ -29,7 +29,7 @@
 
 using namespace DOM;
 
-EntityImpl::EntityImpl(DocumentPtr *doc) : NodeBaseImpl(doc)
+EntityImpl::EntityImpl(DocumentImpl *doc) : NodeBaseImpl(doc)
 {
     m_publicId = 0;
     m_systemId = 0;
@@ -37,7 +37,7 @@
     m_name = 0;
 }
 
-EntityImpl::EntityImpl(DocumentPtr *doc, DOMString _name) : NodeBaseImpl(doc)
+EntityImpl::EntityImpl(DocumentImpl *doc, DOMString _name) : NodeBaseImpl(doc)
 {
     m_publicId = 0;
     m_systemId = 0;
@@ -47,7 +47,7 @@
         m_name->ref();
 }
 
-EntityImpl::EntityImpl(DocumentPtr *doc, DOMString _publicId, DOMString _systemId, DOMString _notationName) : NodeBaseImpl(doc)
+EntityImpl::EntityImpl(DocumentImpl *doc, DOMString _publicId, DOMString _systemId, DOMString _notationName) : NodeBaseImpl(doc)
 {
     m_publicId = _publicId.implementation();
     if (m_publicId)
@@ -156,12 +156,12 @@
 
 // -------------------------------------------------------------------------
 
-EntityReferenceImpl::EntityReferenceImpl(DocumentPtr *doc) : NodeBaseImpl(doc)
+EntityReferenceImpl::EntityReferenceImpl(DocumentImpl *doc) : NodeBaseImpl(doc)
 {
     m_entityName = 0;
 }
 
-EntityReferenceImpl::EntityReferenceImpl(DocumentPtr *doc, DOMStringImpl *_entityName) : NodeBaseImpl(doc)
+EntityReferenceImpl::EntityReferenceImpl(DocumentImpl *doc, DOMStringImpl *_entityName) : NodeBaseImpl(doc)
 {
     m_entityName = _entityName;
     if (m_entityName)
@@ -222,14 +222,14 @@
 
 // -------------------------------------------------------------------------
 
-NotationImpl::NotationImpl(DocumentPtr *doc) : NodeBaseImpl(doc)
+NotationImpl::NotationImpl(DocumentImpl *doc) : NodeBaseImpl(doc)
 {
     m_publicId = 0;
     m_systemId = 0;
     m_name = 0;
 }
 
-NotationImpl::NotationImpl(DocumentPtr *doc, DOMString _name, DOMString _publicId, DOMString _systemId) : NodeBaseImpl(doc)
+NotationImpl::NotationImpl(DocumentImpl *doc, DOMString _name, DOMString _publicId, DOMString _systemId) : NodeBaseImpl(doc)
 {
     m_name = _name.implementation();
     if (m_name)
@@ -290,7 +290,7 @@
 // ### need a way of updating these properly whenever child nodes of the processing instruction
 // change or are added/removed
 
-ProcessingInstructionImpl::ProcessingInstructionImpl(DocumentPtr *doc) : NodeBaseImpl(doc)
+ProcessingInstructionImpl::ProcessingInstructionImpl(DocumentImpl *doc) : NodeBaseImpl(doc)
 {
     m_target = 0;
     m_data = 0;
@@ -299,7 +299,7 @@
     m_cachedSheet = 0;
 }
 
-ProcessingInstructionImpl::ProcessingInstructionImpl(DocumentPtr *doc, DOMString _target, DOMString _data) : NodeBaseImpl(doc)
+ProcessingInstructionImpl::ProcessingInstructionImpl(DocumentImpl *doc, DOMString _target, DOMString _data) : NodeBaseImpl(doc)
 {
     m_target = _target.implementation();
     if (m_target)
--- khtml/xml/dom_docimpl.cpp
+++ khtml/xml/dom_docimpl.cpp
@@ -290,10 +290,12 @@
 
 // KHTMLView might be 0
 DocumentImpl::DocumentImpl(DOMImplementationImpl *_implementation, KHTMLView *v)
-    : NodeBaseImpl( new DocumentPtr() ), m_domtree_version(0), m_counterDict(257),
+    : NodeBaseImpl( 0 ), m_domtree_version(0), m_counterDict(257),
       m_imageLoadEventTimer(0)
 {
-    document->doc = this;
+    m_document.resetSkippingRef(this); //Make getDocument return us..
+    m_selfOnlyRefCount = 0;
+
     m_paintDeviceMetrics = 0;
     m_paintDevice = 0;
     m_decoderMibEnum = 0;
@@ -319,7 +321,7 @@
 
     // ### this should be created during parsing a <!DOCTYPE>
     // not during construction. Not sure who added that and why (Dirk)
-    m_doctype = new DocumentTypeImpl(_implementation, document,
+    m_doctype = new DocumentTypeImpl(_implementation, getDocument(),
                                      DOMString() /* qualifiedName */,
                                      DOMString() /* publicId */,
                                      DOMString() /* systemId */);
@@ -365,8 +367,60 @@
     m_dynamicDomRestyler = new khtml::DynamicDomRestyler();
 }
 
+void DocumentImpl::removedLastRef()
+{
+    if (m_selfOnlyRefCount) {
+        /* In this case, the only references to us are from children,
+           so we have a cycle. We'll try to break it by disconnecting the
+           children from us; this sucks/is wrong, but it's pretty much 
+           the best we can do without tracing. 
+
+           Of course, if dumping the children causes the refcount from them to 
+           drop to 0 we can get killed right here, so better hold
+           a temporary reference, too
+        */
+        DocPtr<DocumentImpl> guard(this);
+
+        // we must make sure not to be retaining any of our children through
+        // these extra pointers or we will create a reference cycle
+        if (m_doctype) {
+            m_doctype->deref(); 
+            m_doctype = 0;
+        }
+        
+        if (m_cssTarget) {
+            m_cssTarget->deref();
+            m_cssTarget = 0;
+        }
+
+        if (m_focusNode) {
+            m_focusNode->deref();
+            m_focusNode = 0;
+        }
+
+        if (m_hoverNode) {
+            m_hoverNode->deref();
+            m_hoverNode = 0;
+        }
+        
+        if (m_activeNode) {
+            m_activeNode->deref();
+            m_activeNode = 0;
+        }
+
+        removeChildren();
+
+        delete m_tokenizer;
+        m_tokenizer = 0;
+    } else {
+        delete this;
+    }
+}
+
 DocumentImpl::~DocumentImpl()
 {
+    //Important: if you need to remove stuff here,
+    //you may also have to fix removedLastRef() above - M.O.
     assert( !m_render );
 
     QIntDictIterator<NodeListImpl::Cache> it(m_nodeListCache);
@@ -378,7 +432,7 @@
     if (changedDocuments && m_docChanged)
         changedDocuments->remove(this);
     delete m_tokenizer;
-    document->doc = 0;
+    m_document.resetSkippingRef(0);
     delete m_styleSelector;
     delete m_docLoader;
     if (m_elemSheet )  m_elemSheet->deref();
@@ -400,6 +454,8 @@
         m_focusNode->deref();
     if ( m_hoverNode )
         m_hoverNode->deref();
+    if (m_activeNode)
+        m_activeNode->deref();
 
     m_renderArena.reset();
 
@@ -433,7 +489,7 @@
     if ( pExceptioncode && *pExceptioncode )
         return 0;
 
-    XMLElementImpl* e = new XMLElementImpl( document, id );
+    XMLElementImpl* e = new XMLElementImpl( getDocument(), id );
     e->setHTMLCompat( htmlMode() != XHtml ); // Not a real HTML element, but inside an html-compat doc all tags are uppercase.
     return e;
 }
@@ -444,7 +500,7 @@
                   false /* allocate */, isHTMLDocument(), pExceptioncode);
     if ( pExceptioncode && *pExceptioncode )
         return 0;
-    AttrImpl* attr = new AttrImpl( 0, document, id, DOMString("").implementation());
+    AttrImpl* attr = new AttrImpl( 0, getDocument(), id, DOMString("").implementation());
     attr->setHTMLCompat( htmlMode() != XHtml );
     return attr;
 }
@@ -545,10 +601,12 @@
 	result = createComment(static_cast<CommentImpl*>(importedNode)->string());
 	deep = false;
     }
+    else if (importedNode->nodeType() == Node::DOCUMENT_FRAGMENT_NODE)
+	result = createDocumentFragment();
     else
 	exceptioncode = DOMException::NOT_SUPPORTED_ERR;
 	
-    //### FIXME: This should handle DocumentFragment, Attributes, and a few other things
+    //### FIXME: This should handle Attributes, and a few other things
 
     if(deep && result)
     {
@@ -589,7 +647,7 @@
     if (!e) {
         Id id = getId(NodeImpl::ElementId, _namespaceURI.implementation(), prefix.implementation(),
                       localName.implementation(), false, false /*HTML already looked up*/);
-        e = new XMLElementImpl( document, id, prefix.implementation() );
+        e = new XMLElementImpl( getDocument(), id, prefix.implementation() );
     }
 
     return e;
@@ -608,7 +666,7 @@
     splitPrefixLocalName(_qualifiedName.implementation(), prefix, localName, colonPos);
     Id id = getId(NodeImpl::AttributeId, _namespaceURI.implementation(), prefix.implementation(),
                   localName.implementation(), false, true /*lookupHTML*/);
-    AttrImpl* attr = new AttrImpl(0, document, id, DOMString("").implementation(),
+    AttrImpl* attr = new AttrImpl(0, getDocument(), id, DOMString("").implementation(),
                          prefix.implementation());
     attr->setHTMLCompat( _namespaceURI.isNull() && htmlMode() != XHtml );
     return attr;
@@ -2169,6 +2227,13 @@
 {
     // don't process focus changes while detaching
     if( !m_render ) return;
+    
+    // We do want to blur if a widget is being detached,
+    // but we don't want to emit events since that 
+    // triggers updateLayout() and may recurse detach()
+    bool widgetDetach = m_focusNode && m_focusNode != this &&
+              m_focusNode->renderer() && !m_focusNode->renderer()->parent();
+      
     // Make sure newFocusNode is actually in this document
     if (newFocusNode && (newFocusNode->getDocument() != this))
         return;
@@ -2183,8 +2248,11 @@
                 oldFocusNode->setActive(false);
 
             oldFocusNode->setFocus(false);
-	    oldFocusNode->dispatchHTMLEvent(EventImpl::BLUR_EVENT,false,false);
-	    oldFocusNode->dispatchUIEvent(EventImpl::DOMFOCUSOUT_EVENT);
+            
+            if (!widgetDetach) {
+                oldFocusNode->dispatchHTMLEvent(EventImpl::BLUR_EVENT,false,false);
+                oldFocusNode->dispatchUIEvent(EventImpl::DOMFOCUSOUT_EVENT);
+            }
             if ((oldFocusNode == this) && oldFocusNode->hasOneRef()) {
                 oldFocusNode->deref(); // deletes this
                 return;
@@ -2214,9 +2282,14 @@
                         static_cast<RenderWidget*>(m_focusNode->renderer())->widget()->setFocus();
                 }
             }
+        } else {
+            //We're blurring. Better clear the Qt focus/give it to the view...
+            if (view())
+                view()->setFocus();
         }
 
-        updateRendering();
+        if (!widgetDetach)
+            updateRendering();
     }
 }
 
@@ -2642,7 +2715,7 @@
 
 // ----------------------------------------------------------------------------
 
-DocumentFragmentImpl::DocumentFragmentImpl(DocumentPtr *doc) : NodeBaseImpl(doc)
+DocumentFragmentImpl::DocumentFragmentImpl(DocumentImpl *doc) : NodeBaseImpl(doc)
 {
 }
 
@@ -2700,7 +2773,7 @@
 
 // ----------------------------------------------------------------------------
 
-DocumentTypeImpl::DocumentTypeImpl(DOMImplementationImpl *implementation, DocumentPtr *doc,
+DocumentTypeImpl::DocumentTypeImpl(DOMImplementationImpl *implementation, DocumentImpl *doc,
                                    const DOMString &qualifiedName, const DOMString &publicId,
                                    const DOMString &systemId)
     : NodeImpl(doc), m_implementation(implementation),
--- khtml/xml/dom_xmlimpl.h
+++ khtml/xml/dom_xmlimpl.h
@@ -42,9 +42,9 @@
 class EntityImpl : public NodeBaseImpl
 {
 public:
-    EntityImpl(DocumentPtr *doc);
-    EntityImpl(DocumentPtr *doc, DOMString _name);
-    EntityImpl(DocumentPtr *doc, DOMString _publicId, DOMString _systemId, DOMString _notationName);
+    EntityImpl(DocumentImpl *doc);
+    EntityImpl(DocumentImpl *doc, DOMString _name);
+    EntityImpl(DocumentImpl *doc, DOMString _publicId, DOMString _systemId, DOMString _notationName);
     virtual ~EntityImpl();
 
     // DOM methods & attributes for Entity
@@ -76,8 +76,8 @@
 class EntityReferenceImpl : public NodeBaseImpl
 {
 public:
-    EntityReferenceImpl(DocumentPtr *doc);
-    EntityReferenceImpl(DocumentPtr *doc, DOMStringImpl *_entityName);
+    EntityReferenceImpl(DocumentImpl *doc);
+    EntityReferenceImpl(DocumentImpl *doc, DOMStringImpl *_entityName);
     virtual ~EntityReferenceImpl();
 
     // DOM methods overridden from  parent classes
@@ -98,8 +98,8 @@
 class NotationImpl : public NodeBaseImpl
 {
 public:
-    NotationImpl(DocumentPtr *doc);
-    NotationImpl(DocumentPtr *doc, DOMString _name, DOMString _publicId, DOMString _systemId);
+    NotationImpl(DocumentImpl *doc);
+    NotationImpl(DocumentImpl *doc, DOMString _name, DOMString _publicId, DOMString _systemId);
     virtual ~NotationImpl();
 
     // DOM methods & attributes for Notation
@@ -126,8 +126,8 @@
 class ProcessingInstructionImpl : public NodeBaseImpl, private khtml::CachedObjectClient
 {
 public:
-    ProcessingInstructionImpl(DocumentPtr *doc);
-    ProcessingInstructionImpl(DocumentPtr *doc, DOMString _target, DOMString _data);
+    ProcessingInstructionImpl(DocumentImpl *doc);
+    ProcessingInstructionImpl(DocumentImpl *doc, DOMString _target, DOMString _data);
     virtual ~ProcessingInstructionImpl();
 
     // DOM methods & attributes for Notation
--- khtml/xml/dom_stringimpl.cpp
+++ khtml/xml/dom_stringimpl.cpp
@@ -87,7 +87,7 @@
     }
 }
 
-void DOMStringImpl::insert(DOMStringImpl *str, uint pos)
+void DOMStringImpl::insert(DOMStringImpl *str, unsigned int pos)
 {
     if(pos > l)
     {
@@ -119,7 +119,7 @@
     l = len;
 }
 
-void DOMStringImpl::remove(uint pos, int len)
+void DOMStringImpl::remove(unsigned int pos, int len)
 {
   if(pos >= l ) return;
   if(pos+len > l)
@@ -134,7 +134,7 @@
   l = newLen;
 }
 
-DOMStringImpl *DOMStringImpl::split(uint pos)
+DOMStringImpl *DOMStringImpl::split(unsigned int pos)
 {
   if( pos >=l ) return new DOMStringImpl();
 
@@ -144,7 +144,7 @@
   return str;
 }
 
-DOMStringImpl *DOMStringImpl::substring(uint pos, uint len)
+DOMStringImpl *DOMStringImpl::substring(unsigned int pos, unsigned int len)
 {
   if( pos >=l ) return new DOMStringImpl();
   if(pos+len > l)
--- khtml/xml/xml_tokenizer.cpp
+++ khtml/xml/xml_tokenizer.cpp
@@ -91,18 +91,16 @@
     m_finished = finished;
 }
 
-XMLHandler::XMLHandler(DocumentPtr *_doc, KHTMLView *_view)
+XMLHandler::XMLHandler(DocumentImpl *_doc, KHTMLView *_view)
     : errorLine(0)
 {
     m_doc = _doc;
-    if ( m_doc ) m_doc->ref();
     m_view = _view;
-    pushNode( _doc->document() );
+    pushNode( _doc );
 }
 
 XMLHandler::~XMLHandler()
 {
-    if ( m_doc ) m_doc->deref();
 }
 
 void XMLHandler::pushNode( NodeImpl *node )
@@ -176,7 +174,7 @@
     else
         // No namespace declared, default to the no namespace
         nsURI = DOMString("");
-    ElementImpl *newElement = m_doc->document()->createElementNS(nsURI,qName);
+    ElementImpl *newElement = m_doc->createElementNS(nsURI,qName);
     if (!newElement)
         return false;
     int i;
@@ -207,7 +205,7 @@
             break;
     }
     if (attached) {
-        if (m_view && !newElement->attached() && !m_doc->document()->hasPendingSheets())
+        if (m_view && !newElement->attached() && !m_doc->hasPendingSheets())
             newElement->attach();
         pushNode( newElement );
         return true;
@@ -245,9 +243,9 @@
     if (currentNode()->nodeType() == Node::TEXT_NODE)
         exitText();
 
-    NodeImpl *newNode = m_doc->document()->createCDATASection(new DOMStringImpl(""));
+    NodeImpl *newNode = m_doc->createCDATASection(new DOMStringImpl(""));
     if (currentNode()->addChild(newNode)) {
-        if (m_view && !newNode->attached() && !m_doc->document()->hasPendingSheets())
+        if (m_view && !newNode->attached() && !m_doc->hasPendingSheets())
             newNode->attach();
         pushNode( newNode );
         return true;
@@ -291,7 +289,7 @@
     if (currentNode()->nodeType() == Node::TEXT_NODE)
         exitText();
     // ### handle exceptions
-    currentNode()->addChild(m_doc->document()->createComment(new DOMStringImpl(ch.unicode(), ch.length())));
+    currentNode()->addChild(m_doc->createComment(new DOMStringImpl(ch.unicode(), ch.length())));
     return true;
 }
 
@@ -301,7 +299,7 @@
         exitText();
     // ### handle exceptions
     ProcessingInstructionImpl *pi =
-        m_doc->document()->createProcessingInstruction(target, new DOMStringImpl(data.unicode(), data.length()));
+        m_doc->createProcessingInstruction(target, new DOMStringImpl(data.unicode(), data.length()));
     currentNode()->addChild(pi);
     pi->checkStyleSheet();
     return true;
@@ -330,7 +328,7 @@
 
 bool XMLHandler::enterText()
 {
-    NodeImpl *newNode = m_doc->document()->createTextNode("");
+    NodeImpl *newNode = m_doc->createTextNode("");
     if (currentNode()->addChild(newNode)) {
         pushNode( newNode );
         return true;
@@ -343,7 +341,7 @@
 
 void XMLHandler::exitText()
 {
-    if ( m_view && !currentNode()->attached() && !m_doc->document()->hasPendingSheets() )
+    if ( m_view && !currentNode()->attached() && !m_doc->hasPendingSheets() )
         currentNode()->attach();
     popNode();
 }
@@ -366,9 +364,9 @@
 {
     EntityImpl *e = new EntityImpl(m_doc,name);
     // ### further parse entities inside the value and add them as separate nodes (or entityreferences)?
-    e->addChild(m_doc->document()->createTextNode(new DOMStringImpl(value.unicode(), value.length())));
-     if (m_doc->document()->doctype())
-         static_cast<GenericRONamedNodeMapImpl*>(m_doc->document()->doctype()->entities())->addNode(e);
+    e->addChild(m_doc->createTextNode(new DOMStringImpl(value.unicode(), value.length())));
+     if (m_doc->doctype())
+         static_cast<GenericRONamedNodeMapImpl*>(m_doc->doctype()->entities())->addNode(e);
     return true;
 }
 
@@ -392,11 +390,10 @@
 
 //------------------------------------------------------------------------------
 
-XMLTokenizer::XMLTokenizer(DOM::DocumentPtr *_doc, KHTMLView *_view)
+XMLTokenizer::XMLTokenizer(DOM::DocumentImpl *_doc, KHTMLView *_view)
     : m_handler(_doc,_view)
 {
     m_doc = _doc;
-    if ( m_doc ) m_doc->ref();
     m_view = _view;
     m_scriptsIt = 0;
     m_cachedScript = 0;
@@ -411,7 +408,6 @@
 
 XMLTokenizer::~XMLTokenizer()
 {
-    if (m_doc) m_doc->deref();
     if (m_scriptsIt)
         delete m_scriptsIt;
     if (m_cachedScript)
@@ -457,8 +453,8 @@
 
         // Clear the document
         int exceptioncode = 0;
-        while (m_doc->document()->hasChildNodes())
-            static_cast<NodeImpl*>(m_doc->document())->removeChild(m_doc->document()->firstChild(),exceptioncode);
+        while (m_doc->hasChildNodes())
+            static_cast<NodeImpl*>(m_doc)->removeChild(m_doc->firstChild(),exceptioncode);
 
         QString line, errorLocPtr;
         if ( m_handler.errorLine ) {
@@ -474,7 +470,7 @@
         }
 
         // Create elements for display
-        DocumentImpl *doc = m_doc->document();
+        DocumentImpl *doc = m_doc;
         NodeImpl *html = doc->createElementNS(XHTML_NAMESPACE,"html");
         NodeImpl   *body = doc->createElementNS(XHTML_NAMESPACE,"body");
         NodeImpl     *h1 = doc->createElementNS(XHTML_NAMESPACE,"h1");
@@ -512,15 +508,15 @@
         if ( pre ) pre->close();
         body->close();
 
-        m_doc->document()->recalcStyle( NodeImpl::Inherit );
-        m_doc->document()->updateRendering();
+        m_doc->recalcStyle( NodeImpl::Inherit );
+        m_doc->updateRendering();
 
         end();
     }
     else {
         // Parsing was successful. Now locate all html <script> tags in the document and execute them
         // one by one
-        addScripts(m_doc->document());
+        addScripts(m_doc);
         m_scriptsIt = new QPtrListIterator<HTMLScriptElementImpl>(m_scripts);
         executeScripts();
     }
@@ -553,7 +549,7 @@
 
         if (!scriptSrc.isEmpty()) {
             // we have a src attribute
-            m_cachedScript = m_doc->document()->docLoader()->requestScript(scriptSrc, charset);
+            m_cachedScript = m_doc->docLoader()->requestScript(scriptSrc, charset);
             ++(*m_scriptsIt);
             if (m_cachedScript) {
                 m_cachedScript->ref(this); // will call executeScripts() again if already cached
@@ -583,7 +579,7 @@
 
     // All scripts have finished executing, so calculate the style for the document and close
     // the last element
-    m_doc->document()->updateStyleSelector();
+    m_doc->updateStyleSelector();
 
     // We are now finished parsing
     end();
--- khtml/xml/dom_docimpl.h
+++ khtml/xml/dom_docimpl.h
@@ -234,12 +234,12 @@
 
     /**
      * This method returns true if all top-level stylesheets have loaded (including
-     * any @imports that they may be loading).
+     * any \@imports that they may be loading).
      */
     bool haveStylesheetsLoaded() { return m_pendingStylesheets <= 0 || m_ignorePendingStylesheets; }
 
     /**
-     * Increments the number of pending sheets.  The <link> elements
+     * Increments the number of pending sheets.  The \<link\> elements
      * invoke this to add themselves to the loading list.
      */
     void addPendingSheet() { m_pendingStylesheets++; }
@@ -254,8 +254,8 @@
      * Called when one or more stylesheets in the document may have been added, removed or changed.
      *
      * Creates a new style selector and assign it to this document. This is done by iterating through all nodes in
-     * document (or those before <BODY> in a HTML document), searching for stylesheets. Stylesheets can be contained in
-     * <LINK>, <STYLE> or <BODY> elements, as well as processing instructions (XML documents only). A list is
+     * document (or those before \<BODY\> in a HTML document), searching for stylesheets. Stylesheets can be contained in
+     * \<LINK\>, \<STYLE\> or \<BODY\> elements, as well as processing instructions (XML documents only). A list is
      * constructed from these which is used to create the a new style selector which collates all of the stylesheets
      * found and is used to calculate the derived styles for all rendering objects.
      *
@@ -673,12 +673,29 @@
     khtml::SharedPtr<khtml::RenderArena> m_renderArena;
 private:
     mutable DOMString m_domain;
+    int m_selfOnlyRefCount;
+public:
+    // Nodes belonging to this document hold "self-only" references -
+    // these are enough to keep the document from being destroyed, but
+    // not enough to keep it from removing its children. This allows a
+    // node that outlives its document to still have a valid document
+    // pointer without introducing reference cycles
+
+    void selfOnlyRef() { ++m_selfOnlyRefCount; }
+    void selfOnlyDeref() {
+        --m_selfOnlyRefCount;
+        if (!m_selfOnlyRefCount && !refCount())
+            delete this;
+    }
+    
+    // This is called when our last outside reference dies
+    virtual void removedLastRef();
 };
 
 class DocumentFragmentImpl : public NodeBaseImpl
 {
 public:
-    DocumentFragmentImpl(DocumentPtr *doc);
+    DocumentFragmentImpl(DocumentImpl *doc);
     DocumentFragmentImpl(const DocumentFragmentImpl &other);
 
     // DOM methods overridden from  parent classes
@@ -696,7 +713,7 @@
 class DocumentTypeImpl : public NodeImpl
 {
 public:
-    DocumentTypeImpl(DOMImplementationImpl *_implementation, DocumentPtr *doc,
+    DocumentTypeImpl(DOMImplementationImpl *_implementation, DocumentImpl *doc,
                      const DOMString &qualifiedName, const DOMString &publicId,
                      const DOMString &systemId);
     ~DocumentTypeImpl();
--- khtml/Makefile.am
+++ khtml/Makefile.am
@@ -125,7 +125,8 @@
 testregression_LDADD = libkhtml.la
 
 DOXYGEN_REFERENCES = kdecore kdeui kio kdefx kparts
-DOXYGEN_EXCLUDE =  test*.* html rendering xml misc pics test 
+DOXYGEN_EXCLUDE =  test*.* css ecma html java kmultipart misc pics rendering test xml
+
 include ../admin/Doxyfile.am
 
 .PHONY: parser
--- kresources/kresources_manager.desktop
+++ kresources/kresources_manager.desktop
@@ -25,6 +25,7 @@
 Comment[hi]=के-रीसोर्स प्रबंधक
 Comment[hr]=KResource upravljanje
 Comment[hu]=KResource-kezelőprogram
+Comment[id]=Manajer KResource 
 Comment[is]=KResource stjóri
 Comment[it]=Gestore KResource
 Comment[ja]=K リソース・マネージャ
--- kresources/kresources.desktop
+++ kresources/kresources.desktop
@@ -33,12 +33,14 @@
 Name[he]=משאבים של KDE
 Name[hr]=KDE resursi
 Name[hu]=KDE-erőforrások
+Name[id]=Sumber Daya KDE
 Name[is]=KDE auðlindir
 Name[it]=Risorse di KDE
 Name[ja]=KDE リソース
 Name[km]=ធនធាន KDE
 Name[lb]=KDE-Ressourcen
 Name[lt]=KDE resursai
+Name[lv]=KDE resursi
 Name[mk]=Ресурси на KDE
 Name[ms]=Sumber KDE
 Name[nb]=KDE-ressurser
@@ -95,6 +97,7 @@
 Comment[hi]=केडीई रीसोर्सेज़ कॉन्फ़िगर करें
 Comment[hr]=Konfiguriranje KDE resursa
 Comment[hu]=A KDE-s erőforrások beállítása
+Comment[id]=Konfigurasikan Sumber Daya KDE
 Comment[is]=Stilla KDE auðlindir
 Comment[it]=Configura le risorse di KDE
 Comment[ja]=KDE リソースの設定
--- kresources/resource.h
+++ kresources/resource.h
@@ -389,9 +389,13 @@
     virtual ConfigWidget *configWidget( QWidget *parent ) = 0;
 
   protected:
-    virtual QObject* createObject( QObject *, const char *, const char *,
-                                   const QStringList & )
+    virtual QObject* createObject( QObject *parent, const char *name, const char *className,
+                                   const QStringList & args)
     {
+      Q_UNUSED(parent);
+      Q_UNUSED(name);
+      Q_UNUSED(className);
+      Q_UNUSED(args);
       return 0;
     }
 };
--- kjs/nodes.cpp
+++ kjs/nodes.cpp
@@ -1028,7 +1028,7 @@
 Value PrefixNode::evaluate(ExecState *exec) const
 {
   Reference ref = expr->evaluateReference(exec);
-  KJS_CHECKEXCEPTION
+  KJS_CHECKEXCEPTIONVALUE
   Value v = ref.getValue(exec);
   double n = v.toNumber(exec);
 
--- kjs/operations.h
+++ kjs/operations.h
@@ -55,6 +55,9 @@
   /**
    * Additive operator. Either performs an addition or substraction of v1
    * and v2.
+   * @param exec execution state.
+   * @param v1 First operand.
+   * @param v2 Second operand.
    * @param oper '+' or '-' for an addition or substraction, respectively.
    * @return The result of the operation.
    */
@@ -62,6 +65,9 @@
   /**
    * Multiplicative operator. Either multiplies/divides v1 and v2 or
    * calculates the remainder from an division.
+   * @param exec execution state.
+   * @param v1 First operand.
+   * @param v2 Second operand.
    * @param oper '*', '/' or '%' for a multiplication, division or
    * modulo operation.
    * @return The result of the operation.
--- kjs/lookup.h
+++ kjs/lookup.h
@@ -160,10 +160,10 @@
    * unknown property).
    *
    * Template arguments:
-   * @param FuncImp the class which implements this object's functions
-   * @param ThisImp the class of "this". It must implement the getValueProperty(exec,token) method,
-   * for non-function properties.
-   * @param ParentImp the class of the parent, to propagate the lookup.
+   *   - @c FuncImp the class which implements this object's functions
+   *   - @c ThisImp the class of "this". It must implement the 
+   *        getValueProperty(exec,token) method, for non-function properties.
+   *   - @c ParentImp the class of the parent, to propagate the lookup.
    *
    * Method arguments:
    * @param exec execution state, as usual
--- pics/hicolor/index.theme
+++ pics/hicolor/index.theme
@@ -73,6 +73,7 @@
 Comment[hi]=फालबैक प्रतीक प्रसंग
 Comment[hr]=Fallback tema ikona
 Comment[hu]=Másodlagos ikontéma
+Comment[id]=Tema ikon cadangan
 Comment[is]=Sjálfgefin táknmyndaþema
 Comment[it]=Tema icone standard
 Comment[ja]=フォールバックアイコンテーマ
--- pics/crystalsvg/index.theme
+++ pics/crystalsvg/index.theme
@@ -44,6 +44,7 @@
 Comment[hi]=प्रतीक प्रसंग Everaldo.com डिज़ाइन स्टूडियो द्वारा
 Comment[hr]=Tema ikona koju je izradio Everaldo.com Design Studio
 Comment[hu]=Ikontéma, készítette: Everaldo.com Design Studio
+Comment[id]=Tema Ikon dari Studio Design Everaldo.com
 Comment[is]=Táknmyndaþema eftir Everaldo.com Design Studio
 Comment[it]=Tema icone dello studio di design Everaldo.com
 Comment[ja]=アイコンテーマ by Everaldo.com Design Studio
--- kdoctools/customization/pt-BR/entities/help-menu.docbook
+++ kdoctools/customization/pt-BR/entities/help-menu.docbook
@@ -28,10 +28,10 @@
 <varlistentry>
 <term><menuchoice>
 <guimenu>Ajuda</guimenu>
-<guimenuitem>Reportar Erro...</guimenuitem>
+<guimenuitem>Relatar Falha...</guimenuitem>
 </menuchoice></term>
-<listitem><para><action>Abre a janela para Reportar Erros</action> onde pode 
-relatar um erro ou <quote>sugerir</quote> uma funcionalidade.</para></listitem>
+<listitem><para><action>Abre a janela para Reportar Falhas</action> onde você pode 
+relatar uma falha ou <quote>sugerir</quote> uma funcionalidade.</para></listitem>
 </varlistentry>
 
 <varlistentry>
@@ -39,7 +39,7 @@
 <guimenu>Ajuda</guimenu>
 <guimenuitem>Sobre o &kappname;</guimenuitem>
 </menuchoice></term>
-<listitem><para><action>Isto irá mostrar a versão e as informações do autor.</action></para></listitem>
+<listitem><para><action>Isto irá mostrar a versão da aplicação e as informações do autor.</action></para></listitem>
 </varlistentry>
 
 <varlistentry>
--- kdoctools/customization/pt-BR/entities/install-intro.docbook
+++ kdoctools/customization/pt-BR/entities/install-intro.docbook
@@ -1,4 +1,4 @@
 <!-- requires that packagename is defined in the documentation prologue -->
-<para>&kappname; faz parte do projeto &kde; &kde-http;.</para>
+<para>O &kappname; faz parte do projeto &kde; &kde-http;.</para>
 
-<para>&kappname; pode ser encontrado no pacote &package; no site &FTP; principal do projeto &kde; &kde-ftp;.</para>
+<para>O &kappname; pode ser encontrado no pacote &package; no servidor &FTP; principal do projeto &kde; &kde-ftp;.</para>
--- kparts/krop.desktop
+++ kparts/krop.desktop
@@ -21,7 +21,7 @@
 Comment[es]=Componente de KDE
 Comment[et]=KDE komponent
 Comment[eu]=KDEren osagaia
-Comment[fa]=مولفۀ KDE
+Comment[fa]=مؤلفۀ KDE
 Comment[fi]=KDE-komponentti
 Comment[fr]=Composant de KDE
 Comment[fy]=KDE-komponint
--- kparts/krwp.desktop
+++ kparts/krwp.desktop
@@ -21,7 +21,7 @@
 Comment[es]=Componente de KDE
 Comment[et]=KDE komponent
 Comment[eu]=KDEren osagaia
-Comment[fa]=مولفۀ KDE
+Comment[fa]=مؤلفۀ KDE
 Comment[fi]=KDE-komponentti
 Comment[fr]=Composant de KDE
 Comment[fy]=KDE-komponint
--- kparts/kpart.desktop
+++ kparts/kpart.desktop
@@ -20,7 +20,7 @@
 Comment[es]=Componente de KDE
 Comment[et]=KDE komponent
 Comment[eu]=KDEren osagaia
-Comment[fa]=مولفۀ KDE
+Comment[fa]=مؤلفۀ KDE
 Comment[fi]=KDE-komponentti
 Comment[fr]=Composant de KDE
 Comment[fy]=KDE-komponint
--- kded/kdedmodule.desktop
+++ kded/kdedmodule.desktop
@@ -20,7 +20,7 @@
 Comment[es]=Módulo de KDED
 Comment[et]=KDED moodul
 Comment[eu]=KDED modulua
-Comment[fa]=پیمانه KDED
+Comment[fa]=پیمانۀ KDED
 Comment[fi]=KDED-moduuli
 Comment[fr]=Module KDED
 Comment[fy]=KDED-module
--- kdeprint/tools/escputil/escpwidget.cpp
+++ kdeprint/tools/escputil/escpwidget.cpp
@@ -39,8 +39,9 @@
 public:
 	EscpFactory(QObject *parent = 0, const char *name = 0) : KLibFactory(parent, name) {}
 protected:
-	QObject* createObject(QObject *parent = 0, const char *name = 0, const char * /*classname*/ = "QObject", const QStringList& args = QStringList())
+	QObject* createObject(QObject *parent = 0, const char *name = 0, const char * className = "QObject", const QStringList& args = QStringList())
 	{
+               Q_UNUSED(className);
 		KDialogBase	*dlg = new KDialogBase(static_cast<QWidget*>(parent), name, true, i18n("EPSON InkJet Printer Utilities"), KDialogBase::Close);
 		EscpWidget	*w = new EscpWidget(dlg);
 		if (args.count() > 0)
--- kdeprint/filters/poster.desktop
+++ kdeprint/filters/poster.desktop
@@ -99,6 +99,7 @@
 Description[hi]=बहुत से छोटे-छोटे कागज के पन्नों में बड़े पोस्टर छापने की यूटिलिटी. इस कमांड- <b>poster</b> का उपयोग करने के लिए एक्जिक्यूटेबल आपके पथ  <tt>PATH</tt> के पँहुच में होना चाहिए. इस यूटिलिटी का स्रोत कोड इस वेबसाइट से प्राप्त किया जा सकता है- <a href="http://printing.kde.org/downloads">KDEPrint web site</a>. <p><b><u>चेतावनी:</u></b> केडीई प्रिंट वेब साइट से प्राप्त पैकेज मूल संसकरण का बदला क़िस्म है जो किसी भी CTAN आर्काइव मिरर से प्राप्त हो सकता है, परंतु मूल पैकेज केडीई के साथ कार्य <b>नहीं</b> करेगा. आप <b>आवश्यक रूप से</b>इस साइट पर उपलब्ध पैकेज इस्तेमाल करें <a href="http://printing.kde.org/downloads">KDEPrint web site</a>.
 Description[hr]=Alat za ispisivanje velikih postera na većem broju papira manje veličine. Za upotrijebljavanje ove naredbe potrebno je da izvršna datoteka <b>poster</b> bude dostupna unutar opisa <tt>PATH</tt>. Izvodni kod ovog alata može se pronaći na <a href="http://printing.kde.org/downloads">KDEPrint web lokaciji</a>. <p><b><u>UPOZORENJE:</u></b> Paket na KDEPrint web lokaciji izmijenjena je verzija izvornog paketa, koji se može pronaći na bilo kojoj CTAN zrcalnoj lokaciji, ali izvorni paket <b>ne funkcionira</b> unutar KDE. <b>Morate</b> upotrijebiti paket koji se nalazi na <a href="http://printing.kde.org/downloads">KDEPrint web lokaciji</a>.
 Description[hu]=Ezzel a szűrővel nagy posztereket lehet kinyomtatni sok kis lapra. A parancs használatához a <b>poster</b> programfájl könyvtárának szerepelnie kell a <tt>PATH</tt> változóban. A program forráskódja letölthető <a href="http://printing.kde.org/downloads">a KDEPrint website</a>-ról. <p><b><u>Figyelem:</u></b> a website-on található csomag az eredeti program egy módosított változata (az eredeti bármelyik CTAN archívumból letölthető), de az eredeti változat <b>nem</b> működik a KDE-vel, ezért <b>feltétlenül</b> a <a href="http://printing.kde.org/downloads">KDEPrint website</a>-on levőt használja!
+Description[id]=Utilitas untuk mencetak poster besar dalam beberapa lembar kertas yang lebih kecil. Untuk menggunakan perintah ini, program <b>poster</b> harus dapat ditemukan di <tt>PATH</tt> Anda. Kode sumber untuk utilitas ini dapat diambil di <a href="http://printing.kde.org/downloads">situs web KDEPrint</a>. <p><b><u>PERINGATAN:</u></b> Paket yang ada di situs web KDEPrint web site adalah versi modifikasi dari program asli yang terdapat di mirror arsip CTAN manapun, tetapi paket yang asli <b>tidak</b> berfungsi dengan KDE. Anda <b>harus</b> menggunakan paket yagn ada di <a href="http://printing.kde.org/downloads">situs web KDEPrint</a>.
 Description[is]=Forrit til að prenta stór veggspjöld á lítil blöð. Til að nota þessa skipun verður <b>poster</b>forritið að vera aðgengilegt á slóðinni <tt>path</tt> fumkóði að þessu forriti finnst á <a href="http://printing.kde.org/downloads">KDEPrint web site</a> <p><b><u>Aðvörun:</u></b> Forritið sem finnst á KDEPrint vefsíðunni er breytt útgáfa af upprunalegu útgáfunni sem finnst á öllum CTAN vefsvæðum, en upprunalegi pakkinn virkar <b>ekki</b> með KDE. Þú <b>verður</b> að nota pakkann sem er á:<a href="http://printing.kde.org/downloads">KDEPrint web site</a>.
 Description[it]=Utilità per stampare poster grandi su più fogli piccoli. Per usare questo comando, l'eseguibile <b>poster</b> deve essere accessibile nel tuo <tt>PATH</tt>. È possibile trovare il codice sorgente di questa utilità sul <a href="http://printing.kde.org/downloads">sito Web di KDEPrint</a>. <p><b><u>ATTENZIONE:</u></b> il pacchetto presente sul sito Web di KDEPrint è una versione modificata dell'originale reperibile in un qualsiasi mirror CTAN, ma il pacchetto originale <b>non</b> funziona con KDE. <b>È necessario</b> usare il pacchetto del <a href="http://printing.kde.org/downloads">sito Web di KDEPrint</a>.
 Description[ja]=複数の小さい用紙で大きなポスターを印刷するユーティリティです。このコマンドを使用するには <tt>PATH</tt>に<b>poster</b>実行可能ファイルが存在する必要があります。このユーティリティの ソースコードは <a href="http://printing.kde.org/downloads">KDEPrint web site</a>にあります。<p><b><u>警告:</u></b> KDEPrint web site にあるパッケージはオリジナルのCTAN アーカイブミラーにあるものの変更されたバージョンで、オリジナルの ものは KDEでは<b>動きません。</b><b>必ず</b> <a href="http://printing.kde.org/downloads">KDEPrint web site</a>にある パッケージを使用して下さい。
--- kdeprint/filters/psbook1.desktop
+++ kdeprint/filters/psbook1.desktop
@@ -39,6 +39,7 @@
 Comment[hr]=Ispisivanje pamfleta - Parne stranice (korak 1)
 Comment[hsb]=Pamphlet Printing - rune strony (prěnja kročel)
 Comment[hu]=Szórólapnyomtatás - csak a páros oldalak (1. lépés)
+Comment[id]=Cetak Pamflet - Halaman Genap (langkah 1)
 Comment[is]=Bæklingaprentun - slétttölusíður (skref 1)
 Comment[it]=Stampa libretto - pagine pari (passo 1)
 Comment[ja]=小冊子の印刷 - 偶数ページ (ステップ 1)
--- kdeprint/filters/psbook2.desktop
+++ kdeprint/filters/psbook2.desktop
@@ -39,6 +39,7 @@
 Comment[hr]=Ispis pamfleta - Neparne stranice (korak 2)
 Comment[hsb]=Pamphlet Printing - njerune strony (prěnja kročel)
 Comment[hu]=Szórólapnyomtatás - csak a páratlan oldalak (2. lépés)
+Comment[id]=Cetak Pamflet - Halaman Ganjil (langkah 2)
 Comment[is]=Bæklingaprentun - oddatölusíður (skref 2)
 Comment[it]=Stampa libretto - pagine dispari (passo 2)
 Comment[ja]=小冊子の印刷 - 奇数ページ (ステップ 2)
--- kdeprint/filters/psselect.desktop
+++ kdeprint/filters/psselect.desktop
@@ -37,6 +37,7 @@
 Comment[hr]=Filtar za odabir i poredak stranica
 Comment[hsb]=Filter za wuběr/rjadowanje stronow
 Comment[hu]=Oldalkijelölő és -rendező szűrő
+Comment[id]=Filter Pemilihan/Pengurutan Halaman
 Comment[is]=Síðuval / röðunarsía
 Comment[it]=Filtro per la selezione e l'ordinamento delle pagine
 Comment[ja]=ページ選択/並べ替えフィルタ
--- kdeprint/filters/pdfwrite.desktop
+++ kdeprint/filters/pdfwrite.desktop
@@ -31,7 +31,7 @@
 Comment[es]=Escritor de PDF (requiere Ghostscript)
 Comment[et]=PDF-i kirjutaja (vajab Ghostscripti)
 Comment[eu]=PDF idazlea (GhostScript behar du)
-Comment[fa]=نویسنده PDF)به Ghostscriptنیاز دارد(
+Comment[fa]=نویسندۀ PDF)به Ghostscriptنیاز دارد(
 Comment[fi]=PDF-tulostussuodin (tarvitsee Ghostscriptin)
 Comment[fr]=Impression PDF (nécessite GhostScript)
 Comment[fy]=PDF Writer (hat Ghostskript nedich)
--- kdeprint/filters/imagetops.desktop
+++ kdeprint/filters/imagetops.desktop
@@ -35,7 +35,7 @@
 Comment[es]=Imagen genérica a filtro PS
 Comment[et]=Lihtne pilt->PostScript filter
 Comment[eu]=Irudi generikoa PS iragazkira
-Comment[fa]=تصویر عمومی به پالایه PS
+Comment[fa]=تصویر عمومی به پالایۀ PS
 Comment[fi]=Muunnin yleisestä kuvasta PS-muotoon
 Comment[fr]=Filtre d'image générique vers PS
 Comment[fy]=Algemiene ôfbylding nei PS-filter
--- kdeprint/filters/psbook.desktop
+++ kdeprint/filters/psbook.desktop
@@ -36,6 +36,7 @@
 Comment[hi]=पेम्फलेट छपाई(small side duplex printing के साथ ईस्तमाल करें)
 Comment[hr]=Ispis pamfleta (za dvostruki ispis na male stranice)
 Comment[hu]=Szórólapnyomtatás (kisalakú duplex nyomtatáshoz)
+Comment[id]=Pencetakan Pamflet (gunakan pencetakan dupleks sisi pendek)
 Comment[is]=Bæklingaprentun (nota með smárri tvíhliðaprentun)
 Comment[it]=Stampa libretto (da usare con la stampa fronte/retro dal lato corto)
 Comment[ja]=小冊子の印刷 - (端の短い折り重ね印刷を使用)
--- kdeprint/filters/psresize.desktop
+++ kdeprint/filters/psresize.desktop
@@ -38,6 +38,7 @@
 Comment[hr]=Prilagođavanje veličine sadržaja za ispis na papir druge veličine
 Comment[hsb]=Změnjenje wulkosće za wućišć na hinašu papjeru
 Comment[hu]=Nyomtatandó anyag átméretezése más papírméretre
+Comment[id]=Skalakan Pencetakan ke Ukuran Kertas Lain
 Comment[is]=Skala prentun til að setja á aðra pappírsstærð
 Comment[it]=Adatta il contenuto della stampa ad una diversa dimensione della carta
 Comment[ja]=用紙サイズに合うように印刷内容を拡大/縮小
--- kdeprint/filters/psnup.desktop
+++ kdeprint/filters/psnup.desktop
@@ -18,7 +18,7 @@
 Comment[es]=Filtro para múltiples páginas por hoja
 Comment[et]=Mitme lehekülje ühele lehele trükkimise filter
 Comment[eu]='Orrialde anitzak orriko' iragazkia
-Comment[fa]=صفحات چندگانه در پالایه صفحه
+Comment[fa]=صفحات چندگانه در پالایۀ صفحه
 Comment[fi]=Useita sivuja samalle arkille
 Comment[fr]=Plusieurs pages par feuille
 Comment[fy]=Mear as ien side op in bôge
--- kdeprint/cups/kmcupsmanager.cpp
+++ kdeprint/cups/kmcupsmanager.cpp
@@ -920,7 +920,7 @@
 	kdDebug(500) << "Checking for update possible" << endl;
 	delete m_socket;
         m_socket = new KNetwork::KBufferedSocket;
-	m_socket->setTimeout( 1 );
+	m_socket->setTimeout( 1500 );
 	connect( m_socket, SIGNAL( connected(const KResolverEntry&) ), 
                 SLOT( slotConnectionSuccess() ) );
 	connect( m_socket, SIGNAL( gotError( int ) ), SLOT( slotConnectionFailed( int ) ) );
@@ -958,7 +958,7 @@
 
 void KMCupsManager::slotAsyncConnect()
 {
-	kdDebug(500) << "Starting async connect" << endl;
+	kdDebug(500) << "Starting async connect to " << CupsInfos::self()->hostaddr() << endl;
 	//m_socket->startAsyncConnect();
         if (CupsInfos::self()->host().startsWith("/"))
             m_socket->connect( QString(), CupsInfos::self()->host());
--- kdeprint/lpd/kmlpdfactory.h
+++ kdeprint/lpd/kmlpdfactory.h
@@ -29,7 +29,7 @@
 	virtual ~KLpdFactory();
 
 protected:
-	QObject* createObject(QObject *parent = 0, const char *name = 0, const char *classname = "QObject", const QStringList& args = QStringList());
+	QObject* createObject(QObject *parent = 0, const char *name = 0, const char *className = "QObject", const QStringList& args = QStringList());
 };
 
 #endif
--- kdeprint/lpd/lpd.print
+++ kdeprint/lpd/lpd.print
@@ -29,6 +29,7 @@
 Comment[hr]=LPR (standardni BSD sustav za ispis)
 Comment[hsb]=LPR (Standardny ćišćenski system za BSD)
 Comment[hu]=LPR (BSD-típusú nyomtatórendszer)
+Comment[id]=LPR (sistem pencetakan standar BSD)
 Comment[is]= LPR (Venjulega BSD prentkerfið)
 Comment[it]=LPR (sistema di stampa standard di BSD)
 Comment[ja]=LPR (標準 BSD 印刷システム)
--- kdeprint/lpr/lpr.print
+++ kdeprint/lpr/lpr.print
@@ -28,6 +28,7 @@
 Comment[hi]=LPR/LPRng छपाई पद्धत्ति 
 Comment[hr]=LPR/LPRng sustav za ispis
 Comment[hu]=LPR/LPRng
+Comment[id]=Sistem Pencetakan LPR/LPRng
 Comment[is]=LPR/LPRng prentkerfið
 Comment[it]=Sistema di stampa LPR/LPRng
 Comment[ja]=LPR/LPRng 印刷システム
--- kdeprint/tests/richpage.h
+++ kdeprint/tests/richpage.h
@@ -12,8 +12,8 @@
 	RichPage(QWidget *parent = 0, const char *name = 0);
 	~RichPage();
 
-	void setOptions(const QMap<QString,QString>& options);
-	void getOptions(QMap<QString,QString>& options, bool incldef = false);
+	void setOptions(const QMap<QString,QString>& opts);
+	void getOptions(QMap<QString,QString>& opts, bool incldef = false);
 
 private:
 	QSpinBox	*margin_;
--- kdeprint/kdeprintd.desktop
+++ kdeprint/kdeprintd.desktop
@@ -109,6 +109,7 @@
 Comment[hr]=KDE demon za ispisivanje
 Comment[hsb]=KDE ćišćenski demon
 Comment[hu]=Nyomtatószolgáltatás a KDE-hez
+Comment[id]=Daemon pencetakan KDE
 Comment[is]=Prentþjónn fyrir KDE
 Comment[it]=Demone di stampa per KDE
 Comment[ja]=KDE用の印刷デーモン
--- kdeprint/management/kiconselectaction.h
+++ kdeprint/management/kiconselectaction.h
@@ -35,7 +35,7 @@
 
 public slots:
 	virtual void setItems(const QStringList& lst, const QStringList& iconlst);
-	virtual void setCurrentItem(int);
+	virtual void setCurrentItem(int index);
 
 protected:
 	void createPopupMenu();
--- kdeprint/rlpr/rlpr.print
+++ kdeprint/rlpr/rlpr.print
@@ -25,6 +25,7 @@
 Comment[hi]=RLPR वातावरण (रिमोट LPD सर्वर्स)
 Comment[hr]=RLPR okruženje (udaljeni LPD poslužitelji)
 Comment[hu]=RLPR (távoli LPD-kiszolgálón keresztül)
+Comment[id]=Lingkungan RLPR (Server LPD remote)
 Comment[is]=RLPR umhverfi (fjarlægir LPD þjónar)
 Comment[it]=Ambiente RLPR (server LPD remoti)
 Comment[ja]=RLPR 環境 (リモートLPDサーバ)
--- kdeprint/lpdunix/lpdunix.print
+++ kdeprint/lpdunix/lpdunix.print
@@ -27,6 +27,7 @@
 Comment[hi]=जेनरिक UNIX LPD छपाई पद्धत्ति (ङिफाल्ट)
 Comment[hr]=Generički UNIX LPD sustav za ispis (zadani)
 Comment[hu]=LPD (standard UNIX nyomtatási rendszer)
+Comment[id]=Sistem Pencetakan UNIX Generik LPD (bawaan)
 Comment[is]=Almennt UNIX LPD prentkerfi (sjálfgefið)
 Comment[it]=Sistema di stampa UNIX LPD generico (predefinito)
 Comment[ja]=一般的な UNIX LPD 印刷システム (標準)
--- kdeprint/kpdriverpage.h
+++ kdeprint/kpdriverpage.h
@@ -30,7 +30,7 @@
 	KPDriverPage(KMPrinter *p, DrMain *d = 0, QWidget *parent = 0, const char *name = 0);
 	~KPDriverPage();
 
-	bool isValid(QString&);
+	bool isValid(QString& msg);
 	void setOptions(const QMap<QString,QString>& opts);
 	void getOptions(QMap<QString,QString>& opts, bool incldef = false);
 
--- kdeprint/specials.desktop
+++ kdeprint/specials.desktop
@@ -583,6 +583,7 @@
 Description[hi]=बाहरी फेक्स प्रणाली को भेजें
 Description[hr]=Slanje u vanjski sustav za faks
 Description[hu]=Külső faxgépre küldés
+Description[id]=Kirim ke sistem faks eksternal
 Description[is]=Senda á utanaðkomandi fax kerfi
 Description[it]=Invia ad un sistema di fax esterno
 Description[ja]=外部faxシステムに送信
@@ -732,7 +733,7 @@
 Comment[es]=Adjunto para el editor de KMail
 Comment[et]=KMaili kirjale kaasamine
 Comment[eu]=KMail Composer-entzako eranskina
-Comment[fa]=پیوست برای  مولف KMail
+Comment[fa]=پیوست برای  مؤلف KMail
 Comment[fi]=Sähköpostiliite KMailille
 Comment[fr]=Pièce jointe du logiciel de messagerie électronique KMail
 Comment[fy]=Taheakke foar nije berjochten yn KMail
@@ -741,6 +742,7 @@
 Comment[hi]=के-मेल  कम्पोजर के लिए अटेचमेन्ट
 Comment[hr]=Privitak za KMail Composer
 Comment[hu]=Csatolás a KMail szerkesztőprogramhoz
+Comment[id]=Lampiran untuk Penyusun KMail
 Comment[is]=Viðhengi við KMail póst
 Comment[it]=Allegato per il compositore di KMail
 Comment[ja]=KMail メールの添付物
@@ -805,7 +807,7 @@
 Description[es]=Crear archivo PDF/Acrobat como adjunto para KMail
 Description[et]=Tekitab PDF/Acrobat-faili ja kaasab selle KMaili kirjale
 Description[eu]=PDF/Acrobat fitxategiak sortzen ditu KMail-en eranskin gisa
-Description[fa]=PDF/پروندۀ آکروبات را به‌عنوان پیوست برای KMail ایجاد می‌کند
+Description[fa]=PDF/پروندۀ آکروبات را به‌ عنوان پیوست برای KMail ایجاد می‌کند
 Description[fi]=Luo PDF/Acrobat-tiedoston sähköpostiliitteenä KMailille
 Description[fr]=Crée un fichier PDF en tant que pièce jointe pour KMail
 Description[fy]=Kreëart PDF/Acrobat-triem as taheakke foar KMail
@@ -815,6 +817,7 @@
 Description[hi]=के-मेल के लिए पीडीएफ/एक्रोबेट फ़ाइल का अटेचमेन्ट बनाएं
 Description[hr]=Izrada PDF/Acrobat datoteke kao privitak za KMail
 Description[hu]=PDF/Acrobat fájl létrehozása KMail csatolásként
+Description[id]=Buat berkas PDF/Acrobat sebagai lampiran untuk KMail
 Description[is]=Býr til PDF/Acrobat skrá sem viðhengi fyrir KMail
 Description[it]=Crea un file di allegato PDF/Acrobat per KMail
 Description[ja]=PDF/Acrobat ファイルを KMail の添付物として作成
@@ -882,7 +885,7 @@
 Name[es]=Enviar archivo PDF por correo
 Name[et]=PDF-faili kirjaga saatmine
 Name[eu]=Bidali PDF fitxategia
-Name[fa]=پرونده PDF نامه
+Name[fa]=پروندۀ نامۀ PDF
 Name[fi]=Lähetä PDF-tiedosto sähköpostilla
 Name[fr]=Pièce jointe PDF
 Name[fy]=Ferstjoer PDF triem
@@ -891,6 +894,7 @@
 Name[hi]=पीडीएफ़ फ़ाइल मेल करें
 Name[hr]=PDF pošalji poštom
 Name[hu]=PDF-fájl elküldése levélben
+Name[id]=Kirim Berkas PDF
 Name[is]=Senda PDF skrá í pósti
 Name[it]=Spedisci file PDF
 Name[ja]=PDF ファイルをメール
@@ -936,7 +940,6 @@
 Comment[bg]=Външна програма KSendFax
 Comment[cy]=KAnfonFfacs
 Comment[eo]=SendFaksilo
-Comment[fa]=KSen
 Comment[hi]=के-सेंड-फ़ैक्स
 Comment[is]=KsendFax
 Comment[ko]=K팩스보내기
@@ -975,6 +978,7 @@
 Description[hi]=मौज़ूदा दस्तावेज़ को फेक्स करने के लिए के-सेंड-फेक्स का ईस्तमाल करें
 Description[hr]=Slanje trenutnog dokumenta pomoću ksendfax
 Description[hu]=A KSendFax használata az aktuális dokumentum elfaxolásához
+Description[id]=Gunakan ksendfax untuk mengirim dokumen sekarang sebagai faks
 Description[is]=Nota ksendfax til að senda skjal á faxtæki
 Description[it]=Usa ksendfax per inviare come fax il documento corrente
 Description[ja]=ksendfax は現在のドキュメントをFaxするのに使います
@@ -1052,6 +1056,7 @@
 Name[hi]=उन्नत फेक्स साधन (ksendfax)
 Name[hr]=Napredni alat za slanje faksa (ksendfax)
 Name[hu]=Faxolási segédprogram (KSendFax)
+Name[id]=Perangkat Bantu Faks Lanjutan (ksendfax)
 Name[is]=Þróað faxtól (ksendfax)
 Name[it]=Strumento avanzato per i fax (ksendfax)
 Name[ja]=高機能 Fax ツール (ksendfax)
--- kdeui/ksyntaxhighlighter.cpp
+++ kdeui/ksyntaxhighlighter.cpp
@@ -319,7 +319,8 @@
     }
 
     slotDictionaryChanged();
-    startTimer( 2 * 1000 );
+    // whats this good for?
+    //startTimer( 2 * 1000 );
 }
 
 KDictSpellingHighlighter::~KDictSpellingHighlighter()
--- kdeui/kactionclasses.h
+++ kdeui/kactionclasses.h
@@ -940,7 +940,7 @@
         return currentText();
     }
 
-    int plug( QWidget*, int index = -1 );
+    int plug( QWidget*widget, int index = -1 );
 
 public slots:
     void setFont( const QString &family );
--- kdeui/kdetrayproxy/kdetrayproxy.desktop
+++ kdeui/kdetrayproxy/kdetrayproxy.desktop
@@ -14,7 +14,7 @@
 Name[es]=Módulo Proxy de bandeja de KDE
 Name[et]=KDE süsteemse salve proxy moodul
 Name[eu]=KDEren erretiluko proxy-modulua
-Name[fa]=پیمانه پیشکار سینی KDE
+Name[fa]=پیمانۀ پیشکار سینی KDE
 Name[fi]=KDE:n ilmoitusalueen välityspalvelinmoduuli
 Name[fr]=Module proxy des miniatures de KDE
 Name[fy]=KDE Systeemfak Proxy Module
@@ -23,6 +23,7 @@
 Name[hi]=केडीई ट्रे प्रॉक्सी मॉड्यूल
 Name[hr]=KDE sistemski modul Proxy
 Name[hu]=KDE paneltálca-proxy modul
+Name[id]=Modul Proxy Baki KDE
 Name[is]=KDE milliþjónseining spjaldsins
 Name[it]=Modulo proxy per il vassoio di KDE
 Name[ja]=KDE トレイプロキシモジュール
@@ -78,6 +79,7 @@
 Comment[hi]=प्रॉक्सी जो के-विन के बगैर कार्य करने के लिए केडीई सिस्ट्रे अनुप्रयोगों को सक्षम करता है
 Comment[hr]=Aplikacije za omogućavanje proxyja smještene u KDE sistemskoj traci, bez primjene KWin
 Comment[hu]=KDE-s paneltálca-alkalmazások futtatása a KWin-től eltérő ablakkezelőknél
+Comment[id]=Proxy untuk membuat aplikasi systray KDE berfungsi tanpa KWin
 Comment[is]=Milliþjónseining fyrir KDE spjaldið sem virkar án KWin
 Comment[it]=Permette alle applicazioni per il vassoio di KDE di funzionare senza KWin
 Comment[ja]=KWin なしで KDE systray アプリケーションを動作可能にするプロキシ
--- kdeui/kactionshortcutlist.h
+++ kdeui/kactionshortcutlist.h
@@ -16,13 +16,13 @@
 	virtual ~KActionShortcutList();
 
 	virtual uint count() const;
-	virtual QString name( uint i ) const;
-	virtual QString label( uint ) const;
-	virtual QString whatsThis( uint ) const;
-	virtual const KShortcut& shortcut( uint ) const;
-	virtual const KShortcut& shortcutDefault( uint ) const;
-	virtual bool isConfigurable( uint ) const;
-	virtual bool setShortcut( uint, const KShortcut& );
+	virtual QString name( uint index ) const;
+	virtual QString label( uint index ) const;
+	virtual QString whatsThis( uint index ) const;
+	virtual const KShortcut& shortcut( uint index ) const;
+	virtual const KShortcut& shortcutDefault( uint index ) const;
+	virtual bool isConfigurable( uint index ) const;
+	virtual bool setShortcut( uint index, const KShortcut& shortcut );
 
 	virtual const KInstance* instance() const;
 
@@ -54,13 +54,13 @@
 	virtual ~KActionPtrShortcutList();
 
 	virtual uint count() const;
-	virtual QString name( uint i ) const;
-	virtual QString label( uint ) const;
-	virtual QString whatsThis( uint ) const;
-	virtual const KShortcut& shortcut( uint ) const;
-	virtual const KShortcut& shortcutDefault( uint ) const;
-	virtual bool isConfigurable( uint ) const;
-	virtual bool setShortcut( uint, const KShortcut& );
+	virtual QString name( uint index ) const;
+	virtual QString label( uint index ) const;
+	virtual QString whatsThis( uint index ) const;
+	virtual const KShortcut& shortcut( uint index ) const;
+	virtual const KShortcut& shortcutDefault( uint index ) const;
+	virtual bool isConfigurable( uint index ) const;
+	virtual bool setShortcut( uint index, const KShortcut& shortcut);
 
 	virtual QVariant getOther( Other, uint index ) const;
 	virtual bool setOther( Other, uint index, QVariant );
--- kdeui/kpanelappmenu.h
+++ kdeui/kpanelappmenu.h
@@ -80,7 +80,7 @@
      * @internal
      */
     bool process(const QCString &fun, const QByteArray &data,
-		 QCString &replyType, QByteArray &reply);
+		 QCString &replyType, QByteArray &replyData);
 
 signals:
     /**
--- kdeui/kedittoolbar.cpp
+++ kdeui/kedittoolbar.cpp
@@ -208,7 +208,7 @@
 {
 public:
     /**
-     *
+     * @param instance The instance.
      * @param collection In a non-KParts application, this is the collection passed
      * to the KEditToolbar constructor.
      * In a KParts application we let create a KXMLGUIClient create a dummy one,
--- libkmid/voiceman.cc
+++ libkmid/voiceman.cc
@@ -83,11 +83,8 @@
   LastVoice=NULL;
   LastnotusedVoice=NULL;
 
-  if (VoiceList!=NULL) 
-  {
-    delete VoiceList;
-    VoiceList=NULL;
-  }
+  delete [] VoiceList;
+  VoiceList=NULL;
 
   delete searcher_aid;
 }

Eigenschaftsänderungen: .
___________________________________________________________________
Name: svn:externals
   + admin https://svn.kde.org/home/kde/branches/KDE/3.5/kde-common/admin


